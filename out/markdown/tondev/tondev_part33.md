Axror: Как я могу связаться с разроботчиками тон

Ivan: попробовал, результат тот же (reply to 302930)

Axror: Я хотел создать свой токен

&rey: А, кстати, этот параметр называется bin. (reply to 302932)

Ivan: аа, да действительно. Нужно передавать не body, а bin!  Спасибо Вам большое! (reply to 302935)

— 2025-04-29 —

Daniil: Всем привет Какие есть аггрегаторы на ТОНе, кроме Dedust Router V2, coffee, rainbow и Omniston (и у него есть REST API? Я нашел только NodeJS SDK) И есть ли между ними разница? Я, конечно, понимаю, что на ТОНе всего 3 DEXa (stonfi, dedust и tonco), но просто удивило, что вычисления Dedust Router и Coffee настолько похожи, что даже на специально большие суммы они выдают 1 в 1 одинаковые результаты вбил для примера свапы USDT -> TON на 1 000 000 USDT, кофе вернул 297589.5065381642, Dedust 297589.506923665

sd: xdelta.fi ещё (reply to 302955)

🎐*<@Maxim: Не понимаю, почему нельзя докинуть в бок -файл адресов для минтлесс ? я же могу спокойно докинуть и изменить merkle_root через op::upgrade, верно? (reply to 302270)

Denis: Потому что поменяются адреса жетон-воллетов (reply to 302962)

🎐*<@Maxim: Денис, здравствуйте! в стандарте вы писали, что хранится single hash for all items (not per item) Значит я делаю вывод: merkle_root одинаков как для master, так и для тысяч wallet’ов. Но тогда автоматически возникает вопрос: если первый аирдроп прошёл и я хочу провести 2 или 3 аирдропы.., мне явно нужно менять BOC-файл, верно? У пользователя уже есть токен после первого аирдропа, и я меняю merkle_root (вы говорите, что Jetton-wallet при этом меняется, я согласен — ведь merkle_root для всех один). И куда тогда придут жетоны после второго аирдропа? Пользователь откроет кошелёк и увидит две строки с одним и тем же жетоном, или Tonkeeper автоматически суммирует их? Я не понимаю. (reply to 302963)

Denis: там не предусмотрена такая возможность. это только для первичного распределения

Denis: но через кастомпэйлоад вы можете выдавать одноразовые подписанные вашим сервером сообщения которые будут минтить произвольные суммы на кошельках юзеров

Denis: надо конечно продумать защиту от реплая и т.п.

🎐*<@Maxim: 👾 Правильно ли я понимаю логику так: Tonkeeper будет периодически обращаться к нашему GET /wallet и получать каждый раз новый custom_payload, а чтобы смарт-контракт кошелька вновь позволял mint’ить, мы просто сбрасываем в нём флаг is_claimed обратно в 0, верно? (reply to 302983)

Denis: Не периодически а в момент отправки

rends_east: Если у вас определены 2 и 3 аирдропы, просто их нужно провести не сразу, а потом, то это тоже можно включить в merkle дерево

Denis: Ну для этого адреса знать надо на момент минта (reply to 302987)

🎐*<@Maxim: вы имеете в виду можно добавит в структуру address {amount, start_from, expired_at} - дополнительне поле - порядковый номер текущего эйрдропа? (reply to 302987)

Denis: ну я бы скорее добавлял номер дропа не в значение а в ключ

Denis: а внутри даты кошелька вместо одного булеана битовую маску под каждое поколение дропа

Alex: Шукаємо фул-стек розробника для miniapp у Telegram  Задачі: 1️⃣Підключити TON Connect. 2️⃣Реалізувати перевірку підписки на канал. 3️⃣Налаштувати систему виконання завдань із нарахуванням балів.  Що важливо:  • Досвід роботи з Telegram MiniApps.  • Розуміння Web3 та інтеграції блокчейнів.  • Адекватність у комунікації (без бюрократії і «ще треба тиждень подумати»).  Готові швидко домовлятись та працювати. Пишіть у DM та кидайте свої кейси.

🎐*<@Maxim: но как вы сказали ранее, merkle_root по сути рассчитываем 1 раз (к сожалению), получается мы должны заранее знать кол-во будущих эйрдропов, а я хочу бесконечное количество эйрдропов, а тут получается конечное, верно? (reply to 302991)

Denis: Да. (reply to 302996)

Denis: Но вы можете использовать кастомпейлоад без меркл пруфа если уж вы в любом случае хотите как-то произвольно после запуска рассылать награды

Denis: Зашиваете вместо меркл рута ваш пабкей и им там генерируете из воздуха сколько надо

Ma><im: всем привет! посоветуйте пожалуйста API для парсинга информации о очень больших коллекциях NFT, например номис, где под миллион айтемов.  столкнулся с проблемой, что dton graphql например не отдаёт все айтемы в коллекции. да и вообще graphql при всём своём удобстве или очень дорогой, или плохо работает  у кого-то был опыт с такими задачами с REST API TONAPI или TONCENTER?

Tim: На тоне нет апи с которого можно быстро миллион чего то спарсить

Tim: Медленно - тонапи, тон центр, дтон

Denis: Да ладно. На стандартном тарифе тонапи миллион айтемов парсится за 10 секунд (reply to 303009)

/B4ckSl4sh\: А какой способ брать инфу о созданных блоках будет самым быстрым? Какая задержка на индексацию у тонцентра, тонапи, дтон? Может замерял кто-то

Tim: Лайт сервер… (reply to 303011)

/B4ckSl4sh\: Ну логично что лс побыстрее будет, да. Но насколько?

Denis: Причём желательно валидатор (reply to 303012)

Tim: Почему кстати нет до сих пор валидаторов которые апи продают

Denis: Почему нет. Обращайся (reply to 303016)

/B4ckSl4sh\: Типо 1 секунда? Больше? (reply to 303013)

Tim: Публично, прозрачно имею ввиду (reply to 303017)

Denis: Потому что такого не будет (reply to 303019)

Seitaro: После оптимизаций распространения блоков с августа 2024 эти данные несколько устарели. Выигрыш времени синхронизации ЛС по сравнению с валидатором <0.4 секунд. 2. Среднее время discovery (от посылки сообщенния до обнаружение через апи) - 8-10 секунд в среднем у тонапи, тонцентра в3 (т.е. индексатор) и тонцентр в2(т.е. напрямую к ЛСам). Тонапи в среднем на полсекунды быстрее. в3 и в2 не отличаются. 3. Важно отметить, что из эти 8-10 секунд ~4 секунды это время коммита, т.е. время от посылки сообщения до таймстемпа (т.е. начала генерации) мастерчейнблока в котором шардблок с этой транзакцией появлился. Учитывая 1.5-2 секунды время достижения консенсуса по мастерчейну, имеем реальное время коммита ~6 секунд. И соответственно оверхед на то, чтобы ЛСы или индексы могли выдавать данные - еще 2-4 секунды.

Seitaro: вообще, возможно это не совсем корректно, <0.4 это различие ЛСов которые соединены с валиком приватным оверлеем и которые просто в публичном сидят. Непосредственно данных по сравнению с валидатором у меня наверное нет свежих (reply to 303021)

Ma><im: хм, спасибо, тогда попробую TONAPI, там же можно филировать айтемы коллекции по времени. чтобы получать только те, что были сминчены в определённый период времени (reply to 303010)

Denis: нет

rub1kub 💻: йоп

rub1kub 💻: где получить тестовые тоны?

Pasha: @testgiver_ton_bot

rub1kub 💻: эта штука уже сутки не сыпет тоны (reply to 303033)

Pasha: через tonapi дашборд можно купить еще за тон ахах (reply to 303038)

Pasha: других способов не знаю

rub1kub 💻: сок (reply to 303039)

Denis: только tonconsole.com оно скорее (reply to 303039)

Андрей: Сыпет каждую минуту: https://testnet.tonscan.org/address/kQCSES0TZYqcVkgoguhIb8iMEo4cvaEwmIrU5qbQgnN8ftBF (reply to 303038)

rub1kub 💻: мне. (reply to 303038)

rub1kub 💻: а

rub1kub 💻: увидел - они были отправлены

rub1kub 💻: только на своем коше не наблюдаю, ладно. Спасибо

Алексей: А почему на System адресе задеплоен какой-то кошелёк, с вполне обычным публичным ключом? Кто интересно им владеет и ведёт ли это к каким-то необычным последствиям?   https://tonviewer.com/Ef8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAU

Андрей: А можно пруфы что это кошелек и что у него есть публичный ключ? (reply to 303056)

Алексей: Нуу я посмотрел на ассембли код и это кажется кошелёк, там chksignu есть и гет метод seqno (reply to 303059)

Seitaro: Это действительно кошелек. Запуск сети обычно начинается с того, что все монеты сети кладутся на какой-то адрес, а поскольку в момент создания можно положить любой код на любой адрес, по традиции его кладут на -1:00...000. Особыми свойствами этот кошелек не обладает. (то что комиссионная часть награды "приходит" с этого адреса, просто способ отображения переноса этих денег, а не что-то глубинное).  Соответственно этим ключом когда-то владели те, кто запускал сеть. Вероятно он потерялся во время всех событий 2020-2021 года, но если и нет, это не слишком важно: на нем не так много денег и никаких спец.привелегий (помимо красивого адреса) у него нет. (reply to 303059)

X1ag: hi, подскажите пожалуйста почему не отправляет сообщение? Тонов на контракте хватает. Никаких ошибок не отображает. Котнракт должно отправить usdt и 0.07 тон из которых 0.05 уйдет на forward_payload. () send_money(slice text, int query_id, int amount, slice senderAddress, slice usdt_master_address, cell usdt_master_code, cell usdt_master_data) {   var comment = begin_cell()               .store_uint(0,32)               .store_slice(text)             .end_cell();    var msg_body = begin_cell()       .store_uint(op::transfer, 32)         .store_uint(query_id, 64)       .store_coins(amount)       .store_slice(senderAddress)       .store_slice(my_address())       .store_uint(0,1)       .store_coins((ONE_TON * 5) / 100)       .store_maybe_ref(comment)   .end_cell();    var msg = begin_cell()             .store_uint(0x10,6)               .store_slice(calc_jetton_wallet(my_address(), usdt_master_address, usdt_master_code, usdt_master_data))             .store_coins((ONE_TON * 7) / 100)             .store_only_body_ref(msg_body)           .end_cell();    send_raw_message(msg, 0); }  вот так принимаю транзакцию(op::liquidation = 0x0007)  if (jetton_op_code == op::hello){       int need_to_send = muldiv(jetton_amount, 65 * ONE_TOKEN, 100 * ONE_TOKEN);        send_money("hello", query_id, need_to_send, sender_address, usdt_master_address, usdt_master_code, usdt_master_data);        usdt_vault_balance += (jetton_amount - need_to_send);        save_data();        return ();     }  Вот ссылка на транзакцию https://testnet.tonviewer.com/transaction/bcce08929ad561e3daebbaa3db6b42b294981aa105dc6a62389b8bf59c6c78d1

SweetJesus: impure забыл (reply to 303065)

X1ag: Спасибо (reply to 303066)

Denis: а никто на питоне не делал нормализацию хэша экстернала?

наз: https://github.com/nessshon/tonutils/blob/d422f2ba68eb6ba61957a0858806767fbc4b98cd/tonutils/utils.py#L14 (reply to 303068)

🐼 Sild: anycast не занулили😕 (reply to 303069)

Denis: их запретили. тоесть сообщение с эникастом не будет принято (reply to 303082)

Denis: правда в теории по пути его можно перепаковать и хэш изменится и будет принятов

🐼 Sild: протокол есть протокол🤷 потом блин окажется что мы единственные у кого все через жопку потому что все по протоколу =(

Denis: но это довольно вырожденый случай непонятно кому важный

Seitaro: я не понял что тут написано? (reply to 303084)

Seitaro: кто-то сгенерит с эникастом, кто-то другой перепакует и первый не найдет что отправил, но что-то другое примется?

Denis: ну вот кто-то посчитал хэш сообщения с эникастом в дестинейшене и не выкинул этот эникаст. потом отправил дальше в сеть. а кто-то в сети/мемпуле нашёл, отрезал эникаст и отправил в блокчейн (reply to 303087)

Denis: условно кошелек подписал и отправил в сеть без эникаста а даппу отдал с эникастом

Denis: но я не вижу где это может появиться в каких-то реальных случаях

🐼 Sild: ну может это...реализоввывать как договорись, а что там разрешили/запретили - это уже не наше дело...

&rey: Речь о том, что скоро протокол в этом месте поменяется. (reply to 303092)

🐼 Sild: в ExtInMsgInfo из MsgAddress исчезнет anycast? (reply to 303093)

/B4ckSl4sh\: скорее в MsgAddressInt в Maybe Anycast будет Maybe бит равный 0

&rey: Здесь Seitaro скорее коммент должен давать (ну или пока рано). Мне помнится, что там вместо Maybe Anycast будет Maybe что-то другое. (reply to 303095)

🐼 Sild: все-равно еще историю индексировать =) (reply to 303096)

Seitaro: https://github.com/ton-blockchain/ton/blob/master/doc/GlobalVersions.md#anycast-addresses-and-address-rewrite (reply to 303097)

/B4ckSl4sh\: у нас теперь есть целый свободный опкод в виде REWRITEVARADDR (и его Q версия) :) (reply to 303099)

🐼 Sild: а можно для тупеньких что вообще этот anycast позволял? я по названию и конвертации в человеческий адрес догадываюсь что это какая-то маска, но какой физический смысл?

X1ag: для того чтобы рассылать сообщение по нескольким шардам

Seitaro: не по нескольким, а в ближайший (reply to 303102)

Дмитрий: Всем привет!   В поисках Frontend-разработчика  Если вы им являетесь, напишите мне в личные сообщения

🐼 Sild: кажется чтобы такое сообщение попало в нужный контракт в итоге, у контрактов в разных шардах должы отличаться только ведущие биты хеша а это же хрен подберешь (reply to 303103)

🐼 Sild: а не, можно наоборот - чтобы отличался только хвост, а anycast делать на глубину а-ля 248

🐼 Sild: но там только 5 бит на префикс, не получается.

Seitaro: эникасты были частью большей системы "больших контрактов", которые собственно позволяли деплоить копию контракта в каждый шард с правилами что делать на сплите/мерже. Система эта достаточно сложная, не очень хорошо себя ведет на сплитах/мержах и в целом не слишком полезна. Поэтому пока ее отложили, эникасты выкинули и оставили только кусочек который может быть использован для шард-оптимизаций (reply to 303105)

Дмитрий: 457a08dbe4f8f75530604a320426c10576b735f789e49ed24385c83364dcd91e  9f0551b15d1c9045b36f245e7699ef847ab93bfc072c0de989d99c6e1716e3be  приветствую колеги, очередной раз сталкиваюсь с необъяснимыми аномалиями как я вижу мой кошелек получил 2 абсолютно одинаковые, успешные транзакции но их хеши отличаются более того на самом деле из них деньги я получил только по 1 но так как успешны обе мой код зачислил пользователю обе на баланс  так вот вопрос как от такого защитится и что это вообще такое

&rey: Э... вы же знаете, что перевод тонов состоит из двух транзакций? (reply to 303138)

&rey: Одна на контракте-отправителе (наверняка примет экстернал и уменьшит баланс, и отправит сообщение), вторая на получателе.

&rey: Вообще, я постоянно предлагаю такую двухфазную схему: 1. Клиент (ака dApp) следит, когда появится транзакция с его кошелька; кидает её уникальный идентификатор (адрес,lt,хеш) на сервер. 2. Сервер смотрит за такими идентификаторами и проверяет каждое out_msgs, не направлено ли оно ему; записывает created_lt. Кроме того, он следит за СВОИМ кошельком...

Denis: там кстати второй хэш это вообще хэш экстернала (reply to 303140)

&rey: и во входящих сообщениях смотрит на created_lt. Вот они будут уникальны и не будут повторяться. ("сообщение" в тоне = "перевод тонов, потенциально с какими-то прикреплёнными данными") (reply to 303142)

سینا: /start@boosteambot

crybaby_too 💠: Всем привет, что делать, если мой друг зайдя сюда попал в блок? Куда нужно нажать, чтоб авторизоваться?

ST-⭕️52-🅰️S: привет, можете подсказать по тонконнекту  мы подключаем кошелек и хотим проверить тонпруф, чтобы проверить тонпруф, нужен публичный ключ кошелька  публичный ключ можно получить: через гет метод, либо через стейт инит. гет метода нет в незадеплоеных кошельках и в старых кошельках. но стейт инит там есть всегда, как и в задеплоеных кошельках  вопрос: почему всегда не вычислять публичный ключ из стейт инита?   в документации написано вот так: First, try to obtain public key via get_public_key get-method on smart contract deployed at Address. If the smart contract is not deployed yet, or the get-method is missing, then: Parse TonAddressItemReply.walletStateInit and get public key from stateInit

Denis: Задумка была сделать достаточно гибкий стандарт. Например может существовать какой-то мультисиг где этот пабкей меняется. Или кто-то хочет залогиниться кошельком с адресом подобранным через vanity контракт (reply to 303153)

— 2025-04-30 —

𝑭: is there a way to filter transactions of a TON wallet address by memo/comment ?

Scrait: Здравствуйте, подскажите, возможно ли реализовать на такте фабрику смарт-контракт и соотвественно фабричные смарт-контракты

Scrait: Чтобы кидать сообщение на контракт фабрики и она деплоила фабричные

X1ag: Да, возможно

X1ag: В тоне фабричные контракты называют master contract, а те контракты, которые деплоятся user contact

Scrait: Есть примеры где-нибудь? (reply to 303175)

Namon: nft collection (minter) & nft items (reply to 303179)

X1ag: https://github.com/EmelyanenkoK/modern_jetton (reply to 303179)

Namon: jetton master не деплоит jetton wallets (reply to 303182)

X1ag: Разве? Он же кидает стейт инит на адрес и тем самым деплоит его (reply to 303183)

Namon: при минте токенов да (виноват), но я думаю, это не особо подходящий случай жетон волеты работают обособленно от мастера  обычно в таких случаях, описанных выше, нужен один мастер, который сам напрямую работает с дочерними и дочерние друг с другом не взаимодействуют  но в целом да, минт может подойти как пример (reply to 303184)

X1ag: Ну в целом вы правы, nft контакты больше подходят (reply to 303186)

X1ag: а можно ли LT внутри контракта изменить самому?  например когда вызывает getLogicalTime() и оно отдает константу какую нибудь

User<7374665072>: Можно взять любую DEX, которая нравится и на fift разложить код по-полочкам, не совсем понятно, что значит "дают народу". По-пункту 1, речь о мастер контракте? По-пункту 2, всё смарт-контракты публичны или тут имеется ввиду верифай на языке более высокого уровня?

maksim: Из опен сорс дексов, есть стонфи v2 на фанси, tact-dex (еще не законченный, work in progress, однако может быть полезно будет посмотреть и сейчас) и порт стонфи в1 на такт (не знаю закончен ли проект или еще в разработке)  По вопросам  1. Создавать - да, безусловно, для этого фабрика и нужна, удобно не заставлять пользователей знать+хранить дату и код. Пополнять - вот это уже врядли, зачем лишний форвардинг + хопы, наверное проще сразу пойти в пул и пополнить его напрямую  2. up (reply to 303202)

/B4ckSl4sh\: Да, всё так (reply to 303208)

Алексей: Жесть, вы реально runvm для жеттон волта решили использовать.. (reply to 303206)

/B4ckSl4sh\: так прекрасная тема :)  Там помимо этого ещё 3 других способа пруфа жетон-воллета будут, на один из них (TEP-89) висит PR (reply to 303227)

Алексей: Ну достаточно экзотическое решение запускать твм внутри твма (reply to 303229)

Оскар: в плане? а это что? https://docs.ston.fi/developer-section/api-reference-v2 (reply to 303232)

Оскар: вполне хорошая документация, так же у них свой сдк для тс есть, так что даже не особо то и нужно в референс смотреть (reply to 303243)

Оскар: да. я писал аналог honeypot.is для тона (reply to 303246)

Seitaro: Имейте в виду, что это не будет работать на всяких _NOT, _DOGS и прочих жетонах которые себе намайнили красивые адреса, но в результате хэш инитстейта жетона не совпадет с адресом. (reply to 303228)

/B4ckSl4sh\: Знаю, для этого можно выбрать TEP-89 пруф, либо пруфануть стейт к блоку, на котором уже потом мы запустим гетметод (reply to 303257)

/B4ckSl4sh\: На UI конечно же всего этого многообразия не будет, там будет либо вот StateInit либо пруф стейта к блоку, чтобы лишние транзакции не платить. Остальные пруфы будут только в доке, для удобного ончейн залива ликвидности (reply to 303260)

Алексей: Я не говорил вообще, что это какая-то проблема, но вон выше например одну проблему указали (reply to 303259)

Alex: Коллеги, не подскажите, в какой заголовок пробрасывать API Key для Toncenter и как правильно? "Aauthorization": Bearer < API Key> или как-то иначе ожидается сервисом?

&rey: Никто и не предлагает использовать StateInit. Там на то и сделан отдельный аргумент для адреса жетон-мастера) (reply to 303257)

&rey: Да, если надо, чтобы пользователь сам кинул код и данные, то нужен один из способов пруфа.

/B4ckSl4sh\: А какой есть способ кроме пруфа к блоку? Как вот тут https://github.com/fivestarsfi/StateCheck-v2/tree/main (reply to 303265)

&rey: Ну, собственно, потребовать стейт ~ адресу жетона, а обработчик ноткоинов задеплоить отдельно. (reply to 303266)

Alex: Скорее всего, что это не верно, посмотрел исходники tonutils, там передается в  "Aauthorization": Bearer <api_key> (reply to 303267)

/B4ckSl4sh\: вот с этим проблемы к сожалению, если бы эта проблема легко решалась, то у нас был бы уже отдельный контракт дискавери который можно было бы считать ончейн (reply to 303268)

Alex: Я не спорить хочу, а узнать, как правильно) (reply to 303271)

/B4ckSl4sh\: По-моему класс ясно называется Tonapi (reply to 303269)

sd: https://toncenter.com/ (reply to 303269)

/B4ckSl4sh\: А тут спрашивали про Toncenter (reply to 303263)

Alex: Спасибо) (reply to 303275)

Jzuss ┌( ಠ_ಠ)┘: Всем привет! Отправил bouncable сообщение с флагом SEND_MODE_BOUNCE_ON_ACTION_FAIL. Транзакция упала с кодом -14 из-за недостатка сводобного газа для обработки. Почему сообщение не отскочило? Можно ли это исправить?

Jzuss ┌( ಠ_ಠ)┘: Если оно отскочило бы, то я бы  увидел входящее сообщение с флагом bounced (reply to 303289)

&rey: Валидаторы за просто так считать транзакцию не будут. (reply to 303286)

Jzuss ┌( ಠ_ಠ)┘: Выходит проверку msg_value все равно придется делать. В чем тогда смысл данного флага? (reply to 303291)

&rey: Газа не хватило либо в compute фазе, либо при подсчёте исходящих ячеек. (reply to 303294)

🎐*<@Maxim: Добрый день, в офицальном описании сказано:  Display Unclaimed Jettons: .. to based on the Merkle tree data.  подскажите, пожалуйста, как заставить tonkeeper отображать mintless токен, который предназначен для клейма?

Pavel: Привет! Помогите с send mode!  Логика такая: 1) Мне сообщением на контракт приходит 1 ton 2) Полезная нагрузка 3) Оставшийся баланс сообщения передать сообщением не трогая при этом баланс контракта  Сейчас используется send mode 1

&rey: Известно, какой должен быть баланс контракта в теории? (reply to 303311)

Василий: mode 64? Если никакой другой логики нет. Входящее с нагрузкой, исходящее со сдачей. (reply to 303311)

rxcat: в тон конекте нельзя отправить транзакцию на несуществующий адрес? просто либо сам протокол, либо кошелек меняет non-bouncable адрес на bouncable

&rey: Скорее кошелёк дурит. Может, вы можете дать пользователю и stateInit контракта? (reply to 303314)

Sol: Без этого никак? (reply to 303316)

Sol: Не хочет (reply to 303321)

/B4ckSl4sh\: Кого тегнуть чтобы на ласт версии тонкипера для андроида исправили баг, что при отправке на любую форму адреса в тестнете всё равно летит bounceable сообщение?

&rey: Кажется, @subden может передать. (reply to 303323)

Denis: передал. но там кажется чё-то фиксили недавно про адреса в тестнете. так что может уже в ближайшем релизе и будет

Игорь: Добрый вечер. Не подскажете где посмотреть код обращения и получения данных (tact, func) от методов get _wallet_address get_wallet_data жетона,  usdt  например. давно не могу разобраться, что то видимо не так понимаю.

&rey: Если я верно расшифровал смысл, то вот: https://docs.ton.org/v3/guidelines/dapps/cookbook#how-to-calculate-the-users-jetton-wallet-address-offchain (reply to 303328)

Игорь: есть там op-code ли нет, один адрес возвращает get_wallet_address  или несколько

&rey: Вызвать гет-метод на другом контракте невозможно. Точнее, надо занести его код, данные и адрес себе, и тогда в рамках одного своего контракта можно будет запросить RUNVM: https://github.com/ProgramCrafter/tvm-quirks/blob/master/ok-jetton-wallet-onchain.fc (reply to 303330)

Игорь: благодарю, вроде как можно обратиться к jetton master чтоб получить данные, адрес жетона контракта например, как по этой ссылке, плюс баланс в любом случае запрашивать через get_wallet_data, но мне не удается ответ нормально получить (reply to 303331)

&rey: А что будет значить вот это число "баланс" для другого контракта? Как он поймёт, убраны ли уже оттуда отправленные им исходящие переводы жетонов? (reply to 303333)

Игорь: ну мы же как то деньги переводим, ориентируясь на баланс

Игорь: хочется где то подсмотреть пример запроса и кода получения ответа на get_wallet_data и get_wallet_address

&rey: Повторюсь: вызвать гет-метод на другом контракте невозможно. (reply to 303336)

Игорь: серьезно? (reply to 303337)

Игорь: контракт не может вызвать гет метод  другого контракта? где про это можно прочитать?

Игорь: пропустил текст, пошел по ссылке сразу (reply to 303331)

&rey: Пункт 2.4.1 в https://docs.ton.org/ton.pdf  > <...> each account resides in its separate "account-chain", and the only way it can affect the state of some other account is by sending a message. (reply to 303339)

&rey: И к этому есть только один контракт-исключение. Знатоки, думаю, смогут назвать.

Игорь: чет аж не верится

&rey: Ну, можете прочитать список опкодов TVM и тыкнуть пальцем в тот, который имеет хоть какое-то отношение к другому контракту.

/B4ckSl4sh\: Повод для опроса на func-wall :) (reply to 303342)

Игорь: получается и адрес я тоже не могу узнать у jetton master, только самому посчитать?

Игорь: ну ок, тон кипер же как то показывает мне сколько у меня usdt и других жетонов лежит

&rey: Так он же не ончейн это узнаёт) (reply to 303347)

Игорь: блин, точно

Игорь: я щас подафигел от такого поворота если честно

/B4ckSl4sh\: А это он кстати знает только благодя полному индексу бч (reply to 303347)

Игорь: спасибо за ответ, я бы еще долго колупался

Игорь: и пытался понять почему ответа нет

&rey: Между контрактами полная(*)(**) изоляция, да. Только отправка сообщений. Как раз заставляет подумать о том, на какой момент возвращённые данные будут релевантны (см. многопоточность, атомарные переменные, happens-before, race condition). (reply to 303350)

Игорь: какой то смысл тут скрыт? (reply to 303354)

&rey: Два исключения, которые, однако, для вашей задачи "узнавать баланс кого-то в жетонах на непонятно какой момент" совершенно бесполезны. (reply to 303355)

Игорь: про момент конечно точно подмечено (reply to 303357)

&rey: Ну, изменения-то на эти следующие контракты не запишутся, а там обычно и есть самое интересное. (reply to 303359)

&rey: Да примерно всегда. Думаю, самые общительные у дексов, потом кошельки) Можно посмотреть, сколько транзакций в сети, и вычесть процент сообщений "от контракта самому себе". (reply to 303362)

Denzel': а что за исключения можете рассказать подробней пожалуйста? (reply to 303357)

&rey: 1. Системный контракт The Config. Он хранит настройки сети (и может их обновлять), и эти настройки доступны каждому контракту (берутся на момент начала конкретного мастерчейн-блока, если верно помню). 2. В мастерчейне можно публиковать библиотеки. Их наличие влияет опять же на то, кинет ли загрузка библиотеки по хешу ошибку или завершится успешно. (reply to 303366)

kwinkich: Всем привет, подкиньте пожалуйста ссылку на доку, где описано как с фронта проверять статус транзакции в реал-тайме

sabirov: настроил nginx + tonutils reverse proxy и поднял сайт, вроде как все работает и html страницу грузит, но когда добавляю css и js сайт перестает открываться и не грузит css и js, может кто-то сталкивался с данной проблемой? можете помочь?

Combot: Combot выдал(а) предупреждение Ais (1/3) Reason: 1 reports (reply to 303391)

— 2025-05-01 —

Sol: Ищу сотрудничевство с теми кому нужен знаток смарт контрактов .Буду очень рад если вы мне напишите

Scalien: Поделитесь пожалуйста адресами всех коллекции подарков или как проще их собрать

X1ag: ищите на fragment.com / getgems.io (reply to 303421)

Alex: Знаток - это из Что?Где?Когда?)) (reply to 303397)

Scalien: Где посмотреть я понимаю, в ручную все собирать ? (reply to 303422)

X1ag: да (reply to 303424)

Scalien: Возможно у кого-то есть

Vitaly⚜️: Есть адекватные специалисты по фронтенду ? В л.с

Kiki: пр

potato: Это когда сдал экзамены на знатка, ты не сдавал чтоли? (reply to 303423)

Grigoriy: Всем привет, а отправка ext out message из контракта облагается газом?

Denis: Да, но сильно дешевле чем интернал (reply to 303437)

Grigoriy: А где можно в документации про это почитать? Не нашел странички с инфой о газе для ext message (reply to 303440)

Sol: Верно подметил!  Если коротко — это программист, который пишет код, что живёт в блокчейне и работает даже тогда, когда его самого уже нет в живых . (reply to 303423)

Alex: Sarcasm..) (reply to 303443)

— 2025-05-02 —

Devon: Здравствуйте, подскажите в чём ошибка может быть?  https://testnet.tonviewer.com/transaction/44ccd07b0ff364d131fc31cc9a37aedaa740c29d8dcea3db50a3c73600d65b82

Alberto: Вероятные причины: Недостаточно газа для выполнения операции Ошибка в логике смарт-контракта Несоответствие входных параметров ожидаемым контрактом Проблема с правами доступа или ключами подписи Рекомендую проверить код контракта и параметры вызова, особенно в части передачи TON между аккаунтами, поскольку видно, что операция включает перевод 0.298772 TON. (reply to 303465)

Alex: Неизвестный opcode (reply to 303465)

Михаил: А какую библиотеку можно использовать для простых операций с тон? создать кошелек, проверить баланс отправить токены, интересует конкретно под андроид но и просто для джавы пойдет

Alex: https://github.com/h6x0r/tonapi4j (reply to 303472)

Denis: Там только апишка для получения данных (ну и отправка подписанных). Сборка и подпись в https://github.com/ton-community/ton-kotlin (reply to 303473)

Михаил: эта штука платная, если больше 1 запроса в сек, в остальном вроде подходит (reply to 303473)

Alex: в репе и написано в ридми : For creating wallets, transferring TON, Jetton, NFTs, and other operations, recommend using ton4j in combination with the library. For more information, refer to the library documentation. (reply to 303477)

Denis: Тон котлин точно топ (reply to 303478)

Ask: А есть кто помочь с ошибкой при верификации смарт контракта

Enisey: Привет, напиши в лс пожалуйста (reply to 303397)

Sol: Откройте лс или уберите платные сообщения . Или пишите сами! (reply to 303494)

Sol: Ребят поддержка тонапи или тонкипера вы в курсе что случилось щас?

Max: А что случилось? (reply to 303515)

гриба: Все спокойно работает (reply to 303515)

Denis: цены скакнули на некоторые токены из-за отъебнувшего decimals

Denis: славься решение сложить децималс в мету

Enisey: Открыл личное, можете написать есть вопрос по разработке, сам написать могу только взаимным до середины мая (reply to 303512)

User: Кто это придумал вообще? Почему-бы в контракте через гет метод это как-нибудь не сделать, со стороны эксплорера это жесть-же парсить json‘ы не понятные (reply to 303519)

Denis: я бы особо не наезжал на придумавшего. он оунер в этом чате. (reply to 303525)

Denis: там еще бывают пожественные приколы когда в ончейн мете decimals: "9" [строкой] а в офчейн мете decimals: 6 [интом].

Denis: жду пока кто-нибудудь сделает decimals: 9.75

Denis: еще undefined и ; drop database (ну а зачем децималс экранировать оно ж инт)

Sol: Добавлю вас щас в контакты (reply to 303522)

User: Вот я с этим недавно столкнулся, из-за этого и высказался(решением проблемы было вынести все в ончейн).   На всякий случай — простите, может я чего-то непониманию :) (reply to 303527)

Roma: Всем привет! Кто работал с shareStory?  Вопрос по реализации.

sd: @devs_cis (reply to 303545)

Рома: Всем привет! А что за проблема что если вот так компаную сообщение то комент не указывается это из-за storeCoins. Как тогда передать и комент и storeCoins?

Vladislav: Посоветуйте для nft API или либу чтобы можно удобно по nft данные получать на java/kotlin. Пробовал ton4j - не понравилось

SweetJesus: ну queryid в комменте не нужен как минимум, и после storeStringTail() ничего тоже класть не нужно. Оно в принципе прочитается, но коммент битый будет. (reply to 303550)

Рома: мне нужно сделать обычный вызов моего контракта + комент туда прилепить. Поэтому queryid не передавать не вариант. .storeStringTail я и в самом конце и в начале пробовал прикреплять но комента нет. (reply to 303552)

SweetJesus: https://docs.ton.org/v3/documentation/smart-contracts/message-management/internal-messages/#simple-message-with-a-comment (reply to 303553)

Рома: В общем как понимаю, отправить комент с другими данными | ячейками невозможно (reply to 303554)

MikeWeb3Mighty: Для func есть что то типа ton Web IDE?

🐼 Sild: https://docs.ton.org/v3/guidelines/dapps/asset-processing/jettons#retrieving-data-for-a-specific-jetton-wallet а на этом примере, что должно лежать наверху стека (и доставаться первым)? баланс или код?  up ну вроде баланс. Хрен разберешься с этими туда-сюда листами в tlb.

&rey: Есть же https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md#get-methods + тот факт, что правые значения располагаются ближе к верхушке стека. (reply to 303576)

&rey: Ну, ide.ton.org вполне совместима с FunC, спасибо разрабам (кстати, странно, что там ещё не завезли Tolk). (reply to 303573)

🐼 Sild: правые...т.е. wallet_code должен первым вылезать?) (reply to 303577)

🐼 Sild: спасибо

— 2025-05-03 —

X1ag: а можно ли как то задеплоить мультисиг валлет в тестнете? Есть только адрес и админка  вопрос в том, есть ли у https://multisig.ton.org/# тестнет версия?

Mirka: https://multisig.ton.org?testnet=true (reply to 303590)

bissentooo | 19 ⚔️: всем привет! есть кто получал грант от ТОНа? можете дать совет, как правильно сделать вайтлист и питч дек?

S: Всем привет,мы пишем  проект на тон,сможет кто нибудь оценить концепцию,и если несложно то подсказать как получить грант.

Vladimir: https://ton.org/grants  + https://eco.ton.org/ (reply to 303624)

S: Благодарю) (reply to 303627)

User<7374665072>: Всем привет. Можно ли сейчас использовать tonapi внутри сети ton dns, без необходимости пробрасывать запросы на собственный backend?

Игорь: всем привет, кто может помочь где-то есть нормальная документация для @ton/ton  или пример перевода jetton на nodejs?

Denis: https://docs.tonconsole.com/tonapi/cookbook#jetton-transfer Вот (reply to 303647)

Игорь: огромная благодарность (reply to 303649)

Игорь: кстати у меня этот код не работает (reply to 303649)

Игорь: хотя может у меня ссылка на тестнет неправильная  testnet.tonapo.io верно?

Denis: testnet.tonapi.io

— 2025-05-04 —

Alexey: Привет! Подскажите пожалуйста, правильно ли я понимаю, что если я отправлю любую транзакцию без стейтинита на несуществующий адрес из бейзчейна в мастерчейн с bounce = true, то транзакция будет скипнута из-за отсутствия стейта, но все равно будет включена в следующий блок и попадет обратно на мой контракт только после того как этот блок будет обработан валидаторами и включен в мастерчейн?  Правильно ли я понимаю, что таким образом можно скипнуть несколько (потенциально - сколько угодно) блоков мастерчейна в контракте, при этом дополнительных внешних сообщений не требуется, если мой контракт в бейзчейне будет сам гонять эти сообщения туда-сюда с bounce=true, и никакого контракта в мастерчейне для этого не нужно?

Denis: Можно даже просто в другом шарде. Будет дешевле

Alexander: Вопрос только в том что если вы хотите скипать блоки, то возможно вы что-то делаете не так изначально (reply to 303657)

Alexander: Шард может быть один единственный (reply to 303659)

Nick: Разработчик сендвичей детектед  Только учти что в bounced сообщении хранятся лишь первые 256 бит исходного сообщения. (reply to 303657)

Denis: https://tonviewer.com/config#12 думаешь понизят минсплит до 0? (reply to 303662)

Alexander: Раньше был один шард всего, в теории никто не мешает (reply to 303665)

Alexander: При небольшой нагрузке очень удобно, зачем весь этот оверхед на 50 транзакциях в минуту

Andrew: Ну сейчас далеко не 50 и вряд ли меньше станет... (reply to 303667)

Farel: как такое может быть, что сидку из мтв импортирую в кипер и он пишет Инкоррект

Grigory: Горизонтальное/вертикальное расположение слов 😊 (reply to 303683)

Farel: даже руками переписывал все ранво не ест, в мтв мультичейн кошелек мб из-за этого (reply to 303684)

Grigory: Разные воллеты используют разный порядок слов в сид-фразах (reply to 303688)

Farel: я мобилкой пользуюсь, там нормально с этим (reply to 303689)

Max: А подскажите пожалуйста версию тонкипера  Поддержку bip39 выкатили не в одно время с MTW (reply to 303685)

Роман: Добрый день, на фрагменте выставляются на аукцион nft, если после покупки случайно пополнил баланс nft (из-за встроенного механизма topup или как он там называется) Можно ли эти средства вывести на свой кошелек? Может при выставлении на аукцион снова? Или они там навсегда?

Vladimir: Нет. (reply to 303699)

Роман: плохо) спасибо.

Alexander: А кто-то проводил аналитику какой процент от текущего tps генерят реальные пользователи? И сколько реальных было бы если не все эти цепочки транзакций, считать своп за одно “action” и посчитать сколько actions per second (reply to 303676)

Алексей: https://tonviewer.com/stats вот тут вроде как, 100к жеттон трансферов в день как будто происходит (reply to 303702)

Artur: Всем привет! Кто-нибудь знает, есть ли способ проверить on-chain, что NFT принадлежит конкретной коллекции? Я не могу вызвать get_collection_data on-chain, потому что это get-метод. И я не могу полагаться на get_static_data / report_static_data, так как эти сообщения можно подделать.

Denzel': а за что отвечает bridge.tonapi.io? Вижу, что фрагмент кидает запрос туда когда заходишь в раздел gifts. Когда подарок будет выставлен на продажу, то этот бридж вернет инфу о нем или как?  https://bridge.tonapi.io/bridge/events?client_id=***&last_event_id=***

Max: Бридж нужен, чтобы послать транзакцию кошельку, а затем получить от кошелька либо boc, если пользователь подписал её и она улетела в сеть, либо ошибку (reply to 303714)

Denzel': понял, спасибо, только сейчас допер) (reply to 303715)

Alex: Если вы знаете код nft то можете посчитать его адрес из индекса и адреса коллекции, а затем сравнить с адресом с которого пришел report_static_data (reply to 303708)

Combot: Total messages: 303723

— 2025-05-05 —

Suchies: Пишу что-то без ссылки чтобы бот не забанил

Artur: Спасибо! (reply to 303719)

Emil: Всем привет!)   Куда отзывы на разрабов собираются? У меня тут пара строк просится наружу, дабы ни кто больше на мошенника не напарывался

User: Снова на те-же грабли?) (reply to 303758)

Emil: Да на этот раз прям на те же, доверился дважды п&зд@болу, теперь жалею( (reply to 303759)

Albert: Привет всем сотрудникам тон экосистемы.  Я свободен и готов волонтерить в разработке  (Python, FastApi, alembic, redis, aiogram) в любых проектах тон экосистемы (официальных или с 1000+ пользователей) с будущим трудоустройством (reply to 298987)

Asher: Дайте знать, пожалуйста, если хоть куда-то пристроитесь (reply to 303774)

🎐*<@Maxim: Подскажите, пожалуйста, в какой момент Tonkeeper обращается к эндпоинту /wallet (для минтлесс клейминга) - чтобы в кошельке появилась плашка о том, что для меня предназанчены жетоны (это ведь работает в тестовой сети)?   я создал тестовый жетон, но tonkeeper ни разу не обратился к моему /wallet эндпоинту и соответственно в кошельке я не вижу предназначенные для меня жетоны, в какой момент это должно произойти? (reply to 303715)

Max: это к @subden (reply to 303777)

Denis: без конкретного примера это гадания на кофейной гуще

🎐*<@Maxim: ☀️ Здравтсвуйте! В официальном описании сказано: Display Unclaimed Jettons: .. to based on the Merkle tree data, что кошельки показывают пользователям жетоны, которые они имеют право затребовать на основе данных дерева Меркла  Я использовал generateTestJetton.ts-файл (я создал 3 чистых кошелька (первый, второй, третий) W5R1 я закинул но них по 2 TON и сделал их активными совершив переводы друг другу)  Я подключил первый кошелек к blueprint, а также через mnemonic и совершил деплой мастера (в котом уже как бы 56 жетонов, но этих трех владельцев пока еще нет), далее по образцу в generateTestJetton.ts я совершил вызов sendTransfer на вычисленный кошелек с op::transfer, а внутри у него claimPayload, а внутри него ячейка с доказательством -  и все замечательно: смк распарсил custom_payload и зачислили 14 жетонов и теперь первый кошелек выдает [claimed: true]  Также сделан boc-файл со словарем из этих трех кошельков Address -> {amt, start, expired} - и я захостил его на mintles_merkle_dump_uri из uri - и все качается, также я настроил все 3 эндпоинта по стандарту /wallet, /wallets, /state для базового маршрута custom_payload_api_uri - если нажать на get-запрос для первого, то получим: {owner: 0:39..a265, jetton_wallet: 0:30..6f0d, custom_payload: te6..W2A, state_init: te6..nE=, compressed_info: {amount: 14000000000, start_from: 1640995200, expired_at: 1767244800 (до 2026 года)}}   Самое главное custom_payload - будет совпадать с тем claimPayload котороый подается в sendTransfer и выводится в консоли в ts-файле blueprint'а. Я идеально вычисляю wallet_code_only(), jetton_wallet_address() и generate_merkle_proof() - все совпадает на python-сервере и на blueprint  #вопрос: как мне увидеть жетоны для затребования (для 2 и 3 кошелька) - кошельки у меня в телефоне в tonkeeper и там ничего не приходит!  При этом tonkeeper может спокойно получить {} - структуру если обратится к get-запросу например для второго пользователя, как заставить tonkeeper отобразить возможность затребовать жетоны?

Denis: дорогие админы. я устал отвечать в чате где постоянно трут сообщения. отвечайте пожалуйста человеку сами

Алексей: а зачем этот абсолютно рандомный маркдаун?  это нейросеть такая странная? (reply to 303780)

Dmytro: а мне нравится наоборот. видно структуру. вот бы все вопросы были такие. (reply to 303784)

Denis: структура ок. но спойлеры реально случайно как-то раставлены (reply to 303785)

🎐*<@Maxim: Скажите, пожалуйста, вы писали по поводу частоты обращения tonkeeper к эндпоинту /wallet "Не периодически а в момент отправки" - я честно не совсем понял о какой отправке вы говорите. Я успешно запускаю официальный код https://github.com/ton-community/mintless-jetton/blob/main/scripts/generateTestJetton.ts и могу успешно упаковать доказательство с оп-кодом для клейма 0x0df602d6 и успешно подтвердить это действие в Tonkeeper'e (получив жетоны) - при этом я как бы это сам делаю и на эндпоинт /wallet никто не заходит, но я очень хочу увидеть своими глазами чтобы в tonkeeper появилась плашка - что для меня предназначен какой то жетон и не понятно как заставить tonkeeper обратиться к моему эндпоинту /wallet ? (reply to 302986)

Max: Эта опция только для уважаемых господ, полагаю   Для граждан попроще доступна опция клейма через свой дапп (reply to 303787)

Max: просто так в балансах ваш незаклеймленный юзером жеттон не появится

🎐*<@Maxim: это правда?

Denis: да. но более развернутый ответ пусть админы из удаленых достают (reply to 303790)

🎐*<@Maxim: спасибо! я сделал как вы сказали - через публичный ключ check_signature с данными и защитой с помощью timestamp (но через мастер смк) - но я все равно очень сильно расстроен одноразовостью mintless -технологии - по сути итак была тенденция - что проходит airdrp и активность снижается - было бы здорово чтобы пользователи были не ограничены количеством раздач (reply to 302983)

Оскар: как альтернатива есть https://github.com/Gusarich/airdrop работает абсолютно идентично, но раздача происходит через данный контракт, а не вшивается в минтер  всё что остается это написать простенький дапп с маленькой кнопкой тонконнекта и большой кнопкой клейма для взаимодействия с этим контрактом  как раз если несколько аллокаций происходит - каждый раз деплоим новый контракт с нужным нам мерклом (reply to 303796)

Denis: ну это абсолютно неправда (reply to 303800)

Оскар: да, тут соврал, я имел ввиду что с технической части использует тот же пруф меркла для определения "кому и сколько положено", но отображаться в самом кошельке это количество не будет и надо самому писать прослойку, а не надеяться что приложения кошельков что-то там покажут, если покажут. тоже самое и с клеймом (reply to 303801)

🐼 Sild: https://tonviewer.com/transaction/e2ed24d6f23684283cb084921dfaf2ff9608709d9c56d969014f539f0b8b3d0c https://retracer.ton.org/?tx=e2ed24d6f23684283cb084921dfaf2ff9608709d9c56d969014f539f0b8b3d0c а зачем ретрейсер сломали🙄

Denis: тоже не совсем. главное отличие что минтлес вообще не треует отдельного клейма. например в момент свапа сразу появятся на счету. и можно например сделать газлес трансфер (reply to 303803)

Оскар: разве не требует? вроде как когда был тест минтлесса с жетоном Point, он у многих "сгорел" по причине того, что не сделали минимально трансфер самому себе, а то есть был срок, за который ты должен был "токенизировать" циферку из пруфа (reply to 303811)

Denis: ну там просто был ограничен срок клейма узким диапазоном. это вполне работает и для любой другой реализации эирдропов

Оскар: присоединяюсь к ранту на бота который вечно удаляет ответы (reply to 303813)

Оскар: в общем я и хотел сказать что по сути контракты, который я кидал выше, вшили в жетон минтер и жетон воллет, что позволило без особых проблем приложениям кошельков индексировать данные минтлессы и отображать то, что еще фактически не заклеймили  это можно было бы провернуть и с этими контрактами, но там много "но" появляется (reply to 303813)

🕵️: Приветствую, а что tonconsole уже не ворк?

User<7374665072>: Привет всем! Очень хочу начать собственный проект, но пока у меня нет идей. Буду благодарен, если вы поделитесь своими предложениями, особенно если заметили, что чего-то не хватает в Ton. Хочу найти идею, которая меня вдохновит. Обещаю, что реализую понравившуюся концепцию, и в качестве благодарности включу для вас в проект приятный бонус, когда он будет завершён.

Denis: отвалились все публичные тестнет ЛС сервера. рестартанул (reply to 303822)

&rey: А я её ещё не объяснял в русском чате? (reply to 302984)

Asher: Здравствуй, Иван! (reply to 303823)

&rey: Схема называется "односторонний платёжный канал". Сейчас поясню: (reply to 303826)

&rey: Сервер хранит полное количество выданных каждому пользователю жетонов и пару ключей.

&rey: Когда надо дать ещё, тотал обновляется, и этот новый тотал + адрес назначения подписывается.

&rey: Жетон-кошелёк хранит, кроме баланса, общее количество востребованных с сервера жетонов.

&rey: За счёт этого никакой реплей-защиты не требуется – при втором приходе того же сообщения просто ничего не изменится, только пользователь зря потратит газ.

&rey: Заодно пользователь может не забирать сотни микро-прибавлений по одному – ему достаточно прислать последнее, с максимальным тоталом. Короче, довольно эффективно по тонам.

User<7374665072>: Это проект другого уровня, а я бедный одинокий программист, надо смотреть реально на вещи. (reply to 303836)

•: По запросу от nfc обычной бакнковскрй карты сделать автоматизацию обмена ton в рубли в нужном эквиваленте + расходы на газ, минуя медленных p2p, и этими же рублями оплатить покупку в пятерочке, при условии что тон довольно медленный блокчейн и финализация занимает секунд 10 + задержки на запросы и ответы в лучшем случае можно рассчитывать на 20-30 секунд времени оплаты. В кассе нормальную очередь позади себя наберешь, а онлайн через автоматизацию сбп вполне себе. Только пока это какие то сказки (reply to 303836)

rends_east: за ответ на этот вопрос в чате банят по ключевым словам (reply to 303842)

rends_east: ну попробуй второй) попробуй с другим хайповым блокчейном сравнить (reply to 303844)

Dmytro: таких уже миллион (reply to 303836)

Vladimir: Ну не миллион, и не в Пятерочке. (reply to 303849)

ReronaV: Разве байбит карта или бинанс это не то ? (reply to 303850)

Stanislav: шо опять? (reply to 303853)

Asher: в рф ни одна не пашет, расходимся (reply to 303850)

Dmytro: А ну в странах третьего мира конечно не работают. В нормальных странах карт полно. (reply to 303853)

Dmytro: любая штука которая позволяет расплачиваться за крипту будет на удивление централизованно

bazzilic.eth | Synnax: Друзья, может кто знает что происходит – валится JSON RPC метод get_wallet_address на джеттоне USDT, причем валится на нодах разных провайдеров. До этого работало, другие методы работают нормально, этот же на тестнете работает нормально, но один этот на маиннете валится. Никто не знает, в чем дело?

Oleg: С чем бороться? Пользуйся на здоровье, если веришь в чудеса) (reply to 303866)

sd: Расслабься, это комент чтоб собрать клиентов с чата. (reply to 303869)

Ars: добрый!  где еще кроме основной документации можно узнать и разобраться в том как создать своё приложение? есть идеи но не могу начать, чуть двинусь и потом всё рушится, будто всё делаю не так

Илья: У меня есть USDt в TRON trc20, и я хочу его занести на TON кошелек (условный тонкипер или @wallet). Какая будет комиссия?   Внутри сети TON какая будет комиссия на перевод USDt? 0.01$? Как у жетонов?

Max: Дешевле среднестатистического жеттона  Цента 3 с текущим курсом (reply to 303879)

Илья: Спасибо; И все же, как внести напрямую USDt из Трона в TON? Нужно обменивать?

Max: Да (reply to 303881)

🐼 Sild: воллет вроде позволяет прямо перевести (reply to 303881)

Max: И попутно скан ануса запросит (reply to 303883)

Илья: Да, с байбита 2$ сейчас комиссия   Интересно какой тут механизм - wallet что, сам обменивает под капотом без своих комиссий?   USDt trc20 -> USDt TON  Интересно сколько сдерут Dex-ы (reply to 303883)

🐼 Sild: думаю там механизм "тащите ликвидность в тон, мы угощаем"  а может и отщипывают чутка. на стейблкоинах незаметно

Max: не отщипывают ничего  фиксированную комиссию в 1 USDT возьмут при выводе в ончейн просто (reply to 303887)

🕵️: Типа соль быстрее? Так я бы не сказал, вот если уже то что обычно не упоминает в .. ну вы поняли (reply to 303843)

Илья: На официальном сайте https://ton.org/borderless вот такой вариант нашел, рандомный, выдает 0.24$ за своп usdt на TON

Илья: Есть у кого примеры мини-аппов с usdt? Только рабочие, а не как @tma_jetton_processing_bot (у меня с мобайла подключается там кошелек, но не идёт оплата)

Max: интересно, с каких пор "анус" подпадает здесь под цензуру. но да ладно

Андрей: Так чат про разработку, а не про биологию (reply to 303899)

Combot: Владислав Ковалёв has been temporarily muted for 86400 seconds

MikeWeb3Mighty: Привет, есть ресурс который код ск на func преобразует в tact?

Oleg: Звучит как нечто невозможное (reply to 303909)

🐼 Sild: https://github.com/ton-blockchain/wallet-contract-v5/blob/main/types.tlb#L26  сдается мне там все же out_actions:(Maybe ^OutList)

— 2025-05-06 —

BAAL_RA: Уголовное законодательство готовят,с регулированием в этом плане, вопросе - РФ впереди планеты всей. (reply to 303856)

BAAL_RA: ТОН нормально работает в отличии от некоторых... (reply to 303842)

BAAL_RA: Я это обзываю-"криптоэквайринг" В июле цифровой рубль - посмотрим, как это работать будет и с чем его можно будет связать (reply to 303841)

BAAL_RA: Привет Иван  Хочу привязать к "памятным монетам"(ключевое слово - памятные)- из золота к крипте. (reply to 303823)

BAAL_RA: Потихоньку двигаюсь в этом направлении. (reply to 303919)

BAAL_RA: Мне такое нужно, никак время не найду - занятся, маленький Dapp - для клейма или самостоятельного получения аирдропа пользователем и встроить или вставить на один из магазинов - сайтов.,на этот счёт - разные варианты имеются...- попробовал "кнопка в кнопке" - через раз работает - стыдно людям показать 🙄😄, скажут - какой то делитант,а про пользователей - вообще молчу - попрут за аирдропом...- в общем - как есть, что скрывать (reply to 303800)

BAAL_RA: Я туда ещё и мост пробовал вставить - вообще долго ,а иной раз - перезаходить приходится (reply to 303921)

BAAL_RA: Да и кстати - как то вопросы задавал,по поводу QR кода на получение аирдропа - всё работает - лазерная гравировка.

BAAL_RA: Всем огромное спасибо 🖐️🤝- много полезной информации 🤝

BAAL_RA: В смысле QR код - лазерная гравировка - работает! (reply to 303923)

BAAL_RA: До 20 точек - можно

BAAL_RA: Пробовал клеше- чеканить QR код,под определенным углом,не всегда срабатывает,а лазерная гравировка - четко и сразу.

BAAL_RA: Это точно (reply to 303788)

MikeWeb3Mighty: Есть заказ на разработку, если кому интересно пишите в личку.

Nikita: Этот человек является мошенником. Достаточно задать ему один простой вопрос, где деньги, которые он переводил мне за работу. Пусть покажет транзакцию, банковскую или в крипте. Это первое. Второе, он обманывал тем, что будут продажи, но не смог ничего продать и решил как обычно путем манипуляций получить денег, так как занял. Третье, пытается в понятия, но по понятиям лжец стоит в низу иерархии. Категорически не рекомендую вообще иметь дела с ним (reply to 303758)

Nikita: Сегодня буду подавать на него иск

Emil: Вот пруфы (reply to 303937)

Emil: Где твои? (reply to 303937)

odnokasanie: где твои 16 лет? (reply to 303942)

Nikita: Я просил транзакцию, а не тогда ещё дружелюбную переписку, где я согласен был помочь тебе найти 45к

Emil: Я про пруфы, с моей стороны сохранены все переписки и переводы (reply to 303943)

Emil: Ахахахах, в переписке видно что я прошу ВЕРНУТЬ а не помочь, ты че хвостом виляешь мышонок? (reply to 303944)

Nikita: То есть тебе надо предоставить договор, факт оплаты, условия на которых делалась договорённость

Emil: В полиции все предоставишь, если хоть что то имеется (reply to 303947)

Nikita: Вот, опять, смотрите, факты, их же легко предоставить. Скидываешь их в чат, или предоставляешь полиции и все убеждаются, что я неправ. Но данные обманщик это не делает. Интересно, почему (reply to 303948)

Дмитрий: Мужики не останавливайтесь, я быстро за попкорном

Emil: Давай давай, петушись дальше)  Только твои переписки в полиции примут, а вот с твоей стороны нечег предоставить, потому что ты пиз &@ бол

Nikita: Зато есть факты того, что я прилетал к этому человеку. Работал с ним в одном помещении под обещания и в итоге не получил ничего. И сейчас у него совсем поехала крыша, и он решил, что если он не смог стартап развить, то можно съехать с обещаний

Nikita: Про петухов не фуфелу рассуждать =) (reply to 303953)

Nikita: Мне не интересно участвовать дальше в обсуждении

Emil: Ахахахах, ты напросился ко мне как побитая собака, а теперь оскал показать решил, но не переживай, таким как ты зубы в тюрьме быстро выбивают (reply to 303954)

odnokasanie: если нет земных данных и координат, то полиция не найдет и не будет искать, если ты не Лариса Долина (reply to 303953)

Emil: Все ок) ФИО, др, копии доков, все есть включая адрес текущего проживания (reply to 303959)

Alex: Я так понял чувака кинули на деньги и тот кто кинул публично пресует свою жертву. Видимо мне стоит относится к этому как к образовательному контенту, раз админы это не удаляют

Nick: Товарищи, ругающиеся. Если был бы сервис на тоне, где рейтинг работодателей основывается на платных лайках/дизлайках, готовы ли вы заплатить реальные тоны против своих оппонентов или за себя?

/B4ckSl4sh\: Не очень понятно как отличать твинки (reply to 303964)

/B4ckSl4sh\: Впрочем, это проблема всех подобных сервисов. Остаётся только выбирать с хорошим рейтингом и не выбирать где мало оценок

maksim: Вроде победители одного из хабов в 24 году делали нечто похожее (reply to 303964)

Nick: Можно использовать модель Trustpilot, но и с ним не все так гладко. Тем не менее, он борится с твинками лучше остальных (вроде как). (reply to 303965)

Nick: Чем закончилось? (reply to 303967)

maksim: Вроде забили после хака (reply to 303969)

Bane_Father: Which group is this

ሏጠሀፐየሀህ ፎዐየዐዘሀዘ: +1 буст от меня)❤️

ሏጠሀፐየሀህ ፎዐየዐዘሀዘ: Угу, English тут не работает)

.: Привет всем есть девушки каторый любит интимные отношения

Alex: Пора какой то identity вводить 😄

Brave: причина? (reply to 304002)

Oleg: "Сделай за меня работу, а то меня в гугле забанили" (reply to 304004)

ሏጠሀፐየሀህ ፎዐየዐዘሀዘ: А за голос нечего не дают, так ведь?..

Denis: он не сказал волшебного слова о том что эти девушки готовы на отношения без взяти за это денег. тогда бы его сообщение удалило (reply to 303999)

Alex: Совсем не понимает психологию отношений с незнакомыми девушками ) (reply to 304007)

Паша: Для этого тонконнект надо (reply to 304011)

Mirka: Выбирай: https://docs.ton.org/ru/v3/guidelines/ton-connect/guidelines/developers (reply to 304016)

Combot: Cwy has been temporarily muted for 86400 seconds

🐼 Sild: а как баланс может уходить в минус, если   account_storage$_ last_trans_lt:uint64     balance:CurrencyCollection state:AccountState    = AccountStorage;     currencies$_ grams:Grams other:ExtraCurrencyCollection             = CurrencyCollection;    nanograms$_ amount:(VarUInteger 16) = Grams;   ?

Оскар: в техническом плане не баланс уменьшается, а накапливается так называемый storage due (reply to 304029)

🐼 Sild: понял-принял, спасибо (reply to 304030)

ሏጠሀፐየሀህ ፎዐየዐዘሀዘ: Нужно сайтик тех.поддержки состряпать

Combot: Combot выдал(а) предупреждение Ճϐ٥ษӈนҡ Ճ৮ᴥϐ٥ሉค | ♔ KoverMant ❦ | (1/3) Reason: 1 reports (reply to 304034)

Namon: У кого-нибудь возникала проблема с TonConnect UI на iOS, что при отправке транзакции появляется модалка с кнопкой "Open wallet" и при нажатии на неё не перенаправляет в кошелёк, и TonConnect выдаёт ошибку?

Nick: Какая ошибка? Ошибка только на IOS, а в браузере ошибки нет? (reply to 304041)

Namon: Tonhub: Error: [TON_CONNECT_SDK_ERROR] _BadRequestError: Request to the wallet contains errors. Bad request Tonkeeper: Error: [TON_CONNECT_SDK_ERROR] _TonConnectUIError: Transaction was not sent  Воспроизводится только в TMA, в браузере всё ок. Только на iOS, на других ОС всё ок. В клиент кошелька сообщение для подписи отправляется, при этом на фронте всё падает ещё до перехода в кошелёк.  @tonconnect/ui-react: 2.1.0 react: 19.1.0 (reply to 304042)

Nick: Моя задача: помочь составить более четкий вопрос выполнена.  Коллеги, присоединяйтесь к поиску ответов.  Если ответ будет найден, прошу создать вопрос на tonanswers для помощи будущим поколениям. (reply to 304044)

Andy: Если по клику должен открыться кошелек, то это косяк браузера внутри телеги. Есть проблема с обработкой переходов из тма во вне именно на айос (reply to 304044)

Shkiper: Ещё вопрос по @tonconnect/ui-react как решить проблему с тем что после оплаты в кошельке и возврата пользователя обратно в приложение остаётся заставка open wallet и приложение не видит что оплата прошла и не получает .boc транзакции? Это происходит не всегда

web-assist 🧀: Никак, не реагировать на boc и апрувить транзакции отдельно (reply to 304051)

Shkiper: Да я уже над этим работаю, подумал, а вдруг есть решение (reply to 304053)

Shkiper: Капец как это всё не надёжно получается, теперь каждое нажатие надо обрабатывать и смотреть в блокчейн была оплата нет оплаты, а если включить сценарий перегруза сети .... (reply to 304053)

potato: Могу продать свои исходники, объяснить, помочь) (reply to 304055)

web-assist 🧀: Есть разные способы, я обычно пишу в redis и держу там с EXP по validUntil + N на прозапас (reply to 304055)

Shkiper: Благодарю не нужно, у меня всё есть, просто переделывать надо (reply to 304056)

Namon: а до этого вы верили ответу с фронта что ли? (reply to 304055)

Shkiper: Теперь мне тоже всё так же надо делать, а у меня работа вся после получения .boc была (reply to 304058)

Shkiper: Нет весь механизм строился на получение .boc, всё проверялось после, но не каждое нажатие на кнопку купить (reply to 304060)

Roki: Хороший дашборд для циклов валидации сломался некоторое время назад. Тут есть его владельцы?  https://tonscan.com/validation

Tim: Тут нет, но я отправил туда, где есть (reply to 304066)

Alexandr ZarGates: Всем привет ton cli где взять? на гитхабе 404  по ссылке

User<7374665072>: Привет. Обнаружил багу в Tonkeeper, связанная с дублирующимися названиями кошельков. Когда присваиваешь нескольким кошелькам одно и то же имя, например, "wallet", система автоматически добавляет к ним номера, такие как wallet1, wallet2 и так далее. Однако осталась область, где имена сохраняются напрямую без нумерации. В результате, если  открыть приложение, когда активен кошелек wallet5, и сохраняются его данные в cookies, а затем переключаемся на кошелек wallet2, то cookies wallet5 будут затерты данными wallet2. Это происходит потому, что Tonkeeper рассматривает оба кошелька как имеющие идентичное имя "wallet". (reply to 303863)

— 2025-05-07 —

User<7374665072>: Видео удаляется из чата. Могу в личку прислать.   Шаги для воспроизведения: 1. Создаём кошелек A 2. Создаём ещё один кошелёк с именем А 3. Выбираем первый кошелёк (Tonkeeper дал ему имя A1) заходим в любое app в браузере в тонкипере 4. Открываем второй кошелёк (А2), заходим в то же приложение 5. Нажимаем Refresh  Ожидание: Куки для второго кошелька те же, поэтому мы входим в app без логина  Результат: После Refresh page куки сбросились и нас просят заново залогиниться. И так на каждое обновление странички (reply to 304080)

User<7374665072>: Такая ситуация с любым приложением из браузера Tonkeeper.   Версия Tonkeeper: (reply to 304082)

Anton: это разве не адекватное поведение если ты изменяешь кошелек? (reply to 304082)

User<7374665072>: Нет конечно,  при переключение на кошелёк 1 - должно логиниться с помощью куки кошелька1, и так же для кошелька2. Т.е не должно вылетать/затираться или ещё что-то. Каждая вкладка свои куки, грубо говоря (reply to 304091)

&rey: А разве тонкипер будет держать на каждый кошелёк отдельное соединение с мостом TC2? (reply to 304092)

User<7374665072>: Зачем соединение? По кукам подключение. А так в идеальном случае,  в классическом браузере на каждую вкладку свой независимый поток даже (reply to 304093)

User<7374665072>: В Tonkeeper - это же тоже браузер, там в браузере открываются App (reply to 304093)

🕵️: Приветствую. Кто знает ответ на вопрос. Testgiver кошелек вообще пополняется? А то там все меньше и меньше тон становится

Shkiper: Если не секрет сколько у вас N ? (reply to 304058)

web-assist 🧀: 300с (reply to 304102)

Toffee: Привет, а как сделать сжигания нфт? Я как понял нужно баланс издержать нфт?

Roma: Всем привет. Столкнулся с проблемой, что снимок экрана через канвас не делается. Причина этому, как мне кажется, является 3d сцена. Есть другие варианты сделать скриншот всего приложения? На сервер отправляю в формате base64.

Vladimir: Чат русскоязычного сообщества разработчиков на TON. (reply to 304119)

....: hi

....: Hi! I just submitted a PR to verify the WBR token on Tonkeeper. Could someone please review it? https://github.com/ton-blockchain/token-contract/pull/87

Vladimir: Ждите. Проверят. Прошло только 23 минуты. (reply to 304125)

/B4ckSl4sh\: Мне нравится в какой реп сделан этот PR (reply to 304126)

0xCreator: Всем привет! Разбираюсь с задачей добавления адресов в белый список жетона после деплоя, кто то сталкивался с таким? Что то вроде добавления нового op-code и записью адреса в wallet.  Если кто знает про реализацию буду благодарен   P.s. видел подобное у stable-contract, но там чет намудрено с минтом жетонов после деплоя (ошибка can’t read parametrs )

Dmytro: с ханипотами пожалуйста в другой чат (reply to 304140)

0xCreator: Почему ханипод? Мне вл нужен на старте запуска проекта, не более того (reply to 304144)

Boris: Здравствуйте, вопрос от новичка, как узнать минимальную сумму для отправки Toncoin'ов через смарт контракт? Пишу на языке Tact.  То есть могу ли я отправить 1 нанотон и вместе с ним цену за газ?

&rey: Action можно оплатить отдельно, указав флаг 1. Тогда до получателя дойдёт тот самый один нанотон. (reply to 304149)

Alexey: Привет! Подскажите пожалуйста, что такое key block в регистре c7[13]? Ссылка на доку вот, tlb ниже в сообщении  [ wc:Integer shard:Integer seqno:Integer root_hash:Integer file_hash:Integer ] = BlockId; [ last_mc_blocks:[BlockId0, BlockId1, ..., BlockId15]   prev_key_block:BlockId ] : PrevBlocksInfo  Я не понимаю, что такое key block, откуда он берется. В вайтпейпере по Ctrl+F key block тоже ничего не нашел. Это блок, на котором произошел сплит или мерж? Это блок, на котором произошла какая-то синхронизация с мастерчейном? Где почитать подробности? Посмотрел откуда он берется в cpp коде, там тоже не особо понятно. Может кто-то подсказать?

Alexey: Мне нужны для моей задачи 16 блоков из мастерчейна, которые лежат выше в last_mc_blocks, но возможно prev_key_block тоже пригодится, да и не просто же так он тут есть, хочу понять что это и для чего (reply to 304155)

🐼 Sild: это мастер-блок в котором хрен знает что произошло но он указывается как ключевой в block_info каждого блока https://github.com/ton-blockchain/ton/blob/cee4c674ea999fecc072968677a34a7545ac9c4d/crypto/block/block.tlb#L452 (reply to 304155)

🐼 Sild: да угадаю задачу - tx_emulator оживить?) (reply to 304156)

&rey: Когда данные конфига менялись. (reply to 304155)

Alexey: к сожалению или к счастью - нет) (reply to 304159)

Alexey: последний блок, в котором менялся глобальный конфиг блокчейна? (reply to 304160)

&rey: а это включает и списoк вaлидаторов, кстати (reply to 304160)

Alexey: понял, спасибо всем!

Ed: Всем привет. Подскажите как сделать трансфер джетонов с помощью tonconnect. Есть ли примеры кода, желательно на go

Ed: У меня не проходят транзакции, типо не правильно создаю payload

X1ag: https://github.com/xssnick/tonutils-go/blob/master/example/jettons/main.go (reply to 304169)

Ed: Здесь можно орагиновать подключение через tonconnect? Я просто для этого использовал  https://github.com/cameo-engineering/tonconnect  Я пытался создать payload с помощью этой библиотеки, конвертировать в нужный формат и отправить транзакцию (reply to 304171)

s0apu?: ребят, как тест нет пополнить в тон спейс? на тон так 100)

:3: можно брать беслпатно каждый час 2 тона (reply to 304174)

Alexey: @testgiver_ton_bot (reply to 304174)

гриба: Есть тестовый сайт с tonconnect, где я могу ввести транзакцию и отправить в кошелек?

Nick: Если память не изменяет, у них в документации есть ссылки на демо-версии приложений. (reply to 304186)

гриба: Да, но там очень неудобно менять тело, ладно напишу сам (reply to 304187)

Артем: Есть кто работал с пермит2?

Combot: Hayk has been temporarily muted for 86400 seconds

Denis: FYI: на dev.tonapi.io и dev.tonviewer.com (это мейннет) должна заработотать индексация первых 10 жетон-кошельков в минтлес жетоне (reply to 303780)

Vladimir: *tonviewer.com (reply to 304210)

— 2025-05-08 —

potato: Всем доброе утро! а что делает тильда

Combot: Илья has been temporarily muted for 86400 seconds

Vasilii: какие есть варианты? (reply to 304241)

potato: Не знаю, вот и интересуюсь (reply to 304244)

наз: типа как not в питоне вроде (reply to 304241)

potato: Благодарю!

potato: Это ии писал? (reply to 304257)

Alex: Частично , фронт , я во фронте не силён

potato: Оно видно, потому что у тебя запросы стакаются и после каждого "назад" отправляется по +1 запросу) дорабатывай. Рано пока нелегальной рекламой с риском в бан заниматься (reply to 304259)

Alex: Ок, спасибо за замечание )

potato: Я пишу смарт-контракт с рандомной выдачей средств. Что-то вроде лутбоксов Суть простая человек отправляет N Тон и взамен получает определенную награду в зависимости от randomize_lt()  Проблема такая, сейчас при вызове транзакции я вижу свой выигрыш Какие есть варианты скрыть это?

final: Ты и будешь его видеть, но результат который ты получишь будет другим (reply to 304267)

potato: О спасибо, я тоже так думал но прогнали ~50 транзакций и все 1х1 совпадали с тем, что показывает тонкипер (reply to 304268)

Denis: ну так вы рандом не используете поди

Denis: на docs.ton.org была целая статья про то как делать рандом

potato: Я так пишу, как раз оттуда

potato: У меня лутбокс будет всегда отправлять ответное сообщение Я могу как то сделать так чтобы в ответном сообщении всегда был один и тот же комментарий?

potato: Или вообще не было видно псевдовыигрыша т.к. это может неправильно восприниматься

Denis: Там скоро будет детект что если был вызов рандома то дальнейшие результаты не будут показываться (reply to 304278)

potato: Понял, звучит хорошо

Марина: Всем привет! Не могу разобраться как создать usdt кошелек для задеплоенного смарт контракта. Получить адрес у минтера и отправить на адрес админа сообщение? Или зная код,адрес мастера и первоначальную дату деплоить через state init? или как это вообще делается? Можно даже не расписывать, просто скинуть ссылку на то, где это в документации почитать можно, а то я сама потерялась в ней и пробую варики на уровне предположений😄🤡

X1ag: jetton wallet деплоится сам, когда на него поступают операции типа принятия жетонов или минта.  Если вам нужно внутри ск получить адрес jetton wallet, то https://github.com/ProgramCrafter/tvm-quirks/blob/master/ok-jetton-wallet-onchain.fc (reply to 304287)

maksim: Тут есть примеры разной работы с usdt и в целом жеттонами ончейн и офчейн, https://github.com/tact-lang/defi-cookbook/tree/main/jettons (reply to 304287)

Марина: спасибо всем большое! То есть по факту чтоб все заработало сразу после того, как я с админского кошелька задеплоила контракт, беру его адрес, запрашиваю у минтера его usdt адрес и с админского usdt кошелька кидаю небольшую сумму на вычисленный usdt? все?👀

&rey: Для перевода вам не нужен адрес жетон-кошелька получателя. (reply to 304290)

🐼 Sild: можно просто перевести usdt на новый контракт. Кошелек создастся в процессе получения жетона (reply to 304290)

Марина: теперь точно поняла, благодарю

Паша: Всем привет, можете подсказать, как кастомизировать tonconnect/ui-react кнопку? Гуглил, но нашел только для tonconnect/ui и то там не все кастомится

🐼 Sild: надеюсь вы глубоко в тестнете, потому что иначе эти usdt так навсегда на "новом контракте" и останутся (reply to 304293)

0xCreator: В сети тона есть мев боты типо сендвича или фронтранера?

Alexander: Есть, но работает немного иначе чем в эфире например (reply to 304300)

0xCreator: А можете подсказать способы защиты от таких ботов? Есть ли например ограничения 1 транзакция в 1 блок? (reply to 304301)

/B4ckSl4sh\: Обычно чтобы защититься ломают эмуляцию - мев бот не может определить, что эта транзакция - покупка (reply to 304302)

Alexander: Но это временная мера, пока разработчики бота не решат (reply to 304303)

/B4ckSl4sh\: Но мало кто свою эмуляцию пишет, обычно либо тонапи либо libemulator из тон монорепы (reply to 304304)

Игорь: У меня явно глупый вопрос, в примере как вычислить адрес жетона нужно использовать ячейку с кодом контракта, которая я так понимаю загружается в контракт при деплое.  Это ячейка контракта владельца жетона? Откуда берется и в каком виде грузится этот код? где об этом можно почитать? (reply to 304289)

🐼 Sild: приходит в сообщении в stateInit https://github.com/ton-blockchain/ton/blob/cee4c674ea999fecc072968677a34a7545ac9c4d/crypto/block/block.tlb#L156  устанавливается отправителем по необходимости (скорее всего жетон-мастером, но тут я плаваю в вопросе) (reply to 304307)

Игорь: ```/// The only difference between receiving the Tact Jetton (basic) and the Governance Jetton (USDT) is the status field in Governance State Init, /// that changes how we calculate the address of the Governance Jetton Wallet. /// /// The rest of the code is the same as the Tact Jetton Receiver. contract JettonSenderGovernance(     minterAddress: Address,     jettonWalletCode: Cell,  //Вот ячейка с кодом, что в нее посылать? ) {     inline fun getTactJettonWalletStateInit(owner: Address): Cell {         return GovernanceJettonWalletStateInit {             owner,             minter: self.minterAddress,         }.toCell();     }      inline fun calculateJettonWalletAddress(owner: Address): Address {         let initData = self.getTactJettonWalletStateInit(owner);         return contractAddress(StateInit { code: self.jettonWalletCode, data: initData });     } ```

🐼 Sild: воллет-код вероятно. От точно где-то прикопан в жетон-мастере

Skuli: Всем привет Раз есть метод, который позволяет вызвать гет функцию Значит все эти функции тоже можно как-то подсосать из блокчейна?      runGetMethod(address: Address, method: number | string, stack?: TupleItem[], params?: GetMethodParams): Promise<import("./SmartContract").GetMethodResult>;

Игорь: тоже самое здесь, для вычисления адреса жетона, нужно использовать ячейку с кодом контракта, из самого контракта. Когда я делаю билд контракта я получаю байт код контракта, и его деплою. А как получить этот код изнутри контракта? Не понимаю  как все это работает. Явно где то должно быть описание. (reply to 304288)

Игорь:  forall X -> tuple change_tuple(tuple t, int pos, X value) asm(t value pos) "SETINDEXVAR"; tuple get_c7() asm "c7 PUSHCTR";  slice vm::invoke_get_addr(slice owner_address, tuple c7, cell master_data, cell master_code) asm   "CTOS            // owner_addr c7 md mc"   "2 PUSHINT       // owner_addr c7 md mc args"   "103289 PUSHINT  // owner_addr c7 md mc args get_jwa_method_id"   "5 0 REVERSE     // owner_addr get_jwa_method_id args mc md c7"   "53 RUNVM        // address exit_code c4' c5'"   "3 BLKDROP       // address";  slice get_addr(slice owner_address, cell code, cell data, slice master_addr) inline_ref {     tuple c7 = get_c7();     c7 = c7.change_tuple(0,         c7.at(0).change_tuple(8, master_addr)                 .change_tuple(10, code)     );     return vm::invoke_get_addr(owner_address, c7, data, code); }  slice calc_my_jetton_wallet(slice master_addr, cell code, cell data) inline {     return get_addr(my_address(), code, data, master_addr); } (reply to 304288)

Марина: только вчера в этом копалась) https://docs.ton.org/ru/v3/guidelines/smart-contracts/get-methods . Разработчики не дают возможности напрямую из смарт-контрактов вызывать гет методы (reply to 304311)

X1ag: когда пишешь npx blueprint build тебе выдает хэш кода. Этот хэш пробрасываешь в сторадж контракта при деплое и уже используешь его в самом контракте (reply to 304312)

Игорь: как то это сложно и не логично, хранить внутри контракта хеш самого контракта, напрашивается что должен быть способ получить его внутри контракта.  Именно тот, который hash? (reply to 304318)

Игорь: а то их там три выдает

X1ag: если вам нужно вычислить адрес jetton wallet, то используйте calc_my_jetton_wallet (который вы кидали выше) который принимает в себя адрес jetton master, код jetton master и data jetton master (reply to 304312)

Skuli: Я хочу получить список гет методов Так нельзя? (reply to 304317)

Игорь: Благодарю, попробую (reply to 304321)

X1ag: при деплое просто кладете jetton master address, jetton master code, jetton master data и вычисляете jetton_wallet_address (reply to 304321)

🐼 Sild: скорее нет чем да  то что показывает тонвьювер - они сами наиндексировали своими способами  просто готового списка - ну, практически нет. Из каждого конкретного кода можно достать сигнатуры при большом желании, но не более того (reply to 304323)

&rey: Это неразрешимая задача для произвольного контракта (та же проблема останова). (reply to 304323)

&rey: Здесь эти addr, code и data спокойно копируются из тонвьювера. (reply to 304313)

Марина: а я правильно понимаю, что если я хочу одним действием и перевести на wallet usdt и совершить какую-то полезную работу на адресе контракта, то мне кроме суммы перевода и стандартного op нужно в forward_payload закинуть данные с опкодом, которые дальше будут переданы в основной смарт-контракт?

Skuli: Ну я сигнатуры и хочу Название функции и возвращаемое значение (reply to 304326)

Alexander: Всем привет! Собрал libemulator в монорепе, при запуске вм падает на GETORIGINALFWDFEE с invalid opcode. Хотя используя fift и runvm из этой же версии монорепы все норм. В чем может быть прикол?

&rey: А если при разных аргументах разный тип вернётся? (reply to 304331)

🐼 Sild: в таком случае это можно "как-то" выковырять из корневой ячейки кода. Там где-то живет дикт с сигнатурами. Но у меня чисто теоретические знания, мне было интересно но нырять туда не стал (reply to 304331)

🐼 Sild: это что за сигнатуры такие интересные? (reply to 304333)

Denis: я тоже хочу но их нет :( возможно появятся в обозримом будущем но пока только эвристики (reply to 304331)

&rey: Условно, asm "ISTUPLE IF<{ ... }>ELSE<{ ... }>". (reply to 304336)

🐼 Sild: я догадываюсь что напихать такого в теории можно, asm есть asm, но пошло оно с такой сигнатурой...=( (reply to 304340)

&rey: А ещё интересно, как вы будете парсить такое (ниже полный код контракта): 3 1 BLKDROP // full_value selector REPEAT<{ INC }> (reply to 304341)

Alexey: а не будет ли TEP-89 дешевле? держать код мастера и кошелька и эмулировать их на блокчейне - такое (reply to 304321)

&rey: Всё те же инструкции выполнятся на мастере + все сложности пересылки по чейну. (reply to 304343)

&rey: Главная проблема TEP-89 – он асинхронный. Есть промежуток времени, когда контракт не знает свой жетон-кошелёк. При проверке разных свойств это очень плохо.

Skuli: Гет функции же не имеют аргументов (reply to 304333)

&rey: Точно-точно? (reply to 304349)

Skuli: Надо посмотреть) (reply to 304350)

Petr: Кто сказал? (reply to 304349)

/B4ckSl4sh\: Явно AI (reply to 304352)

X1ag: slice get_wallet_address(slice owner_address) method_id {     (int total_supply, slice admin_address, cell content, cell jetton_wallet_code) = load_data();     return calculate_user_jetton_wallet_address(owner_address, my_address(), jetton_wallet_code); }  Это в жетон минтере гет метод (reply to 304351)

Petr: Тогда не соврал (reply to 304353)

/B4ckSl4sh\: Может по дефолту оно старый global version в конфиг эмулятора кладёт? Либэмулятор не собирал сам, чисто пальцем в небо (reply to 304332)

/B4ckSl4sh\: Судя по коду конфиг на вход эмулятору прокидывается - так что наверное проблема не в этом (reply to 304356)

Alexander: Да, дело было именно в global version, я сначала захардкодил новый по дефолту потом уже дошел что оно с конфига берет - передал конфиг заработало (reply to 304356)

Alexander: Оно не ругается если не передавать конфиг

/B4ckSl4sh\: Жесть :) (reply to 304359)

Alexander: Там чтобы передать конфиг нужно вызвать set_c7 и там это один из параметров (reply to 304360)

Alexander: И set_c7 не позволяет задать c7, просто принимает некоторые аргументы и сам уже проставляет потом их в c7

Alexander: Но там еще больше веселье с тем что адрес отправителя в эмуляторе это всегда нулевой адрес с воркчейном 0b11111111 - почему так и почему из вне нельзя передать тоже загадка

/B4ckSl4sh\: Странно, а как ты эмулятор вызываешь? В тестах я такое вижу    void *emulator = transaction_emulator_create(config_boc, 3);  То есть конфиг явно отдаётся (reply to 304361)

Alexander: Сейчас посмотрю, я через pytvm с ним работаю так что это еще один уровень абстракции может быть там что-то передается дефолтное (reply to 304364)

Alexander: там есть transaction_emulator а есть tvm_emulator

Alexander: второе не принимает конфиг в tvm_emulator_create

/B4ckSl4sh\: В transaction эмуляторе тут просто мессадж на вход прилетает - src, соответственно, можно любой указать  Сейчас посмотрю, что же там за tvm_emulator (reply to 304363)

Alexander: Я не особо понял зачем их два, но второй легче юзать тк там есть функции вроде send_internal_message которые принимают body и amount (про адрес отправителя просто забыли) (reply to 304370)

Alexander: Забавно просто что воркчейн store_ones(8) 🙂

/B4ckSl4sh\: ага, вижу тут и set_c7, и tvm_emulator (reply to 304372)

/B4ckSl4sh\: На tvm_emulator тут только гетметоды в тестах гоняют кстати  (но тестов тут конечно кот наплакал) (reply to 304375)

Alexander: А зачем там тогда send_internal_message и send_external_message сделали 🙂 У меня есть предположение что tvm_emulator не запускает наверное фазы кроме компьют, хотя не уверен (reply to 304376)

/B4ckSl4sh\: Мне почему-то тоже так кажется, но по исходникам пока не понял (reply to 304377)

/B4ckSl4sh\: Кстати кажется все таки можно   bool tvm_emulator_set_config_object(void* tvm_emulator, void* config) {   auto emulator = static_cast<emulator::TvmEmulator *>(tvm_emulator);   auto global_config = std::shared_ptr<block::Config>(static_cast<block::Config *>(config), config_deleter);   emulator->set_config(global_config);   return true; } (reply to 304361)

Alexander: tvm_emulator_send_internal_message -> send_internal_message -> send_internal_message -> run_method -> run_smartcont -> ~vm.run()  вроде только компьют фаза, а точнее просто запуск вм вот таким вот образом (reply to 304378)

/B4ckSl4sh\: ага, да, то же самое нашёл, нет там ничего кроме компьют фазы (reply to 304381)

Alexander: именно transaction_emulator не очень удобно для тестов использовать в pytvm + pytoniq, но это вопрос к разработчикам этих питон библиотек

Alexander: Я добавил сборку шард аккаунта, но пока PR не приняли https://github.com/yungwine/pytoniq-core/pull/20/files

/B4ckSl4sh\: А ты что-то типа py-ton-sandbox пишешь? (reply to 304383)

Alexander: да нет, я просто pytvm + pytoniq + pytest запускаю для тестов контрактов ) я предполагал что этого уже достаточно без чего-то дополнительного, ну впринципе если только тесты с запуском вм то вполне достаточно +- (reply to 304385)

/B4ckSl4sh\: Эх, а я уж надеялся кто-то наконец-то напишет :) (reply to 304386)

Alexander: был кстати фреймворк для тестов на питоне полноценный, только его забросили, toncli (reply to 304387)

/B4ckSl4sh\: Там вроде только компьют фаза была, нет? (reply to 304388)

Alexander: Не помню уже, но наверное да. Тогда еще эмулятора не было такого чтобы его удобно затягивать можно было (reply to 304389)

Skuli: Я помню читал/слушал где-то Скорее всего я перепутл с тем что в гет методах не идёт работа с изменением данным в блок чейне (reply to 304352)

&rey: Ну, это адрес System. (reply to 304374)

гриба: А есть вариант через tonapi узнать тип контракта или хотябы методы, которые в нём есть?

web-assist 🧀: во сколько примерно может обойтись хранение 12к чисел в виде кортежей

Evgeny: Так прям по getAccount выдает интерфейсы, методы и т.д.  https://tonapi.io/v2/accounts/EQD8QXyjSoDRl4Q7-WOGYARQ2Dcv9Md8Gz-z5ZbndYWtKDDC  Ответ {   "address": "0:fc417ca34a80d197843bf96386600450d8372ff4c77c1b3fb3e596e77585ad28",   "balance": 19364400,   "last_activity": 1746725897,   "status": "active",   "interfaces": [     "nft_sale_getgems_v3"   ],   "get_methods": [     "get_sale_data"   ],   "is_wallet": false } (reply to 304393)

гриба: О, спасибо! (reply to 304395)

Denis: скорее полезнее это https://tonapi.io/v2/blockchain/accounts/saint.ton/inspect (reply to 304395)

#: здравствуйте, скажите пожалуйста, почему при отправке токенов на контракт, он не реагирует?   message(0x7362d09c) JettonTransferNotification {     queryId: Int as uint64;     amount: Int as coins;     sender: Address;     forwardPayload: Slice as remaining; }   receive(msg: JettonTransferNotification) {         let walletData = self.getJettonWalletData(context().sender);          if (walletData.jettonMasterAddress != self.jettonMasterAddress) {             send(SendParameters{             to: sender(),             value: ton("0.01"),             bounce: true,             mode: SendRemainingValue + SendIgnoreErrors,             body: "error".asComment()         });         }          self.myJettonBalance += msg.amount;          send(SendParameters{             to: sender(),             value: ton("0.01"),             bounce: true,             mode: SendRemainingValue + SendIgnoreErrors,             body: "accepted jettons".asComment()         });     } fun getJettonWalletData(walletAddress: Address): JettonWalletData {         return JettonWalletData {             balance: 0,             ownerAddress: walletAddress,             jettonMasterAddress: self.jettonMasterAddress,             jettonWalletCode: self.jettonWalletCode         }     }

Dmitry | backend4you.ton: Совсем не реагирует? Или падает с ошибкой? Ссылку на транзакцию можете показать? (reply to 304402)

#: у меня есть гет метод который показывает баланс контракта в жетонах и он по прежнему 0.   self.myJettonBalance += msg.amount; https://testnet.tonviewer.com/transaction/32bf5f672019051a04ba68a00dd5268256394d5505394ec8a2f3690cf8502cc3 (reply to 304405)

Dmitry | backend4you.ton: Тут «ваш» контракт это D? Ну, он не смог обработать Jetton transfer notification потому что к нему был приложен лишь 1 нанотон что недостаточно для запуска. При отправке о кладите больше в forward-amount (reply to 304406)

#: так я с кошелька отправляю (reply to 304407)

Dmitry | backend4you.ton: А кто, по вашему, оплатит работу контракта-подучателя? (reply to 304408)

Dmitry | backend4you.ton: Если у вас есть web app который юзер использует - он должен подготавливать (давать на подписать) транзу в которой заложено нужное количество в forward amount. Если у вас по бизнес-логике юзер сам посылает жетоны со своего кошелька - то вы не сможете гарантированно обработать их получение onchain , вам нужно какой-то backend строить

Dmitry | backend4you.ton: Если совсем честно - отправитель даже не обязан и 1 нанотон отправлять в forward, так что если юзер использует «необычный» кошелек то там вообще может transfer notification не быть.

#: скажите пожалуйста почему myJettonBalance не изменяется когда на контракт приходят токены   message(0x7362d09c) JettonTransferNotification {     queryId: Int as uint64;     amount: Int as coins;     sender: Address;     forwardPayload: Slice as remaining; }  struct JettonWalletData {     balance: Int as coins;     ownerAddress: Address;     jettonMasterAddress: Address;     jettonWalletCode: Cell; }  fun calculateJettonWalletAddress(     ownerAddress: Address,     jettonMasterAddress: Address,     jettonWalletCode: Cell, ): Address {     let initData = JettonWalletData {         balance: 0,         ownerAddress,         jettonMasterAddress,         jettonWalletCode,     };      return contractAddress(StateInit {         code: jettonWalletCode,         data: initData.toCell(),     }); }  const JettonTransferGas: Int = ton("0.0535");  contract JettonLottery with Deployable, OwnableTransferable, Stoppable, Resumable {     owner: Address;     stopped: Bool;     jettonMasterAddress: Address;     jettonWalletCode: Cell;     myJettonWallet: Address;     myJettonBalance: Int as coins = 0;      init(jettonMasterAddress: Address, jettonWalletCode: Cell) {         self.owner = sender();         self.stopped = false;         self.jettonMasterAddress = jettonMasterAddress;         self.jettonWalletCode = jettonWalletCode;         self.myJettonWallet = calculateJettonWalletAddress(myAddress(), jettonMasterAddress, jettonWalletCode);              }      receive() {      }      receive(msg: JettonTransferNotification) {          self.myJettonBalance += msg.amount;         self.forward(msg.sender, null, false, null);              }

Combot: Combot выдал(а) предупреждение # (2/3) Reason: 1 reports (reply to 304414)

гриба: А сколько уходит на хранение тг номера (нфт) в год?

User: 0 (reply to 304418)

гриба: с контракта же снимаются деньги за хранение (reply to 304419)

Denis: порядка 0.05 тон емнип

potato: Большая ли разница в стоимости хранения между uint(16) uint(64)

Denis: в 4 раза. всегда ваш капитан очевидность.  а если серьезно, то в абсолютных цифрах если у вас там не тысячи таких интов не принципиально. 0.000023 тон в год или около того

🐼 Sild: raw.fullAccountState balance:int64 extra_currencies:vector<extraCurrency> code:bytes data:bytes last_transaction_id:internal.transactionId block_id:ton.blockIdExt frozen_hash:bytes sync_utime:int53 = raw.FullAccountState;  а как 128-битный Coins засоввывается в тонлибовский int64? с божьей помощью?

Denis: тотал суплай тона меньше 64 бит.

Denis: но есть юзер контролабл поля в block.tlb (например import_fee на экстернале) в которых теоретически может быть больше чем 64 бита

Alexander: Там все с божьей помощью, иначе бы блокчейн вообще не работал. Представьте вы поднимаете локально бч, и там саплай больше 64 бит, у вас все ломается и вы не понимаете почему )) Меня это тоже прикольнуло, в чем проблема, бит жалко)) (reply to 304427)

🐼 Sild: а, ну вроде не страшно. Все что с тлб - оно все же с coins работает. Проблемы на стыках начинаются, где в tlb coins - а по факту из протоколов что-то странное торчит, типа i64 (reply to 304429)

Alexander: Просто в TL в плюсовой монорепе нет типа больше 64 бит числового насколько я помню (reply to 304431)

Alexander: Поэтому вот так наверное

🐼 Sild: децималы есть...

Alexander: В TL? (reply to 304434)

Denis: 128-битные инты нормально работают кажется только в расте. ну может еще в каких-нить современных модных языках типа зига (reply to 304432)

Alexander: Там в ноде все равно ref_int этот потом везде, не смотря на то что в TL 64 битные инты. Тут явно не в скорости дело, а просто лень было кому то) (reply to 304437)

🐼 Sild: я не очень понимаю что из себя tl представляет, его описание выглядит будто tlb кому-то резко стало слишком сложно... (reply to 304436)

Denis: наоборот. TL-b это когда кому-то стало не хватать TL :)

Alexander: tlb для описания структур ячеек, а tl просто для байтов (как такой протобаф без стеройдов который питался только энергией солнца) (reply to 304439)

Denis: не для байтов а для 32-битных интов :) (reply to 304441)

🐼 Sild: ну так казалось бы одна фигня, байты они и в ячейках байты) (reply to 304441)

🐼 Sild: (не подумайте что я за протобафы тут 😄 )

Alexander: ну ячейки немного другое, это такая некая абстракция над этими байтами и TL-B он на вот этом уровне выше (reply to 304443)

Denis: ячейка конечно абстракция над битами а не байтами

🐼 Sild: liteServer.getDispatchQueueInfo mode:# id:tonNode.blockIdExt after_addr:mode.1?int256 max_accounts:int want_proof:mode.0?true = liteServer.DispatchQueueInfo;   о int256 есть у них (reply to 304436)

🐼 Sild: int256 8*[ int ] = Int256; справедливо

Alexander: кринж на самом деле, я так понимаю он все равно built-in внутри, это описание ничего не значит (reply to 304448)

Alexander: там int128 по аналогии не объявить

🐼 Sild: int128 4*[ int ] = Int128; строкой выше объявлен 😄

Denis: вопрос можно ли объявить int1024. впрочем это свойство парсера tl которых предостаточно (reply to 304451)

Alexander: тогда для меня вообще загадка почему там те числа в 64 битах) (reply to 304452)

🐼 Sild: видимо потому что влезает...с миру по нитке на пивасик админу накопится

— 2025-05-09 —

Georg Leon: Интересный поиск разработчика с отбором по телеграм премиуму, а если пользователь является адекватной частью  пользователей телеграм и не видят смысла в подписке?) (reply to 304465)

Georg Leon: Увы очень скоро моё и ваше сообщение удалят , тут в плане этого строгие правила) напишите пожалуйста (reply to 304467)

ﾠ: Могу написать вам смарт-контракты, пишите в лс (reply to 304465)

#: здравсвтуйте, подскажите как правильно распарсить forwardPayload при трансфере жетона и получить оттуда оп код      receive(msg: JettonTransferNotification) {          if (!msg.forwardPayload.isEmpty()) {             let opcode = msg.forwardPayload.loadUint(32);               if (opcode == 0x54d5c342) {                 self.requireNotStopped();                 let seed: Int = getSeed();                  setSeed(seed);                                let prize: Int = random(self.minPrize, self.maxPrize);                   send(SendParameters{                     to: self.myJettonWallet,                     value: JettonTransferGas,                     body: JettonTransfer {                         queryId: 6,                         amount: prize,                         destination: sender(),                         responseDestination: myAddress(),                         customPayload: null,                         forwardTonAmount: ton("0.015"),                         forwardPayload: rawSlice("F")                     }.toCell()                 });             }         } else {             self.myJettonBalance += msg.amount;             self.forward(msg.sender, null, false, null);         }        }

Sss.: Всем привет! Документация ton советует отслеживать входящие переводы токенов через Notification, почему? Можно же смотреть транзакции на Internal Transfer и тогда мы точно ничего не потеряем, ведь уведомление это опциональная транзакция, хотя и широко используется

Complex: Потому что Internal Transfer не является частью стандарта. Это применимо для некоторых известных жетонов, но не в общем случае. (reply to 304490)

Sss.: А как еще можно получить токены, кроме как через Internal Transfer (reply to 304491)

/B4ckSl4sh\: Теоретически можно сделать жетон как в эфире - через одну большую мапу в жетон мастере - это вполне будет соответствовать стандарту кажется (не помню, есть ли там явное указание сколько должно поддерживаться холдеров) (reply to 304492)

Complex: Мастер может прислать сообщение увеличивающее баланс получателя без уменьшение баланса какого-либо отправителя (минт токенов). (reply to 304492)

/B4ckSl4sh\: обычно в этих случаях интернал трансфер шлют всё таки, но дейтсвительно никто не запрещает сделать по-другому (reply to 304494)

&rey: Изобретательность разрабов не знает границ. Если в стандарте не написано "количество может увеличиваться только при входящем сообщении internal transfer", то этого ожидать не надо. (reply to 304492)

&rey: Вообще, у жетона баланс может и со временем увеличиваться.

Vlad: Верно ли, что для того, чтобы можно было кешаутнуть стейк из номинатор пула необходимо, чтобы на адресе соответствующего ему валидатора было 10+ тонкоинов? Ну и если их нет, то я просто посылаю туда десятку и потом могу кешаутить? (Сорри если немного оффтоп)

Toffee: Привет, коллеги, у меня смарт выдает ошибка  if (op == op::withdraw_proxy_fee()) {       throw_unless(401, equal_slices(sender_address, owner_address));       if (my_balance > min_tons_for_storage()) {         send_msg(owner_address, my_balance - min_tons_for_storage(), 0, 0, null(), 1);       }       return (); }? Я бы хотел спросить, но я не вижу здесь ошибку

X1ag: Что за ошибка? (reply to 304522)

Toffee: https://testnet.tonviewer.com/transaction/f7a0f84fd2fa1d28b64cf131a4e34340fd7d0ef873a2dbb37d36dc1545de96c8

Vlad: ИИ говорит "Deposit to Pool Contract: Send TON to the pool's smart contract address (not the validator’s or nominator’s personal address) with a specific comment top_up in the transaction. This triggers the pool’s deposit function.", но в коде контракта для номинатор пула никакого "top_up" я не вижу :( (reply to 304520)

Vlad: пул который не хочет отдавать стейк https://tonscan.org/pool/Ef8wqS4UJfAKLNtvNUpOskq-_2kD94ShUWvgwfV48mfBaw0B#events

Константин: Спасибо огромное (reply to 180082)

&rey: Я бы попробовал через sandbox с RemoteBlockchainStorage проверить. (Это on topic, кстати.) (reply to 304520)

𝐄𝐯𝐚𝐧: Есть предложение поучаствовать в проекте. Разрабы, кто-нибудь свободен ?)

Denis: Предположу что дело в этом. В пуле денег меньше чем он должен тому кто запросил вывод (reply to 304528)

Denis: А в пуле для вывода должно остаться ещё 10 тон. Тоесть закиньте ещё 14 тон на адрес Uf8wqS4UJfAKLNtvNUpOskq-_2kD94ShUWvgwfV48mfBa1DE (это ваш пул только флаг другой, чтоб не сбаунсило). И потом сделайте вывод

Vlad: Спасибо, я так понял из контракта, что можно послать с опп кодом 1. Это оно и есть? (reply to 304553)

Vlad: Можно мне еще пожалуйста для этого товарища флаг вплести Ef_pD_JqXjRuYNE4-xJy-T0Wwace7ErvAfSPq2_GW9Q2QhXi ? Или лучше как это сделать?

&rey: Ну вот https://ton.org/address умеет, например. (reply to 304558)

Vlad: Спасибо! (reply to 304559)

— 2025-05-10 —

Windy: r

Alexey: Привет! Подскажите плз, а BALANCE возвращает текущий баланс с учетом затрат на compute или без учета? Я знаю что затраты на action не учитываются, но учитываются ли уже проведенные вычисления?

Rus: Привет! Ищу Telegram Web App интегратора или фуллстек-разработчика, который умеет подключать фронт (из no-code/low-code решений) к Telegram Web App SDK, Ton Connect и смарт-контрактам TON. Нужно собрать MVP, максимально используя AI-инструменты для ускорения разработки. Важен опыт Web3 интеграций, понимание, какие функции лучше отдать смарт-контрактам, а какие держать на фронте или простом бэке. Пишите в личку с кейсами

&rey: Без учёта. (reply to 304594)

Combot: Total messages: 304600

Eugene: всем привет! подскажите пожалуйста, публикую мини аппу в ton app стор, получил реджект, не нашел где глянуть причину или как связаться с модераторами, что узнать причину, возможно кто-то владеет инфой, как с таким поступать?

potato: Чтобы за раз отправить 2 сообщения я могу просто написать так?   send_raw_message(msg1, 1);   send_raw_message(msg2, 1);

Denis: Да пошлите невалидное сообщение без баунс флага. Например текст НЕ начинающийчя на d или w. Ну судя по коду опкод 1 тоже прокатит (reply to 304556)

🦜: подскажите чат по апи бота телеграм плз

Nick: Возможно, этот вам подойдёт.  @ twa_dev (reply to 304609)

Андрей: Добрый день, помогите с проблемкой. Мне необходимо сформировать сообщение для уже существующей в Гетгемс коллекции сообщение с сервера на NodeJs. Вроде смотрю на FunC код в коллекции парсинга IntMsg, так же пакую вроде но выдаёт Exit code: 9. Моя сборка body получилась такая: function createMintBody(params: mintParams): Cell {     const body = beginCell();     // op     body.storeUint(1, 32);     // query_id     body.storeUint(params.queryId || 0, 64);          // NFT Item Content     const nftItemContent = beginCell();          // owner_address     nftItemContent.storeAddress(params.itemOwnerAddress);     // next_item_index     nftItemContent.storeUint(params.itemIndex, 64);     // content     const uriContent = beginCell();     uriContent.storeBuffer(Buffer.from(params.commonContentUrl));     nftItemContent.storeRef(uriContent.endCell());     // nft_item_code     nftItemContent.storeRef(beginCell().endCell());     // royalty_params     nftItemContent.storeRef(beginCell().endCell());     body.storeRef(nftItemContent.endCell());     return body.endCell(); }

Andy: Всем привет. Хочу получить с помощью rest API информацию о мем коинах на балансе кошелька. Как это сделать? Я так понимаю, на прямую они не привязаны к нему, а надо искать какой внутренний айди для этого кошелька?

&rey: tonapi рекомендую. (reply to 304623)

Andy: Да я туда и смотрю. Есть кошелек, но напрямую почему-то информации о мемкоинах на нем не вижу

Denis: https://tonapi.io/v2/accounts/saint.ton/jettons (reply to 304625)

:3: парни у меня вопрос я сделал что бы мой бот создавал чек в тестнете он переходит в крипто бот тест нет а дальше чека нету. Так и должно быть? или все же чек должен создаться

Andy: спасибо! (reply to 304626)

Oleg: Что такое "чек", что такое "ваш бот", что такое "крипто бот" и где запятые? (reply to 304627)

Andy: А зачем тон работает с несколькими форматами адресов? Raw, raw downcase и обычным.

&rey: Ну, raw проще формировать в коде, base64 компактнее для QR-кода (+ содержит чексумму + сверять на глаз легче), битовая запись адреса — для контрактов. Про последние два не понял. (reply to 304630)

Оскар: на самом деле тон работает только с raw адресом - 1 байтовый воркчейн и 32 байта хэша  так называемые user-friendly это тоже самое, только закодированные в base64 формат с чек-суммой, чтобы случайно не промахнутся символом, и с дополнительными флагами bounce и testnet, например их используют приложения кошельков для того чтобы понимать в мейннет или тестнет отправляют транзакцию и нужно ли крепить флаг баунса при отправке сообщения  не совсем понимаю при чем тут raw downcase, ибо hex запись не чувствительна к регистру, что не скажешь про base64 (reply to 304630)

Andy: В dton когда получаешь адрес в raw виде отдельно показывает его в downcase

Andrey: Есть *_address__friendly который дает баунсбл или не баунсебл по стандарту (reply to 304633)

Mihail: Привет! Есть дизайнеры стикеров?

Toffee: Привет, коллеги я делаю транзакцию, сама транзакция пишет что ошибки нету но сама фукции ничего не происходит throw_unless(401, equal_slices(sender_address, owner_address)); int withdraw_amount = my_balance - min_tons_for_storage();       throw_unless(402, withdraw_amount > 0);       send_msg(owner_address, withdraw_amount, 0, query_id, null(), 3);       return ();

Toffee: Кто может подсказать в чем ошибка?

Toffee: Можно пожалуйста поподробнее (reply to 304639)

Vasilii: tvm_accept() — даёт контракту право тратить баланс на внутренние операции (например, send_msg)  без него операция send_msg будет проигнорирована (reply to 304640)

Toffee: Спасибо, бегу тестировать

Toffee: ⏳ :96:7: error: undefined function `tvm_accept`, defining a global function of unknown type         tvm_accept();         ^ Error: FunC compilation error: cannot generate code for function `recv_internal`: nft/nft-copy.fc:96:19: error: variable does not have fixed width, cannot manipulate it         tvm_accept();

Vasilii: тогда не знаю) (reply to 304644)

Vasilii: по другому называется может

SweetJesus: ты выносил в отдельную функцию этот кусок? (reply to 304637)

Toffee: Нет, это функцию вызывается при op == op::withdraw

SweetJesus: и как оно у тебя сбилдилось вообще (reply to 304637)

X1ag: Int на int поменяй(с маленькой буквы) (reply to 304637)

Toffee: Это отпечатка, я случайно стер когда сюда текст писал

X1ag: транзакция в тестнете есть? Если да, то кинь сюда (reply to 304637)

Toffee: https://testnet.tonscan.org/tx/c4daca91f49c9e97729a9d53bd30b726d1a804f2b90eb38b6fd8614761861525#details

Toffee: До этого сработывало функции, в один день прекрасный день перестал работать

SweetJesus: скинь более полный кусок кода и как send_msg выглядит (reply to 304637)

Toffee: () send_msg(slice to_address, int amount, int op, int query_id, builder payload, int send_mode) impure inline {   var msg = begin_cell()     .store_uint(0x10, 6) ;; nobounce - int_msg_info$0 ihr_disabled:Bool bounce:Bool bounced:Bool src:MsgAddress -> 010000     .store_slice(to_address)     .store_coins(amount)     .store_uint(0, 1 + 4 + 4 + 64 + 32 + 1 + 1)     .store_uint(op, 32)     .store_uint(query_id, 64);    if (~ builder_null?(payload)) {     msg = msg.store_builder(payload);   }    send_raw_message(msg.end_cell(), send_mode); }

X1ag: not enough grams to transfer with the message : remaining balance is 72038219ng, need 72541819 (including forwarding fees) (reply to 304658)

Toffee: Это где ты увидел?

X1ag: в ретрейсере посмотрел. Не хватает тон на отправку

Toffee: Я вроде делал трансфер с 0.01 или это должно быть на балансе контракта, хотя наврядли, у меня тот же контракт с еще более функционал работает нормально

Toffee: https://testnet.tonscan.org/tx/39089466e63a83f430b755bb9683cfec95265b8a9807d86f32da4ea5558168c3

Toffee: 0.01 тоже мало

Toffee: Это простая функция забрать баланс из одного контракта

Toffee: Я думаю может вместо owner_address поставить sender_address, проверка же прошла, значит sender_address точно

Toffee: https://testnet.tonscan.org/tx/ef1603525004e610a316a6df8485ff04e9e35fea4e1bff4708f55d58c2ad2dd0 0.05, я думаю даже 1 тон отправлю, все равно нето

X1ag: ты оплачиваешь комиссию поверх суммы которую отправляешь

&rey: Звучит, будто режим 128 с этим отлично справится. (reply to 304665)

Toffee: Я это понял,  я вот скинул тебе трансу где 0.05 отправил, я не понимаю что тут не понятно

Toffee: Это вроде отправка всего баланса, но мне нужен минимальный резевр сохранить (reply to 304669)

&rey: Во-первых, никак не пойму, зачем. 0.1 тон перед заморозкой в любом случае есть. Во-вторых, это же тоже решается, в этот раз с помощью raw_reserve. (reply to 304671)

Toffee: Мне не нравится, твой вариант, но я буду иметь его виду, если ничего не получится, есть другие варианты решения бизнес логики у меня, но мне нравится  чтобыл с withdraw методом

Toffee: Кстати, может быть я оставляю слишком мало?  int min_tons_for_storage() asm "1555600 PUSHINT"; ;; 0.0015556 TON

Toffee: @pcrafter, @imx1ag, @dimebag_darrell?

Toffee: Работает, я внатуре мало оставлял

Toffee: Спасибо парни, вы лучшие

Оскар: вся суть в том, что твои вычисления никак не включали газ, затраченный на компьют фазу, отсюда +1 флаг скипал месседж raw_reserve и 128 флаг при отправке как раз таки эту проблему решает (reply to 304676)

Toffee: Я учту в этот раз

Toffee: Но я уже решил без 128 и raw_reserve

rends_east: Зря (reply to 304681)

Toffee: Почему? Хотя мне просто лень, хорошо если я это использует, то баланс останется на контракте для сохраненния

Toffee: Не будет, что контракт сжигается или станет не активный и перестанет данные хранить?

rends_east: Если вы резервируете, то там всегда окажется оставшийся баланс (reply to 304684)

Toffee: raw_reverse нужно получается указать, можно пример, как в кода это используете, я сейчас тоже поищу как надо

rends_east: Это не 128, это мод 3 И резерв забыли (reply to 304687)

Toffee: var msg = begin_cell()     .store_uint(0x10, 6) ;; nobounce - int_msg_info$0 ihr_disabled:Bool bounce:Bool bounced:Bool src:MsgAddress -> 010000     .store_slice(to_address)     .store_coins(amount)     .store_uint(0, 1 + 4 + 4 + 64 + 32 + 1 + 1)     .store_uint(op, 32)     .store_uint(query_id, 64);    send_raw_message(msg.end_cell(), 128); а куда резевр указывать, в кокой порядок?

Toffee: raw_reserve(min_tons_for_storage, 0);

X1ag: Он не в сообщении указывается

X1ag: До отправки сообщения объяви где нибудь (reply to 304691)

Toffee: Спасибо

&rey: amount нулевой в данном случае. (reply to 304690)

X1ag: А разве есть разница? (reply to 304695)

rends_east: Покажите ему ещё дешёвый резерв)

булочки з паштетом/люфтваффельний свасторт: а где есть документация к этому ендпоинту? (reply to 236483)

— 2025-05-11 —

Сергей: Добрый день всем.  Подскажите, сталкивался ли кто с такой проблемой в TON Wallet?  После восстановления пишет ошибку:  Library Error LITE_SERVER_UNKNOWN: cannot compute block with specified transaction: cannot find block (0,377edbe1f554f03f) It=26127146000003: It not in db

Roman: Здравствуйте, а есть инструкция как пройти верификацию токена в кошельке?

Daniil: Всем привет как через библиотеку tonconnect-ui добавлять к сообщениям комментарии текстовые? Не могу найти в документации

&rey: Эксплореры и кошельки определяют, что текстовый комментарий — это ячейка, в которой первые 32 бита нулевые, а потом записаны UTF-8 байты текста (когда места не хватает, переход идёт по ссылке в следующую ячейку). (reply to 304744)

Nazar: Всем привет столкнулся с проблемой с либой pytonapi  from pytonapi import AsyncTonapi from pytonapi.schema.events import TransactionEventData  # Enter your API key API_KEY = ""  # noqa  # List of TON blockchain accounts to monitor ACCOUNTS = [     "EQBDanbCeUqI4_v-xrnAN0_I2wRvEIaLg1Qg2ZN5c6Zl1KOh",  # noqa     "UQCtiv7PrMJImWiF2L5oJCgPnzp-VML2CAt5cbn1VsKAxOVB",  # noqa ]   async def handler(event: TransactionEventData, tonapi: AsyncTonapi) -> None:     """     Handle SSEvent for transactions.      :param event: The SSEvent object containing transaction details.     :param tonapi: An instance of AsyncTonapi for interacting with TON API.     """     trace = await tonapi.traces.get_trace(event.tx_hash)      # If the transaction is successful, print the trace     if trace.transaction.success:         print(trace.model_dump())   async def main() -> None:     tonapi = AsyncTonapi(api_key=API_KEY)      # Subscribe to transaction events for the specified accounts     await tonapi.sse.subscribe_to_transactions(         handler, accounts=ACCOUNTS, args=(tonapi,)     )   if __name__ == "__main__":     import asyncio      asyncio.run(main())   использовал либу для того что бы проверять поступили ли деньги в кошелек т.е парсил содержимое trace и столкнулся с проблемой что 2 из 10 транзакций получают ошибку   pytonapi.exceptions.TONAPINotFoundError: entity not found  File "/app/.venv/lib/python3.11/site-packages/pytonapi/async_tonapi/methods/sse.py", line 41, in subscribe_to_transactions   await self._tonapi.sse.subscribe_to_transactions(handler, accounts=self.accounts, args=(self._tonapi,))  и при этом все транзации успешные  у меня 2 вопроса  1) Как я могу побороть эту ошибку и получить транзакцию 2) Возможно есть более надежный метод подтверждения платежа, если кто знает посоветуйте плз  Заранее благодарю

ᅠ: кошельки нужно инициализировать выводом тона (reply to 304746)

Nazar: спасибо обязательно попробую (reply to 304749)

ᅠ: еще как вариант .get_transactions сверяя комментарий (reply to 304750)

Maria: Сори, это было по работе

Vladimir: https://docs.ton.org/v3/guidelines/dapps/asset-processing/jettons#how-to-send-jetton-transfers-with-comments-and-notifications  https://docs.ton.org/v3/guidelines/dapps/asset-processing/jettons#send-jettons-with-comment (reply to 304756)

&rey: Комментарий же занимает место любого другого форварда или тела сообщения.

&rey: Я говорю, что вам надо выбирать между "посылаем текстовый комментарий в жетон-трансфере" и "посылаем некую таблицу в жетон-трансфере". (reply to 304761)

Denis: Классику читали? https://gist.github.com/mr-tron/a4b3e8eff3a982e3426f6397eb9a2450 (reply to 304766)

🐼 Sild: а был какой-то хитрый план в неуказании тега для BlockExtra? https://github.com/Sild/ton/blob/6f745c04daf8861bb1791cffce6edb1beec62204/crypto/block/block.tlb#L467

Алексей: это хитрый план, чтобы использовать все фишки тлб в одном файле! (reply to 304776)

🐼 Sild: аа, тег не указан - т.е. его предлагается посчитать самостоятельно по дескрипшену? (reply to 304777)

Denis: так его просто нету

🐼 Sild: было бы хорошо если так, но он там есть

Denis: а. действительно. 4a33f6fd

🐼 Sild: 0x4a33f6fd

Алексей: ну по идее так, но я от балды сказал (reply to 304778)

🐼 Sild: я почему интересуюсь планом: не хочется делать мр на правку тлб, чтобы потом автосгенеренный block.cpp разломало)

Denis: сделай реквест в апстрим :)

Alexey: Добрый вечер) Я правильно понимаю, что при деплое контракта через ide в тестнет, он вполне себе может просто висеть в тестнете как заглушка до тех пор, пока не задеплоишь нормально через tact cli или сразу в мейннет?

Oleg: Что? Контракт либо задеплоен в сеть, либо нет. Неважно, каким способом (reply to 304790)

Denis: обожаю оффчейн мету. топ доменов по количеству не скаченой меты.

Игорь: как хорошо, что я с соланой работаю, а не с тоном, иногда мне кажется, что тон придемали просто чтобы у девов горело

Tim: О новый топ! Надо занять в нем призовое! (reply to 304792)

Alexander: а как по мне наоборот, я смотрел как устроены, пишутся контракты и т д в солане - ощущение что сделано так чтобы у девов горело) так что это относительно все и везде свои приколы (reply to 304796)

Alexander: До завершения не получить, не ясно где транзакция в блоке будет (reply to 304799)

Tim: ну не всей, а только этой, её дети уже не повлияют на хеш (reply to 304799)

Игорь: после солидити у меня с раста горело знатно, но через месяц я понял, что от соланы больше кайфую чем от EVM   но вот когда приходится столкнуться с тоном, то я сразу ставлю x2 цену за проекты просто чтобы компенсировать моральный ущерб (reply to 304798)

— 2025-05-12 —

Oleg: Всем привет, кто-нибудь знает почему не работает запрос getTransactions у toncenter в testnet? И когда это починят? https://testnet.toncenter.com/api/v2/#/accounts/get_transactions_getTransactions_get Не работает, воде бы, только этот запрос, возвращает "LITE_SERVER_UNKNOWN: cannot compute block with specified transaction: cannot find block (0,ef8859417fb368ad) lt=30286858000001: lt not in db"

#: () msg::burn_nft(slice nft_address, int query_id) impure inline {     cell body = begin_cell()         .store_uint(op::NFT_TRANSFER, 32)      ;; Operation code for NFT transfer         .store_uint(query_id, 64)              ;; Unique query identifier         .store_slice(BURN_ADDRESS)             ;; new_owner_address         .store_slice(BURN_ADDRESS)             ;; response_address         .store_int(0, 2)                       ;; Empty custom_payload (Maybe ^Cell)         .store_coins(22000000)                 ;; Forward amount to new owner         .store_int(0, 1)                       ;; No forward_payload (Either Cell ^Cell)     .end_cell();      builder nft_msg = begin_cell()         .store_uint(0x18, 6)                   ;; Message header         .store_slice(nft_address)              ;; Destination NFT address         .store_coins(50000000)                 ;; Amount of TON to send         .store_uint(1, 1 + 4 + 4 + 64 + 32 + 1 + 1) ;; Default message headers         .store_ref(body);                      ;; Reference to the body      send_raw_message(nft_msg.end_cell(), 1); }    здравствуйте, скажите пожалуйста почему происходит эта ошибка при сжигании нфт?  https://testnet.tonviewer.com/transaction/98e2ab51a0715517f88d46c7aced4fabd6fc5aed7e7b415a408faee43c642611

Оскар: кстати хз какой воллет используется под капотом treasury, но как минимум можно самостоятельно сгенерить приватный ключ, задеплоить в5 и уже его экстреналом отсылать транзакции (reply to 304847)

Tim: кастомный в трежури, сорсы в блупринте вроде (reply to 304849)

Tim: так я про трежури а не про в5 отвечал... (reply to 304851)

Tim: run с w5 так просто не заведется

Tim: @alejandbel там не планируется w5?

Александр: Ты имеешь ввиду в тестах? Или для подписи сообщений в скриптах? (reply to 304847)

Оскар: а, ты про блюпринт спрашивал, а я тебе про сэндбокс (reply to 304851)

Александр: Поддержка walletv5 для подписи сообщений есть https://github.com/ton-org/blueprint/blob/c160d395e7493b0da18c9e2e66628f60ef22c973/README.md#using-mnemonic-provider-for-deployments (сейчас только нельзя указать wallet id, в пятницу фича выйдет), То что ты используешь это кастом нетворк, нужен для указания провайдера для отправки сообщений (типа тонцентра, тонапи или кастомного) (reply to 304855)

Оскар: я правильно понимаю что ты имеешь ввиду что тебе нужно задеплоить некий контракт с помощью в5 воллета? (reply to 304857)

Alexander: Коллеги, день добрый, подскажите вариант как максимально быстро спарсить все входящие транзы с кошелька, нужно получение TON и жетонов?  На данный момент прохожусь через https://tonapi.io/v2/accounts/{raw_address}/events и before_lt, но чем дальше тем медленнее, за 1кк спаршенных транзакций вообще что то медленно идет, в секунду по сотке. Может есть варианты быстрее? Потому как это на один раз

Alexander: Подскажешь какой то пример или где доку почитать именно по транзам ? (reply to 304863)

Оскар: тогда решение которое сказали выше, ты указал v5, а надо v5r1 (reply to 304864)

Оскар: так ты деплоил через в5 воллет какой-то смарт контракт, почему у этого какого-то смарт контракта должен быть интерфейс в5 воллета? (reply to 304870)

Investor: Привет всем. Написал бота на Aiogram и реализовал функционал тон-коннекта. Все работает, но столкнулся с проблемой: когда я захожу во второй аккаунт, то в боте уже сразу показывает подключенный кошелек который я подключал на первом аккаунте, как можно  это исправить?

andrey: ну ты видимо локально внутри сессии хранишь данные и никак их не фильтруешь в зависимости от юзера (reply to 304874)

andrey: подключи бд

Роман: может немного не по теме чата, простите. но может кто знает через какой API или как узнать является ли nft telegram number - restricted? Откуда маркетплейсы об этом знают, как минимум в атрибутах этого не пишет

Sol: Что такое restricted? (reply to 304887)

User: Никаких апи для этого нет, парсите фрагмент напрямую и проверяйте (reply to 304887)

Роман: понял, спасибо (reply to 304891)

булочки з паштетом/люфтваффельний свасторт: привет, кто-то юзает на проде лайтсервера тона от ton foundation?  стабильные или не очень?  ладно глянул аптайм, 81%

— 2025-05-13 —

🐼 Sild: а есть библиотечка которая деплоится системными контрактами  точнее 2 библиотечки  какова вероятностью что системные контракты перестанут ее паблишить или начнуть паблишить что-нибудь еще?

🔳 ivan: всем привет. а есть ли какието АПИ которые дают возможность получить транзакции по определенному жетону?   и второе, есть ли возможность запросить аккаунты с заданным codehash ?

гриба: А как сделать разделение платежа на tact? Отправляю так, в итоге часть, которая должна была отправиться на to пртсто застрявает

Anton: похоже на вот этот кейс: https://docs.tact-lang.org/book/send/#outbound-message-processing (reply to 304964)

гриба: Спасибо (reply to 304965)

гриба: К сожалению тут написана только причина проблемы, но не способы её решения

/B4ckSl4sh\: Почему? Там ниже написан резерв + SendRemainingBalance (reply to 304967)

гриба: резерв баланса делать? (reply to 304968)

гриба: просто у меня контракт может хранить тоны

/B4ckSl4sh\: Да. Можно сделать nativeReserve(0, ReserveAddOriginalBalance)  1. send(mode = SendDefaultMode/SendPayGasSeparately)  2. send(mode = SendRemaininBalance) (reply to 304969)

гриба: резерв получается делать в начале сообщения или можно даже перед отправкой? (reply to 304971)

гриба: А если я сделаю два сообщение с SendPayFwdFeesSeparately одно с фиксированной суммой, другое с суммой комиссии

гриба: И есть ли вариант если мне пришёл токен, чтобы я платил комиссию уже с контракта

гриба: или сумма с комиссией должна лежать в интернл сообщении

Daniil: Всем привет Я хочу в реальном времени отслеживать pending транзакции на stonfi и dedust Со стонфаем проблем нет: внутри events транзакции у них есть тип JettonTransfer, внутри которого лежит информация о жеттоне свапа а вот у дедаста внутри event'ов только ContractExec, внутри которых в начале свапа нет данных о жеттоне этого свапа и еще подскажите: у стонфая мы смотрит роутер и его транзакции, а что у дедаста? vault? pool? или у дедаста тоже есть роутер (я не нашел его в документации, как можно получить его адрес, а библиотеки вроде dedust для Python при генерации to, value, body дают как to ссылку на vault

/B4ckSl4sh\: со своего? Да, это же бувально SendPayGasSeparately  (который кстати был переименован в SendPayFwdFeesSeparately, что больше на правду похоже) (reply to 304975)

гриба: Т.е я отправляю два сообщения с этим модом (первое сообщение с меньшей суммой нанотонов), второе сообщение с 0 этим флагом и флагом SendRemainingValue? (reply to 304978)

/B4ckSl4sh\: RemainingValue и PayFwdFessSeparately странновато посылать одновременно (я кажется даже не пробовал).  В любом случае рекомендую создать простой контракт и поэкспериментировать с сендмодами - наверное только так их можно самому прочувствовать и понять (reply to 304979)

гриба: Хорошо, спасибо (reply to 304980)

$ danbesy. 🦣 //: всем привет, не знаю у кого спросить, но думаю сюда тоже пойдет, комьюнити тона как никак) у меня есть несколько вопросов, хочу получить ответ  1. как сделать автоматическое подключение кошелька юзера к фрагменту по сид фразе 2. как получать address, chain, walletStateInit, publicKey привязанного кошелька автоматически  3. как подписывать транзакции через сид фразу, тоже фулл автомат  (шедевро питончик)

$ danbesy. 🦣 //: вопрос уже задавался ранее, но ответ не было (reply to 247484)

Tim: вряд-ли на такое кто-то ответит, потому что ответ будет на пару листов а4 в лучшем случае. Начинайте изучать материал и задавайте вопросы по мере возникновения проблем (reply to 304983)

Mirka: Шедевро питонисты сидят тут: @pythonnton Поищи по чату инфу (reply to 304983)

$ danbesy. 🦣 //: всем спасибо за ответ)

гриба: так ему для покупки через фрагмент, чтобы эмулировать какой-нибудь кошелек и коннектить свой кошелек автоматизированно (reply to 304988)

гриба: а, не прочитал (reply to 305016)

Привязаность: по секрету скажу, что на фрагменте эти параметры коннекта кошелька не чекаются (reply to 305015)

гриба: там пруф чекается (reply to 305019)

Привязаность: и апиха дает просто транзу которую нужно подписать и отправить с чего угодно

гриба: так а при чём тут апи, если мы говорим про коннект через тонконнект (reply to 305021)

Привязаность: ему просто на фрагме покупки делать? (reply to 305022)

гриба: ну скорее всего он не осилил разбирать вебасм и решил пойти более простым путём, через какой-нибудь селениум открывать браузер и коннектить кош (reply to 305023)

Привязаность: гемор (reply to 305024)

Привязаность: там все знааааааачимо проще, тоже думал что надо будет вконект эмулировать

гриба: там легко вебасм разобрать?

Привязаность: Для любых транзакций на фрагменте нет проверок параметров walletconnect, можно просто из девтулзов спереть один legit запрос и все, дальше апишка возвращает транзу, которую нужно подписать и отправить с чего угодно (reply to 305029)

гриба: понятно (reply to 305031)

Привязаность: там даже linked address не чекается вродь

Влад: Всем привет. В программировании полный ноль. Но смог освоить фронтенд за пару дней и создать игру в mini app. Теперь мне нужно добавить сервер и базу данных. Для базы данных мне нужна идентификация через акк телеграмм. Как я могу тестировать работу базы данных ? С фронтом было все просто, на локалке запускаешь и смотришь. А тут какой выход?

Max: а точно вопрос для TON Dev Chat? (reply to 305049)

Andy: Всем привет. Напомните пожалуйста канал мини-апп разработки

Vladimir: @devs_cis (reply to 305051)

Влад: Да, просто низкого уровня 😁. После сервера и базы данных будет подключение ton connect .  Спросил бы сразу, дойти не могу до вопроса этого. (reply to 305050)

Влад: Спасибо. Задам вопрос по адресу (reply to 305052)

𝕻𝖗𝖔𝖘𝖊𝖙𝖘𝖐𝖎𝖞: немного не туда обратился (reply to 305049)

Dynasty: ТРЕБУЕТСЯ ФРОНТЕНД РАЗРАБОТЧИК Next. JS  Нужно внести обновления в проект — работа включает элементы вёрстки, подключение новых API-запросов и исправление багов, обязательно иметь опыт работы TonConnect SDK!  Стек: Next.js + TypeScript + Tailwind CSS

гриба: А jetton_wallet можно задеплоить самому? До получения любой jetton транзакции.

гриба: А есть примеры кода? И что гарантирует тогда безопасность, чтьо я не задеплою себе бесконечный баланс (reply to 305072)

$ danbesy. 🦣 //: ой, это ужас какой-то разбираться в этом, особенно после создания тг ботов (горе вайбкодер) может кто-нибудь объяснять более лёгким языком как это все сделать? а дальше я сам думаю (reply to 305024)

гриба: лазаю по коду контракта, гарантии найти вообще не могу (reply to 305074)

Tim: Деплой какой хочешь, только адрес будет не тот (reply to 305076)

гриба: А, действтиельно (reply to 305077)

гриба: Всё, осознал ошибку) Спасибо

гриба: а есть тогда пример кода, где я могу просчитать этот stateInit?

гриба: это оно, верно? Т.е мне данные нужно так сделать и в бок преобразовать и в бейз64?

Максим: а есть ли какое либо ожидание между созданием транзакции на перевод?

&rey: Лайтсервера не дадут больше одного сообщения к seqno-основанным кошелькам в блок. (reply to 305085)

гриба: А нету примера кода на жсе? (reply to 305086)

гриба: А то если так в tonconnect передаю, то не работает

&rey: А хеш-часть адреса сходится с хешем ячейки state_init? (reply to 305088)

гриба: у меня в целом так записать не может в dict (reply to 305089)

&rey: Вообще, типизированный способ .storeMaybeRef, а канонический state_init = beginCell().storeUint(6, 5).storeRef(code).storeRef(data).endCell() (reply to 305090)

гриба: а как мне тогда просчитать адресс будущего jetton wallet

&rey: Воркчейн (какой хотите, но ожидается 0), хеш-часть — state_init.hash().hex() (reply to 305093)

гриба: сейчас попробую

гриба: адресс считает правильно и тогда данные это будут эта ячейка в бок и в бейз64?

гриба: Отлично, спасибо

&rey: Да. Вэлью один нанотон, чтобы твм лишний раз не запускать. (reply to 305097)

Devialle: Кто работал с тон консоль ?

Vladimir: Лучше сразу задавать прямой вопрос. (reply to 305103)

Devialle: Какой метод там есть что бы достать  тело транзакции при Парсинге (reply to 305103)

🐼 Sild: Но при этом никто не мешает в одном сообщении до 255 переводов отправить (reply to 305085)

Sol: Напишите в личку пожалуйста (reply to 305071)

— 2025-05-14 —

worknbuyconsumendie: а насколько вообще актуальна проблема дрейна в тоне?  если актуальна - есть какие-то способы с этим бороться со стороны юзеров? а-ля расширения или чет еще

Terry: на самом деле это совсем не так некоторые продвинутые сливатели не показывают контракт вызова, а просто показывают получение TON поэтому пользователи чувствуют себя взволнованными. но после подтверждения транзакции общий баланс исчезает. поэтому перед подтверждением, пожалуйста, проверьте комиссию сети еще раз.

Илья: А как понять что эта коммиссия именно такая? (reply to 305125)

Andrey: А есть ссылочки на такие дрейнеры? Посмотреть вот эти транзы (reply to 305125)

worknbuyconsumendie: та я именно текст читал, а не код с реализацией, интересно стало, может можно чет сделать и в опенсурс вкинуть в виде расширения или чего-то такого, что могло бы помогать (reply to 305133)

Андрей: Вот только на скрине нету никакого получения тонов, а есть лишь получение токенов TON. (с точкой) И кошелек правильно отображает комиссию сети - что бы отправить тоны и получить токены не нужна большая комиссия сети (reply to 305125)

Sol: Первый необходимый навык разработчика - уметь пользоваться поисковиком. Тут не будет таких ссылок! (reply to 305133)

Nick: Хитрый Творожков. Хотел всех нас вокруг пальца обвести 😏 (reply to 305136)

/B4ckSl4sh\: Всем сообществом ждём дрейнеры by Tvorozhkov (reply to 305137)

Andrey: Мне не для себя, мне для друга (reply to 305138)

🐼 Sild: Мы на хакатоне начали делать плагин который детектит тон-коннект на сайте, и по белым спискам рисует красную плашку "уходи отсюда"  Потом еще хотели блеклисты с дексов подгружать и прям в браузере добавлять эфемерный рейтинг токена  Конечно после хакатона мы все это забросили https://github.com/Sild/tondefender (reply to 305134)

Manas: Привет! Кто может помочь с верификацией токена на TON API?

Max: Тон ещё выдает гранты за проекты? Последний блог был год назад.

Nico: вот здесь пропоузалы/гранты можно трекать  https://questbook.app/dashboard/?grantId=65c7836df27e2e1702d2d279&chainId=10&role=builder&proposalId=6645f926f914ff1b54b0f9aa (reply to 305163)

Max: Так они буквально ни один грант не выдали от октября (reply to 305170)

Nico: есть такое)  но при этом шлют отказы. значит площадка не deprecated (reply to 305173)

Max: Шансов получить грант мне кажеться 0, какая вероятность что там все проекты были плохими (reply to 305174)

web-assist 🧀: Только только закончился TMA build contest, вот такое приложение топ-1 заняло :D (reply to 305163)

Max: А где смотреть за этими эвентами (reply to 305177)

web-assist 🧀: https://t.me/tonsocietycishub Как вариант (reply to 305178)

Nick: Сейчас и этот чат разорвет.) (reply to 305177)

odnokasanie: У тебя написано opensource твое приложение, которое на мой взгляд должно быть первым. Оно уже выложено? (reply to 305180)

Nick: Спасибо за высокую оценку.  Хочу выложить, когда приложение достигнет той стадии, когда любой сможет форнуть и развернуть с нуля. Избавимся от басфактора. (reply to 305181)

#: здравствуйте, можете помочь пожалуйста. надо сделать так если на контракт просто отправили тоны, то он вернул отправителю небольшую часть   fun onInternalMessage(myBalance: int, msgValue: int, msgFull: cell, msgBody: slice) {     var cs = msgFull.beginParse();     val flags = cs.loadMessageFlags();     if (isMessageBounced(flags)) {         return;     }      var senderAddress: slice = cs.loadAddress();      if (msgBody.isEnd()) {         if (msgValue >= minToBuy) {             transferTonComment(senderAddress, toNano(1) / 1000, "test");         }     }      loadData();      val op = msgBody.loadMessageOp();      throw 0xfffff; }    https://testnet.tonviewer.com/transaction/885ae4671ecfe09764f471f93945eb10ba5147688e253efe2e7a96501597f673

#: как правильно получить адрес сендера если пустое сообщение отправлено?  fun onInternalMessage(myBalance: int, msgValue: int, msgFull: cell, msgBody: slice) {     if (msgBody.isEnd()) {         var cs: slice = msgFull.beginParse();         var senderAddress: slice = cs.loadAddress();          transferTonComment(senderAddress, ton("0.001"), "test");         return;     }      var cs: slice = msgFull.beginParse();     val flags = cs.loadMessageFlags();     if (isMessageBounced(flags)) {          return;     }      loadData();

SweetJesus: чел, почитай доку по такту, она вполне норм написана

#: не пишу на такт

SweetJesus: бл, это толк чтоли

Даниил: Привет всем, ищу разработчика мевбота для торговли с автоснайпингом и низкой задержкой, наверняка такие ребята тут есть Прошу напишите в лс, обсудим цену и все моменты.

Petr: Тебе надо пропустить данные до адреса и только затем его загрузить См. https://docs.ton.org/v3/documentation/data-formats/tlb/msg-tlb#commonmsginfo для Tl-B (reply to 305190)

Petr: var cs = in_msg_cell.begin_parse(); cs~skip_bits(2); var msg_bounceable = cs~load_int(1); var msg_bounced = cs~load_int(1); slice msg_sender_addr = cs~load_msg_addr();

#: ну я там попытался поменять местами и вроде получилось. (reply to 305197)

— 2025-05-15 —

Sol: Буду рад получить крутую идею или технические задания для реализации. портфолио скину в лс.  Разработка концепции бонусом!

Petr Pavel: Их есть у меня (reply to 305207)

Sol: Пишите в личку. Чего ожидаете? Пока другой проект займет ваше место? (reply to 305208)

Petr Pavel: Я думал вам идеи нужны А оказывается заказы 🤷🏻‍♂️😇 (reply to 305209)

Sol: Идеи  проекта которые помогут росту экосистемы тоже интересны . (reply to 305210)

Petr Pavel: Есть (reply to 305212)

Oleg: Это прямое нарушение законодательства (оплата криптой товаров) (reply to 305214)

$ danbesy. 🦣 //: видел кошель через который оплачивают криптой в рф, ложишь юсдт на кошелек, юсдт переводятся в рубли и оплачивают товар) (reply to 305215)

odnokasanie: Оплата криптой - это когда продавец получает крипту себе от покупателя.  Если оплата происходит в рублях, т е продавец получает рубли, а крипта используется чтобы компенсировать потраченные рубли, то это обменная операция, которая не нарушает законодательство.  Так это работает. (reply to 305217)

odnokasanie: Уже есть решения от одногрупника @kideroboy - участвовал в контесте миниапов с ним и арктик кошелек (reply to 305228)

Oleg: И такой ждешь на кассе подтверждения полтора часа, а сзади очередь старушек) (reply to 305227)

odnokasanie: Это нивелируется как у арктика своим кошельком, а так в ваших децентрализованных финансах нужно подтверждать и ждать завершения транзакции каждую оплату (reply to 305230)

Андрей: Если делать такой сервис по уму, то кассы должны поддерживать крипту и работать через платежные каналы (не нужно ждать подтверждения в блокчейне) Но мы не в том мире живём, и решение этих проблем за границами тематики данного чата (reply to 305230)

odnokasanie: Не, набегут оптимистичные мошенники (reply to 305233)

odnokasanie: Это нарушит законы некоторых стран (reply to 305234)

Nick: У меня получаюсь достигать скорости 15 секунд. (reply to 305230)

Nick: В тон завезут нечто что-то типо лайтнинга, так что можно будет еще сильнее ускорить, до пары секунд. (reply to 305234)

odnokasanie: Вроде было что-то типа предавторизации или разрешение на списывание без подтверждения в Тоне, ошибаюсь? (reply to 305240)

Nick: Но ещё есть над чем работать. Вчера пытался оплачитить товары во вкуссвилле, но что-то пошло не так.  Вероятно то, что на некоторых QR отсутсвует сумма, придётся парсить с камеры. (reply to 305240)

Nick: Да, пока только в теснете. (reply to 305243)

odnokasanie: Есть сбп qr без суммы, надо ее вводить. И парсить надо же ссылку которая в qr-коде (reply to 305244)

Nick: Распарсить qr со всеми нужными данными не проблема, но и там есть свои подводные камни. (reply to 305248)

Combot: Валентина Вавилова has been temporarily muted for 86400 seconds

odnokasanie: Типа? (reply to 305249)

Nick: Пока не хочу вдаваться в подробности. Могу сказать, что грамотно использовать сбп для оплаты криптой — та еще техническая задачка. Не удивительно, что почти никто за нее не берется. (reply to 305252)

Denis: Холдерс сделали ровно это. Но с ньюансом что пятерочке надо открыть отделение в стране где работает толи виза толи мастеркард (reply to 305227)

Denis: А можно подробностей? Что там в тестнете? (reply to 305245)

Denis: holders.io  Но оно пока не в проде. В плане все работает но клиентов не пускают. (reply to 305258)

odnokasanie: Жаль, что ты не раскрываешь подробностей как к СБП подключился, если у тебя договорные отношения с НСПК или банком, т е не костыль какой-нить типа через юмани или другую платежку используя приватный или p2p API, то я бы инвестировал в развитие этого приложения. (reply to 305256)

odnokasanie: Арктик кошелек работает в проде, сам пробовал оплачивать в магазине им (reply to 305258)

Nick: Не нахожу новостей. Похоже, приснилось. (reply to 305259)

Nick: Договариваться с нспкт — это сильно, но не достаточно, чтобы сделать универсальное решение для всего мира. Я бы не хотел создавать зависимость от каких-либо органов. (reply to 305262)

odnokasanie: НСПК - организатор СБП. Не договариваться (не иметь отношений с ними, пусть апосредованно через банки, платёжки и т.п. и не соответствовать их правилам) с ними по оплате их же кодов - это то же самое, что делать миниап с использованием блокчейна солана с желанием не зависить от органа, в частности телеграм.  Да, СБП - это Россия, несколько дружественных стран и врядли станет всемирным. (reply to 305267)

Nick: Когда создавался биткойн, Сатоши не спрашивал разрешения у гитхаба, можно ли биткойну существовать.  У меня есть идеи, как реализовать универсальное решение. Какая лучше приживется, та пойдет в опенсорс. (reply to 305268)

odnokasanie: Непонятный пример, Сатоши вроде не загружал исходники на гитхаб. Хотя гитхаб как раз для исходников.  Ладно, я предложение сделал, в любом случае желаю всяческих успехов хорошему начинанию! (reply to 305269)

X1ag: hi, поделитесь пожалуйста репозиторием где можно посмотреть реализацию индексатора

X1ag: грубо говоря, вопрос в том как реализовать свой индексатор (reply to 305272)

🐼 Sild: репозитория нет, но как...берешь архивную ноду, выкачиваешь все блоки и стейты, индексируешь

🐼 Sild: то что в ноде не хранится - эмулируешь

X1ag: а если мне нужны только актуальные данные (которые могут и будут обновляться) то можно же обойтись без архивной ноды?

🐼 Sild: ну такое, на тоненького. Смотря что индексируешь. Есть вещи которые без истории плохо просасываются, но скорее всего это такие мелочи которыми никто особо не заморачивается (например, на какой высоте были недоступны определенные библиотеки)

🐼 Sild: если тебе, например, по нормализованному хешу транзакцию искать - с этим проблем не будет

X1ag: Индексировать надо транзакции выставления нтф на продажу(и искать флор соответственно) независимо от маркетплейса (будь то фрагмент или гг) (reply to 305279)

🐼 Sild: я не очень знаю что там за специфика  nft, но звучит как что-то для чего история не особо нужна

X1ag: а я не особо понимаю чем обычный хеш отличается от нормализированного, можете просветить пожалуйста?) (reply to 305280)

🐼 Sild: вот тут (reply to 300180)

X1ag: благодарю) (reply to 305285)

X1ag: https://docs.tonconsole.com/tonapi/cookbook#transaction-tracking  А это нормально что тут в примере на го, показывают только код нормализации хеша(из https://docs.tonconsole.com/academy/transaction-tracking#how-external-in-normalization-works), когда на js показан весь трекинг?

Azamat: Друзья кто знает для Jettons планируются гибкие настройки, такие как например комиссия за переводы, как это сделали в Solana SPL?

Azamat: Thank you😁👍 (reply to 305297)

🏆: Как мне подготовить транзакцию отправки выбранных нфт на определенный адрес? Сами нфт известны и адрес куда отправлять. Какой пакет использовать и как это сделать, буду благодарен за пример.  Условно, пользователь выбрал какие отправлять, нажал кнопку и предлагает подписать транзакцию, через тонконнект например.

Илья: Какой самый простой вариант того, чтобы юзер оплатил в ТМА свои usdt?   Как понял, прямое пополнение usdt запрещено в тг ТМА, но а как тогда? Открыть какой-то внешний сайтик не очень хочется

Рома: Crypto bot (reply to 305306)

&rey: Тоновские usdt переводятся по обычному https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md. (reply to 305306)

Илья: А если с условного байбита?   Интересно кст почему в таких @wallet и криптоботах вполне себе пополнения с других блокчейнов) (reply to 305307)

&rey: А это не к разработке на тоне вопрос, а к юристу команды и к правилам телеграма. (reply to 305309)

Robert: Здравствуйте, помогите пожалуйста разобраться.   () admin_withdraw_jettons(slice admin, int amount) impure {      throw_if_not_admin(admin);              var (_, _, _, admin_jet, _, _, _, _, _, _, jetton_wallet, _) = load_data();       cell transfer_msg = begin_cell()         .store_uint(0xf8a7ea5, 32)              .store_uint(0, 64)                         .store_coins(amount)                  .store_slice(admin_jet)                   .store_slice(admin)                        .store_uint(0, 1)                        .store_coins(100000000)                  .store_uint(0, 1)                .end_cell();         send_raw_message(         begin_cell()             .store_uint(0x10, 6)                      .store_slice(jetton_wallet)                .store_coins(100000000)                     .store_uint(0, 1 + 4 + 4 + 64 + 32 + 1)              .store_ref(transfer_msg)             .end_cell(),         64 + 1       ); }  завершается  Exit code: 9 Cell underflow

web-assist 🧀: слишком много данных в одной ячейке 1023 бит максимум + 4 ссылки на другие ячейки  Либо считай и клади впритык, либо меняй структуру на storeRef().storeRef().storeRef() и тд (reply to 305314)

Оскар: ответ выше неверный, у тебя наборот cell underflow, значит ты пытаешься прочитать из слайса больше, чем он может выгрузить  если была бы попытка записать больше, чем вмещает ячейка, то был бы cell overflow (reply to 305314)

Оскар: а ещё у тебя месседж неверно строится, тут должно быть .store_uint(1, 1 + 4 + 4 + 64 + 32 + 1 + 1) ты пропустил ещё один + 1 и поставить either в 1 (reply to 305314)

Jzuss ┌( ಠ_ಠ)┘: Подскажите, из outMessage можно получить хэш транзакции для последующего поиска транзакции по хэшу? То есть найдется ли транзакция по такому хэшу:   hash = transaction.outMessages.values().at(0).body.hash().toString('base64') Или же связанную транзакцию можно искать по createdLt в контракте куда было отправлено сообщение?

&rey: По createdLt и source address. (reply to 305321)

&rey: Хотя, кстати, найдётся, если передать этот хеш в правильное поле ("хеш входящего сообщения")

Jzuss ┌( ಠ_ಠ)┘: спасибо (reply to 305322)

🐼 Sild: Это ж не хеш входящего сообщения, а body (reply to 305323)

Max: у них деньги закончились) (reply to 305174)

Max: Что бы запустить стейбл надо много денег в ликву положить) (reply to 305337)

sd: minter.ton.org, запускайте

Trading: > Добрый вечер!  Полтора месяца назад я подал заявку на грант TON, а также отправил запрос о статусе рассмотрения, но, к сожалению, не получил ответа. Скажите пожалуйста как долго идёт рассмотрение заявки?

sd: А чем стандарт жеттон отличается от нестандарт стейблкоина? (reply to 305344)

&rey: Минт и вообще всё это делается контрактами рядом с минтером. Кроме убирания такого регулятора из схемы совсем, конечно. (reply to 305349)

🏆: как поступить с алгоритмическим коином? чтобы вот эта цена зависела от каких-то внешних обстоятельств, либо неких переменных, которые иногда меняются (reply to 305352)

Denis: Звучит приблизительно на 9 больше чем надо (reply to 305353)

&rey: Минтить легко — мы же просто передаём админку жетона этому управляющему контракту. (reply to 305354)

&rey: Сжигать — если есть пул, что именно сжигать, то конечно! Если нет — game over (см. историю терры и луны). (reply to 305354)

Dimer: Объясните мне как делать правильно. Есть репа с смартконтрактами, враперами и скриптами, которые работаю через blueprint. Т.е. они делают все что мне надо, но через консоль. Как адаптировать все это через фронт(Реакт). Это ясно, что данные собираются через тон коннект и транзакции подписываются пользователем через кошелёк. Интересует практический вопрос исполнения деплоя смартаконтракта через фронт. Вот собрал фронт все данные от пользователя,  как эти данные (пейлоад, месседж) отправлять  на деплой? (Ясно что как в смартконтракте, но интерестно реальный скрипт посмотреть). Может кто-то скинуть любой пример такой реализации?

&rey: Есть поле в tonConnectSDK.sendTransaction(... {..., stateInit: "te6cck..."}] (reply to 305364)

Dimer: То есть для каждого смарта свой кастомный send Transaction делать? Или можно через args подставлять? А структуру данных для сообщения брать с тестового скрипта, чистого смартконтракта или его врапера? Сорян, за тупые вопросы, вроде все просто звучит, а как на практике зажусь, у меня затык

sd: Это же от решаемой тобой проблемы зависит. Если юзер именно сам деплоит себе контракт со своими настройками или они жёстко закодированы и не передаются никакие параметры - это одно дело, но если у тебя есть контрактовнер(мать) и контракт содержит данные юзера (баланс или что-то чувствительное), то она может и дочерние деплоить просто по запросу от юзера с нужными параметрами  Мне кажется здесь не может быть однозначного ответа, как должно' поступать. (reply to 305366)

Dimer: Юзер деплоит сам контракт  со своими настройками на основе материнского контракта.  Структура контракта чётко структурирована и ожидает обязательные поля. Как тут верно делать?

🏆: и он время от времени меняет стейт? дорого получится поидее много таких транзакций, хотя, может просто обращаться только когда кто-то что-то производит (reply to 305356)

&rey: Если жетон меняется от того, что кто-то его переводит, то у меня плохие новости. (reply to 305369)

🏆: цена должна меняться алгоритмически, но как её аптейтить не совсем понятно (reply to 305370)

&rey: Потому что "ценa" — виртуальная вещь. Более реальные — на что тoкен меняется. (reply to 305373)

Dimer: Да, у него отличный урок, но к сожалению к моей ситуации не подходит. (reply to 305375)

Oleg: У вас должен быть саплай другого токена и вы должны в расчете цены алгостейбла учитывать саплай и резерв (reply to 305373)

&rey: Это русский чат; английский — @tondev_eng. (reply to 305379)

Dimer: У него в уроке метод mint реализован. Мне надо deploy. По аналогии с его скриптом, у меня не получается. (reply to 305379)

Dimer: Смартконтракт с пользователськими данными (reply to 305382)

Fight Club: помогите

Fight Club: как это фиксить

Fight Club: на трансфер линк

Denis: нужен телепат чтобы узнать что же именно у вас в линке.  @tonapitech - можно задавать вопросы по киперу

Fight Club: там линк на трансфер опр жетона на опр адрес (reply to 305402)

Denis: на вскидку предположу что версию тонкипера давно не обновляли

Ask: всем привет, нужно в ton connect как то инициализировать транзакцию в usdt чтобы отображало что мы отправляем конкретно usdt, как я знаю это возможно, но перерыл всю инфу в интернете с отправкой jetton ничего не нашел. Может у кого то есть рабочие примеры кода

Ask: В роли connector мы можем использовать tonConnectUI как понимаю? и jetton address в случае с usdt это юздт адрес в сети ТОН?

&rey: Что произойдёт в блокчейне, определяется первым сообщением дерева (ну или цепочки). Для перевода usdt это ордер жетон-кошельку отправителя, сформированный по TEP-74 (в ton cookbook описано). (reply to 305406)

Fight Club: типо стандартно отправить жетон по кнопке? (reply to 305406)

Fight Club: уро я все решил, там не в тонкипер было дело (reply to 305404)

Fight Club: там тон://трансфер дальше чето там с са доллара (reply to 305411)

— 2025-05-16 —

Andrii: Всем привет, подскажите пожалуйста чаты для в которых обсуждается разбработка ботов в Тг

Daniel: @devs_cis (reply to 305415)

Robert: Огромное спасибо, я разобрался. Все получилось! (reply to 305317)

Daniel: Ребят, помогите разобраться все ли делаю правильно с тоновским мультисигом.   Он за инициализацию транзакции почему-то берёт 0.2 и потом их не возвращает. И я не понял как вернуть 1 тон который берется за инициализацию самого мултисига. Что делаю не так?

Denis: эта реализация мультисига заточена не на низкие комиссии а на максимальную железобетонность. а делаете вы не так то что пытаетесь использовать его в той ситуации где 1 залоченый тон имеет значение (reply to 305460)

X1ag: https://docs.tonconsole.com/tonapi/rest-api/liteserver  is it ok? Нажал на additional documentation в lite servers

Denzel': Что значит true когда вызываем normalizeHash в trackTransaction в примере на TS? https://docs.tonconsole.com/tonapi/cookbook#transaction-tracking  async function trackTransaction(message: Message) {     const msgHashHex = normalizeHash(message, true).toString('hex');     const transaction = await ta.blockchain.getBlockchainTransactionByMessageHash(msgHashHex);       console.log('Transaction:', transaction); }

🐼 Sild: на первый взгляд значит кто-то доку забыл обновить

X1ag: кажись да, потому что в примере для Go вообще забыли еще одну функцию дописать)) (reply to 305472)

nonstop #2: Нужно в краткие сроки сделать миниаппку аналог ракетки и авиатора, но на основе тг подарков. Пишите в лс

Ilya: Это артифакт, который ничего не значит. Удалю из примера (reply to 305471)

Den🌪: Всем привет, подскажите пж как проще всего по http ton api (или json-rpc) определить поступление на кошелёк USDT? через getTransactions все суммы указываюются в TON а не USDT.

Sales: /stat@combot

Combot: Total messages: 305493

Sales: /start@boosteambot

Combot: Combot выдал(а) предупреждение Sales Maser 🇾🇪 FUNToken.io (1/3) Reason: 1 reports (reply to 305493)

Sales: Hello everyone

Sales: I prefer if Admin of these Chat Make chat only in English. That's will help to understand each other (reply to 291402)

Sales: https://t.me/thetonmind_chat

гриба: А можно ли сделать в такте такое сообщение, где значение 1 параметра известно заранее, но он занимает место?

Андрей: Не особо понял вопрос (reply to 305503)

гриба: У меня будет сообщение, где, например, опкод будет не первым идти, а последним (reply to 305504)

Андрей: А, да, но костылить надо :) можешь посмотреть доку такта чтобы чуть лучше понять ответ   receive(msg:Slice) { let trueMsg = MessageStruct.fromSlice(msg); }  А в структуре последним полем - опкод (reply to 305505)

гриба: вот я как раз костылить не хотел) (reply to 305507)

Андрей: Ну это мини костыль (reply to 305508)

гриба: думал может можно как-то в самом сообщении этот аргумент указать

Андрей: Ну, такт за тебя парсит такие сообщения (reply to 305510)

гриба: а если я кину больше, чем мне придёт на контракт, то отнимется немного баланс контракта?

гриба: а, да, чёто я туплю уже

Андрей: Не понял вопроса ), в любом случае спишется сторедж фи и форвард фи (reply to 305512)

гриба: всё я сам уже на него ответил)

Ilya: Это не просто так. Т.к. жетон не хранится у вас на кошельке, то во первых надо следить за жетон воллетом (если вдруг сейчас не так).  И смотреть надо будет в тело транзакции которая пришла, т.к. у транзакции все равно будет небольшое количество TON, отбирая только сообщения с нужным опкодом о зачислении средств  Ещё можно вебхуки настроить, если хочется просто подписаться (reply to 305490)

Den🌪: А как по опкоду понять что пришла нужная сумма usdt, то есть например если юзер вручную перевел? (reply to 305517)

Ilya: По опкоду можно понять только тип операции. А сумму надо читать дальше из тела транзакции (reply to 305518)

гриба: Главное не забудьте проверять от кого пришла транзакция с опкодом нотификации, а то могут отправить и мошенники на контракт, адресс контракта юсдт валлета можно посчитать и проверить с отправителем (reply to 305518)

Den🌪: Не понятно где в теле сумму USDT искать, для TON переводов сумма указывается в nanoton в value из in_msgs или out_msgs. (reply to 305519)

Den🌪: вебхуки разве http api v2 и v3 поддерживают? я в документации toncenter не увидел (reply to 305517)

Namon: https://docs.ton.org/v3/guidelines/dapps/asset-processing/jettons (reply to 305521)

Ilya: Например вот это сообщение из трейса содержит информацию о переводимом количестве  Там где строка “4500000“ указана (reply to 305521)

Ilya: Вебхуки есть в tonapi (и кажется у dton) (reply to 305522)

Den🌪: да, но у tonkeeper вроде свой api, не тот что в доках тона указан https://docs.ton.org/v3/guidelines/dapps/apis-sdks/ton-http-apis  Я бы предпочтительнее стандартом пользовался если возможно (reply to 305524)

Namon: Ну получаете список сообщений транзакции, находите сообщение от жетон волета жетон волету, парсите сообщение, получая opcode (если опкод перевода жетонов, значит это перевод), и находите в сообщении сумму. Если сообщение было обработано успешно - перевод успешен (reply to 305526)

Ilya: Тонвьювер просто показал вам то, что вы и сами можете достать из ячейки, если распарсите ее  Ну а что касается этого куска документации, то это малость устаревший блок. Который не обновляется толком. Разницы между toncenter v3 и тонапи v2 с точки зрения стандартности нет никакой (только тонапи пока делает больше) (reply to 305526)

Den🌪: Ок, буду завтра эксперементировать, всем спасибо большое)
