Max: Найти человека, который может дать, здесь можно  Но просто кинуть кошелёк в чат с просьбой без объяснений, зачем нужно много тестовых тон, не прокатит (reply to 259653)

Petr: Сорри за оффтоп, купил звезды на фрагменте, в блокчуме все успешно, но на аккаунт они мне не пришли… Сталкивался кто с подобным?

Max: у фрагмента в последнее время траблы с индексацией (reply to 259660)

pinbaker: Сталкивался. Придут, не переживай (reply to 259660)

Андрей: что-то не работает (reply to 258789)

Ruslan: а че testgiver прилег? у него на кошельке тонов нет(

Ma><im: всем привет! правильно ли я понимаю, что в TL-B запись var:uint64 и запись var:(## 64) - это одно и то же?

Андрей: Тестовые монеты высосали, миллион за пару месяцев. Только зачем и кому они нужны в таком количестве - загадка (reply to 259687)

ᅠ: звезды приходят в среднем за полчаса. пройденая тема, все никак не могут пофиксить) (reply to 259660)

Petr: Мне уже 4ый час идут… (reply to 259700)

ᅠ: уу)) тогда братан ты встрял, жди ещё столько же)))) (reply to 259701)

Max: Готовятся к новому мейннету (reply to 259698)

Ruslan: Создать дефицит и потом продавать их за реальные тоны (reply to 259698)

Андрей: Какой дефицит, тестовых монет 5млрд, уже завтра закинут ещё лям на тестгивер А в новом году ее перезапустят что бы сбросить всем балансы (reply to 259706)

Ruslan: Не знал, прикольно (reply to 259707)

Ma><im: кто-то может подсказать что за salt в mintless jetton wallet?

Tim: чтобы можно было разные жетоны делать на одни руты?

0xCrusader: Привет, мб подскажет кто почему contract.init может быть undefined в этой ситуации:     const spaceContract = useAsyncInitialize(async () => {     if (!client) return;     console.log("Client is ", client);     const contract = new JettonMinter(       Address.parse(MINTER)     );          return client.open(contract) as OpenedContract<JettonMinter>;   }, [client]);  Контракт по адресу MINTER точно существует, клиент норм инициализируется  https://testnet.tonviewer.com/kQCtBnbIJZ7u5a1X-Qgrgl6DukCKaUsUybd3rWpXxX1H_udI?section=method - сам контракт

Tim: так вы же из адреса получаете, откуда там инит возьмется (reply to 259711)

Creator: привет всем.  А можно из контракта узнать данные пула Dedust? Или у них только гет методы, которые контракты не дергают?

Valera: Работяги, подскажите, есть ли возможность в ton connect ограничить тип сети подключаемого кошелька? Только тестнет или только мейнет.  Или нужно свои костыли писать?

ダーリン: свои костыли да (reply to 259722)

User<7931577249>: где я могу получить тоны для тестнета?

— 2024-11-01 —

•: Вот мой костыль только для мейннета https://github.com/veebull/ton-network-check/blob/main/src/App.tsx  Лайв пример https://veebull.github.io/ton-network-check/ (reply to 259722)

xDilettante: Я почти разобрался, как получить правильные хэши для ключей метадаты, но всё равно немного не то получается. В данном случае получаю неправильное значение для 'uri', разница всего в одном первом бите . Может кто поможет, чё не так, или как в Ton-Kotlin это сделать средствами либы?   x{00C_}     x{2_}         x{BFF872EBDB514D9C97C283B7F0AE5179029E2B6119C39462719E4F46ED8F7413E64_}             x{00}                 x{68747470733A2F2F7465746865722E746F2F757364742D746F6E2E6A736F6E}         x{BFF7407E978F01A40711411B1ACB773A96BDD93FA83BB5CA8435013C8C4B3AC91F4_}             x{0036}     cell.cell.parse {         var tmp = this.loadUInt8()         if (tmp == 0.toUByte()) {             println("Metadata OnChain")             refs.forEach {                 it.parse {                     tmp = this.loadUInt8()                     if (tmp == 0.toUByte()) {                         println("Metadata SnakeData")                         refs.forEach {                             it.parse {                                 val xx = this.skipBits(9).loadBits(256)                                 println(xx.toHexString())                                 println(xx.toByteArray().toBinary().joinToString(""))                             }                         }                     } else {                         println("Metadata Chunked")                     }                 }             }         } else {             println("Metadata OffChain")         }     }      val listName = listOf<String>("uri", "decimals")     listName.forEach {         println("$it ::: ${it.sha256().toBinary().joinToString("")}")         println("$it ::: ${it.sha256().toHexString()}")     } Вывод: Metadata OnChain Metadata SnakeData  f0e5d7b6a29b392f85076fe15ca2f2053c56c2338728c4e33c9e8ddb1ee827cc  1111000011100101110101111011011010100010100110110011100100101111100001010000011101101111111000010101110010100010111100100000010100111100010101101100001000110011100001110010100011000100111000110011110010011110100011011101101100011110111010000010011111001100  ee80fd2f1e03480e2282363596ee752d7bb27f50776b95086a0279189675923e  1110111010000000111111010010111100011110000000110100100000001110001000101000001000110110001101011001011011101110011101010010110101111011101100100111111101010000011101110110101110010101000010000110101000000010011110010001100010010110011101011001001000111110  ============================================================================================================ uri ::: 0111000011100101110101111011011010100010100110110011100100101111100001010000011101101111111000010101110010100010111100100000010100111100010101101100001000110011100001110010100011000100111000110011110010011110100011011101101100011110111010000010011111001100  uri ::: 70e5d7b6a29b392f85076fe15ca2f2053c56c2338728c4e33c9e8ddb1ee827cc  decimals ::: 1110111010000000111111010010111100011110000000110100100000001110001000101000001000110110001101011001011011101110011101010010110101111011101100100111111101010000011101110110101110010101000010000110101000000010011110010001100010010110011101011001001000111110  decimals ::: ee80fd2f1e03480e2282363596ee752d7bb27f50776b95086a0279189675923e  Разница первого числа в 1 первом бите, вот этого понять ещё не могу

xDilettante: Блин GPT-4o и o1-preview тоже не может в этом разобраться))) (reply to 259750)

&rey: они никогда о тоне и не знали в деталях только один бот знал, но тот сдох (reply to 259778)

Sane: Чё за бот был ? (reply to 259784)

xDilettante: Знают немного, да и я ему скинул спецификации, он их выкурил, но все равно немного не догоняет))) Я ему даже из pytonq скинул эти методы, но всё равно ерунду прогает (reply to 259784)

xDilettante: А ты не шаришь в этом? Почему у меня при загрузке из Cell и преобразовании, всего один единственный первый бит отличается от нужного значения? (reply to 259784)

&rey: Или байт? А почему .skipBits(9)? (reply to 259798)

xDilettante: Нет, именно один бит  То что получаю при преобразовании:  f0e5d7b6a29b392f85076fe15ca2f2053c56c2338728c4e33c9e8ddb1ee827cc 1111000011100101110101111011011010100010100110110011100100101111100001010000011101101111111000010101110010100010111100100000010100111100010101101100001000110011100001110010100011000100111000110011110010011110100011011101101100011110111010000010011111001100   То что должно быть:  sha256("uri"): 70e5d7b6a29b392f85076fe15ca2f2053c56c2338728c4e33c9e8ddb1ee827cc 0111000011100101110101111011011010100010100110110011100100101111100001010000011101101111111000010101110010100010111100100000010100111100010101101100001000110011100001110010100011000100111000110011110010011110100011011101101100011110111010000010011111001100 (reply to 259750)

Max: А что для декодирования base64 используете? Мы как-то с таким столкнулись: https://youtrack.jetbrains.com/issue/KTOR-5241/The-decodeBase64Bytes-method-doesnt-throw-an-exception-on-illegal-base64-characters (reply to 259800)

xDilettante: 265 - 9 = 256 (reply to 259799)

xDilettante: Тут я вообще с b64 не работаю, это уже из либы ton-kotlin под капотом конвертится (reply to 259803)

Ihor: Привет! Подскажите почему в разных эксплорерах баланс разный у номинатор пулов, и кому верить? Например адрес: Ef8_6eSCSeJyCeLM7uCxYjeirtQ4Zo8OEp0W4HJYJY4IC0zK tonscan: https://tonscan.org/ru/pool/Ef8_6eSCSeJyCeLM7uCxYjeirtQ4Zo8OEp0W4HJYJY4IC0zK 965 485.965943356, tonviewer: https://tonviewer.com/Ef8_6eSCSeJyCeLM7uCxYjeirtQ4Zo8OEp0W4HJYJY4IC0zK 965,916.27

xDilettante: А второе ключ, который является 'decimals' - вот он преобразуется точно как нужно... (reply to 259800)

&rey: Воспользуйтесь функциями для десериализации словаря, так просто проходом по ячейкам это не сделать. (reply to 259800)

xDilettante: Вот я и не могу понять как это в ton-kotlin сделать, и есть ли это в нём, доков то по нему нет (reply to 259810)

&rey: Придётся по определению. В документации структура словаря описана. (reply to 259825)

Anton: Привет! У меня после обновления tonkeeper не дает возможности подписывать транзакции в testnet. Даже через ton connect не дает подключиться -  после сканирования QR кода предлагает выбор из кошельков только mainnet. Подскажите, что-то можно с этим сделать?

Litva: Всем добрый день! Я совсем голый в теме Dev на системе Ton. Что можете посоветовать к изучению для начала?Буду очень благодарен

Taras: Документацию (reply to 259854)

Viacheslav: можно ли както в телеграм wallet в запросе на транзакцию изменить сумму? для тестов

Sane: Всем привет, что скажите на счёт того чтоб начать заниматься в сфере Ton на питоне

Sane: Есть ли какие-то минусы ?

Taras: Да, подобные вопросы (reply to 259870)

Sane: Смешной такой (reply to 259871)

MikeWeb3Mighty: Привет, а по миниаппкам это в какой чат подскажите плиз!)

наз: @devs @devs_cis (reply to 259883)

Viacheslav: как string превратить в slice ?

Oleg: storeStringTail? (reply to 259886)

Viacheslav: так? (reply to 259888)

Oleg: Хранить адрес в виде строки это очень странно, но в принципе да (reply to 259890)

Viacheslav: storeAddress надо? (reply to 259891)

Viacheslav: https://testnet.tonviewer.com/transaction/fb6b8cfa6003f174a88443ba0537c34b65200ef49d1a02f200138db2bd6ac6d2  почему failed транзакция если exit code 0?

Тимур: так это у external-in код выхода 0, а если вы на другой узел посмотрите - увидите что internal транзакция aborted: true (reply to 259897)

Viacheslav: вот вторую транзу сделал.. не пойму где тут exit code вообще.. (reply to 259901)

Viacheslav: https://testnet.tonviewer.com/transaction/fc0db7e5c2d86fdb8fa058a359bd5b0353cfdd58d770a377eb994f164920bddc

Тимур: так она aborted у вас вообще, контракт же неактивен (reply to 259906)

Viacheslav: а я посылаю stateInit вместе с транзакцией - он должен был задеплоится.. (reply to 259908)

Тимур: возможно неправильный state init, я бы порекомендовал где то в blueprint тестах поиграться и посмотреть более подробные логи (reply to 259909)

Viacheslav: вроде ок..

Viacheslav: есть ли где то пример как с фронта через tonconnectUi  деплоить контракт?

А: Я над этим думал, но подсказали только вариант отправлять сообщение на контракт, который уже будет деплоить, ведь tonconnect только сообщения отправляет😕 (reply to 259923)

наз: ну можно сразу сообщение со стейтинитом слать (reply to 259935)

А: Куда? (reply to 259942)

наз: на адрес контракта который хочешь задеплоить (reply to 259945)

А: Так, не совсем понял. Через библиотеку определенную или через сам tonconnect отправлять сообщение?   Если второе, то я верно понимаю, что при отправке stateinit на пока «не существующий» адрес, создастся смарт контракт с этим stateinit? (reply to 259946)

наз: не понимаю какая разница через либу сообщение отправить или через тон коннект, а так да (reply to 259948)

А: Я не понимаю как это работает изнутри, поэтому различаю (reply to 259949)

А: Выходит, можно писать лишь func код без оберток, просто отправляя stateinit. Интересно.   Адрес контракта это захешированный stateinit. То есть узнать адрес контракта до его создания можно, захешировав stateinit, правильно? (reply to 259949)

наз: да (reply to 259952)

User<7931577249>: Что содержит в себе jetton_content? Как я могу его прочитать? (я знаю как преобразовать его в Cell, но какие там поля не знаю)

А: Спасибо) (reply to 259953)

Oleg: Например, uri на метадату (reply to 259954)

User<7931577249>: А как его распарсить? (reply to 259959)

&rey: По TEP-64 https://github.com/ton-blockchain/TEPs/blob/master/text/0064-token-data-standard.md. (reply to 259960)

User<7931577249>: там содержит просто стринг с json? (reply to 259961)

User<7931577249>: я просто не сильно понимаю 😢

Оскар: придется понять, начиная с пункта Specification до пункта Drawbacks, если прочитать и переварить - всё станет понятно (reply to 259964)

xDilettante: Если ты думаешь что тебе здесь помогут, то нет. Тут могут только послать документацию читать, где в основном примеры для js или ts. Тебе под какой язык нужно? (reply to 259964)

User<7931577249>: ts (reply to 259969)

xDilettante: https://docs.ton.org/v3/guidelines/dapps/asset-processing/nft-processing/metadata-parsing (reply to 259970)

Sane: Помогите с проектом, я хочу сделать такое:  Человек заходит ко мне на сайт подключает кошелек через Ton connect ui   Потом у меня там будет 2 поля  1. Адреса кошелька  2. Сколько отправить   Человек вводит эти данные например он решил другу отправить 1 тон , вписывает его данные кошелька туда ну точнее адреса а затем и число для отправки Ton  Потом к нему на кошелек приходил бы запрос на отправку на те данные которые он вписал  Tonconnect ui я уже сделал  Осталось отправка

А: С мультисиг работал кто? Есть примеры проектов?

Alan: Hi

Alan: How can i get ton testnet?

Василий: @testgiver_ton_bot (reply to 259993)

kenzhebee: Добрый день, может кто подсказать куда пропал мой кэш с кошелька? Как посмотреть?

kenzhebee: Десять тонн утром отправил с спэйса на свой кошелёк, в тон. Но они просто пропали...

xDilettante: По транзакции в тон спейсе можешь посмотреть (reply to 260004)

zaglotay: Выставил свой никнейм на аукцион, но после завершения торгов желаю вернуть потраченные NOT-коины.   Существует ли возможность возврата средств в подобной ситуации?

kenzhebee: В транзакции указан адрес моего кошелька тон... (reply to 260022)

xDilettante: Ну а мы чё экстрансенсы? мы то не знаем чё там у тебя, ты же инфы никакой не дал (reply to 260029)

xDilettante: Это тебе не магазин, а блокчейн (reply to 260023)

xDilettante: В блокчейне нельзя ничего вернуть если ты куда то отослал средства, или восстановить кошелёк если ты потерял от него приватник или сид, потому что кроме тебя никто доступа больше не имеет к нему... (reply to 260023)

zaglotay: Аукцион завершился безрезультатно, так как не было поступивших предложений. (reply to 260034)

xDilettante: Если ты про комиссию площадки. Я конечно не торговал не знаю, но скорее всего речь идёт о какой то комиссии. Площадка на которой ты выставлял его, зарабатывает именно на этом (reply to 260040)

Viacheslav: а есть тестовый мастерчейн чтобы попрактиковаться в деплое библиотеки?

zaglotay: Я осведомлён о том, что платформа взимает комиссию при выводе токенов. Однако мне не ясен механизм перевода этих токенов с платформы на личный кошелек. (reply to 260044)

User<5398011278>: доброго времени суток

User<5398011278>: как можно получить адреса из публичного ключа? через node js

Viacheslav: как понять, использует ли контракт библиотеку? жетон контракт для хранения wallet code.   https://tonscan.org/jetton/EQCvxJy4eG8hyHBFsZ7eePxrRsUQSFE_jpptRAYBmcG_DOGS#source:~:text=1)%20%3B%3B-,Empty%20libraries,-.end_cell(  вот этот например

Viacheslav: и ссылка на библиотеку хранится только в jetton-master адресе или еще wallet тоже? если например один юзер решит переслать жетоны другому, у которого никогда их не было

Василий: Это контракт минтера. Библиотека используется в контракте кошелька. Чтобы это понять нужно дёрнуть get_jetton_data, и проверить тип клетки jetton_wallet. Идентификатор типа клетки для библиотеки - 2. https://docs.ton.org/v3/documentation/data-formats/tlb/library-cells#using-in-tonton Клетка библиотеки хранится как в минтере, так и в стейте контракта кошелька. (reply to 260064)

Viacheslav: я запросил get_jetton_data.. а как мне понять тип клетки? (reply to 260067)

Василий: Декодировать boc, а дальше в зависимости от используемой бибилотеки получить тип. Например в @ton/core, у клетки есть поле type. (reply to 260070)

Viacheslav: ппц.а по коду никак понять нельзя разьве? (reply to 260072)

Василий: Код такая же клетка как и любая другая. Можно понять по типу этой клетки. Или я не понял вопроса? (reply to 260073)

Viacheslav: думаю правильно поняли. (reply to 260074)

Viacheslav: а за что тогда этот инт отвечает? (reply to 260063)

Иван: Всем привет, подскажите пожалуйста в контракте editable collection что можно менять вообще? Можно ли менять лого и название коллекции?

Василий: Там может быть словарь с хешами библиотек, которые код контракта может использовать. В таком варианте словарь пустой. (reply to 260080)

Viacheslav: но это не означает что jetton-wallet не использует библиотеку из мастерчейна чтобы передавать код контракта при трансфере да?

Василий: В клетке кода все ещё может быть клетка библиотеки. Означает что код не использует других библиотек (reply to 260083)

Viacheslav: а каких именно других библиотек он не использует? (reply to 260084)

Viacheslav: а в blueprint каждый it оказывается наследует состояние контрактов от предыдущих тестов? например я сделал в первом it минт и во втором у меня такой же баланс жетонов

&rey: Если контракты должны стираться, надо создавать блокчейн в .beforeEach. Или сразу в it. (reply to 260089)

Viacheslav: какой кошмар( я взял тесты из moder_jetton и изменил просто в jetton_master.min() то что после вызова админ становится null() и.. все тесты упали тк там проверки то по газу не прошли то еще чего.  beforeEach тоже особо погоды не сделал тк в тестах захардкожены прям значения с учетом того что блокчейн не пересоздается каждый тест

Conscience Not Found: Привет всем. Максимально тупой вопрос, но если я хочу взаимодействовать с жетонами с фронта (хочу создать, а потом изменить его content) как это вообще правильно будет сделать? Пока мне удалось проинициализировать минтер, а мастер никак почему-то

Василий: Это достаточно старый реп с жетоном на фиксированных в тонах комиссиях.  Плюс к этому, тогда sandbox только зарелизили, и вполне возможно что там не best practice тестовый код. Я бы посмотрел в сторону: https://github.com/EmelyanenkoK/basecoin или https://github.com/OpenBuilders/notcoin-contract/tree/mainnet если есть желание использовать уже задеплоенную либу notcoin/dogs (reply to 260091)

Александр: Привет. Кто знает, почему одна и та же транзакция в блокчейне может быть под разными хешами? Я инициирую транзакцию, получаю хеш и сохраняю в бд, после чего хочу получить по нему LT, но хеш не совпадает с тем что в блокчейне. Библиотека ton/ton.

Александр: Скажите пожалуйста есть ли смысл тут задавать такие вопросы, а то обычно никто не отвечает)

&rey: Потому что одно — хеш транзакции, а другое — хеш сообщения. (reply to 260106)

Александр: Ааа, кажется понял. Буду разбираться дальше. Спасибо!

Cardinal: привет ребят, можно ли как то узнать какой токен пришел в смарт контракт через transfer_notification?  задача в том чтобы принимать только свой токены, и только после проверки делать остальную логику

delthisgem: Не подскажите где я ошибся?  хотел воспользоваться контрактом (с хайлоад кошелька) для обмена нфт notcoin ваучеров на токены  посмотрел что при передачи нфт достаточно прокинуть у forward_payload от нтф, опкод обмена и айдишник нфт еще там внутри контракта много валидаций, но вроде бы все их прошел но я так и не смог обменять🥺 еще заметил что там несколько контрактов на обмен, и у каждого есть свой min max допустимого айдишника нфт, но там записаны в max очень большые числа, а самих нфт намного меньше, ну ладно  мой неудачный пример: 3643e067198984a212ebf0d621459ad97787f3791fa1ab062d070203c74acdf1 и уже успешный перевод нфт через тонкиппер: c9c3900d2ea94c3b1a8593ca60131e395b2cfde76b3cb706a967322cbe09e170

наз: расчитываешь свой жетон валлет нужного жетона и сверяешь он ли прислал тебе transfer_notification (reply to 260110)

Cardinal: спасибо ❤️ (reply to 260114)

𝕀𝕚𝕤𝕦𝕤: Привет всем, можно ли перевести мем-коины на TON через tonconnect/ui?  к примеру NOT: я хочу перевести с одного кошелька на другой  у меня проблема с генерацией boc

𝕀𝕚𝕤𝕦𝕤: ошибка:

delthisgem: кажется ты обращаешься к контракту токена, вместо жеттон воллет (reply to 260118)

𝕀𝕚𝕤𝕦𝕤: а где получить контракт? (reply to 260120)

delthisgem: он берется из контракта токена через этот метод, только аргументом нужно прокинуть холдера (reply to 260121)

delthisgem: это ты к своему обращаешся ? я не уверен что можно жеттон самому себе отравлять) я не читал его код (reply to 260125)

Max: Можно (reply to 260128)

наз: а зачем (reply to 260129)

Max: Нам тестировать Tonkeeper удобно  Для части разработчиков даппов тоже может быть полезно  А с в случае с контрактом NFT это вообще простой способ вернуть «излишки» TON с контракта (reply to 260130)

delthisgem: о прикол, а что если на нфт домене грамма лежит один тон, можно вернуть?) (reply to 260131)

𝕀𝕚𝕤𝕦𝕤: всё равно не понимаю)

𝕀𝕚𝕤𝕦𝕤: а туда обязательно такой вид кошелька?

Max: Надо смотреть, какая константа минимального кол-ва TON, которое должно остаться, зашита в коде  Чаще всего зашивают либо 0.05 TON, либо 1 TON   Вот в NFT доменов скорее всего зашит остаток в 1 TON (reply to 260132)

delthisgem: я забыл как этот вид адреса называется

𝕀𝕚𝕤𝕦𝕤: я получил, и та же самая ошибка (reply to 260125)

Max: Уменьшите forward_ton_amount (reply to 260139)

Max: До 1 нанотона, если будете слать токены только на контракты кошельков, этого будет достаточно

𝕀𝕚𝕤𝕦𝕤: а в циферках можно?) (reply to 260141)

Max: 1)

𝕀𝕚𝕤𝕦𝕤: 1.0?

Max: Нет

Max: .storeCoins(1)

𝕀𝕚𝕤𝕦𝕤: сюда просто 1?

Max: Уберите вообще toNano, вам он не нужен

Max: Да (reply to 260147)

𝕀𝕚𝕤𝕦𝕤: всё равно ошибка

Max: Ну подпишите транзакцию, посмотрите exit code и будет понятно, что не так

𝕀𝕚𝕤𝕦𝕤: а как?) (reply to 260152)

SweetJesus: просто подтверди (reply to 260154)

𝕀𝕚𝕤𝕦𝕤: https://tonviewer.com/transaction/66f5d3c21a584a472c6cd55fe4a4e5f95e654f165e39586fd4cffcb555b6bc6c

SweetJesus: шлешь трансфер не на свой жетон волет (reply to 260156)

𝕀𝕚𝕤𝕦𝕤: а теперь? получаю. exit code 48  https://tonviewer.com/transaction/9a5f473f35a57d6cd06e4fd82b02a2ecdefc533de293608f0d6bd66985fa5edf?section=trace (reply to 260157)

𝕀𝕚𝕤𝕦𝕤: Всем спасибо) У меня получилось

Григорий Н.: Всем вечерний шалом ! А есть кто сайты красивые делает в ton ?

D.K.: Доброй ночи. Есть чатб Jobs, спросите там) (reply to 260168)

Григорий Н.: Если дадите ссылку на него, буду благодарен. (reply to 260169)

D.K.: Сюда нельзя(. Зайди на офф.сайт тон, там она должна быть. Раздел сверху, для разработчиков вроде😉 (reply to 260170)

m0sk1t: Всем привет) Проконсультируйте пожалуйста по такому вопросу - допустим я хочу создать тупого in/out бота с кошельком, отправил ему токен, он тебе взамен другой какой-нибудь (что-то типа свапа но не по курсу, а 1к1, например лью 1 тон, получаю 1 гидру). Крч web2 с кошельком, бизнес логика на бэке. Я так понимаю мне нужно создать бесконечный цикл и с периодичностью, например, раз в минуту чекать транзакции в кошелёк? Или есть какая-нибудь очередь к которой можно присосаться? Редис какой-нибудь или Кафка условно. Как решается вопрос с уведомлением пользователя что всё прошло успешно?) Много где лазал, не нашёл удобного способа. Может быть есть уже готовые решения или best practices. Документация выглядит дюже хаотичной(

&rey: Вам стоит контракт сделать, а не бэкенд. (reply to 260180)

m0sk1t: Я, к сожалению, не разбираюсь в этом, плюс в нашем БС аж 3 ЯП разных для написания смартов, я в этом полгода буду разбираться... Хочется поскорее запуститься пока запал не угас) Плюс не так много свободного времени (reply to 260181)

&rey: Контракт проще, потому что он синхронизацию от блокчейна получит. Обмен в одну сторону? Принимаются тоны или жетоны? (reply to 260183)

m0sk1t: Принимаются тоны, отправляются жетоны

m0sk1t: Даже не так, жетоны начисляются в баланс бд, потом можно будет запросить withdraw, и бот отправит на кошель

&rey: FunC: () recv_internal(int got_ton, cell in_msg_full, slice in_msg_body) { ... } (reply to 260185)

Viacheslav: Почему когда я после окончания минта в контракте админа записывают как null(), то у меня падает тест (транзакция деплоя нового jetton-wallet exit code 7), а если вместо null() поставить к примерy my_address() то все ок?  save_data(total_supply + jetton_amount, null(), next_admin_address, jetton_wallet_code, metadata_uri); тест   const mintResult = await jettonMinter.sendMint(deployer.getSender(), deployer.address, initialJettonBalance, null, null, null, toNano('0.05'), toNano('1'));          const mintTx = findTransactionRequired(mintResult.transactions, {             from: jettonMinter.address,             to: deployerJettonWallet.address,             deploy: true,             success: true         });

&rey: Ну и там дальше 1) достать адрес отправителя, 2) посчитать, сколько тон принимается в счёт покупки, а сколько для перевода жетонов, 3) сделать сам перевод, отправив transfer order на жетон-кошелёк контракта, 4) параллельно отправить оставшиеся тоны хозяину. (reply to 260187)

m0sk1t: Понял) Ошибся чатом 😂

Oleg: "Не в ту дверь"?) (reply to 260190)

m0sk1t: Попробую переформулировать: - пользователь присылает тон - на этот тон делается покупка рандомного жетона (естественно цена должна быть ниже, плюс доставка, плюс налоги, плюс на пиво) - в бд пишется +1 к балансу жетона для него - жетоны копятся на кошельке - в какой-то момент цена жетона взлетает - пользователь вспоминает о боте, заходит и выводит свои жетоны, затем в стакан Назову бота "Зимняя куртка")

&rey: Ну вот слушалка транзакций: https://github.com/toncenter/examples/blob/main/deposits.js. (reply to 260192)

m0sk1t: Это я видел, я выше упомянул что натыкался на использование цикла с таймаутом, речь шла именно об этом коде (reply to 260193)

m0sk1t: Т.е. по сути без смарта можно только так, да?

&rey: Да много как. В коде, который я скинул, цикла-то вовсе нет. (reply to 260195)

m0sk1t: Ну я образно, просто js же однопоточный, производительность будет не очень как мне кажется, хотя с промисами наверное нивелируется возможность блокировки

m0sk1t: Ок, попробую для начала разобраться в этом, спасибо) (reply to 260193)

— 2024-11-02 —

Jenya: как из tonconsole удалить проект? он мне глаза мозолит

Abdulaziz: Разбомбить сервера tonconsole (reply to 260202)

кивель: Всем привет, а что за скам токен? Что будет, если свапнуть попытаться?

Серго: либо не сможешь либо весь кош заберут, будь внимателен при подтверждении транзакции, но если не сможешь продать, можешь отправить его мне называется ханипот (reply to 260213)

кивель: А смысл ханипот рассылать, пользователи все равно покупать не будут (reply to 260214)

Серго: плохо пользователей знаешь. будут) (reply to 260215)

кивель: То есть это просто реклама ханипота такая? (reply to 260216)

Серго: в каком то смысле)  Если не получится продать, можешь его мне отправить ? (reply to 260217)

rends_east: Да Мне тоже пришли, интересно (reply to 260217)

Andy: Добрый день. А в тон реализована возможность автоматических платежей? Т.е. можно ли подписать пользователя на ежемесячный платеж

Vasilii: Да (reply to 260220)

Andy: Как это реализовать? В документации написано что нужен wallet v4. Но у меня просто приложение я прокидываю пользователя в кошелек через ton http bridge. Буду благодарен, если скажете что гуглить/читать

rends_east: Почитайте про плагины на wallet контракт (reply to 260222)

&rey: TON Connect 2 не поддерживает. Просите мнемонику. Давайте ссылку на исходники приложения и просите проверить, что пользователь на правильном домене. (reply to 260222)

Andy: Я ничего не понял) что такое мнемоника? Кого просить?) я пишу мини апп на флаттере + бэк на питоне/руби

&rey: Мнемоника — секретные 24 слова пользователя, которые он никому передавать не должен. Вот их у пользователя и спрашивайте каким-нибудь текстовым полем. Напоминайте, что в обычном случае никакие 24 слова пользователь вводить в приложения не должен и объясняйте, почему у вас это для него безопасно. (reply to 260226)

Andy: Ничего себе, спасибо

&rey: Желательно ещё, чтобы контракт-плагин при каждом списывании ещё и комментарий на кошелёк пользователя посылал, объясняющий "за что таки".

Andy: А отменять такой платеж он где сможет?

&rey: Во-первых, с помощью такого же приложения, вводя 24 слова опять. Вроде можно сделать безопаснее — чтобы ваш плагин уничтожался при посылке текста на него. (reply to 260231)

User<7477778179>: /stat@combot

Yan ☻️: кто то может помочь с ton-connect

Yan ☻️: как изменить кнопку как сделать ее к примеру черной

Yan ☻️: я просто не понимаю как это сделать

Сева: https://ton-connect.github.io/sdk/interfaces/_tonconnect_ui_react.TonConnectButtonProps.html попробуй пропсы прокинуть (reply to 260242)

Vasilii: Ахахахахаахаххз (reply to 260228)

Sergei: Всем привет. Ребята с опытом создания крипто- комьюнити отзовитесь, есть офер.

EVMlord: Lets TOLK

ARKHAMER: Всем привет, мож кто в курсе. Юзернейм отлежался больше двух недель, но на фрагмент на аукцион выставить не могу.

Dmitry: Всем привет. Подскажите есть возможность покупать созданные токены за Tg Stars?

User<7433202881>: Попробуй почисти куки в браузере, переподлючись, и попробуй если точнотбользе 14 дней прошло (reply to 260284)

User<7433202881>: Либотчерез get gems попробуй выставить. Проверить.

ARKHAMER: Спасибо (reply to 260289)

ARKHAMER: А через ГГ как? Юзер еще не цифровой., а так все почистил, и не получилось (reply to 260291)

User<7433202881>: Ну так в этом и вопрос, вы его даже не конвертировали в нфт. Возможно у вас на балансе не достаточно тон? Там нужно 10 минимум и комиссия. В этом и причина может? (reply to 260300)

ARKHAMER: Нее, вы не поняли... Он вообще не дает выставить на фрагмент даже ценник выставить (reply to 260303)

ARKHAMER: Пишет как будто не прошло 2х недель

ARKHAMER: Ну ща я его сбросил, и заново перебил, засеку 2 недели. Попробую еще

User<7433202881>: Скорее всего время не прошло тогда. (reply to 260307)

User<7433202881>: Других объяснений этому нет

User<7187123838>: Доброе утро! Подскажите, пожалуйста, как можно получить API для использования набора стикеров в mini-app.

L: Здравствуйте, столкнулся с неприятной ситуацией а именно MEV боты. Я не сильно углублён в работу сети тона, но мне казалось повышением газа нельзя дать приоритет свой транзакции. тогда как это возможно?

&rey: Ну так никакого приоритета у них и нет. (reply to 260352)

L: удалило фотографию (reply to 260352)

L: а как тогда он может заставить выполниться свою транзакцию раньше? (reply to 260354)

Оскар: если ты отправил транзакцию раньше другой, это не значит что она раньше дойдет просто с тобой устроили "гонку" транзакций, как видишь - не все транзакции у этого контракта успешные защита - ставить разумный slippage (reply to 260356)

&rey: Сделать так, чтобы она меньше маршрутизировалась по шардам — ваш кошелёк, жетон-кошелёк и тому подобное должны быть в одном шарде (первые четыре бита адреса). (reply to 260356)

L: Понял, спасибо (reply to 260358)

Andy: Делаю мини апп для телеги, пытаюсь привязать кошелек через http bridge. Как правильно ссылку открывать? Через открытие нового окна не работает на айос, ощущение что поп ап блокируется

Viacheslav: это dns который на контракт прилинкован? или это днс адреса деплоера?

Vasilii: Это дыра в тон апи, на которую все забили (reply to 260381)

Gregory: Чувак, который хотел просто собрать авторизационные кукесы такой: (reply to 99)

Mike: а есть ссылка на тулзу? (reply to 260383)

Gregory: Не, только сам увидел у тбук новость

Viacheslav: это когда на чужой контракт можно днс прилинковать свой? (reply to 260382)

Viacheslav: что означает H в конце строки? "url"H

Viacheslav: и не пойму, зачем добавлять decimals в словарь, если есть uri и это там можно разместить

SweetJesus: Hash (reply to 260392)

SweetJesus: https://t.me/tondev/247655 (reply to 260392)

Василий: Например чтобы доступность decimals не зависела от web2 сервиса, на котором размещается оффчейн мета. (reply to 260393)

Fuckintosh: подскажите, пожалуйста, можно ли как то в одной транзе реализовать мультисенд тона на несколько кошельков?

&rey: *за одну посылку экстернала кошельку. Можно. Обычные кошельки поддерживают до 4 переводов, preprocessed до 255. (reply to 260404)

Viacheslav: Открыл код библиотечного файла жетона и не пойму, зачем он посылает raw_message на адрес senderа?

&rey: Чтобы все [оставшиеся после raw_reserve] тоны убрать с контракта. (reply to 260413)

Viacheslav: В скрипте деплоя библиотеки стоит отправки 10 ton, это сейчас 49$. а я читал тут в чате что говорили о суммах 10к$ чтобы задеплоить и она хранилась 100 лет..  я не так понял чтото?

Julius: Кто знает про ситуацию с контрактами Julius Meinl парень?

Viacheslav: у меня скрипт деплоя библиотеки для мастерчейна. как мне в blueprint указать что я хочу именно в masterchain его пульнуть?а

Viacheslav: выбрать в network - custom и указать rpc?

Ruslan: Воркчейн просто поменять на -1, нет? (reply to 260428)

Viacheslav: а где это можно сделать? (reply to 260430)

Ruslan: Ну в месте где строится адрес контракта (reply to 260431)

Viacheslav: я хочу библиотеку зедеплоить в мастерейчен просто.. через npx blueprint run.. (reply to 260432)

author: Если у кого то есть возможность донести репорт до тг-девов,поспособствуйте, нужен фикс в версии для ios : реализовал динамический сайт на .ton домене, get/post запросы доходят с android-версии тг  с полным req.query, в ios-версии доходят пустыми, приходится костыль с редиректом на .sc или .run зону делать анализируя если apple устройство., с кем общался из знакомых покомпетентнее - говорят баг.

author: Типо так

SweetJesus: ну тебе ответили, что нужно у адреса айди воркчейна поменять, с 0 на -1. (reply to 260434)

Viacheslav: у какого адреса? я при запуска скрипта выбираю сеть в blueprint - testnet/mainnet - а вот где указать чейнид я не пойму.. (reply to 260437)

Viacheslav: или хотите сказать что если я задеплою в basechain, и поменяю id в адресе, то смогу найти по этому адресу контракт в мастерчейне?

Ivan: Угу  Но он будет пустой (reply to 260440)

Viacheslav: а как сделать чтобы был не пустой?) мне пустой понятное дело не нужен (reply to 260441)

Ivan: Задеплоить в мастерчейн  У вас в скрипте явно или неявно указан адрес куда отправлять сообщение, в этом адресе надо поменять бейзчейн на мастерчейн  Это не testnet/mainnet, это другое (reply to 260443)

odnokasanie: интересно, как это они ончайн сбросят балансы? хардфорк? (reply to 259707)

Андрей: Вы как в первый раз) Выключить все валидаторы, запустить по новой с нуля) Посмотрите в историю тестнета, ее уже перезапускали же (reply to 260445)

Viacheslav: нашел. (reply to 260444)

odnokasanie: Это же все контракты пропадут, да? Я остутствовал при выключении тестнета (reply to 260446)

Viacheslav: Еще вопрос по коду jetton-wallet в библиотеке..  Возьмем контракт stablecoin из репозитория ton-blockchain. Вот у них в скрипте деплоя jetton-minter записывается ссылка на библиотеку с кодом jetton-wallet. Значит когда админ будет минтить людям жетоны, то... Вот в самом wallet-jetton когда мы пересылаем другому юзеру жетоны, используется my_code() а не чтение кода из библиотеки.. https://github.com/ton-blockchain/stablecoin-contract/blob/7a22416d4de61336616960473af391713e100d7b/contracts/jetton-wallet.fc#L55  и в сторадже wallet не хранит свой код..  получается библиотекой пользуется только админ, когда минтит людям жетоны, и чтобы не читать из стораджа, читает из библиотеки?

Viacheslav: можите объяснить плз про library?)

Ivan: my_code тоже должен library вернуть (reply to 260451)

Viacheslav: ого - как же он догадается это сделать? (reply to 260460)

Ivan: Ну если изначально туда положили библиотеку, то почему бы она заменилась на что-то другое сама? (reply to 260461)

Viacheslav: а туда это куда? ведь в сторадже jetton-wallet у usdt не хранится код самого jetton-wallet..

Оскар: это просто ссылка на ячейку, твм видит когда у выполняемого контракта лежит либа и "дереференсит" эту ссылку, my_code() отдаёт эту же либу и отправляет дальше - всё отлично работает, в контракте в коде всегда хранится либа, твм "на ходу" подменяет её актуальным кодом во время выполнения (reply to 260459)

Ivan: Когда первый jetton-wallet создавался, туда попала бибилиотека, она так и скопировалась на все остальные кошельки (reply to 260466)

Viacheslav: а чтобы задеплоить в тестнете в masterchain - тоже указывать -1?

Viacheslav: 10 тон чтото не хватает в тестнете -1

Viacheslav: у меня больше и нет чтобы затестить.. сколько примерно надо?

BlockRunner: Ton dns можно будет привязывать к миниапам или ботам?

/B4ckSl4sh\: Нет (reply to 260476)

Kirill: Всем привет. Подскажите пожалуйста с чего подступиться к следующей задаче. Необходимо, условно раз в минуту, смотреть какие транзакции поступили на смарт контракт, на что они повлияли и записывать изменения в бд. Из насущных вопросо: есть ли нормальные библиотеки для python что б это сделать? Как в дальнешем можно было бы распределить нагрузку на несколько серверов?

Василий: Просто уменьшите duration в коде librarian. На 100 лет стоит 1100 с чем-то тон, но вам ведь не нужно на 100 лет (reply to 260472)

Yan: фронтовики в дм

А: Это тебе на госуслуги (reply to 260484)

Yan: )))

Тимофей: Ребята, вопрос по ton-utils в GO. Не получается спарсить body у internal messageю Пишет ошибку: magic is not correct for jetton.TransferNotification, want #7362d09c

Dmitriy: Первые 32 бита сообщения (opcode) не соответствуют опкоду трансфер нотификейшна, который равен 0x7362d09c Короче говоря, сообщение которое вы парсите — это не трансфер нотификейшн (reply to 260490)

Viacheslav: Я у wallet-jetton убрал из стораджа status ну и везде в load_data и save_data тоже. тесты из репы показывают что увеличилась минимальаня комиссия .. на 100000 гдето.. как такое может быть?

Viacheslav: https://www.diffchecker.com/luVDGroL/

Михаил: Привет, ребята Подскажите есть ли какие-то общедоступные сервисы на которых возможен мульти-минт нфт? По умолчанию пользуемся гетгемс, но там можно только по одной нфт за раз минтить

Viacheslav: Почему на tonscan не прогружается логотип?  https://testnet.tonscan.org/jetton/EQBoQYlcxxkHiR3fIN7SuZrSW98rZ-9vyntW3Kb4LpruXFqr а тут есть https://testnet.tonviewer.com/EQBoQYlcxxkHiR3fIN7SuZrSW98rZ-9vyntW3Kb4LpruXFqr  мб из за того что metadata ончейн пометка стоит.. и тонскан видит пустоту в ключе image? урл картинки в json расположен..  но ноткойн в мейннете имет логотип у тонскана и точно также там все..

Andy: Всем привет. Делаю мини апп, как под айос сделать переход для привязки кошелька под  http bridge? Не открывается ссылка  никак(

Viacheslav: насыпьте плз еще тестовых тонов - 0QBhiNeEMpzjKwtrKMc1_wwPIPsQ1n9I40IlkfO-e-WCrqWa буду акуратнее расходовать 😄

User<7433202881>: Ты много расходуешь🤷‍♂😂👌 (reply to 260508)

.none: Всем привет, подскажите, пожалуйста, как можно полностью сэмулировать процесс перевода jetton с кошелька A на кошелёк B используя python и pytvm.   Сейчас у меня реализация ниже:   emulator = TransactionEmulator()    result = emulator.emulate_transaction(state.cell, message)  однако при такой реализации я вижу лишь 1 ребро всего дерева транзакций, я не вижу в переменной result что происходит после этапа отправки jetton на jetton_wallet_a, а хотелось бы.

Ruslan: используй TraceEmulator, он в pytvm есть (reply to 260513)

Viacheslav: я првильно понимаю,что в библиотеку в мастерчейне уже не доложить потом эфира?

&rey: Почему же? Она доступна, пока контракт не удалится от нехватки тонов — просто пошлите туда больше, будет храниться дольше. (reply to 260516)

Viacheslav: в контракт же нельзя просто отправлять тон(нужно через опкод топап типа), а у библиотеку по другому? (reply to 260518)

— 2024-11-03 —

Оскар: даже если контракт падает при пустом месседже (вместо того чтобы молча принять тоны) - можно убрать флаг баунса для отправляемого интернала и тогда даже в случае ошибки тоны останутся на нем (reply to 260519)

mackey: Как разработчик мини-приложения для кошелька, как я могу интегрировать tonconnect/sdk, чтобы устанавливать соединения с другими DApp и предоставлять возможности, связанные с кошельком?

author: Всмысле «будет», можно всё привязывать (reply to 260476)

User<6907275283>: Ищу команду/работу/проект Сам являюсь fullstack-разрабом

Sol: как найдешь мне сообщи пожалуйста (reply to 260535)

sd: А кто-то что-то разместил насчёт нового продакшен риди языка tolk? Куда подписываться?

Lapis⁴² 💎: Всем нам (reply to 260536)

Андрей: А делал кто площадку для фриланс под тон с отзывами, отображением заказа и результата работы? Слышал что делали, но сам не видел. Было бы классно иметь такой

Lapis⁴² 💎: Конкретно TON DNS - не ясно. Но можно купить юзернейм на фрагменте и получить адрес username.t.me который можно привязать к кошельку. Отличие только в окончании .t.me вместо .ton по большей части. (reply to 260476)

Denys: Привет всем, я сейчас пишу тесты на blueprint и мне нужна помощь в одном вопросе: у меня тут создаются deployer и bridge: let deployer: SandboxContract<TreasuryContract>; let bridge: SandboxContract<Bridge>;  deployer = await blockchain.treasury("deployer");  bridge = blockchain.openContract(       await Bridge.fromInit(deployer.address, deployer.address, pub_key) );  Дальше я хочу сделать минт токенов на какой-то адрес: const deployTokenResult = await fungibleToken.send(   deployer.getSender(),   {     value: toNano("0.05"),   },   {     $$type: "Mint",     amount: supply,     receiver: bridge.address,   } );  Суть в том, что владельцем токена является bridge, а не deployer, поэтому мне нужно отправить эту транзакцию от bridge, потому что в функции mint есть проверка на владельца, но я не могу использовать метод getSender для bridge, только для deployer, как это решить?

Fuckintosh: Всем привет, подскажите, пожалуйста, какой библиотекой лучше воспользоваться и где можно подглядеть пример чтобы отправлять жетоны?(nodejs)

Rayan: [debug]   03.11.2024, 07:53:42.266 (UTC)  <MainThread>  start GetValidatorStatus function [warning] 03.11.2024, 07:53:42.278 (UTC)  <MainThread>  GetValidatorStatus warning: int() argument must be a string, a bytes-like object or a real number, not 'NoneType' [debug]   03.11.2024, 07:53:42.278 (UTC)  <MainThread>  start GetValidatorWallet function [debug]   03.11.2024, 07:53:42.278 (UTC)  <MainThread>  start GetLocalWallet function [debug]   03.11.2024, 07:53:42.278 (UTC)  <MainThread>  start GetWalletFromFile function [debug]   03.11.2024, 07:53:42.279 (UTC)  <MainThread>  start WalletVersion2Wallet function [debug]   03.11.2024, 07:53:42.279 (UTC)  <MainThread>  start GetDbSize function ===[ Node status ]=== ADNL address of local validator: *** Public ADNL address of node: *** Load average[32]: 3.23, 3.75, 3.89 Network load average (Mbit/s): 48.75, 54.49, 59.86 Memory load: ram:[25.3 Gb, 19.8%], swap:[0.81 Gb, 19.0%] Disks load average (MB/s): md0:[0.0, 0.0%], nvme0n1:[0.0, 0.0%], nvme1n1:[0.0, 0.0%], sda:[21.8, 97.5%] Mytoncore status: working, 18 hours Local validator status: working, 2 hours Local validator out of sync: n/a Local validator last state serialization: None blocks ago Local validator database size: 63.95 Gb, 2.8% Version mytonctrl: e0ead70 (master) Version validator: eed3153 (master)  Привет, этот статус подходит для liteserver?

Asadbek: Всем привет  Пытаюсь подключить на Vue приложение Ton Connect чето не получается  Мне надо пополнение баланса и привязку кошелька сделать  Кто может помочь? Оплачу за консультацию

Василий: Можно использовать blockchain.sendMessage либо blockchain.sender(bridge.address) (reply to 260544)

Cardinal: привет, можете подсказать, где и как рисуют схемы смарт контрактов? или может какой нибудь пример, вроде раньше одну видел, но не смог найти

Perov: Доброго времени суток. На официальном сайте тона написано, что tact все еще в разработке. Целесообразно начинать писать контракты сейчас на tact или лучше на func?

наз: лучше на func (reply to 260554)

/B4ckSl4sh\: лучше на TOLK (reply to 260554)

/B4ckSl4sh\: Его вчера только представили

Smbat: Добрый день всем. Ребят пытаюсь использовать https://github.com/ton-blockchain/minter-contract npm build выдает ошибку  FATAL ERROR: 'func' with version >= 0.2.0 executable is not found, is it installed and in path? поможете найти решение?

X1ag: https://github.com/ton-blockchain/tolk-vscode (reply to 260537)

Smbat: путь к файлу  C:\Users\user\Desktop\minter-contract-main\node_modules\ton-compiler\bin\macos\func файл создан. При попытке открыть вручнуюпишет The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding.(VC Code) (reply to 260559)

Denys: почему-то возникает ошибка если я использую blockchain.sender(bridge.address), я создаю deployer и bridge deployer = await blockchain.treasury("deployer"); bridge = blockchain.openContract(       await Bridge.fromInit(deployer.address, owner.address, pub_key)     ); создаю fungibleToken и передаю bridge.address как овнера fungibleToken = blockchain.openContract(       await FungibleToken.fromInit(bridge.address, content)     );  отправляю транзакцию const deployTokenResult = await fungibleToken.send(       blockchain.sender(bridge.address),       {         value: toNano("0.1"),       },       {         $$type: "Mint",         amount: supply,         receiver: bridge.address,       }     ); тут проверяю была ли транзакция успешной     expect(deployTokenResult.transactions).toHaveTransaction({       deploy: true,       success: true,     }); но получаю такую ошибку     Expected [       {         lt: 2000000n,         now: 1730625618,         outMessagesCount: 1,         oldStatus: 'uninitialized',         endStatus: 'non-existing',         totalFees: 133331n,         from: EQBvGXXpMLNxArOErC3ImDYix1jPeZNP6urwMrUv0HmFXfTS,         to: EQA5uFcX0JRnwlMfv12Qinu6gcQqStrFPL9HUu9Rgf6GrKGi,         on: EQA5uFcX0JRnwlMfv12Qinu6gcQqStrFPL9HUu9Rgf6GrKGi,         value: 100000000n,         body: x{FC708BD200000000000000000000000000000000000000000000000000012F2A230E92004006F1975E930B37102B384AC2DC8983622C758CF79934FEAEAF032B52FD079855D},         inMessageBounced: false,         inMessageBounceable: true,         op: 4235234258,         initData: undefined,         initCode: undefined,         deploy: false,         aborted: true,         destroyed: false,         exitCode: undefined,         actionResultCode: undefined,         success: false       },       {         lt: 3000000n,         now: 1730625618,         outMessagesCount: 0,         oldStatus: 'uninitialized',         endStatus: 'uninitialized',         totalFees: 0n,         from: EQA5uFcX0JRnwlMfv12Qinu6gcQqStrFPL9HUu9Rgf6GrKGi,         to: EQBvGXXpMLNxArOErC3ImDYix1jPeZNP6urwMrUv0HmFXfTS,         on: EQBvGXXpMLNxArOErC3ImDYix1jPeZNP6urwMrUv0HmFXfTS,         value: 99600000n,         body: x{FFFFFFFFFC708BD200000000000000000000000000000000000000000000000000012F2A},         inMessageBounced: true,         inMessageBounceable: false,         op: 4294967295,         initData: undefined,         initCode: undefined,         deploy: false,         aborted: true,         destroyed: false,         exitCode: undefined,         actionResultCode: undefined,         success: false       }     ] to contain a transaction that matches pattern { deploy: true, success: true }        101 |     // });       102 |     > 103 |     expect(deployTokenResult.transactions).toHaveTransaction({           |                                            ^       104 |       // from: bridge.address,       105 |       // to: fungibleToken.address,       106 |       deploy: true,        at Object.<anonymous> (tests/Bridge.spec.ts:103:44)  Test Suites: 1 failed, 6 passed, 7 total Tests:       1 failed, 3 skipped, 9 passed, 13 total Snapshots:   0 total Time:        11.508 s Ran all test suites. Error: Command failed: npm test      at genericNodeError (node:internal/errors:983:15)     at wrappedFn (node:internal/errors:537:14)     at checkExecSyncError (node:child_process:890:11)     at execSync (node:child_process:962:15)     at processTicksAndRejections (node:internal/process/task_queues:105:5) {   status: 1,   signal: null,   output: [ null, null, null ],   pid: 22561,   stdout: null,   stderr: null } (reply to 260549)

𝙄𝙣𝙛𝙞𝙣𝙞𝙩: Здравствуйте. Мы ищем Ton-разработчиков (FunC или Python) в команду энтузиастов OGN, проекта по созданию собственной децентрализованной сети с использованием блокчейна, которая может работать поверх интернета.

Perov: получается, это тот же func, но с более легким синтаксисом? (reply to 260557)

/B4ckSl4sh\: Именно, ну и чуть более очевидный для новичков (reply to 260567)

А: И зачем создавать столько языков

А: Довели бы до ума func. Обставили бы качественными курсами, что все все поняли и все😕😕 а тут

X1ag: func и так доведён до ума

/B4ckSl4sh\: Это вместо funC, так что количество не увеличивается. А tact для других целей, с другой философией (reply to 260569)

/B4ckSl4sh\: Нуууу, спорное утверждение (reply to 260571)

А: А какой? (reply to 260572)

X1ag: но курсов недостаточно, согласен (reply to 260571)

/B4ckSl4sh\: Это гораздо более высокоуровневй business oriented язык, его цель - дать юзерам возможность быстро писать контракты не сильно задумываясь как всё работает под капотом (reply to 260575)

А: Когда быстро нужно что-то создать, классно это)

Smbat: Ребят кто то может мне помочь? (reply to 260559)

А: Тем более это выходит единственным адекватным вариантом сейчас, потому что нормально вкатиться в func можно только постоянным получением ответов тут и кусочничеством по ресурсам (reply to 260578)

А: Когда как на каком-нибудь расте уже горы написаны( (reply to 260580)

/B4ckSl4sh\: Если очень хотите именно тот проект компилировать почему-то, то ищите ton binaries, там будет бинарь func, качаете, добавляете в path (только спойлер, вам ещё понадобится фифт и его либы) (reply to 260579)

Smbat: А что делать? Это стандарт из документации тон фаундейшн поэтому его скачал. (reply to 260582)

Василий: Если в этом сообщении должен прикрепляться stateinit, то blockchain.sender этого не делает. В этом случае лучше использовать sendMessage в явном виде (reply to 260563)

/B4ckSl4sh\: https://github.com/ton-blockchain/token-contract вот этот будет свежее, он на blueprint (reply to 260583)

Smbat: Спасибо. (reply to 260585)

Василий: А кошелек бриджа вообще задеплоен? Похоже что нет (reply to 260563)

Denys: а как использовать sendMessage, как-то так? const payloadCell = beginCell()     .storeUint(0xFC708BD2, 32) // ID для Mint как я полагаю     .storeUint(supply, 64) // amount     .storeAddress(bridge.address)     .endCell();  const deployTokenMessage = {     sender: bridge.address,     to: fungibleToken.address,     value: toNano("0.05"),     bounce: false,     payload: payloadCell, };  const deployTokenResult = await blockchain.sendMessage(deployTokenMessage);  если да, то как мне узнать id сообщения Mint, я на такт пишу и у меня этот метод выглядит так:     receive(msg: Mint) {         let ctx: Context = context();         require(ctx.sender == self.owner, "Not owner");         require(self.mintable, "Not mintable");         self.mint(msg.receiver, msg.amount, self.owner); // (to, amount, response_destination)     } (reply to 260584)

/B4ckSl4sh\: Есть какие-то обёртки для екстернал сообщений в блюпринте? Не нашёл в документации, provider.external в аргументах готовый Cell принимает, где почитать? Ещё с Treasury не очень понятно, он вроде как walletv4, но у него есть пара паблик прайват ключ? Если да, то где взять прайват чтобы подписывать? Если у кого-нибудь есть семпл кода, где он с екстерналами в блюпринте работает, я был бы очень признателен

&rey: У treasury вроде пары ключей не предусмотрено. А экстерналы? Ну, вот так делаются, там достаточно тело сообщения указать: https://github.com/ProgramCrafter/wallet-contract/blob/c4e9271abae8abe554a82e7d34f8c87b073acd8e/wallet-inplug-v2.ts#L224-L227. (reply to 260589)

xDilettante: Не рекомендую использовать MyTonCtrl, советую лучше разобраться как запустить ноду без него. От этого будет больше плюсов и нет ограничения по ОС. Я когда поднимал liteserver времени бы сэкономил пару дней точно, если бы не этот MyTonCtrl  Это лично моё мнение и опыт.  https://github.com/ton-blockchain/ton/blob/master/doc/FullNode-HOWTO (reply to 260546)

/B4ckSl4sh\: Отлично, спасибо большое! Довольно удобно сразу боди отправлять, за исключением наверное того, что несколько сообщений одновременно отправить не получится, но вроде это и не особо нужно (reply to 260590)

xDilettante: К тому же если ты не перезапускал сервис валидатора, можешь видеть что он у тебя уже фэйлился и перезапускался, и скорее всего не один раз и вероятно по причине переполнения памяти(OOM Killer).  Mytoncore status: working, 18 hours Local validator status: working, 2 hours (reply to 260546)

наз: и он также компилируется в .fif, или как такт сначала в func потом в .fif? (reply to 260568)

/B4ckSl4sh\: Сразу (reply to 260594)

&rey: А экстерналы и не предназначены вроде для того, чтобы их по несколько отправлять в чейн. (reply to 260592)

Василий: Смотрите обертку external из @ton/core или sandbox если работаете в эмуляторе. А зачем вам нужна пара ключей от трежери? Она намеренно скрыта от пользователя, т.к это кошелек для тестов в эмуляторе. Для отправки с кошелька трежери используйте myWallet.send(internal({…})) (reply to 260589)

/B4ckSl4sh\: Да, я сначала неправильно понял, что означает отправить только боди. Теперь понял) (reply to 260596)

Denys: вообщем я понял что транзакция через blockchain.sendMessage отправляется так: const result = await blockchain.sendMessage(internal({      from: sender.address,      to: address,      value: toNano('1'),      body: beginCell().storeUint(0, 32).endCell(), })); где в body как я понимаю, я должен указать тип сообщения которое я отправляю и нужные данные. например мне нужно отправить такое сообщение: message Mint {     amount: Int;     receiver: Address; } как это сделать? (reply to 260584)

&rey: Посмотреть в обёртку, сгенерированную тактом при компиляции; там будет store-функция, создающая сообщение. (reply to 260599)

Denys: вы имеете ввиду это? (reply to 260600)

Crypto: Всем привет! Есть те, кто разбирается в сети Sol?  Нужно написать конт трейд бота

ZΣЯΘDΛY: есть, но лучше в солана чат писать) (reply to 260605)

Andrey: Ты бы еще дантиста искал бы тут. Это чат по разработке на TON (reply to 260605)

Denys: я написал такой код по примеру из store-функции:     const mintMessage: Mint = {       $$type: "Mint",       amount: supply,       receiver: bridge.address,     };      function storeMint(src: Mint) {       return (builder: Builder) => {         let b_0 = builder;         b_0.storeUint(0xfc708bd2, 32);         b_0.storeInt(src.amount, 257);         b_0.storeAddress(src.receiver);       };     }      const bodyCell = beginCell();     storeMint(mintMessage)(bodyCell);     const payloadCell = bodyCell.endCell();      const deployTokenResult = await blockchain.sendMessage(       internal({         from: bridge.address,         to: fungibleToken.address,         value: toNano("1"),         body: payloadCell,       })     );  но всё равно возникает ошибка😢 (reply to 260600)

Denys: вообщем я делаю такую проверку: expect(deployTokenResult.transactions).toHaveTransaction({       deploy: true,       success: true,     }); если       deploy: true, убрать, то тест проходит нормально, а если оставить - он падает (reply to 260600)

Denys: всё я решил эту проблему, по своей невнимательности отправлял минт транзакцию до того, как задеплоил контракт токена жаль что из тех ошибок что выводились, это никак нельзя было понять (reply to 260610)

~: Всем привет. Может я конечно где-то прогледел. В общем, задача: создать тестовый жетоны на тест нете тона. Нашел как сделать на маиннете, но как в тестнете нет. Может кто-то знает?

&rey: В чате весьма определённо было. https://minter.ton.org/?testnet=true. (reply to 260612)

Max: Здравствуйте. У меня есть 2 имени пользователя в Telegram, одно это NFT, если я передам этот NFT другому пользователю, потенциально он сможет получить какие-то приватные данные моего Telegram аккаунта к которому привязано это имя или он получает только этот NFT и ничего больше?

~: только нфт, чтоб получить данные надо хотя бы чтобы анонимный номер был привязан был к аккаунту. Не знаю конечно как будет решаться проблема, если вы продали нфт, но юзер на вашем аккаунте, может он сиожет переписать юзер под себя, а телеграмм выдаст другой вам юзер или оставит без него. Про это не знаю (reply to 260614)

Sol: Привет  всем. это func переименовали в tolk?если я хочу писать смарт на func мне выбрать tolk?

Oleg: Нет, это отдельный язык (reply to 260622)

/B4ckSl4sh\: Если вы только начинаете писать смарты, возможно вам лучше выбрать толк (reply to 260622)

Dmitry: Правда отдельной доки по толку пока нет) есть только отличия от func (reply to 260624)

Dmitry: Поэтому прямо сейчас учить tolk не зная func может быть проблематично

/B4ckSl4sh\: Это правда (reply to 260626)

.none: transaction_provider = TransactionEmulator()                    emulator = TraceEmulator(client, transaction_provider, limit=100)          result = await emulator.emulate(external_msg)            # # print(result)          dump_transaction_emualation(result=result) выдаёт ровно то же самое, что и TransactionEmulator. может я делаю что-то не так? (reply to 260514)

Vovlens: Всем привет, подскажите как такие транзакции можно создавать?

User<7931577249>: 2 сообщения отправлять (reply to 260635)

User<7931577249>: wallet_v4 может отправлять до 4 сообщений preprocessed до 255

Vovlens: А точно (reply to 260637)

Vovlens: Спасибо

Cardinal: Привет ребята. Меня интересует, как верифицировать контракты, которые были созданы с помощью другого контракта. Например, тот же jetton_master создаёт другие jetton_wallet, и они автоматически верифицированы.  Или достаточно верифицировать один jetton_wallet, чтобы верификация применялась ко всем?

&rey: Один достаточно. Верификация (публикация исходника и сравнение его с скомпилированным) относится к коду. (reply to 260642)

Cardinal: спасибо 🙏 (reply to 260645)

Егор: Всем привет! Подскажите, пожалуйста, где можно прочитать про то, как проще всего получить из транзакции А транзакцию С? https://tonviewer.com/transaction/8c9588a9c80958ee14372a7c28f828bcad8a5d36f0ac683084a4b6c0cf0dbee1

Dmitry | backend4you.ton: В правом нижнем углу серый зонтик-шестигранник. Тыкните в него (reply to 260647)

Егор: Немного неточно задал вопрос, как можно сделать это не через хттп, а в рамках общения с блокчейном через adnl, или может хотя бы изнутри контракта? (reply to 260651)

Dmitry | backend4you.ton: У каждой транзакции есть одно входящее и несколько исходящих сообщений. По каждому исходящему ищете его как входящее на контракт получатель, и дальше рекурсивно повторяете (reply to 260652)

Егор: Т.е. простого пути нет(  Понял вас, спасибо большое за ответ! (reply to 260653)

Smbat: А можете подсказать как можно сделать Non mintable токен? (reply to 260585)

/B4ckSl4sh\: Mintless? Почитайте в доке. https://github.com/ton-community/mintless-jetton (reply to 260656)

Smbat: Нет. Контракт токена без возможности доминчивания. (reply to 260658)

SweetJesus: это просто флаг в гетметоде. (reply to 260660)

Smbat: Так он же может быть и false. Надо как то этого добиться. (reply to 260661)

/B4ckSl4sh\: Это не особенность контракта, вы после деплоя должны либо закрыть минт, либо сбросить права на нулевой адрес (reply to 260660)

Smbat: на скрине права на нулевом адресе но все равно true (reply to 260663)

Smbat: А как можно закрыть минт? (reply to 260663)

/B4ckSl4sh\: И? Это проблема? Токены может доминтить нулевой адрес))) Если вам уж очень не нравится то надо было раньше закрывать, до того как права сбросили (reply to 260664)

Smbat: Из за этого агрегаторы вместо макс саплая проставят прочерк или напишут что ет макс саплая.А не сильные знатоки будут думать что токен может быть доминчен в дальнейшем. (reply to 260666)

/B4ckSl4sh\: Это ложь, существует множество супер популярных жетонов с mintable = true. (reply to 260668)

&rey: Вроде админские права надо на пустой адрес кидать (null, два нулевых бита), а не на нулевой (256 нулевых бит хеша в воркчейне 0).

Smbat: Ок я не хочу спорить как это повлияет на доверие пользователей. К ноткоину может и нет подозрения что доминтят очень много токенов а к небольшому проекту будут. (reply to 260669)

/B4ckSl4sh\: Для того чтобы украсть наши жетоны придётся  придётся подобрать нулевой хэш, даже если отправлять на нулевой, а не на пустой (reply to 260670)

Smbat: Тоесть негде нельзя поставить флаг mintable false что гарантирует что больше токена не будет наминчено?

/B4ckSl4sh\: Если права уже ревокнуты - нет (reply to 260673)

Smbat: на скрине просто тестовый токен. я в целом для нового спрашиваю который еще не создал. (reply to 260674)

Smbat: Там от прав отказались через UI mintera ton.org (reply to 260670)

/B4ckSl4sh\: Кстати кажется можно ещё и на blackhole отправить (мастерчейн и все единицы в хэш части), тоны отправленные туда сжигаются по настоящему - так что жетоны тоже можно (reply to 260670)

&rey: Главное сами жетоны туда не отправлять, а использовать burn. (Кстати разработчикам USDT: а с чего пользователь не может жечь жетоны? они ж принадлежат ему, не в бессрочной аренде)

Smbat: Гдето можно почитать как это делать? (reply to 260674)

/B4ckSl4sh\: Права на нулевой адрес передать можно на том же minter.ton.org (reply to 260679)

Smbat: https://t.me/tondev/260676 (reply to 260680)

/B4ckSl4sh\: Да вообще я считаю usdt ханик, в котором можно запретить отправлять жетоны (reply to 260678)

Smbat: Я имею ввиду как поставить mintable false когда есть права

/B4ckSl4sh\: А, ну вам транзакцию нужно собрать с нужным опкодом. Не помню, чтобы для этого был ui инструмент - только руками собирать. Если кто-то видел, подскажите (reply to 260683)

&rey: В случае с minter.ton.org, там этот флаг всегда -1 (true), не меняется. (reply to 260683)

Smbat: Гдето то написано как это делать? какието доки? или надо методом тыка? (reply to 260685)

/B4ckSl4sh\: В доках я не видел, проще исходники контракта глянуть (reply to 260687)

SweetJesus: да возьми контракт мастера, засунь булеву переменную в сторадж, сделай throw на минт по этой булевой переменной, допиши в контракт ревок, который будет менять ее с true на false. ну и в гетметоде возвращай её тоже. (reply to 260687)

Smbat: Понял спасибо. (reply to 260689)

Vovlens: жетон мастер принимает burn сообщения?

Vovlens: или только jetton wallet

/B4ckSl4sh\: Он burn notification от жетон воллета принимает (reply to 260693)

/B4ckSl4sh\: А burn только воллет, да (reply to 260694)

Vovlens: а как вот это тогда делается (reply to 260696)

/B4ckSl4sh\: Burn летит на воллет, воллет шлёт burn notification, мастер реагирует на это и что-то делает (reply to 260697)

Vovlens: он же на мастера летит (reply to 260698)

Vovlens: а нет

Vovlens: вообще как то странно выглядит

SweetJesus: почему странно. Каждый жетон волет сам решает сколько токенов ему сжечь, далее сообщает мастер контракту и тот из общего саплая сжигает (вычитает) это количество. (reply to 260702)

User<7931577249>: Мне нужно сделать систему ежемесячных подписок через tonconnect, возможно ли это реализовать через extensions wallet v5?

User<7931577249>: или нужно, чтобы пользователь давал свою сид фразу?

&rey: То и другое одновременно. Без сид фразы плагины не ставятся. Только, если что, плагины существуют с четвёртой версии кошелька.  + Напоминайте, что в обычном случае никакие 24 слова пользователь вводить в приложения не должен и объясняйте, почему у вас это для него безопасно. (reply to 260710)

User<7931577249>: То есть реализовать систему подписок не получится? (reply to 260711)

User<7931577249>: что?

&rey: А что-то мешает всё-таки просить сид фразу? Если что, на бэкенд её отправлять не надо, всё делается с фронта.

User<7931577249>: А, точно, спасибо (reply to 260714)

Ma><im: всем привет, кто-то можем объяснить зачем нужен salt в mintelss jetton мастере, заранее спасибо!

Ma><im: и почему это происхожит так, не нашёл документации  [cell, int] calculate_jetton_wallet_properties_cheap(slice owner_address, slice jetton_master_address, cell jetton_wallet_code, int merkle_root) inline {     {-     https://github.com/ton-blockchain/ton/blob/8a9ff339927b22b72819c5125428b70c406da631/crypto/block/block.tlb#L144     _ split_depth:(Maybe (## 5)) special:(Maybe TickTock)     code:(Maybe ^Cell) data:(Maybe ^Cell)     library:(Maybe ^Cell) = StateInit;   -}     int stop = false;     int min_distance = 0xffff;     int salt = -1;     int min_salt = 0;     (_, int owner_prefix) = parse_std_addr(owner_address);     owner_prefix = owner_prefix >> (256 - 4);     builder jetton_wallet_data_base = pack_jetton_wallet_data_builder_base(0, 0, owner_address, jetton_master_address, merkle_root);     builder jetton_wallet_data_hash_base = pack_jetton_wallet_data_hash_base(jetton_wallet_data_base);     builder jetton_wallet_account_hash_base = calculate_account_hash_base_slice(cell_hash(jetton_wallet_code), cell_depth(jetton_wallet_code), 0);      do {         salt += 1;         int data_hash = calculate_jetton_wallet_data_hash_cheap(jetton_wallet_data_hash_base, salt);         int account_hash = calculate_account_hash_cheap_with_base_builder(jetton_wallet_account_hash_base, data_hash);         int wallet_prefix = account_hash >> (256 - 4);         int distance = wallet_prefix ^ owner_prefix;         if (distance < min_distance) {             min_distance = distance;             min_salt = salt;         }         stop = (salt == ITERATION_NUM) | (min_distance == 0);     } until (stop);     cell state_init = begin_cell()         .store_uint(0, 2) ;; 0b00 - No split_depth; No special         .store_maybe_ref(jetton_wallet_code)         .store_maybe_ref(jetton_wallet_data_base.store_uint(min_salt, SALT_SIZE).end_cell())         .store_uint(0, 1) ;; Empty libraries         .end_cell();     return [state_init, min_salt]; }

&rey: Майнинг жетон-кошелька так, чтобы он оказался в одном шарде с пользователем. Майнинг причём сразу ончейн. (reply to 260717)

Ma><im: а зачем это нужно? (reply to 260718)

Ma><im: в одном шарде

&rey: Чтобы сообщения между пользователем и его жетон-кошельком проходили в рамках блока, а не ожидали маршрутизации. На несколько секунд быстрее цепочки транзакций. (reply to 260719)

Ma><im: то есть в теории это можно убрать, ведь за это "быстро" мы платим газом за вычисления? (reply to 260722)

&rey: Ага. Но вообще не стоит брать код жетонов из репозиториев ton-blockchain — лучше напишите заново. (1. лицензии; 2. плохие практики в коде, как .store_uint(0, 2).store_maybe_ref(jw_code)) (reply to 260723)

Ma><im: и ещё вопрос, например тут: https://github.com/ton-community/compressed-nft-contract явно видел алгоритм работы с деревом меркла, обход веток и т.д.  а в официальном репозитории jetton mintless проверка происходит как-то очень странно, я не понимаю где и как, если честно…

X1ag: откуда вы все знаете?) (reply to 260718)

&rey: в данном случае проверку сваливают на каждую ноду (включая валидаторов): ноды проверяют, что экзотик-ячейка merkle proof корректно составлена (reply to 260726)

&rey: Так же хотите? Можно начать с TON Smart Challenge) (reply to 260727)

/B4ckSl4sh\: Подскажите, пожалуйста, уже в который раз подобная ошибка меня настигает и всё никак не могу пофиксить. Exit code 34 invalid action.  new_msg = begin_cell()                     .store_uint(6, 4)                     .store_slice(my_address())                     .store_slice(destination)                 ;; serialize CurrencyCollection (see below)                     .store_coins(amount)                     .store_uint(0, 1) ;; No extra currencies                     .store_coins(0) ;; ihr_fee                     .store_coins(forward_fee) ;; fwd_fee                     .store_uint(cur_lt(), 64) ;; lt of transaction                     .store_uint(now(), 32) ;; unixtime of transaction                     .store_uint(0, 1) ;; no init-field flag (Maybe)                     .store_uint(1, 1) ;; in-ref message body flag (Either)                     .store_ref(msg_body)                     .store_uint(iter, 32)                     .end_cell(); . Правильность destination адреса проверил - он точно правильный, forward_fee - просто число, там тоже ошибки быть не может, body тоже никого не волнует, в общем 0 идей что может быть не так

X1ag: а можно поподробнее?) (reply to 260730)

X1ag: хочу, очень удивляете глубокими знаниями) Как будто вы сам Емельяненко или Николай Дуров))) (reply to 260730)

&rey: а вот это шо такое? всё тело сообщения должно быть по ссылке, раз уж флаг 1 (reply to 260731)

/B4ckSl4sh\: Майню хэш этой транзы, но это же не должно ничего сломать? Типо по тлб схеме если боди в рефе, то пойдёт просто в рефе читать по идее. Или нужно строго сохранять? (reply to 260734)

Оскар: как раз таки должно (reply to 260735)

Оскар: строго сохранять (reply to 260735)

/B4ckSl4sh\: Прикол, я видимо всё это время неправильно понимал TL-B, я думал оно описывает, что ДОЛЖНО быть в ячейке - а если там что-то лишнее это просто читать никто не будет и никого это не волнует) (reply to 260736)

Оскар: ну на практике всё зависит от того кто читает - как видишь твм не нравится то что там что-то лишнее лежит (reply to 260739)

/B4ckSl4sh\: Кстати вопрос по той же теме, что получится, если мы сохраняем более коротко (например адрес отправителя как 00 записываем), а потом биты в этом селле добьём до 1023 и тогда, когда нода будет подставлять адрес отправителя на место, ячейка переполнится. Получается тоже экшн ошибка будет?

/B4ckSl4sh\: Прикол конечно, спасибо большое за помощь! (reply to 260740)

&rey: Тело сообщения переместится в ссылку. (reply to 260741)

Ma><im: в чате есть ограничение на размер сообщения?

/B4ckSl4sh\: Классно, что так сделали, спасибо! (reply to 260746)

&rey: Просто мне очень интересно, что на тоне сделать можно, а чего не получится — и ради интереса, и чтобы отсеивать проекты, которые бред в роадмапу написали.  На Lesswrong один из таких скиллов называют "binding yourself to reality". (reply to 260733)

/B4ckSl4sh\: https://telegra.ph/Pravila-TON-Dev-Chat-RU-04-29 как будто бы нет) (reply to 260747)

Ma><im: мой вопрос почему-то удаляется(

/B4ckSl4sh\: Может фильтр-боты кринж выдают, хотя они у нас обычно на Дениса Субботина агрятся)))) (reply to 260754)

&rey: Ну, в фильтрах определённо есть что-то про нулевую цену и про раскидывание жетонов кому попало. (reply to 260755)

Ma><im: блин… я не знаю что в сообщении не так, могу вам в лс написать? (reply to 260759)

Михаил: У кого-то есть контакты @delovoyhomie? Больше месяца жду когда посмотрят предложения по bounty program   https://github.com/ton-society/grants-and-bounties/issues/817   https://github.com/ton-society/grants-and-bounties/issues/818

/B4ckSl4sh\: А первое чем лучше signer от тонкипера? (reply to 260762)

/B4ckSl4sh\: И второе тоже существует уже, vanity-contract называется (reply to 260762)

Михаил: Почитайте дальше issue, там есть сравнение (reply to 260765)

Михаил: Этот кошелек был создан раньше signer, сейчас насколько я понимаю signer есть только для  мобильных устройств, что вынуждает покупать отдельный телефон (reply to 260764)

Михаил: Так или иначе, хотелось бы мнение именно от @delovoyhomie, ведь именно он принимает решения, однако связаться не получается

Михаил: Может потратить 5 секунд на закрытие issue, но даже этого не произошло

&rey: Хотелось бы, чтобы по вопросам полезных тону штук советы давали именно те, кто ими будут пользоваться.  (это и в сторону FunC::Tolk)

/B4ckSl4sh\: Ну гейтвей только кончился всё таки, отдыхает человек) Я ему передам, чтобы глянул ишью (reply to 260770)

Михаил: Тоже верно. Если кому-то интересно, почитайте и напишите в эти же issue свое мнение/критику (reply to 260772)

Михаил: Ого, спасибо если так! (reply to 260773)

/B4ckSl4sh\: Я на доке сегодня прочитал про отличия - там сильно лучше, чем это выглядело на презентации, мне скорее толк понравился, но тильду жесть как жалко, она прикольнее чем mutable :( (reply to 260772)

Vladimir: Второе это оно же https://github.com/ton-offline-storage/address-generator? (reply to 260762)

Михаил: Да (reply to 260779)

Ma><im: подскажите, а в чём смысл перевода жетонов сразу после их клейма как сделано в стандартном mintless jetton?  не логичнее ли при клейме просто развернуть жетон кошельёк пользователя и на этом остановится, обновив статус кошелька на claimed? зачем сразу после этого ещё и перевод кому-то делать?

Иван: Всем привет, подскажите пожалуйста какой запрос посылать на изменение названия и лого editable collection? Просто пейлоад с op кодом на change content?

Бахтияр: Всем 👋 Есть вопрос. Как в react использую @tonconnect/ui-react после подтверждения транзакции внутри приложения тонкипер возвращаться на сайт?

Sol: В историю чейна смотреть?это как?а у джетонов как посмотреть код?не у всех ведь почему то код видно (reply to 259298)

Поняшко: что делать если фрагмент съел тоны а стары не начислили

Torkusz: Ждать (reply to 260797)

Биржа подарков: ждать, проблема массовая, и уже 4 день подряд, по 3-5 часов в день ничего не работает. (reply to 260797)

Поняшко: Спасибо

— 2024-11-04 —

ㅤ: Привет  Подскажите дев мод вкл на тонкипер иду в бота прощу 2 тестовых тонн и ничего не приходит  Так же с другого коша не приходит Как будто дев мод не активен  Айфон  Было у кого то так ?как подлечить ?

/B4ckSl4sh\: После включения дев мода нужно добавить тестнет кошелёк (reply to 260815)

Sane: Всем привет!  Я делаю сайт сейчас и у меня такая проблема у меня есть 2 файла .html первый это  connect.html где пользователь подключает свой кошелек а второе это index.html  Как сделать так чтобы когда пользователь подключил свой кошелек на connect.html у него оставалось это подключение на index.html?  Вот что я использую для Ton connect ui  https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js

User<6907275283>: 0_о

Sane: Я новый в этой сфере поэтому давайте без негатива (reply to 260823)

User<6907275283>: Тогда лучше не трогал бы крипту и разобрался в SPA, SSR и прочих апах, о том как работает взаимодействие страниц и передача данных на фронте

Sane: Да я знаю, но сможешь ли ты мне помочь? (reply to 260825)

User<6907275283>: Тебе не в чем помочь

User<6907275283>: Какие html-файлы....

User<6907275283>: Ты концепцию веб2 и веб3 просто переворачиваешь

User<6907275283>: Посмотри курсы в интернете, базово освой веб2, следом смотри на веб3, а не html тыкайся

Sane: хорошо, спасибо

ㅤ: Потом они еще заказы берут и в чат гпт пытаются делать )))

Asher: Трейлер шестой лекции по языку FunC третьего потока www.tondevstudy.io  Лектор - @MarcoDaTr0p0je https://www.youtube.com/watch?v=a5Bf3CJL6GE Доступна в пакете "Асинхрон" https://www.tondevstudy.io/#plans  00:05:00 -  Старт 00:09:00 -  Пишем контракт стейкинга, как реализовать 00:35:00 -  Что может делать админ, опкоды 00:46:00 -  Получаем жетоны   00:55:00 -  Возврат юзеру жетонов   01:10:00 -  Проверка количества жетонов, опкод, пополнение баланса

Ihor: Привет  Как получить BalanceOf по контракту USDT для моего адреса с помощью toncenter.com/api/v2 или другими способами?

&rey: 1. найти ваш жетон-кошелёк (можно запросом к гет-методу, можно оффлайн) 2. вызвать гет-метод на жетон-кошельке, там в том числе будет и баланс (reply to 260875)

Ihor: Спасибо за быстрый ответ.  Не совсем понял по второму пункту: какой гет-метод на жетон-кошельке нужно вызывать?   К примеру у меня есть  //  target address  EQBMunNB4UlTyogGUjHTLR3vYUKuJbHUxh0-b5nQHmd6RP57  Вызов  get_wallet_address  его jetton_wallet_address: "0:69884128d07de140f313e1238557261f4e5f849315df3eadc7b56961356bdf61"  и после не понял ((( (reply to 260878)

SweetJesus: get_wallet_data (reply to 260882)

Andrew: Привет всем! Ребят, может вы знаете какой-то API для получения тонов на тестнете? Хочу автоматизировать этот процес

&rey: А нет такого. Кто бы выдавал сколько угодно?) (reply to 260933)

~: если хочешь напиши мне завтра, может у меня будет на счету около 30 тонов (reply to 260933)

Andrew: Дело не в "сколько угодно". Например, есть testgiver_bot, который даёт по 2 тона в час. Я бы хотел автоматизировать этот процес. Чтобы раз в час кодом ходить и получать тоны на тестнете.

Алексей: Как думаешь, зачем там капча? (reply to 260937)

Andrew: Я понимаю это

Андрей: Зачем копить тестовые монеты? Что бы потом искать таких же и пробовать им? (reply to 260937)

Andrew: Именно по этой причине я спрашиваю есть ли какой-то апи для этого

Andrew: нужно для деплоя смарт контрактов (reply to 260940)

~: Екарный DeDast обменник, скинул 14 тонов, думал хамстеры даст, кинул, жалко. Выходит меня наХамячили

~: вот вреде говорит, что может обменять. Кидаешь тоны тестовые, а кидают тебя...

Max: Это вас не дедаст развёл, а Tonkeeper.  И это бага (reply to 260944)

~: а так обмены в тестовой сети работали? Просто недавно начал сидеть в тестнете

Max: Зачем? Что вам это даёт, если только не для разработки и тестирования? (reply to 260948)

Tim: тут вроде чат про разработку и тестирование... (reply to 260952)

Tim: мне бы тоже было очень полезно в свое время, если бы стон и дедаст подняли тестнет версии

~: да я так решил попробовать, надо было хотя бы проверить в интернете, что пишут. Но да ладно, 14 тон немного, тем более у меня пару аккаунтов, быстро через бота тоны верну (reply to 260952)

Taras: А как проводить переводы jetton в тестовой сети в таком случае? (reply to 260946)

Taras: Если доступен лишь ton, который в тестовой сети обмену на jetton не подлежит (reply to 260956)

Андрей: В тестнете нету обменников (reply to 260944)

Алексей: Уровень тондев чата иногда поражает...

Max: Заминтить свои 😁  Вообще, у стон фи вроде было что-то для тестнета, емнип (reply to 260957)

Cardinal: привет, насчет количество сообшений в транзакций, насколько я знаю их максимум это 254.  считаються все сообшения которые есть в транзакций или только те которые сам контракт создал?  например как на этой картинке, считаються как 2 сообшения или как 5?

&rey: Одна транзакция работает на одном контракте. (И да, максимум действий 255.) (reply to 260965)

Mr: Всем привет Не подскажите, как рассчитывает message хеш у ext in сообщения?

Cardinal: то есть все сообшения считаються что есть в транзакций да? (reply to 260966)

&rey: Речь о том, что тонвьювер показывает вам дерево из кучи транзакций. У одного узла может быть не больше 255 следующих сообщений (= +255 порождённых транзакций, когда всё обработается). (reply to 260970)

Cardinal: понятно спасибо, на всякий, с одного контракта можно отправить на 255 разних адресов jetton в одной транзакций, да? (reply to 260971)

&rey: Да, если не упрётесь в лимит газа. (reply to 260972)

Cardinal: спасибо ❤️ (reply to 260973)

.none: Есть ли способ эмулировать трансфер жеттонов используя pytvm при условии, что этого жеттона нет на балансе кошелька отправитея, если да, то как?   может быть есть другие библиотеки для этой задачи?

Viacheslav: А есть мультисиг для тестнета как этот? https://multisig.ton.org/

SweetJesus: https://multisig.ton.org/?testnet=true# (reply to 260984)

Alexey: Здравствуйте. Можете подсказать хорошая ли это практика использовать sendMode +2 для игнорирования ошибок?

ᅠ ᅠ: Где-то читал что можно вернуть излишки тонов с нфт контрактов, если случайно отправил, можно ли вернуть тоны с фрагментовского контракта нфт будучи овнером нтф? там немного запутанный код, нужно все алгоритмы просмотреть чтобы найти хотябы зацепку на возврат, пока что не нашел😅

Denys: всем привет, я где-то читал что в тон не очень хорошая практика использовать маппинги для хранения информации. Правда не помню почему и правда ли вообще это😅 Можете подсказать по этому поводу

Denys: например я хочу сохранять балансы пользователей в форме address -> int, сколько значений туда влезет. Просто за такое хранение будет платить сам контракт, что если значений будет настолько много, что контракт не сможет заплатить за это (reply to 261020)

SweetJesus: да я бы не сказал что не очень хорошая практика, если с умом использовать. Главное точно понимать что ты хочешь хранить и не хранить слишком много записей. + мапа должна быть точно ограничена по размеру. (reply to 261020)

SweetJesus: можешь хранить не адрес целиком, а его хеш. сэкономит 11 бит на каждую запись в хешмапе. (reply to 261021)

Denys: вот мне интересно какой размер мапы максимальный, хотя бы какой это порядок значений, тысячи или миллионы/миллиарды

Denys: хороший вариант, спасибо (reply to 261025)

Denys: ещё такой вопрос: я работаю со множеством токенов, соответсвенно мне нужно отслеживать балансы пользователей для разных токенов. Я думал использовать вложенную мапу, то есть ключом будет адресс токена, значением будет другая мапа где структура адрес - число. Но в tact так нельзя делать, есть какие-то ещё варианты? (reply to 261025)

Victor: Условно максимум 35к объектов, но на практике больше 5000 адресов у меня не получилось засунуть и вытащить (reply to 261026)

Denys: спасибо за ответ. А можете объяснить почему так происходит? Сохранение таких данных очень дорого стоит или в чём проблема? (reply to 261041)

гаденыш: Ребят как можно тестнет юсдт в какой-нибудь сети получить

Victor: https://docs.ton.org/v3/documentation/smart-contracts/func/docs/dictionaries  Тут почитай и в поиске просто вбей dict. Изучи все статьи и все встанет на свое место (reply to 261042)

SweetJesus: заминтить самому. (reply to 261043)

гаденыш: Как (reply to 261046)

SweetJesus: https://minter.ton.org/?testnet=true (reply to 261048)

Oleg: Просто в тоне принято мапы хранить распределенно - каждый адрес у своего кошелька хранится (reply to 261042)

Oleg: Плюс такого решения - неограниченная масштабируемость, минус - дикие тормоза за счет необходимости посылки сообщений

Creator: А уникально ли lt в транзакциях в рамках одного адреса? Можно ли опираться на них как на уникальный идентификатор?

/B4ckSl4sh\: А почему вас хэш транзакции не устраивает? Он уникальный (reply to 261063)

Victor: Нет, нельзя. Есть кастомные контракты, где это возможно, но у фрагмента такой возможности нету (reply to 261012)

Victor: В этом ничего плохого нету, но все зависит от ситуации (reply to 260997)

Victor: Нету (reply to 260981)

Влад: Смог найти решение? (reply to 245337)

Creator: Сложная история... А вообще задача стоит проверить через n кол-ва блоков, по прежнему ли успешна транзакция.  Но я так понимаю, что в ТОН для исправления ошибки выпускается корректирующий блок. Верно? Т.е. проверка по хешу и ЛТ транзакции - мне ничего не даст. (reply to 261065)

Андрей: Что значит корректирующий блок? В тоне такого нету (reply to 261082)

Mikhail: Неа. Там несколько моментов, которые могут указывать на фейл (reply to 261080)

ᅠ ᅠ: где то есть гайд по этим исключениям? throw_if, and throw_unless throw_arg_if, throw_arg_unless, and throw_arg

SweetJesus: https://docs.ton.org/v3/documentation/smart-contracts/func/docs/builtins#throwing-exceptions (reply to 261089)

ᅠ ᅠ: там толком ничего и не написано (reply to 261094)

SweetJesus: а что не понятно конкретно? (reply to 261095)

ᅠ ᅠ: throw_if и throw_unless чем они отличаются? (reply to 261096)

SweetJesus: throw_if(exitcode, y > 0) - если y больше 0, будет throw throw_unless(exitcode, y > 0) -  y должен быть больше 0, иначе throw (аналог ifnot) (reply to 261098)

Азамат: куку

ᅠ ᅠ: а что делают эти? throw_arg_if, throw_arg_unless, and throw_arg никогда не видел чтобы их использовали (reply to 261099)

Александр: их в try catch можно отловить. Но я честно ни разу не видел использование в таком плане исключений (reply to 261102)

Oleg: Вот к примеру, что здесь происходит? forall X -> int cast_to_int(X x) asm "NOP"; ... try {   throw_arg(-1, 100); } catch (x, n) {   x.cast_to_int();   ;; x = -1, n = 100   return x + 1; } Первая строчка понятна, это такой кастинг, но что дальше? (reply to 261103)

Creator: Вертикальный блок (reply to 261087)

Kirill: Всем привет! Подскажите, пожалуйста, а можно как-то по апишке тона различить мейннет и тестнет? Как типо в evm сетях это можно по chainId.

Alex: есть на гитхабе код dex биржи на Ton?

SweetJesus: в тоне это вроде global_id называется. у тестнета -3, у мейннета -239 (reply to 261119)

Kirill: а через апи тоновское можно это достать как-то? думал, /getMasterchainInfo подойдет, но нет (reply to 261122)

Viacheslav: почему сайнер не может одновременно быть prooserом?

Viacheslav: proposer - это же тот кто предлагает транзаы и может быть одним из подписантов..

SweetJesus: ну, достаешь блок через апи, в блоке смотришь, оно там есть. (reply to 261123)

Kirill: гляну, спасибо (reply to 261127)

/B4ckSl4sh\: Там есть кнопка copy raw body в тонвьюэре (reply to 261149)

Василий: Подскажите, чтобы заблокировать ликвидность надо LP токены отправить на нулевой адрес UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ , правильно?

Vovlens: я получаю что то зашифрованное (reply to 261152)

/B4ckSl4sh\: Это просто cell с боди насколько я помню, либо hex (reply to 261154)

Vovlens: а как я могу это использовать? (reply to 261155)

Vovlens: например создать сообщение с таким же телом?

/B4ckSl4sh\: Ну это от ваших целей зависит))) (reply to 261157)

Vovlens: создать сообщение с таким же телом (reply to 261159)

/B4ckSl4sh\: Так можно (reply to 261160)

Vovlens: как ? (reply to 261161)

/B4ckSl4sh\: Если это cell, а это вроде cell, то сделайте Cell.one_from_boc(). Потом можете его превратить в Slice и это будет ваше боди, которое можно сохранить через store_slice (reply to 261162)

/B4ckSl4sh\: В payload просто можно эту строку записать (учитывая что вы через тонконнект закидываете) (reply to 261163)

Vovlens: Спасибо большое умный человек (reply to 261164)

Cube: Подскажите какие есть бесплатные апи, не требующие ключей, для получения метаданных токенов?

delthisgem: тонапи раз в 4* сек (reply to 261178)

Andy: кстати, у него есть какие-то ограничения? планирую раз в 5 секунд список транзакций запрашивать у кошелька. не забанят? (reply to 261179)

delthisgem: не должно😅 все легально) (reply to 261180)

Andy: а как по-умному делать отслеживание поступающих транзакций? стрим наверно как-то есть, на который можно подключиться

delthisgem: я такого не делал, самому интересно) (reply to 261182)

Cube: Тогда уж лучше тонцентр буду юзать :) (reply to 261179)

delthisgem: там есть фри ключ после авторизации, 1 запрос в секунду будет (reply to 261184)

Cube: В моей аппке бэкэнда нет, так что no way (reply to 261185)

slavagm: https://docs.tonconsole.com/tonapi/streaming-api Может это поможет (reply to 261182)

Because you are looking for the next target: И это все возможности библиотеки?!

Because you are looking for the next target: Подскажите пожалуйста, как я могу получить информацию о последней транзакции с определенного кошелька на какой-то адрес. Через tonapi

wakaree (ft) 🇺🇦: пацаны где скачать tonkeeper мод много денег

Vladimir: Она еще за Вас на работу ходила, но из релиза вырезали этот момент. (reply to 261193)

Because you are looking for the next target: Тестнет можно юзать (reply to 261196)

slavagm: так это клиент, что ещё нужно? (reply to 261193)

Because you are looking for the next target: Ах, да (reply to 261200)

slavagm: тем более transfers это я так понимаю отправка сообщений, т.е. библиотека реализует собой работу кошелька

wakaree (ft) 🇺🇦: SSE у тонапи юзай (reply to 261182)

Because you are looking for the next target: Вообще, как тонапи юзать. Невразумаю

wakaree (ft) 🇺🇦: да у тона либ как говна же (reply to 261193)

slavagm: отправляете запросы, получаете ответы, в целом всё (reply to 261204)

wakaree (ft) 🇺🇦: для начала неплохо бы понять что конкретно тебе нужно (reply to 261204)

Because you are looking for the next target: Это нужно (reply to 261195)

slavagm: доки вот https://tonapi.io/api-v2

Because you are looking for the next target: Как запрос составить

wakaree (ft) 🇺🇦: https://docs.tonconsole.com/tonapi/streaming-api  SSE юзай (reply to 261195)

wakaree (ft) 🇺🇦: тебе будут лететь хеши транзакций, по ним гетаешь саму транзу через тот же тонапи, распарсиваешь и радуешься

I kudondodhur: Так тебе надо научиться в целом с апи работать, а не именно тонапи Учи мат. часть (reply to 261211)

User<5398011278>: как можно получить адреса из публичного ключа? через node js

User<5398011278>: v3r2, v4r2, w5 (reply to 261216)

Vasilii: попробуй артмани (reply to 261196)

ᅠ ᅠ: вижу много где ставят forward_amount ровно 1, это вобще легально?) и почему там знак восклицания

&rey: Да. И потому что транзакция как обычно не исполнилась [из-за нехватки газа]. (reply to 261220)

ᅠ ᅠ: нашел Skip Reason: cskip_no_gas а почему тогда оно все таки доходит? это такая фича?) (reply to 261221)

&rey: Сообщение оплачено отправителем? Значит, обязано быть маршрутизировано на место. (reply to 261222)

~: Ребят, а сколько в среднем занимает изучение FunC и Tolk, имея опыт в других языках?

~: Может у кого-то есть истории?

&rey: Примерно (время забыть Ethereum, если знали) + (прочитать whitepaper, что вообще тон умеет делать) + (полчаса поглядеть на синтаксис). (reply to 261230)

~: ладно, завтра попытаюсь сделать это (reply to 261232)

x7lmq: я извиняюсь а за шо меня в бан отправили?

SweetJesus: на словах, да, быстро) (reply to 261234)

А: Месяц усердного изучения (reply to 261230)

А: Документация адекватного понимания не даст. Курсы кривые и неэффективные. Придется собирать инфу по частям и долбить сюда в чат (reply to 261230)

Bread: Немного не по теме, но может кто знает готовый процессинг для криптовалютного гемблинга?

Oleg: Только посадинг в джеилинг знаем (reply to 261256)

&rey: На контрактах делайте, любой бэкенд там требует достаточно подробного пояснения. (reply to 261256)

kopoba: чтобы выставить нфт в fragment сколько на комсу должно быть на кошельке?

Gosha: Всем привет! Возможно не в тему но всё же. Я сейчас должен выбрать тему для моей дипломной работы в университете (научрук уже есть отличный), хотелось бы разработать что-то на TON, но не принципиально, главное чтобы web3. Может у кого-то есть идеи, чтобы это было в меру сложно и интересно?

— 2024-11-05 —

ᅠ ᅠ: видел отправляли в районе 0.02 тона и работало но по дефолту 1 тон (reply to 261264)

Gipsy: всем привет, нужен человек который хорошо знаком с тон коннект. есть заказ на скрипт. оплата usdt

rends_east: Напиши DEX, норм диплом получится (reply to 261266)

Victor: Сделать defi страхование для жетонов (reply to 261266)

Yan ☻️: Можно ли в tonconnectui поменять шрифт кнопки?

Anton: Привет, мы в Тон Студии берём ребят на стажировки/курсовые/дипломные. Делать языковые тулы: компилятор Такта, фаззеры, статические анализаторы. Можно и смарты делать вместе и формальные методы типа моделчекинга юзать для проверки корректности (reply to 261266)

Victor: Да (reply to 261289)

Mr: @Livingdeadil, держи!  Я форк того неюзабельного говна сделал летом, теперь можно не страдать)   https://github.com/MrVeit/Veittech-UnitonConnect (reply to 233442)

G E N N A D Y: Слушай, а у тебя норм экранирует ссылки или нет? (reply to 261301)

Mr: Демобот в реадми, можешь убедится (reply to 261303)

G E N N A D Y: Сильно

G E N N A D Y: Надеюсь будешь нашим спасителем!

G E N N A D Y: Я то вроже и тот на норм UI перевел, но сча выскочила проблема с экранированием) Так что вот разбираюсь)

Mr: Мой форк базу TonSdk на С# юзает, но так как некоторые .NET либы слишком жирные в нём и занимают вес в билде, то придётся пилить лайт клиент в ближайшее время)

G E N N A D Y: Жеска, работает. Отпишусь как подключу)

G E N N A D Y: Когда планируешь?) (reply to 261311)

Mr: Бот тут чёт сильно душит)  В общем, до конца года, пока работа душит (reply to 261313)

G E N N A D Y: ЗАметил) Спасибо за работу! (reply to 261316)

А: Есть условия или необходимый уровень знаний? (reply to 261291)

Cardinal: привет, когда отправляю jetton с response_destination=my_address() выкидивает exit_code: 5, может кто нибудь знает как это пофиксить?

Anton: Мы обычно просим рассказать немного о себе и релевантном опыте: тут подойдут курсы в универе, работа или пет-проекты. И чем хочется заниматься в общих чертах. А дальше уже пытаемся подобрать проект по силам (reply to 261319)

Anton: Из ИТМО студенты обычно хорошо справляются

rends_east: Привет всем Правильно ли я понимаю, что максимальный размер coins в битах - 128? 8 на размер и 120 на число

Anton: вот здесь описано формально: https://docs.ton.org/v3/documentation/data-formats/tlb/msg-tlb#varuinteger-n (reply to 261342)

Anton: а в доке такта кажется попроще будет: https://docs.tact-lang.org/book/integers/#serialization-coins

~: Ребят, а че бот тонконсоля не работает? ляг?

rends_east: о, то есть 124 спасибо! (reply to 261345)

Ihor: Привет!  Я получил транзакцию через https://toncenter.com/api/v2/getTransactions?address=EQBpiEEo0H3hQPMT4SOFVyYfTl-EkxXfPq3HtWlhNWvfYfE7&limit=100&to_lt=0&archival=true  Эта транзакция по переводу USDT  Как я могу получить сумму USDT, которая была переведена?.

Semyon: value: '61971636' у USDT decimal 6 разделить на 1e6 должно помочь (reply to 261390)

Viacheslav: можно ли както через tonapi получить query id, которйы был в запросе к контракту?

Ihor: value:61971636 в TON плата за сторадж. Это не USDT, если я правильно понял.  https://tonviewer.com/transaction/d0245b136e7cac310259450200fab364813cfbce710444072002ce29cdffa906 (reply to 261403)

Viacheslav: вот это значение как бы получить по api?

GUBER: Привет, сюда можно вакансию постить?)

Tim: А почему до сих пор нет канала чисто для вакансий?

GUBER: #вакансия #developer #fullstack #crypto #telegram #igaming #remote  #web3 #fulltime #remote #удаленно   ⚡️Требуется Full-Stack разработчик  О продукте: Melodix — музыкальная ритм-игра в телеграме для продвижения артистов и покупки RWA токенов  Сейчас участвуем в трёх хакатонах с общей призовой суммой $7,000,000+ а месяц назад победили грант в $15,000 от Qubic Blockchain  ◻️Обязанности: — Понятный и чистый код с комментариями — Быть на связи — Разработка игровой модели и админки — Инициативность и высокая вовлеченность  ◻️Требования: — Опыт работы 5+ лет — Опыт работы в команде — Соблюдение сроков разработки  ◻️Наш стек:   Frontend: — React — Node.js — Telegram Bot API, Ton SDK + Ton UI   Backend: — React, Vue.js, Next.js — Telegram Mini Apps — MongoDB  ◻️Условия: — Remote — Full Time — 2300 USDT+бонусы+опцион в проекте.  — Испытательный срок - 1 месяц. Оплачивается.  ❗️◻️Контакты: @gubernatorakimov

&rey: Канал же есть, @tonhunt. (reply to 261421)

Tim: Одни топ вакансии… (reply to 261423)

Viacheslav: правильно ли я отправлю из контракта ton с комментраием? и ничего что он не в base64 как полагается?

&rey: А когда ж комментарий кодировался в base64? Но нет, надо   .store_uint(0x00000000, 32)   .store_slice("123") (без query ID, конечно). (reply to 261436)

&rey: запись комментария там заканчивается на "TON Connect 2 tutorial!", дальше уже перевод его в ячейку-тело сообщения и в форму, которую можно послать приложению кошелька (reply to 261449)

Semyon: Подели на 1e6 и будут эти 10.000.000 (reply to 261410)

Gosha: Всем привет Может пожалуйста кто-нибудь объяснить (или скинуть где прочитать) про то, как складываются транзакции в массив transactions при отправке сообщения контракту.         const initialBalance = await money.getBalance();         const result = await money.send(             deployer.getSender(),             { value: toNano('1') },             null         );         const totalFees = result.transactions[1].totalFees.coins;         const finalBalance = await money.getBalance();         expect(finalBalance).toEqual(initialBalance + toNano('1') - totalFees); К примеру здесь, тест проходит если брать totalFees из transactions[1]

/B4ckSl4sh\: Не очень понимаю, зачем вы такие тесты пишите. Можете не сомневаться, что сендбокс правильно посчитает fees и пересчитает баланс контракта, что именно вы хотите проверить? (reply to 261519)

Gosha: Просто так, я учусь) (reply to 261522)

Gosha: Но вообще, я хочу проверить, что 1 ton действительно перевелся, и новый баланс равен тому чему должен

/B4ckSl4sh\: Я в таких случаях обычно проверяю, что баланс больше либо равен какого-то близкого значения, например баланс контракта, куда переводили >= 0.9 тон. В метчере ToHaveTransaction можно для полей указывать функции - рекомендую пользоваться (reply to 261525)

Михаил: привет ребята, подскажите, что не так с метаданными?  нфт получаются без имени и изображения (reply to 261528)

Namon: Возможно проблема в том, как составляется body для минта NFT (reply to 261531)

Gosha: Вообще я изначально так и сделал, потом захотелось вытянуть газ и посмотреть точно, и вот я столкнулся с массивом transactions) (reply to 261530)

Михаил: Обьясни пожалуйста, не понял (reply to 261532)

Namon: Как Вы минтите NFT?  Вообще, желательно, скиньте адрес NFT (reply to 261536)

/B4ckSl4sh\: Для просмотра обычно используют функцию printTransactionsFees (если я не путаю название, Иде подскажет) (reply to 261534)

Gosha: Спасибо за инфу, полезно Но меня всё же интересует массив transactions, почему там вообще больше одной транзакции, и как он заполняется (reply to 261538)

/B4ckSl4sh\: В случае когда каждая транза порождает только одно сообщение - заполняется просто по очереди - от external сообщения и дальше интерналы (как трейс в тонвьюэре/тонскане), если одним контрактов отправляется сразу несколько мессаджей, то я не помню в каком порядке они попадут в этот массив. Но смысл в том, что это просто трейс (reply to 261540)

Gosha: Спасибо, стало понятнее (reply to 261541)

Ihor: Это я понимаю.  Но в моем случае я ловлю транзакцию через  Request URL https://toncenter.com/api/v2/getTransactions?address=EQBpiEEo0H3hQPMT4SOFVyYfTl-EkxXfPq3HtWlhNWvfYfE7&limit=10&to_lt=0&archival=true   получаю объект с транзакциями и в этом объекте отстутствует сумма в USDT   именно поэтому я и хочу понять как получить USDT? (reply to 261515)

Semyon: я с тонцентром не работаю, а так можно вот таким способом  curl -X 'GET' \   'https://tonapi.io/v2/accounts/EQBpiEEo0H3hQPMT4SOFVyYfTl-EkxXfPq3HtWlhNWvfYfE7/traces?limit=10' \   -H 'accept: application/json' Получаем Айди транзакций, потом проходим по самим айди  curl -X 'GET' \   'https://tonapi.io/v2/blockchain/transactions/d0245b136e7cac310259450200fab364813cfbce710444072002ce29cdffa906' \   -H 'accept: application/json' А там имеется исчерпывающая информация (reply to 261545)

Ihor: К сожалению, я ограничен toncentr(ом) (reply to 261552)

Farel: можно ли вызывать в stonfi или evaa функции контракта через собственный контракт-прослойку?

Farel: а как их прокинуть, если контракты не верифицированы (reply to 261560)

Farel: есть мб интерфейс взаимодествия какой-то

Semyon: Я так понимаю что там в целом данные тоже приходят но они не расшифрованы и завернуты в boc base64url(или что-то такое) "utime": 1716366078,  "data":  (И Вот тут нужные тебе данные)  -- которые надо разобрать с помощью библиотеки на том языке на котором пишешь (reply to 261554)

наз: у обоих есть сдк, там можно посмотреть как формируются сообщения к контрактам (reply to 261564)

Ihor: Спасибо (reply to 261565)

.none: Как можно сэмулировать свап на DeDust? У stonfi есть ручка в апи для этих целей, а вот у дедаст вот найти не могу

Namon: ton/sandbox? (reply to 261580)

Gosha: Сорри что опять дёргаю, А кто платит за газ экстернал сообщения? Я имею ввиду, что в примере, который я кидал выше, у transactions[0] тоже есть ненулевая комиссия, при этом тест проходит.. (reply to 261541)

/B4ckSl4sh\: До accept_message никто не платит, но там небольшой лимит газа. После accept_message платит контракт (reply to 261584)

Gosha: То есть комиссия за 0 входит в 1? (reply to 261585)

Gosha: Или контракт кошелька всмысле?

/B4ckSl4sh\: Я имел в виду контракт кошелька (reply to 261587)

Gosha: Понял, спасибо большое

Erik: Всем салют!  Расширяем штат в @terminalgame_bot | @timetoterminal. Ищем бекэнд разработчика  Ниже список требований на позицию:  Стек технологий - Node.js TypeScript - NestJS - TypeORM - Postgres - Redis - RabbitMQ - Docker - понимание взаимодействия с EVM и TON блокчейнами   Скилы - Опыт работы 2+ года - Понимание алгоритмов и структур данных - Паттерны, принципы и подходы в программировании  - Понимание архитектуры и работы распределенных приложений - Многопоточность  Присылать резюме/интро/вопросы @kdbisgreat

jennifer [afk]: Всем привет, ищем 2-го разработчика на func/tact в нашу команду. За всеми подробностями прошу в ЛС.

?: Как реализовать контракт, если нужно чтобы он некоторое время хранил информацию?

?: Хранил, а потом проверял. Сделать 2 внешних на разные сообщения?

?: Первый выполняет одну логику, второй другую, сам себе ответил, спасибо

ᅠ ᅠ: Есть гайд как через тонапи банально сделать перевод ? Там как-то сообщение в блокчейн собрать нужно?

集电极: Ты по-моему перепутал (reply to 261608)

Farel: а как такте отправить сообщение на опкод опредленный? не могу подогнать структуру под опкод

ᅠ ᅠ: Не отрицаю (reply to 261610)

ᅠ ᅠ: Я хочу с кошелька перевести на кошелек Пайтоник работает на лайтсерверах Тонутилс кокраз на тонапи, так вот как он это делает? (reply to 261610)

Ma><im: всем привет! кто-то знает, у контрактов dedust есть onchain геттеры?

Ma><im: у ston.fi  у пулов, есть, например

Ma><im: чтобы из контракта запрашивать данные onchain

Ma><im: в доках описаны только обычные геттеры

Ma><im: ну и контракты у них закрыты

/B4ckSl4sh\: Подскажите, пожалуйста, что я делаю не так?  int get_forward_fee(int cells_num, int bits_num, int is_masterchain) impure asm "GETFORWARDFEE";  var (x, y, z) = compute_data_size(new_msg, 30); int forward_fee = get_forward_fee(x, y, 0); ~dump(forward_fee);  send_raw_message(new_msg, mode);  #DEBUG#: s0 = 800400 Через printFees outForwardFee '0.000761 TON' inForwardFee  '0.000507 TON' То есть значение похоже на outFwdFee, но всё же не оно. Что хуже, к реальному блокчейну, а не к сендбоксу это вообще отношения не имеет - там 0.000323203 TON (функции дампа выводят те же значения). Что делать? Как точно посчитать fwd_fee?

/B4ckSl4sh\: Насколько мне известно, нет (reply to 261615)

集电极: Через питоник и делает. Это указано на странице в pypi (reply to 261614)

Vitalik: Приветствую. Кто знает, почему tonscan.onr и tonviewer.com рисуют разное кол-во холдеров монетам? Ранизца в 10 раз может быть, как в случае с монетой хомяков.

Михаил: Через тон нфт минтер делал https://testnet.tonviewer.com/0:30535bcd3407f8c914b926034fae1eb4d8520fc5905fd0ef9fc9fe6e5b6955c6?section=nft (reply to 261537)

Namon: не хватает / перед individual_content (/0.json) либо добавить после common_content, либо вставлять перед каждым individual_content (reply to 261626)

User<7931577249>: А tonapi получает ликвидность с dedust или stonfi?

Max: и там и там емнип (reply to 261630)

Denis: Да (reply to 261637)

Denis: Тонскан холдеров считает без учёта минтлес (reply to 261624)

Vitalik: спасибо (reply to 261639)

Denis: Тонапи это просто источник данных "че там у блокчейна", как и лайтсервера. Так что отправка делается одинаково - запрашиваете че там в блокчейне, собираете трансфер, подписываете и через апи отправляете. (reply to 261608)

Roman: всем ку, есть где-то хороший курс по func? ничего не понимаю как хранить данные в ячейке чтобы заставить обработать транзакцию каким-то образом, не выкупаю за опкоды, а все гайды не дают хороших объяснений. если у вас есть хороший источник, то поделитесь пж

Roman: и второй вопрос. в солидити такая-же каша? или там проще вкатиться чтобы писать смарт контракты?

And: Солидити попроще там инфы побольше найдёшь к примеру (reply to 261644)

Roman: ну и третий вопрос) возможно ли достичь всех возможностей написания на Func через Tact?

&rey: Ну, ячейка – просто последовательность бит. Договорились так: если у контракта (программы с балансом и своими данными) несколько разных "функций", то пользователь посылает в ячейке сообщения, которую из них он хочет осуществить – 32-битный опкод.  — Каша нередко про уровень непонимания говорит, а не про состояние вещей. Может, стоит подобрать аналогии под сферу, из которой вы входите? (reply to 261643)

Denis: Но каши там больше. Тон гораздо стройнее (reply to 261645)

&rey: Со вставками кода на FunC и TVM assembly можно. Иначе... кажется, можно, но по газу будет дорого. (reply to 261646)

Viacheslav: а в blueprint testах now() для всех вызовов одинаковое время выдает?

&rey: Вроде настоящее время, если не менять blockchain.now. (reply to 261651)

Roman: Спасибо, может ты прав. Но я имею ввиду что я не нашёл объяснений в какой последовательности и как нужно вставить данные чтобы они обозначали то что мне нужно передать. Допустим как в документации по фанс, так и в оффициальном курсе по тону есть только уже готовые примеры сообщений в ячейках, без объяснения откуда брать инфу как их туда правильно заполнить. Допустим помню, что видел в документации пример, где нужно в начале ячейки вставить пустых (вроде) 32 бита, чтобы обозначить что это комментарий, но прямо документации где это было расписано я не нашёл. (reply to 261648)

Viacheslav: че-то у меня в разное время в разных местах всё одно и при 3 сек sleep (reply to 261652)

Viacheslav: я подумал, что в локальном эмуляторе оно чисто берет время на момент запуска и всё

SweetJesus: для этого существует tl-b. (reply to 261653)

Roman: Про оп коды спасибо, но с ними я тоже столкнулся с проблемой что стандартные опкоды для конкретных операций написаны только в глубинах гитхаба, и понять за что они отвечают проще всего можно через ии типо claude

Roman: спс, чекну (reply to 261659)

&rey: Claude... для тона... вот кто часть каши создаёт..  Для нфт и жетонов есть стандарты TEP-62, TEP-74, где сообщения описаны; и TON Cookbook, где показано, какие вам надо использовать. (reply to 261660)

Roman: окей, спасибо тебе большое за ответы (reply to 261662)

&rey: У других контрактов, естественно, TL-B будет в их исходниках, а для понимания надо архитектуру их системы знать. Слышал, полезно через тонвьювер смотреть примеры взаимодействия.

Roman: по фанс сейчас лучше всего разбираться в документации или есть отдельный хороший курс?

SweetJesus: читай, пробуй, задавай вопросы. (reply to 261665)

Roman: спасибо вам всем) (reply to 261666)

Dmitriy: курс на Stepik хороший для начала (reply to 261665)

Denis: Учите сразу tolk (reply to 261665)

&rey: Ну, кстати,  да) На первом просто писать, на втором читать. А раз чейн open, то стоит делать всё читаемым (reply to 261670)

Yan ☻️: ребят как поменять шрифт для кнопки ton-connect

— 2024-11-06 —

final: Что блять… (reply to 261422)

Ivan: На наксте Бек можно пилить как вариант 😄 (reply to 261686)

final: Ну накст это накст, а там vue!  Да и на самом наксте бек особо не напишешь, только если в папочке api развернуть отдельный бек) (reply to 261688)

Ivan: Ну так да😄, вакансия топ кста - оплачивается испыт срок🤔 (reply to 261690)

final: А он не должен оплачиваться? Вроде база же, что он оплачивается, по крайней мере в 2 из 2 компаний где я работал он оплачивался

GUBER: Ну ошибся) (reply to 261686)

Ivan: Ну как бы да, он офк оплачивается тк ты на работу устраиваешься, о чем и речь.  Тут это как бонус преподносится в свою очередь (reply to 261692)

final: А, ну это смешно, да (reply to 261697)

final: Ты как будто сам не знаешь кто тебе нужен) (reply to 261696)

наз: всем привет, такой вопрос, допустим есть контракт который переадресует юсдт юзера например в пул шторма, он минтит контракт юзера с какими то метаданными, когда после того как он вложил юзер захочет вывести свои средства я отправляю запрос на вывод в шторм, оттуда ловлю transfer_notification и вот тут я не понимаю после того как на контракт который переадресует пришли юсдт понять кому я должен их отправить дальше, то есть как мне идентифицировать чьи мне пришли юсдт

&rey: Чьи пришли? Ну... ваши теперь, там не подписан вроде начальный адрес пользователя. (reply to 261719)

🎐*<@Maxim: На какой адрес тебе донатят ? (reply to 261725)

Vladislav: Привет Frens!  кто знает Three.js + cannon.js? Нужна реализация сцены, физики, механики взаимодействия с 3d объектами и фоновой загрузки некоторых данных.  Отпишите DM пожалуйста

Nikita: Всем привет Кто-нибудь знает, при отправке жеттона юзеру, можно ли делать так, чтобы на jetton wallet не оставалось тона? А то они лежат там мертвым грузом — как-то не очень

SweetJesus: ну вообще они не просто так лежат, как минимум сторадж оплачивается. (reply to 261789)

~: @testgiver_ton_bot только у меня бот не работает?

Tim: Нельзя. Только если свой жетон написать (reply to 261789)

Nikita: Жестко получается =) Спасибо большое (reply to 261833)

User<7727973243>: В общем, не тратьте время, по своему опыту скажу что хотят на халяву получить проект нужный и прикидываются командой. При этом 0 ресурсов и просят какое-то тестовое задание для вступления в команду (reply to 261840)

User<5862632235>: Мы не берем человека в команду без тестового заданич (reply to 261842)

User<7727973243>: В какую команду? У вас нет даже ресурсов (reply to 261843)

Mr: может это чел из команды дурова на самом деле? (reply to 261846)

User<7727973243>: Согласен (reply to 261847)

User<7727973243>: Крч, Скам, просят сделать контракт для Скама

User<5862632235>: Для скама ? (reply to 261850)

User<7727973243>: Данная задача только под это подходит .

User<7727973243>: Либо нет нормального проекта где такое мб необходимо

Denis: кстати если кто-то без проблем может выполнить такое задание но не хочет по морально-этическим причинам, то можно побеседовать - https://t.me/tondev/254290 (reply to 261851)

Михаил: отлично, это помогло! Благодарю (reply to 261628)

Alacrity: как определяется цена токена на лаунчпадах по типу GasPump и Coub?

Михаил: подскажете еще, кто знает на этом сервисе  https://ton-collection-edit.vercel.app/deploy-nfts   во вкладке deploy nft  такой текст выдает для нового контракта на гетгемс:  Unexpected Application Error! Unknown nft item code Error: Unknown nft item code     at W_ (https://ton-collection-edit.vercel.app/assets/index-dit4ZVkV.js:1278:131902)     at _ye (https://ton-collection-edit.vercel.app/assets/index-dit4ZVkV.js:1278:188946)     at e3 (https://ton-collection-edit.vercel.app/assets/index-dit4ZVkV.js:43:19539)     at Gw (https://ton-collection-edit.vercel.app/assets/index-dit4ZVkV.js:45:3139)     at yM (https://ton-collection-edit.vercel.app/assets/index-dit4ZVkV.js:45:44820)     at gM (https://ton-collection-edit.vercel.app/assets/index-dit4ZVkV.js:45:39777)     at bD (https://ton-collection-edit.vercel.app/assets/index-dit4ZVkV.js:45:39705)     at Qg (https://ton-collection-edit.vercel.app/assets/index-dit4ZVkV.js:45:39557)     at o4 (https://ton-collection-edit.vercel.app/assets/index-dit4ZVkV.js:45:35921)     at dM (https://ton-collection-edit.vercel.app/assets/index-dit4ZVkV.js:45:34870)

Denis: ничего не понял ну да и ладно (reply to 261875)

jennifer [afk]: ответь в лс 🙏 (reply to 261876)

Denis: моя практика показывает, что скамеры обычно не очень умны, а значит не пройдут собеседование. так что извините

User<7727973243>: Ну и адекватные пользователи не будут выполнять такое за любые деньги. Я об этом и говорим и проще вам написать и получить средства за данную ошибку (reply to 261878)

Алексей: А в чем тут вообще краш эмуляции? 🤔 (reply to 261851)

User<7727973243>: Обход фильтров одного из основных провайдеров сети (reply to 261883)

/B4ckSl4sh\: Тут же просто 2 мессаджа с трансферами, нет? (reply to 261884)

Алексей: Ну вроде эмулирует вон, что трансфер >1 тона произойдет, или это не то что на самом деле произойдет? (reply to 261884)

наз: когда че то непонятное оно пишет tontransfer вместо всего что должно произойти, сталкивался не раз (reply to 261885)

наз: ну вернее когда ты явно знаешь что трансферишь жетон например, а оно пишет тон трансфер и ниче не отправляет (reply to 261907)

/B4ckSl4sh\: Ааа, вон в чем прикол (reply to 261908)

Nononono: подскажите, какая вообще логика декода message_content.body ? хочется получать что-то такое: body: {   "is_right": true,   "value": {     "sum_type": "WhalesNominatorsSendStake",     "op_code": 2718326572,     "value": {       "query_id": 1730735026541,       "gas_limit": "50000",       "stake": "817268353277392",       "validator_pubkey": "c49584cd80be1d37e2bcde594e4174363bbb8e1ab37b5742e9946589562feb6f",       "stake_at": 1730760456,       "max_factor": 196608,       "adnl_addr": "302a7efe9fa799854a6abd32ffae7d2ed64cb5062ee26f813cfc7d4fe8ad70c7",       "signature": "49b72163a2182bde4b8753bc6a4678e3da6dcfcbc925dceea85d9195ce7385543aee65534311bc4d5edd0bac80af4e6171a61772e58dd79a078223c80e36a90f"     }   } }

Михаил: Привет, ребят, продублирую  Есть те, кто может помочь? (reply to 261874)

Zakir: ребят привет индексеру надо дней 30 чтобы всё перелопатить, может мы не накатили индексы в базе?

0xCrusader: Ку всем, а как отследить с фронта, что моя транза (вызов контракта) закончилась успешно? Я нашел вариант прочекать увеличение seqno, но это выглядит больше как костыль

&rey: Для начала, что такое вообще "закончилась" "успешно"? (reply to 261937)

0xCrusader: Говорю сразу, что не силен в тоне пока) Я думал просто о получении success: true (reply to 261939)

0xCrusader: В моем случае этого достаточно

集电极: Дёргать апи по хешу транзакции (reply to 261944)

0xCrusader: А где мне взять хеш? Я из доков взял пример вызова, не могу понять  Типо такого exampleContract?.exampleMethod(args) (reply to 261947)

Semyon: https://docs.dedust.io/reference/pool , использовал estimate_swap_out , есть какие-то конкретные что тебе нужны? (reply to 261618)

Vovlens: Подскажите какой самый адекватный способ получения курса TON

Vovlens: приблизительный, хоть до 10-ых

potato: онлайн (reply to 261956)

Vovlens: трекать на маркете каком то? (reply to 261958)

potato: у тонапи есть rates, можно туда обращаться (reply to 261959)

I16000: узел и запрос в пул (reply to 261956)

集电极: Апи тонцентра/тонапи/дедаста (reply to 261956)

𝑹𝑶𝑴𝑨𝑵: Привет, мне нужна помощь с внедрением тона в мое приложение (проконсультировать и возможно написать смартконтракт), кто готов помочь напишите в личку, могу оплатить работу

Denis: это довольно бодрый кстати индексер. не то чтобы супер-пупер но приемлимый результат для полного индекса блокчейна. (reply to 261934)

Zakir: хорошо спасибо (reply to 261966)

Ivan: Всем привет  toncenter все время возвращает ошибку когда я дергаю get_jetton_wallet_address (runGetMethod, get_wallet_address)  LITE_SERVER_NETWORKadnl query timeout(during last block synchronization)

Zakir: а надо ли както настраивать базу заранее? типо запускать построение индексов или это уже не нужно? https://github.com/toncenter/ton-index-worker/blob/22a3755f158c792c35601e33b32e8c20ca7ba160/scripts/create_indexes.sql (reply to 261966)

Михаил: Привет, подскажи еще по этой транзакции - прошла, но нигде не отобразились нфт  https://tonviewer.com/transaction/9189ee2e8bb42f7adb76ba5983e5524c9a740b8d5a4b910ff9f3c5197d2c1bed (reply to 261628)

Namon: В плане нигде не отобразились? В кошельках и на маркетплейсах? (reply to 261980)

Victor: Обновите сайт или закройте и откройте кошелек (reply to 261980)

Михаил: Да, нет ни в тонкипере, ни в гетгемс (reply to 261981)

Михаил: Делал, не помогает (reply to 261982)

Namon: https://getgems.io/nft/EQDfwFWqaShDQO3S6PN5AQmFrrLhV6LmpVFbMW77eDDiGISF (reply to 261983)

Михаил: Вау, не понимаю, как они там оказались  Благодарю! (reply to 261985)

Victor: Magic (reply to 261987)

Zakir: [ 3][t 7][2024-11-06 16:32:58.904162906][IndexScheduler.cpp:235][!indexscheduler] 38524938 / 41750419 1.730243/s (51d 2h 56m 37s) Q[0M, 0b, 0t, 0m, 0T]  эа это нормально? запускали с блока --from 38257024 (reply to 261966)

Михаил: Благо мой кошелек😁

Denis: Хз если честно. У меня свой индексер (reply to 261989)

Bread: Кто-то поднимал свой процессинг в тоне? Типа gobicycle? Я пока смотрю там в описании нужно свою ноду поднять, а это минимум 128CPU и тд

Zxc: pip install tontools pip install pytonlib  Подскажите пожалуйста, как можно разрешить эту ошибку. Со всеми ton библиотеками, которые я пробовал устанавливать - выдает такое.  Python

Namon: Microsoft Visual C++ 14.0 or greater is required. (reply to 261995)

наз: pytoniq или tonutils юзай (reply to 261995)

Андрей: У меня и на 16 ядрах нормально работает, главное что бы были не в виртуальном пространстве, а на отдельном железе (reply to 261994)

Bread: а оперативки сколько? (reply to 262002)

Zxc: Спасибо. (reply to 261996)

Михаил: А вот у меня транзакция прошла, списались тоны, но транзакция по итогу с ошибкой и тоны не вернулись назад на аккаунт  https://tonviewer.com/transaction/d90a69532e3e18e5ad0d54b3c8000e572591a157d7f5ac1933a2aa15fd204ce7 (reply to 261985)

User<8103875144>: Добрый вечер как из body извлечь сигнатуру?

Namon: Они остались на контракте коллекции, на кошелёк не вернуть (reply to 262005)

Михаил: А для чего тоны используются в контракте? (reply to 262008)

Namon: По сути ни для чего, кроме как на оплату storage fees (reply to 262009)

&rey: 1. Storage fees. 2. Передать тоны кому-то дальше (например, стейкинг). 3. Выполнить "предоплаченную" операцию, где в самом "вызове" будет тонов мало — например, 0.01 TON. (Или где вызов вообще делается экстерналом, как в кошельках.) (reply to 262009)

&rey: Зависит от версии кошелька. (reply to 262007)

User<8103875144>: wallet v5  body = beginCell()             .storeSlice(payload.beginParse())             .storeBuffer(signature, 64)             .endCell() (reply to 262012)

&rey: Значит, надо считать последние 512 бит ячейки. (reply to 262013)

Михаил: Понял, благодарю (reply to 262010)

User<8103875144>: Пытался, у меня получается разная сигнатура (reply to 262014)

Denys: привет, как в тестах проверить что транзакция была не успешной? У меня в контракте есть проверка require, я отправляю специально неправильные данные, чтобы эта проверка не прошла, но как это отследить в тестах? я пробовал так делать: expect(fundsInResult.transactions).toHaveTransaction({       success: true,     }); но независимо от того, срабатывает require или нет, этот тест всё равно проходит. Хотя мне казалось, что если require сработает, то success должен был быть false. Или я ошибаюсь?

Ihor: Привет! Как получить сумму перевода jetton из msg_data?           «msg_data": {           «@type": «msg.dataRaw»,           «body": «te6cckEBAgEAYAABrReNRRlUbeTvnDHY92CRhOcqAAgBS2tl0RG51nwSN6fQVxDq4Yg4wREsoIv2W2dJK/nHK7cAKW1suiI3Os+CRvT6CuIdXDEHGCIllBF+y2zpJX845XbEBwEACAAAAACjKVHl»,           «init_state": «te6cckEBAwEAbgACATQBAghCAo9FLXpN/XQGa2gjZRdyWe0Fc0Q1vna1/UvV2K8rfD1oAIcAgAmXTmg8KSp5UQDKRjplo73sKFXEtjqYw6fN8zoDzO9IkALETqZS1AkoWcZ9pE5Mo63WVlsOKJfWQKLFG/s3DYh3+jynI3o=»         } возможно ли это преобразовать простым способом?

Dmitry: Залогируйте fundsInResult.transactions, возможно в одной из них success: true (reply to 262023)

Victor: Обязательно ставь  To: … From: … Success: false (reply to 262023)

Denys: сработало, добавив to и from и установив success false. Это значит, что в fundsInResult.transactions было несколько транзакций и одна из них(или может несколько) были sucess true, по этому моя проверка не проходила?

Denys: Если да, то почему транзакций было несколько, я вроде только одну отправлял (reply to 262027)

&rey: Каждая транзакция работает ровно на одном контракте; наверняка минимум одна отправляет сообщение с treasury. (reply to 262028)

Denys: понял, спасибо (reply to 262029)

delthisgem: в чем разница между этими контрактами? я вижу там в памяти min max диапазон принимаемых нфт, но min там 0, а max оочень большое число, и выходит что они могут принять любую нфт  я пытался сам собрать ячейку и у меня ничего не получилось, я десятки раз проверил все биты, посмотрел код где могла быть ошибка но никак не получилось поменять самому

&rey: вероятно, они расположены каждый в своём шарде (reply to 262031)

delthisgem: int right_shard? = sender.slice_check_prefix(my_address().preload_bits(2 + 1 + 8 + 4)); ;; constructor + anycast + workchain + part of hash  да там есть проверка на шард, по первым 4м битам, я смотрел вроде с нфт совпадало ок, перепроверю еще раз) (reply to 262032)

наз: а реально будет реализовать ака seqno протекшн, только хранить условно при попытке вывода адрес кому вывести, дальше ловить трансфер нотификейшн и после того как он отправит на хранящийся адрес обнулять его, а другим давать возможность вывода ток если нулевой? (reply to 261725)

User<7931577249>: а в чём проблема seqno использовать (reply to 262035)

наз: ну оно как бы поможет сделать так чтобы все шло по порядку, но мне ведь надо понимать куда я передаресовываю (reply to 262036)

User<7931577249>: понял

&rey: Это сработает, да. Как моделировать: tokio::sync::Mutex<StormForwarderContract> (reply to 262035)

Ma><im: я спрашивал про onchain геттеры (reply to 261954)

Dmitry: Их нет в тоне в принципе (reply to 262041)

Eh$an 🐶: /stat@combot

А: Написал смарт на такте, задеплоил в мейн. Теперь через tonconnect ui, который отправляет сообщения, нужно как-то обращаться к контракту и отслеживать, что он там изменил. Через какую библу делать?

Ma><im: есть) (reply to 262042)

Ma><im: я имею ввиду, если кто-то не понял, просто методы контракта(по специальным оп-кодам котракт отдаёт какие-то данные sender’y) сендер же по query id, например, отслеживает ответ на свой вопрос.  то есть две атомарные вещи. вопрос и ответ (reply to 262052)

Ma><im: то, как работали до async await) (reply to 262053)

.none: я хочу сэмулировать отправку жеттонов с чужого jetton wallet используя pytvm, однако я так понимаю, что я не могу сделать, потому что где-то стоит проверка - владелец ли я этого jetton wallet? Могу ли отключить эту проверку как-либо? видимо эта проверка в бинарнике лежит и ничего особо не сделать... :(

.none: Единственные данные, которые извне приходят, и на которые можно как-то повлиять - ShardAccount, однако это мало чем может помочь (reply to 262058)

Maks: Ребят, подскажите пожалуйста, у знакомых есть монета(на Ton), но они сейчас сталкиваются с проблемой сендвич ботов которые не дают монете расти, у кого-то есть идеи как можно помочь?

Oleg: Идея №1 - если курс не растет, значит, токен никому не нужен? (reply to 262060)

集电极: Как связаны мев-боты с отсутствием роста монеты? На данный момент единственный способ не попасть под мев-бота - это низкое проскальзывание, но это относится к пользователям, а не к монете. (reply to 262060)

Maks: Там всё норм, всё растёт, у них большая команда с этим норм всё, просто сендвичи и монеты на троне убили, и на тоне щас убивают, по их словам никто из хрутых программеров не может решить проблему, просто реально помощь нужна с этим, без стёба пожалуйста (reply to 262061)

Vitaly: Не понимаю как связан рост с сендвич ботом?) (reply to 262060)

Vitaly: В остальном, наша команда занимается разработкой защиты покупки от сендвич бота. Надеюсь через пару недель++ будет доступно всему тону.

rends_east: почему на тоне появился какой то копиум в виде термина "мев-бот"? я вот немного погрузился в тему и до сих пор не понимаю, кто решил распространить именно такую терминологию на тоне мева, поставленного на поток, нет (reply to 262063)

Vitaly: По поводу роста монеты, я не думаю что сендвич в этом виноват)

Maks: Я понимаю это, прекрасно, я просто спрашиваю есть литу кого то идеи что можно намудрить в смарт контракте токена на Ton, что бы от них избавится (reply to 262063)

Vitaly: Дегены, на то они и дегены))) (reply to 262067)

Maks: Я видел что на эфире этот реализовывали, тип блокали продажу после покупки на определенное время

Maks: Но это был юнисвап и эфир, а тут Тон и стоунфай

rends_east: ну это жесть же, никакой пропускной способности с таким не будет (reply to 262071)

Zxc: Что к чему? 🫣 Подскажите пожалуйста, делал пример из python библиотеки tontools

Vasilii: там же написано (reply to 262074)

集电极: Красным по чёрному написано, что некорректный адрес. Вам бы английский подучить (reply to 262074)

Zxc: 687 строки у меня в коде нет (reply to 262075)

集电极: Не туда смотрите. Читать ошибки тоже не мешало бы поучиться (reply to 262077)

Алексей: Есть https://t.me/dedust_dev_chat/3327 (reply to 261615)

Zxc: Люблю вас. (reply to 262078)

&rey: А вот строка 9 есть. Toncenter не может найти, что такое "Jetton wallet contract address" — телепаты в отпуске, видимо, или по API недоступны. (reply to 262077)

Vladimir: Обожаю такие скриншоты. (reply to 262074)

Creator: привет всем а почему пишется что транзакция failed?  https://tonviewer.com/transaction/1751511b7a923a199f044fc0174e3633adc43e943a84844bd09f588be3e00d28

User<8103875144>: Есть библы для работы с high load wallets v3?

— 2024-11-07 —

Oleg: Возможно, условие Minimum to receive не выполнилось (reply to 262093)

Illia: Нужно ли и как делать load-balancing для реплик на TON?  У меня есть контракт с Merkle Proof. Он верифицирует сообщения.  Допустим, у меня есть 100,000 других аккаунтов, которым нужно верифицировать пруфы.  У меня на уме три решения:  1. Это всё к чёрту не нужно и тону и так будет хорошо с 100к реквестов  2. Сделать обычный round-robin на 1 контракт, который будет форвардить сообщения на реплики, а реплики будут уже считать результат (верифицировать) и возвращать на клиента. Вопрос лишь в том, как контракт, который верифицирует, поймёт, что реплика авторизированная, сделать Ed25519 подпись?   3. Оффчейн мониторить активность по контрактам и, помимо пруфа, который человек хочет верифицировать, ещё и адрес контракта давать, которым воспользоваться

Illia: Есть какие-то мысли на этот счёт? Возможно, у кого-то был схожий кейс (reply to 262101)

Abdulaziz: А это что (reply to 262105)

Abdulaziz: Зачем нужен этот контракт. (reply to 262108)

Pavel: https://docs.ton.org/v3/documentation/smart-contracts/contracts-specs/governance#elector (reply to 262110)

Dmitry | backend4you.ton: будет хорошо с 100к реквестов 100к каждую минуту, каждый день, за всю жизнь этих контрактов?  обычный round-robin на 1 контракт, который будет форвардить сообщения на реплики проверьте затраты газа/времени на верификацию одного пруфа vs на посылку туда-сюда сообщения. сдается мне второе будет сильно медленнее... (reply to 262101)

&rey: round robin вредить только будет, ведь все сообщения пойдут через него. 1 и 3.5 лучше. (reply to 262101)

A: when i try to verify my smart contract its throwing compilation error anyone plz help

A: ??

Dmitry | backend4you.ton: use russian or use @tondev_eng (reply to 262123)

A: когда я пытаюсь проверить свой смарт-контракт, выдает ошибку компиляции, кто-нибудь, пожалуйста, помогите

Denys: в blueprint есть аналог hardhat coverage чтобы посмотреть покрытие контрактов тестами?

Василий: Нет (reply to 262135)

Yulia: Всем привет! А есть ли какие-то ограничения по рпс (или другие ограничения), если свои инстансы тонапи, тоцентр поставить?

Василий: Нужен не load-balancing, а шард-оптимизация контрактов. Т.е кошелек пользоваться, контракт проверяющий пруф и, например, его жетон кошелек должны быть в одном шарде(иметь одинаковый префикс адреса в 4 бита). Пересылка сообщений по шардам обычно занимает куда больше времени чем сами вычисления.  https://docs.ton.org/develop/smart-contracts/tutorials/airdrop-claim-best-practice  https://docs.ton.org/develop/smart-contracts/tutorials/shard-optimization (reply to 262101)

Lyric: Привет) Подскажите пожалуйста как mnemonic сопоставляется с TON кошельком? from pytoniq import LiteBalancer, WalletV4R2 import asyncio  mnemonics = []  async def main():      provider = LiteBalancer.from_mainnet_config(1)     await provider.start_up()      wallet = await WalletV4R2.from_mnemonic(provider=provider, mnemonics=mnemonics)      transfer = {         "destination": "UQC25k6lIqOL6Zut4OWKpLNDKmlDdXiRe02IO0yAAZ_ViKQR",    # please remember about bounceable flags         "amount":      int(10**9 * 0.05),              # amount sent, in nanoTON         "body":        "wdwwdwddwdwqwd",       # may contain a cell; see next examples     }      await wallet.transfer(**transfer)     await client.close_all()  asyncio.run(main())

Lyric: Я пытаюсь разобраться как с помощью python переводить TON на другой кошелек

Lyric: Я имею ввиду, что мне не понятен момент, как некая строка определяет доступ к кошельку, если нет общего бекенда, в котором эта строка зарегистрирована.  Или все таки он есть? Тут вообще пропасть в понимании (reply to 262159)

Dmitry | backend4you.ton: кошелек (адрес) - математически вычисляется из мнемоники (и версии кошелька)

Lyric: Значит я гдето могу взять мнемонику или сгенерировать ее, зная адрес кошелька?

Dmitry | backend4you.ton: нет. математика работает в одну сторону. зная мнемонику можно посчитать адрес. зная адрес нельзя "обратно" вычислить мнемнонику

Dmitry | backend4you.ton: поэтому основное правило всея крипты - кто владеет мнемоникой тот владеет средствами на соотв.кошельке

Lyric: Где моя мнемоника?) где посмотреть то

Dmitry | backend4you.ton: вам ее показывало прилжение (тонкипер/...) когда создавало ваш адрес. и просило записать в надежное место. если то приложение еще стоит - в нём возможно посмотреть. если удалили приложение (не записав мнемонику) - средствам на соотв. адресе вы потеряли навсегда

Lyric: Ну TON кошелек я регал в телеграме. Он ни о чем таком не писал

Dmitry | backend4you.ton: тогда поищите в ютубе/инете термин "кастодиальный кошелек" (и нкастодиальный). телега (не тон спейс) - первого типа, там нет мнемоники. (в тон спейс есть, там второго)

&rey: Телеграмский – это не очень кошелёк, он держит деньги за вас и прямой доступ не даёт. (reply to 262168)

Lyric: о привет (reply to 262170)

Dmitry | backend4you.ton: и как следствие, применяя "основное правило всея крипты" - те средства что лежат у вас в телего-кошельке на самом деле "ваши" только пока сам телегокошелек это хочет ))))

Lyric: Короче надо нарулить мнемонику тонспейса. Или зарегаться на какой-то площадке, которая мне ее выдаст?  Моя задача, напомню, переводить с помощью скрипта TON по адресу кошелька

Lyric: Казалось бы, простейшая задача

Denys: смотрите, у меня возникла такая ситуация: пользователи отправляют мне токены, которые впоследствии могут захотеть вернуть. Но я никаких данных в контракте про этот перевод не сохраняю, в смысле кто и сколько отправил. Можно ли как-то сделать, чтобы пользователь формировал некоторое доказательство(подпись), которая подтверджала бы что это он отправил мне некоторую сумму токенов, чтобы мой контракт мог проверить это доказательство и если всё хорошо, то вернуть ту сумму, которую пользователь отправлял? Или это я какую-то фигню придумал😅

Lyric: @just_dmitry @pcrafter парни, спасибо) я нарулил мнемонику тонспейса и скрипт сработал

Dmitry | backend4you.ton: вам тогда придется сохранять список всех "возвратов", чтобы пользователь не вернул несколько раз один и тот же перевод, а хранить данные неизвестной/неограниченной длины в тон настоятельно не рекомендуется.  так что либо ручной возврат (юзер присылает в саппорт ссылку на возвращаемый платеж), либо делать не один а множество "депозитных" контрактов (каждому юзеру по одному, а-ля жетоны), где вы сможете "административно" забрать часть средств с этого контракта (когда в реальности это потратилось/использовалось), а то что там еще лежит - пользователь может в любое время "запросить обратно" (reply to 262178)

Denys: а что если пользователь в своё доказательство ещё добавит какую-то метку времени или nonce(который у меня тоже будет хранится в виде обычного числа в контракте) и тогда по идее можно решить проблему с двойным возвратом, потому что это число будет уникальным и будет увеличиватся каждый раз, когда кто-то вызывает метод по возврату🧐 (reply to 262186)

Dmitry | backend4you.ton: попробуйте это "на бумажке" расписать и поймете

Lyric: А посоветуйте если можно что погуглить, почитать, чтобы сложилось понимание web3

rends_east: про то, как работает блокчейн, для начала причем начните с эфира, он довольно простой (reply to 262202)

Павел: Классическое веб приложение - это взаимодействие клиент - сервер. В веб3 сервер заменяется блокчейном, а если конкретнее смарт контрактом. Это фундаментальное отличие. (reply to 262202)

A: Help

A: Plz

Василий: А blueprint verify разве не работает для tact’a? (reply to 262212)

A: Я развернут с помощью idetonorg, использующего ide, но когда я пытаюсь проверить, возникает ошибка, помогите, плз.

A: Help plz

Huizenberg: Ребят, привет Подскажите, пожалуйста Уже который день голову ломаю и не могу понять почему не получается Как через tonapi забрать количество овнеров nft коллекции?

Svαtoωλ‎: а как создать кош в определенном шарде, и как узнать что это именно тот что мне нужен шард 👀

наз: первые 4 бита адреса вроде это шард (reply to 262234)

SweetJesus: перебирать мнемоники, пока не найдется в нужном шарде (reply to 262234)

Svαtoωλ‎: а если я немножко ламер, как адрес на биты разложить, и понять какой к чему 😁 (reply to 262235)

&rey: Переведите адрес в hex, возьмите до двоеточия и символ после него.  0:0, 0:1, ..., 0:F будут варианты. Глубже пока шардов в тоне нет, но будут. (reply to 262234)

Svαtoωλ‎: а я правильно понимаю, что если мой смарт и кош в тоне будут в одном шарде, то коммисия за исполнение контракта будет поменьше?

&rey: Нет. А вот время прохода сообщения меньше. (reply to 262239)

Svαtoωλ‎: так и мева можно создать 👀 (reply to 262240)

&rey: "я вам запрещаю создавать мева" Ну... да, можно. (reply to 262241)

Svαtoωλ‎: А где вообще за всё это прочитать, мол в тоне есть шарды, каждый контракт рандомно на какой нибудь попадает, так же есть ещё какие-то интересные вещи (reply to 262238)

/B4ckSl4sh\: Про шардинг есть отличная статья в доке, поищите (reply to 262244)

&rey: В whitepaper и лежащих рядом секретных документах (reply to 262244)

/B4ckSl4sh\: Более того, не только можно, но они так и работают многие (reply to 262243)

Devsbite: Всем привет. Кто может подсказать. Отслеживаю транзакции по sse. Использую подписку на пул. И зачастую из 10 транзакций(покупок) 2 не приходит мне. Если срабатывает мев бот - то вообще могу даже след не увидеть настоящей транзакции.

/B4ckSl4sh\: в тонапи sse нет гарантии доставки транзакций сейчас. Там собирались добавить возможность подписаться с гарантией доставки, но я не знаю реализованно это сейчас или нет (reply to 262257)

Devsbite: Можете посоветовать альтернативу для buysell bot? (reply to 262267)

Max: Вроде сделали (reply to 262267)

User<7453694098>: Дайте телеграм рогозина

Pavel: Привет, подскажите пожалуйста. В тоне есть multisig, который user-friendly. Сейчас есть решение, в котором пользователь подписывает все транзакции бинарниками на fift. Не каждый криптан с таким справится, не то что ламер

User<8053811500>: Подскажите, сколько проходит от момента отправки транзакции до её подтверждения?

Andy: всем привет. написал скрипт, который рекурсивно дергает toncenter.com/api/v2/getTranscations, чтобы получить весь список транзакций в кошелек. Периодически вместо нормального ответа получаю 500 cannot compute block. как так? паузу поставил в 5 секунд между запросами

Andy: разобрался. там есть параметр archival, который отвечает за то, откуда инфу брать. не везде оказывается есть информация по моим транзакциям

?: Пишу смарт контракт для игры на тоне.   Есть определенное количество участников. Все они в момент старта игры отправляют один и тот-же хэш на контракт. Так формируется «команда».   Вместе с хэшем, они отправляют свой банк для ставок и гарантийную сумму. Деньги замораживаются.   Идет игра, потом, тот, кто выиграл забирает весь банк. Участники должны подтвердить это, отправив сообщения со словом true. Если не подтвердят в течение 1го дня, с них спишется гарантийная сумма, а их деньги вернутся им обратно. Пишу на такте, но мне бы мысль, как подойти к этому. Не понимаю, как сам функционал контракта написать и сколько их должно быть

Oleksandr: Всем привет! Подскажите как реализованы ивенты в ТОНе?

potato: В данном случае у тебя по логике не сходится. Зачем проигравшему игроку подтверждать проигрыш если он может просто забить и получить свой кеш обратно? (reply to 262342)

potato: Каждая игровая сессия начинается с транзакции и заканчивается очередной транзакцией. Дорого, долго + убитый UX. Либо писать кастодиальную систему, либо 1 общий пул-кошелек и "математика" на сервере

?: Просто забить не получится. С него спишется гарантийное обеспечение, которое он пополнял вместе с банком (reply to 262348)

?: Нет, ux красивый сделал. С функционалом осталось только разобраться (reply to 262352)

?: Математика на сервере, верно. В базе данных хранятся данные об участниках

potato: Еще хуже) (reply to 262354)

?: Почему (reply to 262357)

?: Он ведь сам виноват будет в том, что забил

?: Суть не в том, как именно процесс игры идет, а в том, что делать с контрактами🤔🤔 и враперами. Проект нужно закончить быстро, а тут может надолго затянуться

Dmitry | backend4you.ton: ну если у вас бизнес-логика уже фиксирована и вам под это только контракты нарисовать, то в чем конкретно проблема то?

potato: Это все должно разбираться и планироваться до начала разработки Суть в том, нафига мне это (как пользователю надо). Зачем мне играть в игру где надо по кд переходить кошелек и подтверждать транзакции? Зачем мне играть в игру где у меня не просто мой игровой баланс а еще и подстраховка для создателя игры? Кривую логику закрывать за кеш пользователя - очень плохая идея (reply to 262360)

?: Бизнес логика одно. Смарт контракты другая тема.   Это не простая игра, и деньги там огромные. Заплатить 0.05 тон 2 раза каждый сможет точно. Я сделал так в ux - 4 этапа, инициализация - 1. отправка одинакового хэша участниками команды вместе с гарантийным обеспечением и банком. 2. Игра. 3. Окончание и оплата. 4. Спор (reply to 262361)

?: Там не рядовые пользователи. Предполагается по дефолту, что пользователи уже есть и создается под них конкретно (reply to 262363)

?: Так попросили сделать сами пользователи будущей платформы (reply to 262363)

Dmitry | backend4you.ton: так в чем проблема с контрактами то? представьте что контракт это ящик, ему с одной стороны "в дырочку" суют записки с монетками, он может взять или не взять. внутри у него есть блокнот и он может что-то себе записывать. есть "выходная дырочка" куда он может выкидывать монетки с припиской "кому" и "за что" (reply to 262364)

?: Допустим есть 5 участников. С хэшем еще понятно как работать, но как отправлять все это количество кошельков на контракт через tonconnect? Или команда должна создаваться уже внутри контракта по ключевому - хэшу, и там уже выполнять логику? (reply to 262368)

Dmitry | backend4you.ton: ну не кошельков а адресов. в body/payload конечно же (reply to 262369)

Dmitry | backend4you.ton: вы сказали что "кто хэши отправил - тот и команда". значит контракт ждёт и накапливает - может 1 придет, может тысяча (reply to 262369)

?: То есть из 5 участников надо выбирать «лидера», который отправляет все 5 кошельков на контракт? (reply to 262370)

?: Вот, согласен) (reply to 262371)

?: Накапливать он будет в stateinit, верно?

Dmitry | backend4you.ton: это у вас в бизнес-требованиях дожно было быть, лидер или нет. а критиковать ваши бизнес-требования вы не разрешили ) (reply to 262372)

?: Как бы вы поступили в такой ситуации? (reply to 262376)

Dmitry | backend4you.ton: не совсем. init это начальное состояние, с которым контракт "рождается". а потом его модифицирует по желанию (reply to 262375)

?: Создали бы главный контракт, который бы получал информацию, а затем для каждой команды создавал отдельный контракт?

Dmitry | backend4you.ton: два варианта - либо заказчик считает что "он начальник я дурак", тогда прошу детальное ТЗ и делаю по нему, невзирая на видмимую неадекватность. либо участвую в уточнении бизнес-требований, но это заказчи=к должен быть готов к тому что окажется что "он дурак" (reply to 262377)

?: Понял, благодарю, а в случае с логикой контракта? (reply to 262381)

Dmitry | backend4you.ton: логика контракта должна следовать логике целой системы. откуда у вас в системе берется "команда"? (reply to 262382)

?: Команда это игроки с одинаковым хэшем, который они отправили на контракт (reply to 262383)

Dmitry | backend4you.ton: а если на контракт 2 игрока отправили один хэш, а три другой?

?: Тогда у нас 2 команды

Dmitry | backend4you.ton: в одном контракте?

?: На клиенте к 5 участникам привязывается один хэш, и отправляется через tonconnect (reply to 262386)

Dmitry | backend4you.ton: в одной игре?

?: Поэтому разных хэшей не может быть (reply to 262389)

Dmitry | backend4you.ton: откуда тот кто оправляет узнал хэш, откуда он узнал других четырех, откуда другие узнали хэш? (reply to 262389)

?: Для них создается чат на сокетах. Своего рода комната, где они общаются. У этого чата есть id в базе данных. Это id и есть хэш, который будет отправлен на контракт при старте игры (reply to 262395)

Dmitry | backend4you.ton: контракту все равно какой это хэш? он не знает какой правильный, какой нет? (reply to 262398)

наз: а норм практика вызывать 6 раз send_raw_message() в одной операции, или этот процесс можно как то оптимизировать?

?: Да, он просто сопоставляет одинаковые (reply to 262401)

Dmitry | backend4you.ton: до 255 можно (reply to 262402)

наз: благодарю (reply to 262405)

?: Например (reply to 262404)

Dmitry | backend4you.ton: тогда вы собираетесь делать штуку где один контракт держит очень много (безлимитно) данных (хэшей, адресов), а это очень плохая практика в тоне. объем данных в одном контракте должен быть адекватно-ограничен (reply to 262404)

?: Вот, поэтому я выше думал про основной контракт, который бы для одной такой «команды» создавал отдельный контракт (reply to 262409)

?: Но там возникает проблема получения информации об этом контракте. Все становится слишком запутанно (reply to 262410)

Dmitry | backend4you.ton: правильное направление (reply to 262410)

Dmitry | backend4you.ton: уверяю вас, до настоящего "запутано" вы еще даже не добрались :)))  этот контракт может при создании посылать сообщение-уведомление на какой-то единсветнный адрес. принимать его необязательно даже, оно просто будет уведомлением для тех кто следит за этим центральным адресом (reply to 262413)

?: Вот вот, морока безумная. А самое забавное, что я за пару часов написал простой аналог на солане (reply to 262415)

?: Вот и думал сегодня весь день. Уговорить заказчика на солану перейти или все таки начинать делать на такте..

Dmitry | backend4you.ton: когда из нструментов есть только молоток - все проблемы выглядят гвоздями )

?: 🤔🤔🤔 (reply to 262415)

?: Отправлять что-то вроде - «я живой, вот мой адрес -, вот участники команды -, вот сумма замороженного баланса-»?

?: Я еще сейчас подумал

?: А нет, неправильно подумал

Dmitry | backend4you.ton: все участники команды отправляют (тонконектом) начальное сообщение с хэшем.  хэш пусть будет частью  стейинита (точнее initdata). тогда разные участники из одного хэша автоматически получат один и тот же адрес. первый кто успеет - задеплоит контракт, остальные попадут на задеплоеннй и контракт их просто "засчитает"

Dmitry | backend4you.ton: тут сразу вопрос как долго конртакт должен ждать "участников", когда начинается игра?

SIMA4KA: Ребята помогите уже 4й день ломаю голову руки опускаются. с тон конект на свой сайт не устновить нормально через нпм

SIMA4KA: кнопка авторизации с тон конект нормально авторизирует

SIMA4KA: а  вот кнопка траназкции отправка нажимаю переходит в кошелек тг нажимаю подтверждить и пишет не удалось отправить . Комисиия хватает кошелек правильнный в коде все верно . но не дает .

SIMA4KA: Есть может какието Тонкости

Cube: Какую ошибку в консоль выводит? (reply to 262433)

Torkusz: А другой кошелек пробовали? Имею ввиду не тон спейс, а тон кипер например (reply to 262433)

SIMA4KA: Да уже и биржевые попробовал не в этом дело ( (reply to 262436)

SIMA4KA: А как через тг посмотреть тут ведь запускается она (reply to 262435)

Поняшко: веб (reply to 262438)

SIMA4KA: веб тг через бразуер ? (reply to 262439)

Поняшко: да

SIMA4KA: Сейчас посмотрю спс

Поняшко: консоль и сети если надо чекнуть эндоинты

?: Не совсем понял этот момент. У нас хэш в ходе разговоры был - id чата. Теперь хэш стал каким-то другим? И вот часть про первый задеплоит, тоже не совсем понял. А к вопросу ниже, как долго ждать. Есть 24 часа на присоединение. Дальше вход закрывается (reply to 262425)

I16000: День добрый,может кто нибудь ссылки скинуть на гайд как вычислить адрес роутера стонфи v2 для любого токена,если это возможно вообще

Dmitry | backend4you.ton: тип данных "хэша" пофиг - главное чтобы вы его могли в сообщение положить и потом считать  "задеплоит" - ну под каждую "команду" же новый контракт? откуда он возьмется? участники при отправке через тонконнект формируют stateinit - код контракта (шаблонный, вы разработаете и его потом фронт будет подставлять) плюс начальные данные (Init data) - туда id кладите (reply to 262449)

?: Так. В таком случае основной контракт нам не нужен. Мы сразу отправляем сообщение со stateinit через кошелек одного из «команды» через tonconnect ui react, передавая в body payload код, так? Я помню, что нагрузка сообщения вроде ограничена 228 битами, что делать если код больше? (reply to 262454)

Dmitry | backend4you.ton: нет ограничения 228, вы с чем-то попутали (reply to 262456)

?: Отлично, что перепутал, тогда все верно? И просто с фронта для каждой команды будет создаваться свой смарт контракт (reply to 262458)

SIMA4KA: Блин там кошлек не открывается при нажатии кнопки на сайте (reply to 262439)

Поняшко: можешь дев версию

Поняшко: если взаимодействия с беком

Поняшко: то постоман в помощь

SIMA4KA: Вот ошибку пишет. Но кошелек подлкбчается хорошо. А вот транзакция не проходит. Код весь вроде рабочий

Andy: как нет, а ограничение на размер ячейки (reply to 262458)

?: А есть где прочитать, как именно заполнять tonconnect ui react message body? Поддерживается ведь такт? (reply to 262459)

Andy: плохо пэйлоад сформировали (reply to 262468)

Dmitry | backend4you.ton: ячейка не ограничена 228 битами (reply to 262471)

Andy: ок, чуть больше. но все равно есть ограничение

SIMA4KA: Если не сложно обяьсните чуть подробнее пожалуйста (reply to 262473)

?: Поддерживаю (reply to 262476)

SIMA4KA: Или вы ошиблись что меня тегнули

?: Есть дока где прочитать можно про это? В react to connect ui react и tonconnect ui не нашел

Andy: в пэйлоаде должно быть сообщение в формате toncell и разрешенного размера

SIMA4KA: а у тебя какая проблема ? (reply to 262479)

SIMA4KA: у меня на html js

?: В payload stateinit засунуть нужно (reply to 262481)

Andy: есть общий документ по структуре блокчейна, там написано что такое toncell и как она формируется. дальше смотрите исходники сдк, есть ли валидация передаваемых вами данных (reply to 262479)

?: У меня react (reply to 262482)

SIMA4KA: А есть разница если я не устанавливал пакеты а через вставку просто в код вот это   <script src="https://unpkg.com/@tonconnect/sdk@latest/dist/tonconnect-sdk.min.js"></script> <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>

?: 😮😮😮😮 (reply to 262485)

Andy: недавно с тем же самым сидел на дарте :)

SIMA4KA: я уже 4й день ломаю голову ...

?: Toncell это формат ячейки (reply to 262485)

Andy: ну в пэйлоаде у тебя 1 ячейка. вот и формируй правильно её

SIMA4KA: Блин я запутался это видимо не мне 😁

?: Если мне нужно отправлять stateinit с кодом, который весит больше 1023 бит, что делать? (reply to 262493)

?: Я так понял, хранилище самого контракта не ограничено, оно состоит из мешка ячеек

Andy: ну можно ссылку на другую ячейку добавить. но не знаю, как это кошельки воспримут. я решил вместиться в это ограничение (reply to 262495)

?: Понял, тогда попробую вместить. А в каком виде отправлять? Просто чисто код обернуть в кавычки сделав строку или как? (reply to 262499)

?: Имею ввиду в payload (reply to 262501)

Dmitry | backend4you.ton: там в ячейках еще есть сыслки на другие ячейки (reply to 262475)

Andy: ну а кошельки как это отработают? если я войну и мир в пэйлоад запихну? (reply to 262505)

&rey: Код надо скомпилировать, как раз получите BOC. (reply to 262501)

?: Скомпилировать на фронте? (reply to 262509)

?: Это как (reply to 262510)

Dmitry | backend4you.ton: если больше 65к - блокчейн не примет. если меньше - возьмут с вас газа побольше (reply to 262507)

&rey: Как хотите.  Andy: так сообщения как раз предназначены для передачи каких угодно деревьев ячеек... (reply to 262510)

Andy: вот почему у меня при кривом пэйлоаде транзакция дорожала😀

?: То есть нужно взять код. Дальше его скомпилировать, получишь хэш, и уже его использовать в payload? (reply to 262514)

SweetJesus: у тебя для этого в структуре будет отдельное поле stateInit. (reply to 262483)

?: Нет (reply to 262518)

SweetJesus: вот теперь посмотри внимательно. (reply to 262522)

&rey: ну, раскомментировать stateInit и вперёд (и они не взаимно исключающие с payload) (reply to 262522)

?: Да, stateinit и payload (reply to 262523)

?: То есть это одно и тоже? Payload и stateinit? (reply to 262524)

Ari🐾: from kivy.lang import Builder from kivymd.app import MDApp from kivymd.uix.button import MDRoundFlatIconButton, MDRectangleFlatIconButton, MDRaisedButton from kivymd.uix.screen import MDScreen from kivymd.uix.screenmanager import ScreenManager from kivymd.uix.boxlayout import MDBoxLayout from kivymd.uix.label import MDLabel from kivy.metrics import dp  KV = ''' ScreenManager:     MainScreen:     Page1:     Page2:     Page3:     Page4:  <MainScreen>:     name: 'main'     MDBoxLayout:         orientation: 'vertical'         padding: dp(10)         spacing: dp(10)                  MDBoxLayout:             orientation: 'horizontal'             size_hint_y: None             height: dp(100)             padding: dp(20)             spacing: dp(20)             pos_hint: {"center_x": 0.5, "center_y": 0.5}                          MDRoundFlatIconButton:                 icon: 'bitcoin'                 text:'BTC'                 theme_text_color: "Custom"                 text_color: "blue"                 line_color: "red"                 theme_icon_color: "Custom"                 icon_color: "orange"                 on_release: app.change_screen('page1')             MDRectangleFlatIconButton:                 icon: 'ethereum'                 text:'ETH'                 theme_text_color: "Custom"                 text_color: "blue"                 line_color: "red"                 theme_icon_color: "Custom"                 icon_color: "orange"                 on_release: app.change_screen('page2')             MDRectangleFlatIconButton:                 icon: 'litecoin'                 text:'LTC'                 theme_text_color: "Custom"                 text_color: "blue"                 line_color: "red"                 theme_icon_color: "Custom"                 icon_color: "orange"                 on_release: app.change_screen('page3')             MDRectangleFlatIconButton:                 icon: 'tron'                 text:'TRX'                 theme_text_color: "Custom"                 text_color: "blue"                 line_color: "red"                 theme_icon_color: "Custom"                 icon_color: "orange"                 on_release: app.change_screen('page4')  <Page1>:     name: 'page1'     MDBoxLayout:         orientation: 'vertical'         MDLabel:             text: 'Page 1'             halign: 'center'         MDRaisedButton:             text: 'Back'             on_release: app.change_screen('main')  <Page2>:     name: 'page2'     MDBoxLayout:         orientation: 'vertical'         MDLabel:             text: 'Page 2'             halign: 'center'         MDRaisedButton:             text: 'Back'             on_release: app.change_screen('main')  <Page3>:     name: 'page3'     MDBoxLayout:         orientation: 'vertical'         MDLabel:             text: 'Page 3'             halign: 'center'         MDRaisedButton:             text: 'Back'             on_release: app.change_screen('main')  <Page4>:     name: 'page4'     MDBoxLayout:         orientation: 'vertical'         MDLabel:             text: 'Page 4'             halign: 'center'         MDRaisedButton:             text: 'Back'             on_release: app.change_screen('main') '''  class MainScreen(MDScreen):     pass  class Page1(MDScreen):     pass  class Page2(MDScreen):     pass  class Page3(MDScreen):     pass  class Page4(MDScreen):     pass  class MyApp(MDApp):     def build(self):         self.theme_cls.theme_style = "Dark"         self.theme_cls.primary_palette = "Orange"         self.theme_cls.material_style = "M3"         return Builder.load_string(KV)      def change_screen(self, screen_name):         self.root.current = screen_name  MyApp().run()      Это мой код, и моя проблема в том, что эти четыре кнопки не закреплены за экраном телефона, и я хочу, чтобы все четыре кнопки были вверху и в центре, а положение кнопок сохранялось за счет автоматического поворота телефона. экран. Простите, если при наборе есть ошибка, потому что я пользуюсь переводчиком.

SIMA4KA: У кого нибудь есть пример как должен пример правильного рабочего уже прям манифеста по тон конект на авторизацию и отправку транзакций и приём

Dmitry | backend4you.ton: @universeinmybrain  payload - это сообщение (которое придет контракту) stateinit - это код контраткта + начальные его данные, на случай если его еще нет

&rey: Для начала: что такое сообщение в тоне? (reply to 262526)

Ari🐾: Я был бы признателен, если бы кто-нибудь мог мне помочь, потому что я только начал (reply to 262527)

SweetJesus: просишь помощи определенно не в том чате. (reply to 262532)

?: Спасибо!) (reply to 262529)

集电极: Вы перепутали чат (reply to 262532)

?: Метод связи между контрактами (reply to 262531)

?: Не знал же я что payload это сообщение)

SIMA4KA: У кого нибудь есть пример как должен пример правильного рабочего уже прям манифеста по тон конект на авторизацию и отправку транзакций и приём?

Ari🐾: sorry (reply to 262536)

&rey: Ну да, причём единственный. Контракт делает что-либо только когда ему приходит входящее сообщение. (reply to 262537)

SweetJesus: так манифест это обычный жсон, чтобы кошельки инфу по твоему даппу тянули. (reply to 262539)

SIMA4KA: А что еще надо тогда может поэтому не работает именно транзакции? (reply to 262543)

?: Все понял, значит payload это единственное чем можно пользоваться) (reply to 262542)

&rey: В сообщении содержатся: флаги, отправитель, получатель, сколько-то тон, флаги, (опционально*) StateInit, (опционально*) payload – произвольная ячейка, которая может содержать ссылки.  *меняет способ укладки сообщения в ячейку (reply to 262542)

SIMA4KA: А авторизация работает кошелька (reply to 262545)

&rey: Оба должны работать. Может, кошелёк бракованный? (reply to 262548)

SIMA4KA: На который идет транзакции я? (reply to 262549)

SIMA4KA: Я уже менял его на много разных (reply to 262549)

&rey: А какая именно ошибка при отправке? (reply to 262553)

SIMA4KA: Я даже не пойму в чем ошибка сама

&rey: Подозреваю, это и есть бракованный кошелёк [отправителя, конечно]. (reply to 262557)

?: Ну флаги мне не нужны. Нужно будто только stateinit, payload, amount и address, спасибо! (reply to 262547)

&rey: Флаги валидаторам нужны, но с ними приложение кошелька само разберётся, да. (reply to 262561)

Ivan: А тоны на кошельке есть? с которого отправляете (reply to 262557)

?: Я просто пишу на такт, там с этим все просто, mode и готово (reply to 262569)

&rey: Это не отвечает на вопрос, а работает ли этот кошелёк как надо вообще. (reply to 262563)

?: В итоге, к чему мы пришли.   Для конкретной «игры» со своим id создается свой контракт через отправку stateinit вместе с id и другой инфой посредством tonconnect ui react. Комната создана, все рады. (reply to 262529)

?: По окончании игры, снова отправятся транзакции на контракт для подтверждения завершения с сообщением, в котором будет код выигравшего.   Заморозка спадает, победитель заберет деньги, а контракт заберет свою долю и отправит на кошелек владельца платформы (reply to 262577)

?: Совместными усилиями, спасибо!

&rey: А как сделать так,  чтобы все указали правильно выигравшего? (reply to 262582)

?: А это укажет сам фронтенд (reply to 262586)

?: По окончании игры просто выдаст кошелек того, кто выиграл

&rey: Игрок, поменявший фронтенд: ага-ага. (reply to 262587)

?: Хахаха, не так легко. Он с базой данных говорит (reply to 262589)

?: Вся сложная логика игры на сервере (reply to 262591)

&rey: А что мешает игроку даже не открывать фронтенд при завершении, а отправить на контракт свой адрес вручную? (reply to 262591)

?: Отправить должны все, иначе откроется спор и арбитр будет сам решать, кто победил (reply to 262594)

?: Такая, полуцентрализованная получилась, хахахахах

&rey: Сработает. Но можно проще.

?: Но как есть

User<6422235070>: Привет  Знает кто нибудь как получить количество жетонов которые юзер закинул в пул ликвидности дедаст по адресу его кошелька?

Alexander: Я так понимаю получить content у жетона on-chain нельзя. А есть ли/планируется ли  возможность on-chain забрать просто данные у другого контракта (мастера) и распарсить их у себя?

?: Точно, забыл (reply to 262577)

?: Мне wrappers то нужны? Я напишу сами контракты на такт, буду обращаться к ним через сообщения. Зачем врапперы?

Оскар: по сути это класс контракта в котором лежат методы для сборки/отправки этих же сообщений "в одну строчку", так же гет методы  на func тебе их надо самому писать, а tact генерирует их за тебя  ничего не мешает игнорировать врапперы и самому собирать месседжи (reply to 262608)

?: 😵‍💫😵‍💫😵‍💫 ничего не понял. Хахахаха, значит wrappers не трогаю, чисто деплою контракты в сеть, понял) (reply to 262610)

?: Пользуйся тонкипером (reply to 262617)

?: Покажи запрос

Sergey: Привет. Хочу заметить тестовую коллекцию NFT, где взять тестовы 100 TON  0QCtfoTAd1JFS1JEaR2oYRlZEQIJi_FTbTK6JrxPtL9NgZZq

~: написал в лс (reply to 262630)

Андрей: Имейте ввиду, что тестовые монеты не имеют ценности (https://t.me/tondev/107401) и если кто то хочет продать, то вас разводят (reply to 262630)

~: вы их можете получить их либо с бота, либо с тон консоли. С тон коноли там около 50 тест тонов = 1 тон или вроде того (reply to 262630)

~: с бота там медленно собирать, около 2 тона за час

/B4ckSl4sh\: Кстати, а когда тестнет собираются перезапускать? Чтобы на тестгивере больше тонов было

~: раньше же по 5 тон давала? (reply to 262636)

/B4ckSl4sh\: Да (reply to 262638)

/B4ckSl4sh\: До двух урезали я так понимаю потому что мало осталось

~: получается можно взять у модератора, у бота и в тон консоле за тоны? (reply to 262633)

Александр: await provider.run_get_method(self.address, 'get_wallet_data', [])                                         Вернуло ошибку pytoniq.liteclient.client.RunGetMethodError: Get method "get_wallet_data" for account Address<EQBBQZwBsCqdQ8e-ejpSjoI_VH4TAzKFYN6RcJpoB5J0kZRR> returned exit code -256

Александр: С чем это может быть связано?

SweetJesus: Может сеть перепутал, либо пытаешься вызвать гет метод у несуществующего аккаунта. (reply to 262644)

Illia: В тоне пока-что разве не 1 шард? Воркчейн 0 (reply to 262148)

Illia: Но теоретически понял, что нужно, при условии скейла (reply to 262148)

Антон: Всем привет! Может у кого то есть под рукой репозиторий/статья/что то по тому как cSBT реализуют?

/B4ckSl4sh\: Нет, вчера вот 4 было когда я смотрел, до этого были и 8 и 16 (reply to 262652)

rauf: Hello guys . Where i can learn to make nft collection on ton?

Victor: Доброй ночи, ищем разработчика в проект для разработки контракта, оплата фикс, писать в ЛС, спасибо.

Атӑл: Кто-то знает как в ton-assets добавить свой токен?

Атӑл: В своем твиттере делаю пост. А сюда как запушить? Мне не дает форк создать https://t.me/tondev/231458 (reply to 231455)

SIMA4KA: Подскажите на сколько сложна идея из обычного HTML CSS готово приложения запихнуть все в реакт или невозможно?

Vladimir: В Твиттере? (reply to 262682)

Атӑл: Разобрался с форком, надо было с другого акка)  Как долго ждать пока проверят? Кто знает? https://github.com/tonkeeper/ton-assets/pull/1305 (reply to 262685)

— 2024-11-08 —

Alexander: Перезадам вопрос, может быть есть чей-то оракул который умеет отдавать metadata jetton on-chain? (reply to 262603)

User<7727973243>: Написал в лс (reply to 262677)

CRBI51: Подскажите, может сталкивались с проблемой? При свапе токена stonfi_v2 на моменте пула выдает exit_code 9 в теле сообщения и токен не свапает. тело сообщения собирал по схеме tl-b

/B4ckSl4sh\: Скиньте как собираете боди и тлб по которому собираете (reply to 262713)

CRBI51: TL-B swap#6664de2a token_wallet1:MsgAddress refund_address:MsgAddress excesses_address:MsgAddress tx_deadline:uint64 cross_swap_body:^[min_out:Coins receiver:MsgAddress fwd_gas:Coins custom_payload:(Maybe ^Cell) refund_fwd_gas:Coins refund_payload:(Maybe ^Cell) ref_fee:uint16 ref_address:MsgAddress] = DexPayload;

CRBI51: swap_params = (begin_cell()                 .store_coins(0)                   .store_address(wallet.address)                  .store_coins(0)                   .store_maybe_ref(None)                   .store_coins(0)                   .store_maybe_ref(None)                   .store_uint(0, 16)                   .store_address(None)                   .end_cell())      stonfi_forward_payload = (begin_cell()         .store_uint(0x6664de2a, 32)          .store_address(token_wallet1)          .store_address(wallet.address)          .store_address(wallet.address)           .store_uint(int(time.time() + 60), 64)           .store_maybe_ref(swap_params)          .end_cell())

/B4ckSl4sh\: Выглядит правильно, может ваша либа плохо обрабатывает store_maybe_ref(None)? Попробуйте сохранить это как store_uint(0, 1). К адресу относится то же самое, store_address(none) => store_uint(0, 2) в остальном я ошибок не вижу (reply to 262720)

CRBI51: Попробовал, ответ такой же, к сожалению

rends_east: А как вы токен им отправляете? (reply to 262720)

CRBI51: stonfi_swap_body = (begin_cell()                  .store_uint(0x1f3835d, 32)                    .store_uint(0, 64)                    .store_coins(swap_amount)                    .store_address(wallet.address)                  .store_maybe_ref(stonfi_forward_payload)                   .end_cell()) (reply to 262730)

Svαtoωλ‎: Блин а как собирать тлб схемы в питонике (reply to 262719)

rends_east: Это вы тон отправляете? (reply to 262731)

CRBI51: К моему удивлению, они сделали новый формат сообщения, с новым op-code, а интрукции или op-code'a не было в документации, так что пришлось импровизировать за счет примера рабочих транзакций (reply to 262730)

CRBI51: не тон, а pTon, прокси в2 как я понял не принимает Тон, и вроде что-то типо такого и говорится в документации, сильно не вчитывался (reply to 262733)

CRBI51: Честно, не знаю, и даже не понимаю что это за ошибка, если они выдают по принципу тона, то это перегрузка, но перегрузка чего? Непонятно 🤷 (reply to 262735)

Viacheslav: есть ли в тоне аналог ERC1155 nft? или только ERC721?

Константин: Привет всем. Я начинающий крипто-энтузиаст. Сделал свой жетон, мини-апп.   Хочу добавить свой жетон в white-list на гитхабе, но что-то не получается.   Может кто помочь мне в этом деле пожалуйста.

Dmitry | backend4you.ton: там вроде PR надо сделать, а он делается по инструкциям гитхаба

Dmitry | backend4you.ton: в схеме cross_swap_body:^[ - просто/сразу ссылка, без maybe а вы кладете store_maybe_ref - с битом флага (reply to 262720)

Oleg: Всем привет. Может кто сталкивался с проблемой итерирования словарей? Словарь slice(320) -> slice(16), хранится в c4 В словарь добавляется одна запись при каждой транзакции, а потом при последней транзакции все записи должны удалиться Если транзакций (записей) до 200 штук, то всё работает нормально Но если их больше, то транзакция "удаления" падает с exitCode = -14 (закончился газ) Я перед работой со словарем вызываю accept_message(), что должно позволить юзать весь баланс контракта, но даже если баланс контракта огромный (> 20 000 TON) и в самой транзакции отправляется 100 TON, то всё равно при итерировании словаря, примерно на 200 позиции контракт падает Это всё я в песочнице проделываю (sandbox blueprint), в тестнете не пробовал Может кто знает в чем проблема?

rends_east: а ты как удаляешь контракт? поэлементно? (reply to 262831)

rends_east: accept_message не позволяет юзать весь баланс, он устанавливает gas limit на максимальный (reply to 262831)

Oleg: Да, через get_next (reply to 262833)

Oleg: Ого, а не подскажете какой лимит газа? (reply to 262834)

rends_east: доставать 200+ элементов из контракта слишком дорого просто, ты упираешься в газ лимит - 1кк газа или 0.4 тона (reply to 262835)

Oleg: Понял, спасибо. Тогда ограничу удаление записей за один раз (reply to 262838)

rends_east: используй еще мб сразу dict_delete и т.д, методы, которые сразу удаляют получаемый элемент из массива (reply to 262839)

Legendary: Какие операции занимают наибольшее количество газа? (reply to 262831)

Oleg: Мне нужно не все сразу удалить, а у которых valid_until истёк. Просто тест сделал такой, чтобы пришла пора сразу всё удалять (reply to 262841)

&rey: Создающие новые ячейки — как, например, удаление из словаря по одной записи. (reply to 262842)

Legendary: Да, видимо пробовать процесс удаления разбивать

Oleg: В доках так нипасано (reply to 262842)

Oleg: А удаление одной (первой) ячейки приводит к пересозданию всех уже имеющихся ячеек в словаре? (reply to 262844)

Gosha: Привет Подскажите, пожалуйста, что такое actionCode в printTransactionFees

&rey: Пересоздаются вверх от узла до корня. (reply to 262848)

Danila: с каким кодом завершились actions (reply to 262850)

Danila: для compute phase один exit code, для action phase другой

Oleg: https://docs.ton.org/v3/documentation/tvm/tvm-exit-codes (reply to 262850)

Oleg: Понял, спасибо большое (reply to 262851)

Gosha: То есть в exitCode не может быть кода 37?

&rey: Если контракт его сам не кинет — нет. (reply to 262859)

Gosha: Спасибо! Осталось только понять почему мне не хватает 1.5 TON)

Zakir: привет а где могу посвежее снапшоты могу найти? https://archival-dump.ton.org/ тут за июнь

集电极: dump.ton.org/dumps (reply to 262866)

Zakir: Спасибо!!!! (reply to 262868)

кивель: Пытаюсь сминтить нфт через питон, при получении seqno возникает ошибка, помогите, пожалуйста;  Traceback (most recent call last):   File "/Users/user/PycharmProjects/mint/deploy_internal.py", line 79, in <module>     asyncio.get_event_loop().run_until_complete(deploy_collection())   File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete     return future.result()   File "/Users/user/PycharmProjects/mint/deploy_internal.py", line 42, in deploy_collection     seqno = await get_seqno(client, wallet_address)   File "/Users/user/PycharmProjects/mint/deploy_internal.py", line 31, in get_seqno     data = await client.raw_run_method(method='seqno', stack_data=[], address=address)   File "/Users/user/PycharmProjects/mint/venv/lib/python3.10/site-packages/pytonlib/client.py", line 244, in raw_run_method     contract_id = await self._load_contract(address)   File "/Users/user/PycharmProjects/mint/venv/lib/python3.10/site-packages/pytonlib/client.py", line 212, in _load_contract     result = await self.tonlib_wrapper.execute(request, timeout=self.tonlib_timeout) pytonlib.tonlibjson.TonlibNoResponse: tonlibjson did not respond  Код получения seqno:  async def get_seqno(client: TonlibClient, address: str):     data = await client.raw_run_method(method='seqno', stack_data=[], address=address)     return int(data['stack'][0][1], 16)  Деплой коллекции:  async def deploy_collection():      collection = create_collection_mint()     state_init = collection.create_state_init()['state_init']      client = await get_client()      seqno = await get_seqno(client, wallet_address)      query = wallet.create_transfer_message(to_addr=collection.address.to_string(),                                    amount=to_nano(0.05, 'ton'), seqno=seqno, state_init=state_init)      await client.raw_send_message(query['message'].to_boc(False))  Функция клиента:  async def get_client():     url = 'https://ton.org/testnet-global.config.json'      config = requests.get(url).json()      keystore_dir = '/tmp/ton_keystore'     Path(keystore_dir).mkdir(parents=True, exist_ok=True)      client = TonlibClient(ls_index=2, config=config, keystore=keystore_dir, tonlib_timeout=10)      await client.init()      return client

SIMA4KA: ❓Добрый день ребят.  ⭐️Подскажите я подключил тон конект без скачивания пакетов через cdn вроде бы называется. Скажите где я могу смотреть инфу по кошелькам кто подключен к ним.   😞 Не проходите мимо будьте так добры  ❓ЭТО НЕ РЕКЛАМА А ВОПРОС ❓

кивель: Это я исправил, но теперь такая ошибка:  pytonlib.tonlibjson.ExternalMessageNotAccepted: LITE_SERVER_UNKNOWN: cannot apply external message to current state : External message was not accepted Cannot run message on account: inbound external message rejected by transaction EA46C02933176A6F40F1AA1C71A683559F215FE13217BBA4419578E7ACB29276: exitcode=0, steps=0, gas_used=0 (reply to 262913)

&rey: Вероятно, на кошельке, с которого отправляете тоны, тонов нет. (reply to 262943)

кивель: 2 тона есть, ща новый создам (reply to 262944)

&rey: А есть причины не пользоваться pytoniq? (reply to 262913)

кивель: хз, посмотрел гайд от ton dev 2023 года (я так понял от создателя pytoniq как раз) и просто тот код скопировал  ничего не получалось, потому что кошель не был инициализирован 😀 (reply to 262949)

кивель: сейчас все ворк (reply to 262951)

~: @pcrafter (reply to 262940)

Andy: Всем привет. А что с проектом ton grants and bounties? Сделал им ишью, никто не отвечает

Andy: Кому можно написать по этому вопросу?

~: модератору напишите какому-нибудь @f_closer ответил мне быстро недавно, может поможет (reply to 262958)

/B4ckSl4sh\: Зависимость от лайтсервера, вместо провайдера (фиксится использованием tontools), и онлайн контракты, а не офлайн как в tonsdk, что бывает очень удобно. Знаю что tonsdk корявый и неудобный и с багами, но всё равно часто пользуюсь из-за офлайн контрактов (reply to 262949)

Leo: ? (reply to 262972)

Alexey: Здравствуйте. Если Toncenter v2 api возвращает ошибку 504. Безопасно ли отправить запрос повторно? Например транзакцию.

mllbll: Всем привет, кто может, пожалуйста, помочь с кодом на транзакцию на изменение названия editable collection. Я выполняю код, но потом на гетгемсе пытаюсь обновить метаданные, и пишет ошибку invalid url. Я просто сам минчу editable collection и хочу в своих коллекциях менять название, но тестирую на гетгемсе. Если кто то сможет посмотреть код и сказать что не правильно и подсказать как нужно, буду очень сильно благодарен

Victor: Invalid url значит, что getgems не может достать фото или еще что-то. (reply to 262985)

CRBI51: То есть вы имеете ввиду, ссылку на тело cross_swap_body? Или же в нем? (reply to 262824)

mllbll: Просто я вроде больше ничего не меняю кроме названия, а фотка та же самая остается (reply to 262999)

Victor: Скинь ссылку на метудату (reply to 263004)

Pavel: Привет, как я могу получить следующий элемент в udict? Для этого можно использовать: (int, slice, int) udict_get_next?(cell dict, int key_len, int pivot) asm(pivot dict key_len -> 1 0 2) "DICTUGETNEXT" "NULLSWAPIFNOT2";  Проблема заключается в том что мне нужно получить ссылку на ячейку, а в этом примере он выдает slice.   К сожалению в fift нет инструкции DICTUGETNEXTREF   Я бы очень хотел найти такую функцию как udict_get_next_ref?

&rey: Проверьте, может, её просто забыли записать в stdlib / в Asm.fif, а опкод есть. (reply to 263006)

Оскар: такого опкода нет, если ты имеешь ввиду что ты в value словаря хранишь cell - то просто load_ref()  если ты имеешь ввиду что тебе нужно это значение как ячейка, то нужно самому пропихнуть этот слайс в ячейку, словарь возвращает именно слайс, а не ячейку потому что первые N бит занимает лейбл и он уже прочитан в слайсе, который тебе вернули (reply to 263006)

User: Error: Unable to execute get method. Got exit_code: 262  Можете подсказать, что за ошибка странная. Выходит при get_reserves у пула, dedust

Атӑл: пока сам сделал пулл рекуест и жду что будет (reply to 262821)

Константин: Я тоже что-то там сделал т жду синхронизации)) (reply to 263017)

Константин: Если что, то поделишься результатом потом пожалуйста 🙏 (reply to 263017)

Атӑл: я пока не понял как долго ждать проверки (reply to 263018)

Константин: Круто. Желаю, чтобы всё быстро произошло и успешно (reply to 263020)

CRBI51: Подскажите, днем сегодня уже спрашивал, может кто-то уже делал такой кейс? Реализовывал stonfi_v2 swap, и выдает такую ошибку при свапе в pool_stonfi_v2 exit code: 9 в теле сообщения

CRBI51: Делал все по схеме TL-B документации стонфи в2 TL-B: swap#6664de2a token_wallet1:MsgAddress refund_address:MsgAddress excesses_address:MsgAddress tx_deadline:uint64 cross_swap_body:^[min_out:Coins receiver:MsgAddress fwd_gas:Coins custom_payload:(Maybe ^Cell) refund_fwd_gas:Coins refund_payload:(Maybe ^Cell) ref_fee:uint16 ref_address:MsgAddress] = DexPayload;

CRBI51: Само тело: swap_params = (begin_cell()                 .store_coins(0)                   .store_address(wallet.address)                  .store_coins(0)                   .store_uint(0, 1)                   .store_coins(0)                   .store_uint(0, 1)                 .store_uint(0, 16)                   .store_uint(0, 2)                   .end_cell())      stonfi_forward_payload = (begin_cell()         .store_uint(0x6664de2a, 32)          .store_address(token_wallet1)          .store_address(wallet.address)          .store_address(wallet.address)           .store_uint(int(time.time() + 60), 64)           .store_maybe_ref(swap_params)          .end_cell())       stonfi_swap_body = (begin_cell()                  .store_uint(0x1f3835d, 32)                    .store_uint(0, 64)                    .store_coins(swap_amount)                    .store_address(wallet.address)                  .store_maybe_ref(stonfi_forward_payload)                   .end_cell())

Атӑл: Кто-то знает, а монеро на тон-токены менять можно?

SweetJesus: .store_ref вместо store_maybe_ref (reply to 263025)

Оскар: это опкод чего? (reply to 263025)

Оскар: так же было бы легче если бы ты ещё транзакцию выдал

CRBI51: pTon_transfera (reply to 263029)

Оскар: ? (reply to 263031)

Оскар: я просто по докам шарю стона - не вижу этого опкода от слова совсем

CRBI51: Пробовал, все по старому, выдает exit_code 9 (reply to 263028)

CRBI51: Он правильно определяет структуру сообщения, правильность его, и самое главное допускает до пула (reply to 263037)

CRBI51: А дальше уже откидывает, по какой то причине не свпает, выдает Exit_code: 9 при этом в доках такого тупо нет

CRBI51: должен писать amount1_out (какое кол-во токенов) но выдает 0, и баунсит обратно

CRBI51: Так же работает и если продавать токены, доходит до свапа, и откидывает

Оскар: 9 код это код твм cell underflow - пытались прочитать больше, чем лежит (reply to 263039)

CRBI51: Да понимаю, есть понимание того, если это tvm, но если не ошибаьсь, ошибку должно писать в таком случае непосредственно в транзакции, как Compute Phase Exit code: 9

Оскар: зачем бит загружать? там ни either, ни maybe (reply to 263044)

Оскар: ^[...] означает что это мы просто пихаем данные в реф, если там maybe или either - перед этим они и будут написаны (reply to 263044)

CRBI51: Запомню, но эффект такой же( (reply to 263046)

Оскар: попробуй затолкать в ref_address любой адрес вместо двух нулей (reply to 263047)

Оскар: 404 (reply to 263049)

CRBI51: Поменял адрес (reply to 263050)

Оскар: ну тогда ищи ошибки или жди пока кто-то уже сталкивался с подобным (reply to 263051)

CRBI51: Окей, спасибо😅

Denis: скоро у мейннета день рождения 11/15/2019, 3:53:05 PM

Пескарь™ | фронтент телефонов: спасибо будем отмечать (reply to 263056)

Roman: Ребят, прошёл курс по такту уже. Пока такие крайне важные вопросы. Меня интересует каким образом кошельки типо тонкипера делают превью транзакции перед подтверджением. Я слышал что через опкоды, но хз. Мне мужно чтобы кошелёк явно показывал что будет делать смарт контракт и какие там будут действия с балансами. Поэтому пожалуйста подскажите, как кошельки делают превью, и можно ли это одинаково хорошо кастомить как в такте, так и в фанс

Roman: Допустим как он различает какие действия будут происходить с нфт, или что будет с жеттонами если их пустить в контракт с функцией с конкретным опкодом

Оскар: эмулируют транзакцию, смотрят на стандартные опкоды и схлопывают серию месседжей в один высокоуровневый ивент (отправка жетона, отправка нфт, своп и тд и тп), если это возможно не совсем понимаю что значит "кастомить как в такте, так и в фанси" (reply to 263068)

User<7931577249>: открываешь tonkeeper, ctrl + shift + i, заходишь на фрагмент, делаешь транзу(не подтверждаешь) и во вкладке нетворк всё видишь (reply to 263068)

Roman: я прост чайник, ток начал учиться деву в тоне. сорри если вопросы не внятные. под кастомить я имел ввиду делать поток транзакции понятным для кошелька чтобы правильно отображалось (reply to 263070)

User<7931577249>: эмуляция трарнзакций тебе сама пишет что происходит (reply to 263072)

User<7931577249>: ща эндпоинт дам

Roman: спасибо большое. то есть оно по сути всё делает само, но так же влияют дефолтные опкоды стандартов? (reply to 263073)

User<7931577249>: а я не ебу как оно работает (reply to 263080)

Roman: ахахаха

Roman: а функционал с опкодами можно одинаково хорошо реализовать как в фанс так и в такте?

User<7931577249>: не шарю (reply to 263084)

User<7931577249>: та блять

Roman: спасибо

User<7931577249>: tonapi io/api-v2#operations-Emulation-emulateMessageToAccountEvent

Roman: если кто то ещё шарит за это, отпишите потом сюда пж

User<7931577249>: и выбери тут что тебе надо

Оскар: я скажу так - тут все контракты работают на "функционале с опкодами", поэтому да (reply to 263084)

Denis: а надо ему в /v2/traces/emulate а всё остальное не надо

Denis: ох если бы (reply to 263095)

Оскар: когда нибудь мы узнаем что понапихали в фильтры комбота

Roman: спс, действия с опкодами можно одинаково реализовать и в такт и в фанс? (reply to 263095)

Оскар: да (reply to 263100)

Roman: спасибо всем

SweetJesus: такт компилится в фанси (reply to 263100)

Roman: сорри если вопросы не внятные, сам пока нихуя почти не понимаю)

Roman: это понятно, но я имел ввиду что вдруг надо что то явно указать на более низком уровне (reply to 263104)

Alex: А что за программа? (reply to 263078)

&rey: Chrome, меню разработчика. Полезная вещь. (reply to 263107)

Alex: Тьфу. Даже не узнал сразу. Спасибо (reply to 263108)

— 2024-11-09 —

mllbll: Всем привет ещё раз, по тому же вопросу примерно обращаюсь, но сейчас вопрос такой : если метаданные лежат у меня на сервере, я отправляю транзакцию на изменение метаданных через контракт editable collection, мне нужно на моем сервере менять сам файлик json с метадатой ? (reply to 262985)

Иван: Подскажите, что вообще такое refs depth при вычислении хеша? На странице ничего про это не нашел.  https://docs.ton.org/v3/documentation/data-formats/tlb/cell-boc

Nerses: Я создал новый проект, используя blueprint, но build не удалась.Кто-нибудь может подсказать, что может быть причиной этой ошибки?  [3/3] Creating your first contract... Build script running, compiling Game ⏳ Compiling...Tact compilation failed TypeError: paramSet.isSubsetOf is not a function     at resolveFunctionDescriptor (\@tact-lang\compiler\dist\types\resolveDescriptors.js:600:31)     at resolveDescriptors (\@tact-lang\compiler\dist\types\resolveDescriptors.js:1243:19)     at precompile (\@tact-lang\compiler\dist\pipeline\precompile.js:18:55)     at Object.build (...\@tact-lang\compiler\dist\pipeline\build.js:62:43)     at doCompileTact (...\@ton\blueprint\dist\compile\compile.js:130:28)     at doCompileInner (...\@ton\blueprint\dist\compile\compile.js:144:22)     at doCompile (...\@ton\blueprint\dist\compile\compile.js:168:23)     at async buildOne (...\@ton\blueprint\dist\build.js:21:24)     at async create (...\@ton\blueprint\dist\cli\create.js:84:9)     at async main (..\node_modules\@ton\blueprint\dist\cli\cli.js:91:5) Error: Could not find boc in tact compilation result Error: Command failed: npm exec blueprint -- create Game --type tact-empty     at checkExecSyncError (node:child_process:890:11)     at execSync (node:child_process:962:15)     at main (...\node_modules\create-ton\dist\cli.js:141:34) {   status: 1,   signal: null,   output: [ null, null, null ],   pid: 37024,   stdout: null,   stderr: null }

Oleg: Скорее всего, на какой глубине эти рефы, т.е. непосредственные рефы ячейки считаются глубиной 0, так по смыслу вроде подходит (reply to 263131)

Vlad: Ку, кто нибудь шарит? У стонфай есть ли апи или у тонкипера, допустим у нас есть коин с медкой ликвидностью и сам по себе тон апи не подтягивает цену нашегт коина однако цена отображается на стонфай и тонкипер

RootTon: https://github.com/lapismyt/ston-fi.py/tree/main (reply to 263149)

RootTon: Есть еще под раст

RootTon: И го но вот этого я уже не найду )

Fotex: Всем привет, подскажите как сделать подпись произвольного сообщение на Python? То есть сообщение не на перевод токенов, а подпись текста (например, “authorize to api”)

Farel: подскажите пж как купить нфт с гетгемса через апи

&rey: "API" с вас тоны списать не может. Сформируйте сообщение покупки и отправьте с кошелька. Вариантов есть много; на каком языке лучше? (reply to 263193)

Farel: на любом удобном вам (reply to 263195)

&rey: from pytoniq import LiteBalancer, WalletV4R2, begin_cell import asyncio  mnemonics = []  nft_sale_contract = 'EQBeeFa0...' nft_price_ton = 1.4  async def main():      provider = LiteBalancer.from_mainnet_config(1)     await provider.start_up()      wallet = await WalletV4R2.from_mnemonic(provider=provider, mnemonics=mnemonics)      transfer = {         "destination": nft_sale_contract,         "amount":      int(10**9 * nft_price_ton) + 1,         "body":        begin_cell().end_cell()     }      await wallet.transfer(**transfer)     await client.close_all()  asyncio.run(main())  У этого кода есть два случая, когда он ничего не сделает вместо покупки. (reply to 263196)

Farel: я научился получать текущую цену по айтему, осталось только научиться покупать по этой цене)

Farel: спасибо, пошел разбираться (reply to 263197)

RootTon: всем привет, я новичок в разработке смарт-контрактов, подскажите, пожалуйста, как я могу получить текущего админа в моем контракте на"такт"?  Я использую пример, описанный здесь: https://docs.tact-lang.org/ref/stdlib-ownable/#ownable и мне нужен гетер, которая предоставит мне информацию о смарт-контакте, в том числе в этой информации я хочу содержать адресс овнера контракта

Alacrity: это блокчейн, нельзя заблокировать чей-то кошелек (reply to 263202)

/B4ckSl4sh\: гет-метод owner вызовите (reply to 263201)

RootTon: как то подобным образом?

/B4ckSl4sh\: когда вы используете трейт Ownable, он уже определяет гет-метод owner, который вернёт овнера. (но не строкой, а Slice) Если вы имели в виду "Как узнать своего овнера в самом контракте", то правильный ответ вы написали - self.owner это обращение к своему полю (reply to 263206)

RootTon: аааа понял это вот он, а как тогда в ts при деплое указать адрес овнера есть какой то пример? а то я полазел по гиту такта и нашел токо примеры смартов на нем (reply to 263207)

/B4ckSl4sh\: там генерируется метод init, в который нужно отдать эти параметры (reply to 263208)

RootTon: вот да, а я правильно понимаю что отдавать их надо до деплоя, описывая это в скриптах на ts верно? (reply to 263209)

/B4ckSl4sh\: https://github.com/howardpen9/jetton-implementation-in-tact Думаю на примере проще будет (reply to 263210)

RootTon: я покрутил повертел и да помогло, но другая ошибка при деплое его в тест нет: Error: Contract was not deployed. Check your wallet's transactions с чем это может быть связано ? (reply to 263211)

RootTon: вроде как разобрался что у типа Ownable нету сенд метода из за чего нельзя прописать  await first.send(         provider.sender(), // Sender address         {             value: toNano('0.1'), // Set initial deployment funds         },         {             $$type: 'Deploy',             queryId: 0n,         },     ); (reply to 263212)

IKke: куда на фронт добавлять ключ от тон апи?

Vadi: Товарищи, подскажите. Нужно отправить децентрализированный токен с кошелька на кошелек. Как можно это максимально просто реализовать?

RootTon: куда не добавляй все равно видно будет) при запросах (reply to 263225)

RootTon: p2p жетонов? (reply to 263226)

Vadi: Мне типо нужно со своего кошелька при нажатии на кнопку раздавать награды в этом токене. Количество, адреса есть. Нужно в коде реализовать.. Проблема, что он децентрализованный (reply to 263229)

集电极: Что в вашем понятии "децентрализованный токен"? Что это значит? (reply to 263231)

RootTon: смарт контракт, проще всего (reply to 263231)

Vadi: Не биржевой в моем понимании. Вообще он ston.fi (reply to 263232)

集电极: Так это децентрализованная биржа. О каком токена речь? Вам нужно обычный токен раздать пользователям? (reply to 263235)

Vadi: https://www.geckoterminal.com/ton/pools/EQCvYaY36mhVmN26T58g0S1BENaa4IX1LaU5rE0DmS4rIUW1

Vadi: Вот этот. Пока не придумал какой контракт к нему и как это сделать

集电极: Ну то есть самый что ни на есть обычный токен (reply to 263237)

Vadi: Получается так

Vadi: Подскажите, возможно есть скрипт какой-то на этот случай? (reply to 263239)

集电极: Самый простой способ для вас это наверное tonraffles.app/jetton/sender (reply to 263242)

Vadi: Спасибо, попробую (reply to 263244)

0x90: Друзья, кто-нибудь поднимал тестовую сеть тона локально?

Unknown: https://docs.ton.org/v3/guidelines/nodes/running-nodes/running-a-local-ton (reply to 263248)

Иван: Всем привет. А кто-нибудь знает, можно ли из Blueprint Custom script послать несколько сообщений в одной транзакции? В интернете все примеры только для фронта (ton connect) гуглятся. Значит ли это, что blueprint не умеет так?

/B4ckSl4sh\: А есть разница? Несколько сразу или по очереди (reply to 263252)

Victor: Сори уже мозги плывут 😑 (reply to 263252)

Иван: Юзеру два раза подтверждать в кошельке придётся (reply to 263256)

Иван: Или если несколько сразу, то тоже?

/B4ckSl4sh\: Я про блюпринт (reply to 263260)

/B4ckSl4sh\: Нет (reply to 263262)

Work3: Всем привет! Нужен devops специалист который поднимет маштабируемый K8s. Все приложения лежат в докере

Иван: Ну я тоже. В блюпринте же можно custom script сделать и любой может его запустить, привязать кошелёк и запускать чё угодно. Вот этот потенциальный человек - юзер (reply to 263263)

Victor: Wtf, скрипт для разрабов. (reply to 263266)

/B4ckSl4sh\: Соболезную вашим юзерам, если вы им блюпринт проект отдаёте и заставляете оттуда транзакции отправлять (reply to 263266)

Иван: Сори, клуб хейтеров фронтенда, видимо, на другом этаже 😁 Ладно, понятно

rends_east: Ну когда ликву заливаешь на стонфи, например, хочется все батчем отправить (reply to 263256)

0x90: Спасибо, видел MyLocalTon, но хотелось бы что-то в docker-е. Может у кого то уже был пример (reply to 263249)

/B4ckSl4sh\: Да я вообще сначала подумал, что человек про сендбокс в блюпринте спрашивает) (reply to 263270)

&rey: await wallet.sendTransfer надо будет. Ну или объект-буфер для того же тон коннекта. (reply to 263266)

&rey: Некомильфо пользователю запускать какой-то код вне песочницы браузера. Особенно когда там npm. (reply to 263269)

Nerses: Возможно ли использовать foreach для  map<Int,<map<Int,Struct>> ?

Denis: в заголовок Authorization: Bearer <token> в настройках тонконсоли можно ограничить число запросов на одного клиента по ip (reply to 263225)

MegaHub: Всем привет. Есть ли в TON возможность совершать транзакции в сети имея только приватный ключ кошелька?  Если можно посоветуйте В какую сторону копать что смотреть и вообще хотя бы в двух словах механику того что должно быть сделано.  Смотрели web3 rpc... Вникнуть с наскока - не удалось, есть ли какие-то варианты для чуть более чем средних умов основанные на известных подходах... Без веб-3. )

RootTon: всем привет есть ли у кого нибудь базовый пример как можно сделать геттер в смарт контракте на tact доступным через пароль? мне нужно чтобы я вызывал геттер в тон апи и передавал ему аргумент ввиде пароля а после проверял если пароль указанный внутри смарт контракта != введенному паролю то выкинуть кастомную ошибку в ином случае (положительный исход) вернуть адрес владельца контракта, буду безумно благодарен !

&rey: pytoniq посмотрите, с await wallet.transfer. (reply to 263277)

&rey: вы же понимаете, что кто угодно может получить стейт контракта и проигнорировать вашу проверку? (reply to 263278)

Svαtoωλ‎: beta.tonapi.io | 502: Bad gateway  кто знает, почему? почти каждый второй запрос bad gateway

RootTon: нет не особо понимаю, я так понимаю мою "хотелку" реализовать не возможно? (reply to 263280)

&rey: можно, только смысла строго ноль (reply to 263282)

RootTon: потому что можно "проигнорировать вашу проверку" ? или так в априори никто не делает? (reply to 263283)

&rey: потому что "проигнорируют вашу проверку", даже не то что "можно" ну и поэтому так и не делают  slice get_owner(int password) method_id {     (int exp_password, slice owner) = load_data();     throw_unless(403, password == exp_password);     return owner; }

Михаил: У меня иногда тон апи выдает ошибки, но я делаю повторный запрос и все нормально (reply to 263281)

RootTon: принял спасибо, тогда откажусь от данной "хотелки" (reply to 263285)

Gio: Добрый вечер, а где можно сделать пост про про поиск ТОН девелоперов для проекта?

MegaHub: Принято. Посмотрим. (reply to 263279)

RootTon: tma build  тут (reply to 263289)

MegaHub: Посмотрел...  Всё что там написано больше похоже на "Lorem ipsum" - какие-то псевдо-слова... Для кого это писали вообще непонятно, Я уж не говорю о том что там вообще написано.  Каким-то методом water.transfer - там и не пахнет.  То есть ни в одном из источников нету подобного сочетания букв. ) (reply to 263279)

&rey: Ну, как же "ни в одном из источников"? У чата есть история, и телега любезно позволяет по ней искать) Пример-то достаточно простой: https://t.me/tondev/257007. (reply to 263294)

MegaHub: А то есть нужно искать в чате а не в официальной документации проекта? (reply to 263295)

&rey: Если не получается найти в одном месте — информацию проще искать везде.  И да, есть такой фокус, чтобы история чата тоже становилась хорошей базой знаний, даже если отдельные проекты не могут. (reply to 263296)

Константин: Всем привет. Подскажите, почему не происходит форк. Хочу свой токен добавить, но не знаю как правильно. Сделать.   Может кто за респект подсказать, что я делаю не так 🙏

MegaHub: Ну я как-то больше привык к тому что чат скорее дублирует и поясняет базу из самого проекта... Я что-то даже не подумал что чат - это самостоятельная база.  Кроме того после миллиона сообщений она начнёт теряться... Поэтому по-хорошему конечно надо бы выносить все что важно в основную документацию. (reply to 263298)

Alexey: У toncenter api тоже частенько ошибки, вариант только повторять запрос (reply to 263281)

Svαtoωλ‎: Как узнать цену токена в определенное время?

Андрей: Можно вызвать get method определения цены токена у пула скормив определенный блок (reply to 263305)

наз: всем привет, подскажите, правильно ли тут в функции я формирую тело сообщения   () send_tokens(int balance, slice owner_address, int query_id, slice jetton_wallet_address, cell fwd_payload, int fwd_ton_amount, int msg_value) impure inline {     builder msg_body = begin_cell()                     .store_uint(op::transfer, 32)                     .store_uint(query_id, 64)                     .store_coins(balance)                     .store_slice(owner_address)                     .store_slice(my_address())                     .store_uint(0, 1)                      .store_coins(fwd_ton_amount);      if (forward_payload.begin_parse().slice_empty?()) {         msg_body~store_uint(0, 1);     } else {         msg_body~store_uint(1, 1);         msg_body.store_ref(fwd_payload);     }     cell msg = begin_cell()                 .store_uint(0x18, 6)                 .store_slice(jetton_wallet_address)                 .store_coins(msg_value)                  .store_uint(1, 1 + 4 + 4 + 64 + 32 + 1 + 1)                  .store_ref(msg_body.end_cell())                .end_cell();     send_raw_message(msg, SEND_MODE_REGULAR); }  если делаю    msg_body~store_ref(fwd_payload)   то при комплияции ругается   Error: Func compilation error: contracts/main.fc:58:38: error: cannot apply function begin_parse : cell -> slice to arguments of type ??193 -> ??194: cannot unify type ??193 -> ??194 with cell       if (forward_payload.begin_parse().slice_empty?()) {

&rey: опечатка в названии (reply to 263308)

наз: поправил, а вообще я получается правильно ~ использую?  чет не догоняю прост  Error: Func compilation error: contracts/main.fc:62:40: error: cannot implicitly assign an expression of type builder to a variable or pattern of type (builder, ??200) in modifying method `store_ref` : cannot unify type (builder, ??200) with builder           msg_body~store_ref(fwd_payload); (reply to 263309)

&rey: x~f(arg) означает по сути (x, ()) = ~f(x, arg) и ничего больше.  Так что надо ~store_ref однозначно. Правда, его забыли определить в стандартной библиотеке, поэтому допишите где-то вверху (builder, ()) ~store_ref(builder b, cell c) asm(c b) "STREF"; (reply to 263310)

наз: благодарю (reply to 263311)

Svαtoωλ‎: а можно подробнее? (reply to 263306)

Denis: название beta как-бы намекает (reply to 263281)

Svαtoωλ‎: обычный тонапи меня с клаудфаром шлёт (reply to 263314)

Denis: мы вроде месяц как уже купили энтерпрайз за много денег чтоб не слало

Svαtoωλ‎: у меня еще сервер на хетзнере стоит, тонапи не доступен через него 50 на 50 как-то  с компа все ок, на сервере через раз, огроменный хтмл отдаёт при запросе, мол бед гейтвей

Alexander: А никто не видел снипета кода который адреса on-chain в слайс печатают в base64 формате?

Svαtoωλ‎: 2024-11-09 21:58:30,330 - pytonapi - ERROR - Error response received: ERROR: canceling statement due to conflict with recovery (SQLSTATE 40001)  сейчас вот такой приколище, после запроса единичного

/B4ckSl4sh\: Это было задачей на одном из смарт челленджей, если конечно сохранились решения участников (reply to 263319)

Alexander: Спасибо :) А ок, я просто думал это какой-то common knowledge в какой-то либе какого-то проекта попадалось. (reply to 263321)

&rey: Не, common knowledge — "зачем вам ончейн печатать адреса?") (reply to 263322)

Svαtoωλ‎: тонапи обычный тоже (reply to 263281)

Alexander: текст NFT собирать на лету хочу, Оказывается пользователи в целом не против пару копеек за это отдать. (reply to 263323)

Svαtoωλ‎: @subden запрос в хроме тоже такой

Denis: там может какие-то убер большие трейсы?

Denis: я кстати говорил что этот запрос вообще делать не надо. меня заставили

Svαtoωλ‎: в моем случае events = await tonpy.tonapi_client.accounts.get_events(                     address.to_str(True, True, False),                     before_lt=before_lt,                 )  такой запрос вызываю около 30 раз, что бы получить все ивенты аккаунта и сохранить их в своей бд (reply to 263327)

Denis: могут предложить страдать и ждать ускорения работы методов или брать чанки по-меньше

Svαtoωλ‎: #ялюблютон

наз: такой вопрос, есть контракт который выполняет роль роутера и рассылает юсдт в несколько разных протоколов, имеет ли смысл сделать для каждого протокола отдельный роутер контракт, потому что щас у меня в сторадже 18 переменных и кажется что в одном контракте это все очень нагроможденно

&rey: пересылка сообщений — это дорого, долго и нагромождённо (reply to 263332)

наз: дешевле и быстрее будет в общем в одном контракте все роутить? (reply to 263333)

Denis: если важно дешевизна и скорость то лучше в одном. если гибкость с управляемостью и безопасностью то несколько

Farel: я правильно понял, что чтобы купить нфт на гетгемсе нужно просто на адрес контракта продажи закинуть (количество тон) > цена, тогда контракт отправит нфт и вернет кэшбек? (reply to 263333)

&rey: Я посмотрел — сам покупал так. Стоит проверять по эмуляции транзакции. (reply to 263336)

Cube: У всех такая проблема?

RootTon: всем привет, подскажите пожалуйста, написал смарт и хрен знает как его протестить ... :'(  import "@stdlib/ownable"; import "@stdlib/deploy"; const access_denied: Int = 401; const empty_balance: Int = 400;  message GetAllBalance {     amount: Int; }  struct Data {     balance: Int;     owner: Address;     contract_address: Address; }  contract First with Deployable, Ownable {     const MinTonForStorage: Int = ton("0.01"); // 1 KB for 2.5 year      owner: Address;     init(owner: Address){         self.owner = owner;     }      receive(msg: GetAllBalance){         self.requireOwner();         let amount: Int = min(msg.amount, (myBalance() - context().value) - self.MinTonForStorage);         if (amount == 0) {             throw(empty_balance)         }         send(SendParameters{to: self.owner, bounce: true, value: amount, mode: SendRemainingValue + SendIgnoreErrors});     }      receive(){}      get fun get_data(): Data {         return Data{balance: myBalance(), owner: self.owner, contract_address: myAddress()};     }      get fun get_balance(): Int {         return myBalance();     }      get fun ping(): String {         return "pong";     } }

&rey: Какой-то бред насчитали в GetAllBalance. По канону делаются raw_reserve и SendRemainingBalance (ну, если не надо очень сильно на газе экономить, но на такте это и так невозможно). (reply to 263351)

Cube: Ну и баланс обычно uint делают ) (reply to 263351)

— 2024-11-10 —

Oleg: sender_address вообще не похож на адрес, даже длиной (reply to 263366)

Никита: Всем ку

Никита: Кто подскажет он куда нарулить тон в тестнете?

Sojib: Hello everyone,   I'm trying to deploy a wallet plugin but am not sure where to start. Could anyone share some resources or guidance to help me learn how to do it?

Pavel: @testgiver_ton_bot (reply to 263371)

Denis: а если сразу побольше то в tonconsole.com

Никита: А как тут брать? (reply to 263385)

Denis: покупать :)

Никита: Какая цена

rends_east: Привет всем А расскажите, пожалуйста, tuple - это cell? Что это за сущность, в какой ситуации его лучше использовать

/B4ckSl4sh\: Очень плохая (reply to 263390)

Denis: тюпл это не целл (reply to 263391)

/B4ckSl4sh\: Нет, tuple это tuple, это отдельный тип на tvm (reply to 263391)

Denis: по более низкой разбирают слишком быстро (reply to 263392)

rends_east: а как его сторить в память и лоадить? в чем его преимущество и когда его эффективно использовать? (reply to 263394)

/B4ckSl4sh\: Его преимущество в том, что он занимает один стековый регистр твм, но в селл вы его не сохраните напрямую (reply to 263396)

rends_east: а можешь раскрыть поподробнее?  вот у меня при исполнении контракта всегда хранится 3 глобальные переменные, мне их лучше хранить в тупле, или похрен я просто не очень вникал, в чем его преимущество именно по газу (reply to 263398)

/B4ckSl4sh\: По газу я не помню прям конкретно сколько занимают операции с ним, но хранить глобальные переменные в тупле точно не нужно - GETGLOB/SETGLOB инструкции всего 25 или 26 газа потребляют насколько я помню (reply to 263399)

rends_east: я просто пытаюсь понять, где я могу тупл в контрактах использовать) (reply to 263400)

/B4ckSl4sh\: Смысл есть например когда из функции нужно вернуть много переменных, а вот пользоваться потом будут всего малой частью. Насколько я помню в c7 лежит тупл (reply to 263401)

rends_east: а я правильно понимаю, что если типы возвращаемых переменных обернуты в (), то тупл там автокастуется? или хрень несу? (reply to 263402)

/B4ckSl4sh\: Нет, тупл это в квадратных скобках типо [int, int]. В круглых просто несколько значений (которые занимают не один стековый  регистр твм, а по количеству элементов) (reply to 263403)

rends_east: круто, спасибо (reply to 263404)

rends_east: Какой самый лучший extension для func в vscode? От whales corp он мне подчеркивает ошибкой try-catch

/B4ckSl4sh\: Лучше всего работает расширение TON в JetBrains ide) (хотя для такта не очень работает, но думаю фиксанём скоро) (reply to 263417)

Oleg: Реклама засчитана, но конечно же, jetbrains гонку проиграл (reply to 263418)

/B4ckSl4sh\: Почему? Это же вообще самое кайфовое что может быть, всегда когда есть возможность пишу там (reply to 263419)

Oleg: Из прекрасной ide они превратились за последние 3 года в тормозного монстра, это не считая даже их санкционной политики (reply to 263420)

/B4ckSl4sh\: Санкционная политика полный кринж согласен, про тормоза не очень заметил, при том что у меня не самый навороченный ноут с 16гб оперы, редмибук 23 года в общем - на линуксе не тормозит. (Хотя на винде работает прям существенно медленнее, уж не знаю чья это проблема, винды или жетбреинса) (reply to 263421)

Oleg: Я на той неделе открывал по нужде приличных размеров проект на scala, так он индексировал его 20 минут, в это время UI считай, что мертвый

Oleg: А так то да, для серьезной энтерпрайз разработки его заменить почти нечем.

NZT: Подскажите по обновлению действующего контракта. В контракте предусмотрено обновление. Если я меняю код контракта через set_code, то меняется только регистр с3, а с4 остается. И контракт продолжает работать на тех же данных, которые хранились в с4 до обновления, но с новым кодом. Никаких подводных камней нет, что необходимо учитывать?

Ivan: Если новый код не сможет работать со старыми данными то вы получите кирпич (reply to 263432)

NZT: Это понимаю, там меняется только несколько цифр. Больше ничего не надо учитывать? (reply to 263433)

Vladislav: Есть кто знает Three.js и Cannon.js?  Необходима помощь в реализации сцены, физики, коллизий

RootTon: всем привет, как я могу указать владельца смарт-контракта в func? у меня есть стартовый код, этого достаточно или мне нужно добавить адрес владельца в recv_internal через set_data?

Cube: Достаточно, его адрес будет определяться в момент деплоя ск полем stateInit (reply to 263440)

Alexander: всё гораздо сложнее. Админа (или кого-то кто может его назначить) вероятно надо указывать в state_init потому что если нет адреса с повышенными полномочиями вам не проверить полномочия и кто угодно может прислать вам своего админа (reply to 263440)

SweetJesus: указываешь в сторадже адрес админа, и каждый раз когда нужна проверка сравниваешь этот адрес с sender_address и делаешь throw. (reply to 263440)

RootTon: а насколько это правильно? (reply to 263443)

SweetJesus: настолько, что это стандартная практика (reply to 263444)

RootTon: принял, спасибо (reply to 263445)

rends_east: Привет всем Подскажите, что лучше использовать - dict_set или dict_set_ref и в каких ситуациях? Я так понимаю, что если сохранять как dict_set, то потом достается слайс, а если dict_set_ref, то cell, но как выгоднее тогда? Или одинаково?

ㅤ: Здравствуйте! Хочу спросить потому что не знаю и только начинаю вникать в смарт контракты, можно ли посмотреть на каком языке написан смарт контракт и что он делает по транзакции

/B4ckSl4sh\: Если кодом не поделились - не узнаете (разве что по косвенным факторам, думайте про это как про задачу понять по асм коду написан ли исходный код на си, си++, расте или чём-то подобном). К действиям аккаунта - то же самое, вы всегда можете посмотреть, что делал контракт (но это будет tvm ассемблер) (reply to 263463)

Victor: видел hipo использует dict_set_ref. Они в контракте используют оба варианта. Возможно там найдешь ответ  https://github.com/HipoFinance/contract/blob/91291c5bfc5da61467d065c6ccd121f0308490e4/contracts/treasury.fc#L590 (reply to 263460)

Оскар: dict_set_ref тоже самое что и dict_set, только твоё значение запихается как реф, соответственно dict_get_ref тоже самое что и dict_get, только он "из коробки" за тебя вызовет load_ref и проверит что этот словарь содержит в значении только этот реф https://github.com/ton-community/ton-docs/blob/main/src/data/opcodes/dictionaries.json#L143 (reply to 263460)

𝒾𝓇𝓇𝑒𝓅𝓁𝒶𝒸𝑒𝒶𝒷𝓁𝑒: hello everyone , after i complete the ton transaction through tonconnetui in javascript , the ton is getting refunded from the destination wallet !!  how to fix this issue !!

— 2024-11-11 —

Joshua: Hello everyone, how can I generate a hierarchical deterministic wallet for TON in Python?

Joshua: Привет всем, как я могу сгенерировать иерархический детерминированный кошелек для TON на Python?

&rey: Найти алгоритм для Ed25519, сгенерировать иерархическую пару ключей с его помощью, потом передать при создании обёртки кошелька. (reply to 263500)

•: Привет, кто-то сталкивался с тем что заказчик просит встретится на сомнительной платформе видеозвонков, на просьбу перейти в более популярное и трастовое решение, говорят, что это площадка(которую они скинули) от спонсоров, они им полностью доверяют.  Домену максимум месяц и по записям типа MX очень подозрительны. Сайт по дизайну собран на коленке и дико лагает. В подвале написано что работают с 3 года а твиттер наполнен ботами. Загрузочный файл на мак весит 300 кб.   Видел здесь такого же персонажа и кто-то скидывал пруфы переписок. Чем закончилось я так не понял, но я ему тоже писал, но он в день встречи удалил свой аккаунт.  Кто встречался с таким, подскажите что за тип мошенничество и мошенничество ли?

Konstantin: Вот все подозрительное, а ты такой: - хм... сомнительная подозрительность. (reply to 263515)

•: Да, моя чуйка такая не лезь в этот капкан он тебя убьет. Мой авантюризм такой а может это альфа, которую я упускаю. И мое критическое мышление надо спросить в чате, может кто сталкивался и поможет своим опытом. (reply to 263518)

Андрей: Вопрос то не в их доверии, а в вашей - если вы не доверяете, то и не нужно переходить А ссылку лучше удалить - могут за рекламу засчитать (reply to 263515)

Andy: криптор тебе закинут и денег заплатишь им (reply to 263515)

Andy: в целом, можешь скачать и посмотреть исходники инсталлятора. наверняка баш скрипт будет

•: Иногда просят ссылку чтобы сами все проверили. Уже видел в истории такую переписку. Поэтому заранее скинул (reply to 263520)

•: Это в теории или уже сталкивались с таким? (reply to 263522)

•: Это хорошая идея (reply to 263523)

Andy: да твоя история прям пахнет скамом))) удивительно только, что ты еще в чем-то сомневаешься (reply to 263527)

•: Я пишу сюда так как здесь уже попадались такие персоны и кто-то с ним вел переписку и пишу в надежде что кто-то ответит на мой вопрос практическим опытом.

RootTon: Накати виртуалку и проверь))) (reply to 263535)

/B4ckSl4sh\: Да хотя бы на virustotal закинуть (reply to 263548)

RootTon: Админы разрешите эмодзи клоуна я буду таким спамерам о работе тыкать на сообщения (reply to 263551)

Joshua: Я протестировал его, и он сработал. Спасибо. (reply to 263501)

•: спасибо, все обошлось (reply to 263550)

•: ты это про мое сообщение? (reply to 263552)

RootTon: Нет там был женский бот который предлагал работу (reply to 263563)

Joshua: Размер закрытого ключа ed25519 составляет 32 байта, а размер закрытого ключа TON - 64 байта. Что делать?  The ed25519 private key size is 32 bytes, but the TON private key size is 64 bytes. What should I do?  @pcrafter (reply to 263501)

Андрей: А вы уверены что у вас среди 64 байт кроме приватного нету ещё и публичного? (reply to 263601)

Legendary: Когда у вас есть и приватный, и публичный ключи в одном месте, вам не нужно каждый раз вычислять публичный ключ из приватного. Это особенно полезно для приложений, которые многократно используют один и тот же ключ. Экспортируя сразу 64 байта (приватный ключ + публичный ключ), можно избежать необходимости каждый раз выполнять вычисление публичного ключа при каждой операции — это экономит время и ресурсы.

rends_east: Привет всем Я правильно понимаю, что inline надо юзать для совсем маленьких и местячковых функций, а inline_ref - для любых более менее крупных? У кого то есть более четкое понимание?

Joshua: Понятно, что закрытый ключ TON - это комбинация закрытого и открытого ключей. Большое спасибо.

&rey: Надо использовать тот способ, который дешевле по газу: за исполнение контракта открывает минимум уникальных ячеек. Если inline-функция длинная, она может вытянуть основной код до длины в несколько ячеек, и на втором вызове то же + ячейки будут другие, ведь суффикс с оставшимся кодом изменится. (reply to 263605)

Denis: это вопрос терминологии. в ed25519 это называется сид и публичный ключ (который получается из сида) и вместе они образуют приватный ключ. просто в криптовалютах под сидом чаще понимают 24 слова из специального словаря, результат хэширования которых будет сидом для ed25519 (reply to 263608)

наз: всем привет, а как в @ton передать addr_none в дату контракта при деплое?

SweetJesus: используй store_uint(0,2) (reply to 263645)

наз: Address.parse(beginCell().storeUint(0, 2).endCell().beginParse().toString()) так? (reply to 263647)

SweetJesus: не, без Address.parse и прочего просто 2 бита нулевых положи (reply to 263653)

наз: это я уже передаю в createFromConfig (reply to 263655)

Oleg: А строка вам зачем? (reply to 263653)

наз: .parse на вход строку ждет, ругается когда я слайс кладу (reply to 263657)

SweetJesus: тебе не нужен Address.parse (reply to 263659)

наз: в конфиге указать вместо Address тип Slice? (reply to 263660)

Oleg: 00 это и есть адрес, конец истории

&rey: значит, null подайте в качестве адреса, должно работать (reply to 263656)

наз: BitBuilder overflow означает что в сторадж кладется больше чем возможно?

Dawut: Привет всем, делаю транзакцию usdt и получаю Unable to complete this operation и exit code 48. В чем может быть проблема ?

/B4ckSl4sh\: Если скинете ссылку на транзакцию будет гораздо проще помочь (reply to 263686)

Dawut: https://tonviewer.com/transaction/8c3e4ee582de59277507bc75d28959be647eb806d56d337a8aa17b20b0a2dc0f

Ma><im: нужно больше TON прикрепить к сообщению (reply to 263688)

Ma><im: не хватает TON для оплаты газа

Dawut: А сколько именно? (reply to 263690)

Dawut: Сейчас 0.5

/B4ckSl4sh\: сейчас вы прикрепляете 0.0004 тона, этого недостаточно. Через что отправляете? (reply to 263693)

Dawut: Это по идеи комиссия (reply to 263699)

Dawut: await contract.sendTransfer({                 seqno,                 secretKey: key.secretKey,                 messages: [                     internal({                         to: this.jettonWallet.address,                         value: networkFee,                         body: transferBody,                         bounce: false,                     }),                 ],             });    const transferBody = beginCell()             .storeUint(0xf8a7ea5, 32)              .storeUint(queryId, 64)             .storeCoins(amountInNano / BigInt(10))              .storeAddress(recipientAddress)             .storeAddress(this.wallet.address)             .storeBit(false) //             .storeCoins(BigInt(1_000_000_000))             .storeMaybeRef(new Cell())             .endCell();

/B4ckSl4sh\: Слишком мало, прикрепите 0.1 тона, будет с запасом (reply to 263700)

/B4ckSl4sh\: из кода не ясно, что вы посчитали за networkFee (reply to 263701)

Dawut: const api = new HttpApi(this.endpoint, { apiKey: this.apiKey });             const senderAddress = this.jettonWallet.address;              const transferBody = beginCell()                 .storeUint(0x7362d09c, 32)                 .storeUint(0, 64)                 .storeCoins(amountInNano)                 .storeAddress(Address.parse(recipientAddress))                 .storeAddress(null)                 .storeBit(0)                 .endCell();              const fee = await api.estimateFee(senderAddress, {                 body: transferBody,                 initCode: null,                 initData: null,                 ignoreSignature: true,             });              const totalFeeNanograms =                 BigInt(fee.source_fees.gas_fee) +                 BigInt(fee.source_fees.in_fwd_fee) +                 BigInt(fee.source_fees.storage_fee);   Вот так считаю коммисию

/B4ckSl4sh\: Это минимальная комиссия и она только на одно сообщение, если я правильно понимаю. В случае токенов смело прикрепляйте больше и укажите себя в responce_destination - всё что останется, вернётся к вам (reply to 263704)

Dawut: Можете подсказать где именно это указать?      const transferBody = beginCell()             .storeUint(0xf8a7ea5, 32)             .storeUint(queryId, 64)             .storeCoins(amountInNano / BigInt(10))             .storeAddress(recipientAddress)             .storeAddress(this.wallet.address)             .storeBit(false)             .storeCoins(BigInt(200_000_000))              .storeMaybeRef(null)             .endCell();  Вот тут storeCoins   или тут value   await contract.sendTransfer({                 seqno,                 secretKey: key.secretKey,                 messages: [                     internal({                         to: this.jettonWallet.address,                         value: networkFee,                         body: transferBody,                         bounce: false,                     }),                 ],             });

Dawut: Хорошо, спасибо за ответ (reply to 263707)

/B4ckSl4sh\: в value. Где storeCoins это количество отправляемых наноЮСДТ (reply to 263709)

gai: Привет! Ребят подскажите, при использовании ТОН коннект, операции могут совершаться только в сети ТОН? Или можно например USDT отправлять на другой кошелек(вне сети тон)?

Asher: Выпускники третьего потока обучения ton_dev~study ))) https://getgems.io/collection/EQA0WXDCJicpsFLu2DwxHktxffC04-B_PGRDGmCcfWKjXSzq

RootTon: всем привет, подскажите пожалуйста как сделать геттер на получение адреса овнера смарта, у меня щас при вызове геттера выпадает 9 ошибка (а я даже не знаю что это :( )  tonapi {   "success": false,   "exit_code": 9,   "stack": [     {       "type": "num",       "num": "0x0"     }   ] }

RootTon: вот сам геттер (тк бот не пропускает 2 фотку в 1 смс)  (slice) get_owner() method_id {   (slice admin_address) = load_storage();   return admin_address; }

Cube: Андерфлоу (reply to 263734)

RootTon: но не понятно как тогда быть .... (reply to 263738)

SweetJesus: пытается считать больше бит чем есть. как ты адрес клал в сторадж? (reply to 263734)

RootTon: при деплое (reply to 263742)

Cube: В createFromConfig провались (reply to 263743)

Cube: Должно быть что то подоное  function configToCell(config): Cell {                  return beginCell().storeAddress(config.admin_address).endCell(); }

SweetJesus: ячейку покажи) (reply to 263752)

RootTon: https://github.com/root9464/Func_Tonbribes вот лучше ? а то что бы скринами тут не засорять чат (reply to 263753)

SweetJesus: лол, а че у тебя ячейка с датой то пустая (reply to 263754)

Cube: export type TonStudentsConfig = { admin_address: Address };   export function tonStudentsConfigToCell(config: TonStudentsConfig): Cell {     return beginCell().storeAddress(config.admin_address).endCell(); } (reply to 263754)

SweetJesus: поэтому и андерфлоу, потому что в сторадже ничего нет. (reply to 263756)

А: Написал годный проект, от тона получить поддержку на развитие есть вариант?

SweetJesus: https://github.com/root9464/Func_Tonbribes/blob/main/wrappers%2FTonStudents.ts#L6  сюда допиши storeAddress(адрес админа) (reply to 263754)

RootTon: огромнейшее спасибо !! (reply to 263757)

RootTon: и вам огромнейшее спасибо!! (reply to 263760)

&rey: Проверьте на https://ton.org, или где-нибудь у TON Society. (reply to 263759)

А: Благодарю (reply to 263766)

наз: если мне в контракте нужно хранить баланс токена с 9 decimals будет лучше использовать .store_coins() или .store_uint(amount, bits)?

SweetJesus: в любом случае coins (reply to 263780)

наз: а почему? (reply to 263781)

SweetJesus: потому что твой баланс это varuint, а varuint не то же самое, что uint (reply to 263781)

наз: благодарю (reply to 263784)

SweetJesus: глянь тлб схему coins, там увидишь varuint16, потом глянь тлб схему varuint и поймешь что оно по-другому сериализуется (reply to 263786)

FuntaGames: Привет. Есть решение проблемы с кешем мини аппс?

наз: в консоли разработчика на вкладке network - disable cache (reply to 263808)

Stas15497: Вопрос к знатокам. Обязательно ли, при подачи заявки на хакатон и другие гранты, указывать именно GitHub? Мой разработчик говорит что ему удобнее GitLab использовать. Подскажите пожалуйста, это принципиально?

Cube: Подскажите есть ли кошельки поддерживающие wallet_highload_v3r1?

RootTon: тонкипер вроде может такое (reply to 263828)

RootTon: нет не обязательно, че удобно то и используйте, (reply to 263821)

Dawut: Даже с 0.2 в value и 0.2 для forward_ton_amount все равно ошибка.  https://tonviewer.com/transaction/b9777965325c5c200976c2dda88f321178bb5466cd5cdd51c8a2f8b006a5d0e9 (reply to 263713)

SweetJesus: в value укажи больше (reply to 263832)

Dawut: Сколько указать? (reply to 263833)

Dawut: Вроде сработал сделал 0.5. Но исходя из чего мне считать value и forward_ton_amount? (reply to 263833)

Оскар: при переводе жетонов ты указываешь forward_ton_amount - это сколько тон уйдёт на месседж нотификации, если нотификация контракту не нужна (то есть он никак не реагирует на приход жетонов, например если это перевод жетонов от юзера к юзеру), то туда достаточно положить 1 нанотон  и теперь, перевод жетонов требует примерно 0.04 тона поэтому тебе в value нужно класть 0.04 тона + forward_ton_amount, остатки не потраченных тон на газ вернутся на response_destination (reply to 263832)

Dawut: Мне ответа не надо так что поставлю 1 нано тон, я вначале и отправлял 0.04 ton но чет не сработал. Все равно благодарю (reply to 263836)

Оскар: как раз таки ты может в forward_ton_amount клал много тон, поэтому 0.04 не сработало (reply to 263837)

rends_east: Привет всем Пытаюсь написать выражение в while, всё обложил скобками, чтобы не было проблем с приоритезацией, но контракт на этой строчке выдает ошибку 7: while(flag & (a > b)) flag берется при доставании элемента из dict В чем может быть проблема?

RootTon: Народ у вас тг валет тоже упал?

/B4ckSl4sh\: тут без твм трейса не обойтись (reply to 263841)

rends_east: а как вы по синтаксису в func пишете выражения в while лупы с &? я может поищу так ошибку (reply to 263843)

/B4ckSl4sh\: да дело не в вайле как будто, это же рантаймовая ошибка несоответствия типов, что странно. Нужно чекнуть какой тип у flag, думаю в этом ошибка (reply to 263844)

rends_east: int, как и у всех boolean (reply to 263845)

Oleg: А там точно нужен &, не &&? (reply to 263844)

rends_east: в func нету && (reply to 263847)

SweetJesus: в функе только бинарные (reply to 263847)

/B4ckSl4sh\: а в funC есть &&? (reply to 263847)

/B4ckSl4sh\: 4 синхронных ответа, жесть

Oleg: Вроде в оригинальном сообщении не было ни слова про funC (reply to 263851)

rends_east: ну там речь про контракты) (reply to 263853)

Oleg: такт я не знаю, поэтому и переспросил

Vovlens: Всем привет, подскажите есть ли способ взаимодействия с v5 на питон?

RootTon: Не по запросу, но могу дать на go ) (reply to 263859)

Vovlens: А где я могу почитать про отличия взаимодействия с v4 и v5 (reply to 263860)

/B4ckSl4sh\: https://github.com/nessshon/tonutils/tree/main тут в example (reply to 263859)

RootTon: Дока тона (reply to 263861)

/B4ckSl4sh\: лучше всего в сурскоде воллетов))))) (reply to 263861)

RootTon: Types of Wallet Contracts | The Open Network https://search.app?link=https%3A%2F%2Fdocs.ton.org%2Fparticipate%2Fwallets%2Fcontracts&utm_campaign=aga&utm_source=agsadl1%2Csh%2Fx%2Fgs%2Fm2%2F4

potato: а мой USDT jetton_wallet может быть заблокирован или ограничен кем-то сторонним кроме меня?

Vladimir: Только если такая возможность предусмотрена контрактом (reply to 263886)

Coalus: Да, мастер контракт может запретить жетон валету принимать/отправлять жетоны  https://github.com/ton-blockchain/stablecoin-contract/blob/main/contracts/jetton-wallet.fc (reply to 263886)

Devsbite: Всем привет.

Devsbite: https://api.ston.fi/swagger-ui/#/Dex/dex_simulate_swap  EQCGyXsqrVyDMP0BZxS3i7Ke-zh9uoddVHETUggmPJMC2WXv вот токе с 5% покупка, 15% продажа. но ее не показывает, эту комиссию. Посоветуйте что нить, пожалуйста

Devsbite: насчет свапа на stonfi через sdk, мне что на гитхабе разраб стонфай, сказал юзать оригинальный TonConnect. Так а как же тогда симуляцию делать то, если подключается не sandbox, а реальный блокчейн.

наз: а как в func в if statement указать логическое или?  if (cond1) or (cond2) {}

Оскар: в func нет логического или, только побитовое | (reply to 263898)

Svαtoωλ‎: https://app.tonkeeper.com/transfer/{адрес}?amount=10000000&bin={BOC}  как мне сформировать бок? типо коммент хочу свой поставить туда (через питоник желательно)

Пескарь™ | фронтент телефонов: begin_cell().store_uint(0, 32).store_snake_string('test').end_cell().to_boc().hex() (reply to 263908)

Пескарь™ | фронтент телефонов: ток там б64 сейф урл надо вродь. для диплинки кипера (reply to 263909)

Max: А разве hex, а не base64? (reply to 263909)

Svαtoωλ‎: да (reply to 263909)

Пескарь™ | фронтент телефонов: у меня вродь с хекс когдато воркало (reply to 263911)

Пескарь™ | фронтент телефонов: а поч хекс незя

Max: То было в дивные времена реакт нейтива. Сейчас лучше по спеке делать (reply to 263913)

Svαtoωλ‎: а как бок в б64 сейф урл?  bytes_to_b64str

Svαtoωλ‎: тонкипер про на пк не видит коммент

Svαtoωλ‎: тонкипер на телефоне увидел коммент

Svαtoωλ‎: майтонваллет подставил какую-то херь............

Svαtoωλ‎: тонхаб не подставил ничего

Svαtoωλ‎: забавно, если вместо bin писать ?text=(обычный текст) то всё норм

&rey: Вы же не используете tonsdk? Там сериализация кривая.

Svαtoωλ‎: bytes_to_b64 только в тонсдк (reply to 263923)

&rey: import base64 base64.b64encode(b'...')  а это в питоне) (reply to 263924)

Svαtoωλ‎: тогда как кривую сериализацию разобрал тонкипер

Пескарь™ | фронтент телефонов: там не б64 сейф урл (reply to 263924)

Пескарь™ | фронтент телефонов: тонкипр не юзает тондск петухонячий (reply to 263926)

&rey: Не знаю. Если вам очень хочется пользоваться библиотекой, проблемы в которой вы уже даже доказали (а это означает и то, что при записи адреса для перевода может быть подставлен какой-нибудь левый), то я писал фикс: https://github.com/ProgramCrafter/onchain-nft-collectioned/blob/master/largeboc.py. (reply to 263926)

Svαtoωλ‎: а строку как передать тогда, оно ж мне байты отдало по итогу (reply to 263925)

&rey: b.decode('ascii') (reply to 263930)

Svαtoωλ‎: реклама?

Max: Ну так да. Поглядите wallet-api (reply to 263922)

&rey: рекламо-совет — это использовать pytoniq) А так, я скинул вроде тот файл, где определена нормально работающая функция to_boc. (reply to 263933)

Svαtoωλ‎: &bin=te6cc...  тонкипер съел  тонхаб не съел майтонвалет не съел тонкипер на пк не съел

Svαtoωλ‎: &text=hello  тонкипер на пк съел тонкипер на мобиле съел тонхаб съел майтонваллет съел

Svαtoωλ‎: и зачем я весь чат на уши поднял...

&rey: base64.urlsafe_b64encode(b'...').decode('ascii') (reply to 263936)

Svαtoωλ‎: тонкипер съел тонхаб не съел майтонвалет подставил te6cc тонкипер на пк не съел  (не съел подразумеваю не подставил комментарий) (reply to 263939)

Пескарь™ | фронтент телефонов: у меня так прост: base64.urlsafe_b64encode(boc).decode()

Svαtoωλ‎: verification_link = "ton://transfer/...?amount=10000000&bin={}" # вместо точек адрес

Svαtoωλ‎: ладно буду текст подставлять, он везде работает

&rey: о, а тонкипер вновь такие ссылки открывает? просто после какого-то обновления они хотели только свой домен, app.tonkeeper.com/transfer (reply to 263946)

Svαtoωλ‎: я тонкипер не обновлял давно) не знаю (reply to 263948)

Svαtoωλ‎: теперь страшно

Max: не хотели никогда, ton:// всегда резолвили (reply to 263948)

&rey: и действительно, заработало, спасибо (reply to 263953)

Max: Если у вас iOS, то ОС могла резолвить открытие других кошельков вместо тонкипера ¯\_(ツ)_/¯

Svαtoωλ‎: ага, у друга майтонвалет открывает вместо тонкипера (reply to 263955)

— 2024-11-12 —

Devsbite: Всем привет.  https://api.ston.fi/swagger-ui/#/Dex/dex_simulate_swap  EQCGyXsqrVyDMP0BZxS3i7Ke-zh9uoddVHETUggmPJMC2WXv вот токе с 5% покупка, 15% продажа. но ее не показывает, эту комиссию. Посоветуйте что нить, пожалуйста  насчет свапа на stonfi через sdk, мне на гитхабе разраб стонфай, сказал юзать оригинальный TonConnect. Так а как же тогда симуляцию делать то, если подключается не sandbox, а реальный блокчейн.

Devsbite: Кто подскажет?

Max: У вас каша в голове (reply to 263964)

Devsbite: Почему? (reply to 263966)

Devsbite: Возможно, я не верно сформулировал сообщение.  Я просто переслал его от нашего разработчика по одному из приложений. Так как мы не можем найти решение. Проблема с документацией stonfi v2.

Devsbite: Мы не можем сделать симуляцию покупки/продажи.

Devsbite: Хотя на v1 работает все коректно.

Devsbite: Простите, если запутал вас.

Jenya: Вчера поставил ноду, но out of sync все растет и растет, что делать?

Серго: а можешь поделиться докой, как ты поставил ноду ? (reply to 263979)

Jenya: Mytonctrl (reply to 263980)

NPC: Всем привет! А есть какое-нибудь апи, чтобы курс жетона смотреть?

Max: tonapi. Только не используйте курс для расчетов (reply to 263983)

Alacrity: есть у кого-нибудь пример bonding curved жетона на FunC?

Victor: https://tonviewer.com/EQAFI49QCDdVDHshVWNR-p1NcvEYpMBcovbc5X2221d110EF?section=code (reply to 264019)

.none: Всем привет!   При эмуляции свапа с использованием pytvm столкнулся столкнулся с проблемой  - в tvm идёт переполнение стека - exit code 6. Нет идей даже что сделать...    вот логи  [ 4][t 0][2024-11-12 09:26:58.2885726][transaction.cpp:1702]    starting VM[ 4][t 0][2024-11-12 09:26:58.2890413][stack.cpp:437]   moving 4 top elements to another stack  [ 4][t 0][2024-11-12 09:26:58.2895891][stack.cpp:437]   moving 3 top elements to another stack[ 4][t 0][2024-11-12 09:26:58.2900835][stack.cpp:437]   moving 2 top elements to another stack  [ 4][t 0][2024-11-12 09:26:58.2904150][transaction.cpp:1707]    VM terminated with exit code 6

наз: всем привет, как получить sender'a, если создал контракт при помощи createFromConfig?

SweetJesus: provider.sender() (reply to 264043)

Ye: всем привет! Может кто знает, как создать ячейку словаря в tonlib? store_dict там же нету

/B4ckSl4sh\: Используйте store_maybe_ref (reply to 264113)

наз: а что означает InvalidMagic? ругается на строку с newCodeCell   it('should upgrade contract', async () => {     let oldData = await main.getData();      let newCodeCell = Cell.fromBase64('b5ee9c7241020d0100032...') });

SweetJesus: ну так в кавычках должен быть бок в бейс64 (reply to 264128)

наз: там и так (reply to 264129)

SweetJesus: прочитай мой ответ еще раз (reply to 264130)

SweetJesus: здесь бок в хексе у тебя, если хочешь в хексе, то Cell.fromBoc(Buffer.from('b5ee9c72...', 'hex'))[0] (reply to 264128)

наз: точно, благодарю (reply to 264132)

Оскар: или просто Cell.fromHex("b5ee9c72..."); два месяца назад завезли данный шорткат (reply to 264132)

User<8034532464>: Можно сюда постить вакансии ?

наз: тут под cells_count подразумевается кол-во всех ячеек в контракте?  например я в recv_internal формирую 3 ячейки, одну для отправки жетонов, в одной формирую state_init для какого то контракта, в 3 формирую боди которое отправится вместе со state_init  все эти ячейки учитываются?

Cube: думаю все же имеются ввиду ячейки, хранящие код и сторадж контракта (reply to 264201)

наз: тоже так по началу подумал, но код контракта всегда одна ячейка, сторадж контракта всегда одна ячейка, внутри стораджа не все данные в виде ячеек, поэтому сейчас сомневаюсь (reply to 264204)

Cube: Как же ячейки в ссылках? (reply to 264205)

&rey: Есть ещё несколько ячеек для каждого существующего в блокчейне контракта, которые хранят баланс, время оплаты, тому подобное. (reply to 264205)

наз: в сторадже условно 3 - 4 переменных и 2 рефа, мы сам сторадж считаем учитываем как одну и каждый реф внутри учитываем тож получается? (reply to 264206)

наз: а взять например регист c7 он хранится в виде tuple, или все регистры так же хранятся в одной ячейке и мы её учитываем? (reply to 264207)

Александр: Привет! Есть ли какой-то способ десериализовать боди сообщения в жсон? Или дока какая-то для этого? Не понимаю как разобраться с парсингом БОКов.

/B4ckSl4sh\: c7 подставляет валидатор при запуске TVM, он сам по себе не хранится с контрактом (reply to 264212)

Андрей: boc переводится в cell и дальше разбирается побитово руками как вам надо тут автоматических сериализаторы - десериализаторы не в моде (reply to 264213)

Александр: Печалька. Значит придется ручками месседжи дедаста разбирать (reply to 264217)

Eugene: Всем привет, подскажите, пожалуйста. С криптой вообще не работал. Сейчас срочная тачка, создать жетон и раздавать пользователям приложения. Выкатил жетон через ton minter. Мне сейчас нужно на node подключиться к кошельку и раздать пользователям жетоны. Выручайте, плиз, весь день сижу голово ломаю, ничего не получается!

Gof: Всем привет, кто то может подсказать, как правильно Отправлять транзакцию через @ton/ton библу, столкнулся с тем, что при недостатке баланса, поочередно отправляются транзакции пока на кошельке не останется меньше тона чем необходимо для оплаты газа  вот код для отправки транзы await contract?.sendTransfer({                 seqno,                 secretKey: this.key_pair.secretKey,                 messages: [internal({                     value: transfer_amount,                     to: recipient_address,                     body: comment,                     bounce: false                 })]             });

Gof: Повторных попыток не делаю А также хотелось бы понять как получить хэш транзакции чтоб ссылку для tonviewer вывести(sendTransfer не возвращает ничего)

/B4ckSl4sh\: хэш транзакции станет известен уже после исполнения. (reply to 264244)

Gof: А как мне кго отловить? Через провайдера запрос на транзы с кошелька с определенным seqno забирать? (reply to 264246)

/B4ckSl4sh\: Да, например так (reply to 264247)

Gof: Пока что нет универсального решения в библах,чтобы она ожидала выполнения транзы, да?

Gof: И статус возвращала

&rey: API тонцентра: sendBocReturnHash вроде бы (reply to 264249)

Gof: О, спасибо, гляну (reply to 264255)

Gof: это через http провайдера? (reply to 264255)

Gof: или ручками писать

Ваня: Помогите новичку. Формирую ячейку, перевожу в hex  const emptyCell =  beginCell().endCell().toBoc().toString('hex')  Я могу эту строку сохранить в файл, а как мне потом восстановить ячейку из этого hex? Каким методом?

/B4ckSl4sh\: Cell.fromBoc() (reply to 264268)

User<7231403747>: мечта (reply to 264277)

Cardinal: привет ребят, создал токен в мейннете, убрал авторити, ликвидност на ston.fi дал 1$. можете сказать от чего зависит Unverified Token?

/B4ckSl4sh\: от тонкипера (reply to 264290)

Oleg: Челобитную царю) (reply to 264291)

Cardinal: случайно не знаешь какие условия? чтобы убрать (reply to 264291)

/B4ckSl4sh\: Там пост про них вроде сделать нужно и на гитхабе pr сделать по образцу (reply to 264293)

Cardinal: спасибо (reply to 264294)

Peperonl: Доброго времени суток. Прошу прощения за оффтоп. Продается проект @PepsGameBot.  Цена: 10,000$  Презентация проекта, статистика - на личном созвоне.  Контакт для связи — @peperonl

Peperonl: У нас стоят SSL. (reply to 264298)

наз: а могут быть какие то конфликты, если я в контракте храню переменную размером 2 бита, в стейт ините это 2 нуля (пустой адрес), но в дальнейшем там будут числа от 1 до 3?

&rey: Не-а. Ячейки — просто последовательность бит, считываться всё будет так же нормально. (reply to 264302)

Andrey: ребят, помогите, как инициализируется v5r1 кошелек в go? когда делаю: w, err := wallet.FromSeed(api, strings.Split(walletSeeds, " "), wallet.V4R2) то всё работает с v4r2 кошельком  но если просто меняю версию и пытаюсь инициализировать v5r1: w, err := wallet.FromSeed(api, strings.Split(walletSeeds, " "), wallet.V5R1Final) то выдает ошибку: Error: failed to get state: use ConfigV5R1Final for V5 specpanic: failed to get state: use ConfigV5R1Final for V5 spec

Andrey: ConfigV5R1Final выглядит так: type ConfigV5R1Final struct {   NetworkGlobalID int32   Workchain       int8 }  workchain будет по идее 0, так как мне нужен mainnet, а что такое networkGlobalId как его получить?

SweetJesus: не путай айди воркчейна и глобал айди. если тебе нужен мейннет, то глобал айди будет -239, а воркчейн 0. (reply to 264311)

Andrey: попробую, спасибо!

Andrey: почему '-239'? что за магическое число, может в доках где-то есть про это? обновиться оно не может? или всегда константа

SweetJesus: https://docs.ton.org/v3/documentation/data-formats/tlb/block-layout#global_id (reply to 264314)

Andrey: спасибо, буду пробовать

Denis: Это просто вы модный. Тонапи и тонвьювер делает автоматом (reply to 264217)

Алексей: Мне, кстати, тоже интересно, это случайно не отсылка на лицей, никто не в курсе? (reply to 264314)

Andrey: первая мысль, которая пришла в голову - надо было делать '42' 😅

Jimmi: Она. (reply to 264318)

Jimmi: Физмат 239.

The Max: Какой год выпуска?

Andrey: офигеть! интересно👍 (reply to 264320)

The Max: Закончил 239🤣

Оскар: ага, мейннет 42 и тестнет 69 (reply to 264319)

Пескарь™ | фронтент телефонов: это мне нравится (reply to 264325)

Jimmi: У Николая Дурова? 99 или 00. (reply to 264322)

The Max: Ух я молодой, Пратусевич выпускал меня (reply to 264327)

Adya: Ребят, есть у кого примеры ботов, где подключаешь ТОН-кошелёк не через вебвью, а посредством текстовых команд?

&rey: Эм... а к чему, собственно, подключаем? (reply to 264333)

&rey: TC2 же к фронтенду обычно подключает. Хотя можно и к бэкенду, но это что-то странное (но сработает, да).

sd: К @marketapp например так можно подключить и менеджерить кнопками нфтшки (reply to 264334)

Andrey: Всем привет. Хочу разбить адрес на 2 ячейки по 256 бит. В слайсе он выглядит так  80002255d73e3a5c1a9589f0aece31e97b54b261ac3d7d16d4f1068fdf9d4b4e1830 Читаю первые 256 бит с помощью let first = s.loadBits(256) и получаю как и нужно  80002255D73E3A5C1A9589F0AECE31E97B54B261AC3D7D16D4F1068FDF9D4B4E  Далее читаю оставшиеся 11 бит let second = s.loadBits(11) и в слайсе как и нужно 1830 Но когда я создаю новую ячейку и дописываю туда нули до 256, то 1830 превращается в 1820 let zeroBits = beginCell().storeUint(0,256).endCell().asSlice().loadBits(245); c = c.storeSlice(second).storeSlice(zeroBits);    1820000000000000000000000000000000000000000000000000000000000000 Как правильно добить нулями до 256?

Svαtoωλ‎: Надеюсь я не дойду до чтения битов в тоне....

Svαtoωλ‎: Умножением? (reply to 264337)

Andrey: Как умножением? Я уже всё перепробовал. Пытался побитовым сдвигом как-тоно всё равно получается 1820 вместо 1830. (reply to 264339)

— 2024-11-13 —

Andrey: Если вот так извернуться дописав 5 нулей до полного байта, добавить 0х10 (16), прочитать 16 бит и добить нулями, то будет то что нужно beginCell()   .storeUint(beginCell().storeSlice(second).storeUint(0,5).endCell().asSlice().loadUint(16)+0x10,16).storeUint(0,240) .endCell().asSlice() С 5 нулей до полного байта понятно, но не могу сообразить насчёт 0х10.

lbv_dev: let zeroBits = beginCell().storeUint(0, 245).endCell().asSlice().loadBits(245); c = c.storeSlice(second).storeSlice(zeroBits);  чет тоже заинтересовался, жпт рекомендовал такое решение (reply to 264337)

Andrey: не работает. это примерно то же что я изначально делал (reply to 264346)

lbv_dev: низнаю тогда.. (reply to 264392)

Andrey: кажется тут есть какая-то логика, но не могу уловить (reply to 264343)

Оскар: потому что не нужно смотреть на не % 8 == 0 биты как на байты возьмём эти несчастные 1830 в хексе и перепишем в бинарный вид, но оставим только первые 11 бит, как и нужно 0001_1000_001 отсюда видно что чисто технически мы цифру "3" (в хексе) написать не можем, так нам не известен 4 бит в конце, либа видимо на такие случаи в тупую подставляет в недостающие биты до полного символа единицы, отсюда у нас 0011 = 3, но когда ты дописываешь туда кучу нулей, то у нас теперь там 0010 = 2 дело закрыто (reply to 264337)

Asher: Трейлер седьмой лекции по языку FunC третьего потока www.tondevstudy.io  Лектор - @MarcoDaTr0p0je https://www.youtube.com/watch?v=k3dmqB3F3vg  Таймкоды:  00:10:00 -  Старт 00:11:00 -  Добавили функции в контракт 00:18:00 -  Как отправить трансфер с комментарием 00:22:00 -  NFT, описываем логику 00:57:00 -  Вопросы 01:05:00 -  Имплементация стейкинга 01:12:00 -  Имплементация функции sendSetJettonWallerAddress 01:14:00 -  Get-методы, jetton_wallet_address 01:23:00 -  getNftAddressByIndex 01:27:00 -  Имплементация NFT

Узурпатор: Привет. Подскажите есть ли тут кто-то кто . Разрабатываете ли вы MiniApp для телеграмм. Если да, то какая стоимость с разработкой дизайна и без. Понятно что без тз не можете сказать точно. Мини ТЗ: Приложение на подобие Blum с основной нагрузкой на выполнение заданий

Bbb: Hi

rends_east: Привет всем Подскажите - как чекать количество оставшегося газа, чтобы останавливать исполнение, когда газ заканчивается или газ лимит близко?

&rey: Не помню, как загрузить gas limit, но можно считать потраченный — GASCONSUMED. (reply to 264439)

rends_east: спасибо! (reply to 264444)

rends_east: то есть оставшийся газ можно вычислять путём вычитания из msg_value результат GASCONSUMED, верно же? (reply to 264444)

&rey: Только msg_value — это нанотоны, а не газ. (reply to 264448)

rends_east: это я понимаю верно ли, что газ надо умножить на 400, чтобы получить нанотоны? (reply to 264452)

Yan: Ребят подскажите пожалуйста почему тоны вернулись сразу после пополнения свежего кошелька?   https://tonscan.org/address/UQDcx-_achFXdwgyN_gZUSWcAh7_drTFGWdtJADG2wc7cKVi#events  Какая-то особенность работы TON?

Alexander: И да и нет. Сейчас да, но "по хорошему" надо прочитать конфиг, распарсить его жуткий формат, узнать реальную цену газа и посчитать. Нам я так понимаю "обещают" что валидаторы якобы не будут ее менять. Но даже сейчас если ее всё-таки изменят - многие контакты станут страдать и болеть. Но это же блокчейн. Надежность. (reply to 264453)

rends_east: А, то есть в config_param(21) где то лежит 400, верно? (reply to 264458)

rends_east: Но газ лимит то все равно в газе, поэтому чекать надо и так, и так

Alexander: https://testnet.tonviewer.com/config#21 ну почти. там лежит цена за 2^16 газа - 26214400 ->  26214400 / 2^16 = 400  И вопрос хотите ли вы быть "святее папы римского" и тратить кажется 20000газа(я не помню до скольки я оптимизировал но или я глупый или там было неприлично много) чтобы узнать цену газа. (reply to 264459)

rends_east: ну я это и имел ввиду, спасибо) (reply to 264461)

rends_east: а то есть я правильно понимаю, что когда меняют цену на газ, меняют буквально это значение, а не сколько стоят операции в TVM по газу? звучит логично (reply to 264461)

Alexander: пусть меня поправят. Всё так - кроме одного. Пока эту "константу" не мняняют и ни один популярный контракт в этот config21 не лезет (reply to 264465)

Alexander: но логику вы кажется описали так же как я ее понимаю

rends_east: ну меняли ж недавно, когда тон взлетал (reply to 264466)

Denis: да. сообщение несло в себе признак что при неудаче надо отправить обратно деньги и отправились (reply to 264457)

Yan: а в чем неудача?  вроде успешно же транза депозита прошла? (reply to 264481)

Denis: смартк контракт не  запустился на получателе. причину я обвел (reply to 264483)

Yan: благодарю!) (reply to 264485)

Valerii: Приветствую. Кто может помочь за символическое вознаграждение?

Valerii: Отправляю транзакцию через tonconnect UI с таким payload.  Транзакция успешно отправляется и возвращает мне BOC. В случае, когда транзакция в монете TON, я могу распарсить BOC и получить in_msg.hash, но когда транзакция в жетоне (например, HMSTR), распарсить BOC не получается — генерируется хеш, который я не могу ни с чем сравнить, так как он отличается.  BOC, который возвращает tonconnect: ...

Valerii: "te6cckEBBAEA6wAB5YgBAy0uzg5J0qcQCNEk93xjwHQk9X+zQTN8M/pgtmsaL+gDm0s7c///+Is5ooGQAAAAlPE3AupjyDuR/8Z7V3lP0DeI7tXIEW0L8Pn8VcOg9EqHWSJJdzzEuJzoUzbXDfOpzLGnt83vH/SV5jCCIqGSEAEBAgoOw8htAwMCAM9iAEP3LukdnZYl/EfB9CGoLrDddgI8IP5JVd8Xo+k4EgVroBfXhAAAAAAAAAAAAAAAAAAAD4p+pQAAAAAAAAAAUbISIaAIAFB2h1dyUVm4q8X+DN/C7yvoB0nkoDsI8H32uFdtTc8GAQAAvkTqlw=="

Nikolas: У меня вопрос почему я не могу добавить тон сайт(tonsite://......ton) в TMA

Жадный Никита: Всем привет, может кто сталкивался с необходимостью получать объему торгов за N количество дней, не среднее  а именно за каждый из последних 30 дней? нашел только объемы за последние 24 часа а дальше уперся

rends_east: Привет всем Подскажите, а где посмотреть структуру битовую у config_param(21)?

&rey: Здесь: https://github.com/ton-blockchain/ton/blob/7151ff26279fef6dcfa1f47fc0c5b63677ae2458/crypto/block/block.tlb#L711-L723. (reply to 264533)

集电极: Добрый день. Можете подсказать, где взять все известные кошельки популярных бирж? Я помню что в каком-то из API был такой метод, но я его не сохранил и сейчас не могу найти.

Nikolas: Надо по https:// .. .ton телеграма сам понимает по домен и переходить в сеть тон (reply to 264528)

Denis: github.com/tonkeeper/ton-assets (reply to 264552)

Oleksandr: Подскажите пожалуйста...          events [       {         type: 'message_sent',         from: EQAgc_bteoSsfZBznbd0H51IdHiFS2mWB2n3SFkIHlktHI2T,         to: EQBFlvL18MXaTetvKy9nIzYdrKByshNpcpNANnk-T-9dOTqA,         value: 50000000n,         body: x{8B341822000000000000000000000007},         bounced: false       },       {         type: 'message_sent',         from: EQBFlvL18MXaTetvKy9nIzYdrKByshNpcpNANnk-T-9dOTqA,         to: EQB9HgKhBcHlQkoweHqlCKpVo_apfaWx6AUTUWsnsYRrWCUp,         value: 42668400n,         body: x{8B341822000000000000000000000007},         bounced: false       },       {         type: 'message_sent',         from: EQB9HgKhBcHlQkoweHqlCKpVo_apfaWx6AUTUWsnsYRrWCUp,         to: EQBFlvL18MXaTetvKy9nIzYdrKByshNpcpNANnk-T-9dOTqA,         value: 40532800n,         body: x{FFFFFFFF8B341822000000000000000000000007},         bounced: true       }     ] это результат после отправки транзакции Я так понимаю поле bounced показывает была ли транза успешной. Исходя из указанной цепочки последнее сообщение не прошло и стейт последнего контракта не изменился,  но на предпоследнем контракте реверта не было и стейт изменился. Это значит что если цепочка будет из нескольких сообщений, то возможно частичное изменение стейтов? Или как-то можно сделать так, что если одно сообщение не прошло, то и стейты всех контрактов не изменяются?

Andr: Никто не сталкивался с проблемой, что jetton транзакции задваиваются?  При попытке дернуть tonapi.io /v2/blockchain/messages/{msg_id}/transaction с хешом in_msg  мне выплюнуло  {   "error": "more than one transaction with messages hash" }

Cube: Сейчас вам столько отпишут 😁 (reply to 264600)

Leo: 👌 (reply to 264602)

Александр: Имей в виду еще что у них много пулов для жеттонов. ну у стона и дедаста точно) (reply to 264552)

Nononono: парни, помогите плз с декодом msg транзакций какую либу использовать? (есть что на python?) или можеть есть пример на github?

Denis: я могу сказать причину - хэш сообщения может быть не уникален (reply to 264587)

Denis: а в вырожденных случая там может быть десятки тысяч транзакций с одним хэшом экстернала. и отдавать их всех как-то не хочется да и смысла особо нет

Denis: популярных причины 3: контракты которые принимают экстерналы без подписи типа нфт телеграма. кошельки у которых отправили не валидное сообщение (например денег больше чем было) и забыли флаг 2. кошельки которые шлют 128+32 и имеют экстернал с большим сроком жизни

Andr: забыл указать, 128 + 32 как раз мой случай

Jzuss ┌( ಠ_ಠ)┘: Всем привет! Задеплоил контракт библиотеки по типу кода жетона https://github.com/ton-blockchain/stablecoin-contract/blob/main/scripts/deployLibrary.ts Отправляю сообщение с минтом (у меня кастомный jetton wallet, минт тоже присутствует), однако в тестнете  транзакция на адрес жетон кошелька падает с exitCode 9. В чем может быть проблема?  Все локальные тесты проходят. Если заменить библиотеку на обычный код, то все тоже ок

reserved: напишите лч, кто linux шпарит

Bread: Кто знает альтернативу bicycle для процессинга? Как я понял он на HighloadV2 работает и не обновлялся до 3 версии. Есть подобный свежее?

Nikita: Tak, a chto menia zabanili?) za chto?(

Denis: а вы понимаете зачем именно его надо переделать на highload v3 или вам просто хочется "посвежее"? (reply to 264651)

Bread: Честно говоря не сильно вижу причину, но меня немного пугает другой человек (reply to 264671)

Bread: и дока тон пугает. Вроде всё нормально и на в2, да?

Oleg: Я тоже стал ловить этот cell underflow 9, есть предположение, что библиотека прокисла в мастерчейне тестнета (reply to 264643)

Denis: хайлоадом v3 проще пользоваться в плане выстрелить себе в ногу сильно сложнее. но в велосипеде v2 пользуются достаточно умело

Bread: Спасибо за ответ. То есть если разобраться, то всё будет хорошо на в2? Мы просто только на моменте выбора инструментов (reply to 264676)

Jzuss ┌( ಠ_ಠ)┘: то есть у тебя работало до какого-то момента? (reply to 264675)

Denis: если сами будете чё-то писать и с таким уровне вопросов то лучше брать в3. если берете велосипед то и он и с в2 никакие деньги не заблокирует (reply to 264677)

Oleg: Я еще летом проверял, работало, а вчера увидел эти 9 (reply to 264678)

/B4ckSl4sh\: Но если всё таки заблокирует, то если успеете в ближайшее время его заблокировать, то возможно разблокировать тоже получится)))) (reply to 264679)

Jzuss ┌( ಠ_ಠ)┘: Понятно. Как думаешь, кроме недостатка средств может ли быть еще в чем-то проблема? (reply to 264680)

Oleg: Хз, нет идей. Кстати, как ты тестировал жетон с либой? (reply to 264682)

Jzuss ┌( ಠ_ಠ)┘: Я действовал по такой схеме: https://github.com/ton-blockchain/stablecoin-contract/blob/main/sandbox_tests/JettonWallet.spec.ts#L99 (reply to 264683)

Bread: так а где брать, я ничего опенсорсного кроме байсикла не нашёл (reply to 264679)

Max: Вам же написали - берите байсикл и не парьтесь (reply to 264685)

Svαtoωλ‎: а что такое велосипед

Пескарь™ | фронтент телефонов: платежка какаято жоская типа там ну типа гобикукле крч загугли Субботин умничка пилит (reply to 264687)

Max: https://github.com/gobicycle/bicycle (reply to 264687)

Andrei: Привет! Слушайте, подскажите пожалуйста, как я могу задеплоить смарт контракт с какого-нибудь клиента, желательно на python?  У меня есть смарт контракт на tact, и я бы хотел деплоить новый инстанс этого контракта на определенное действие пользователя.  Возможно ли такое в целом? Если да, то направьте, пожалуйста, как такое реализовать и какие библиотеки использовать  Спасибо

Torkusz: Pytoniq

Kristian: Привет добрым людям! Подскажите новичку, что использовать в приложении для синхронизации устройств пользователей? CloudStorage в @telegram-apps/sdk подходит для этого? Или через сервер и api все проводить?  Мой стек это: react +next.js

Kristian: Синхронизация - я имею ввиду, что если user запустил на одном устройстве приложение, на другом данные синхронизировались или просто запретить использовать пока открыто на другом устройстве.

Jzuss ┌( ಠ_ಠ)┘: Проблема оказалась в нехватке средств (reply to 264683)

Oleg: На каком этапе? Деплой или какое-то конкретное сообщение? (reply to 264706)

Jzuss ┌( ಠ_ಠ)┘: Конкретно у меня при деплое, просто транзакция проходила и не было каких-то уведомлений об ошибке. Я потом локально запустил код контракта для деплоя библиотеки, чекнул фи и понял что не хватает средств (reply to 264707)

Sergei: А почему мои сообщения пропадают?

Sergei: Всем здравствуйте! Написал большое сообщение вопрос, а он пропало

MarkTTTT❤️: Мало ton в кошельке (reply to 264722)

Sergei: Конечно мало, держу в тонкипере всё в других манерах 🤠

Андрей: Скорее всего содержат слова из списка спамеров (reply to 264722)

Sergei: Ок! Тогда постараюсь по другому написать!!  У меня вопрос! Нужно ваше экспертное мнение!!! Можно ли создать монеты, что бы она была равна 1$, которую я могу выдавать другим людям для торговли, но кэшить её они могли только через меня??

Sergei: А второй вопрос! Сколько в среднем стоит создание мульипользовательской стратегии для Телеграмм?

&rey: Должно быть так, чтобы никакие контракты обмена не могли обработать приход монеты. (И то остаётся обмен на доверии/централизованном сервисе). (reply to 264727)

🎲: 2 миллиона денег (reply to 264728)

Sergei: Если рубли, то это не много!! (reply to 264731)

Sergei: 😂😂😂 почему мои вопросы удаляются?!? Аааа…. 😂

MarkTTTT❤️: Пиши по одному слову. Так поймешь на каком моменте кекаеться (reply to 264735)

Sergei: Тупняк! Элементарные слова блокируются!! Тут вообще есть админы которые следят за этим? 😊

MarkTTTT❤️: Сделай фронт который показывает и позволяет твоему пользователю делать только то что тебе надо. А на фоне верти как хочешь

&rey: Бывают админы, недовольные сообщениями по одному слову или темой.  Что же касается выкупа-только-вами — ну, ничто не помешает тому поменяться с ещё одним пользователем. Если вы в блокчейн пишете — точно не помешает. (reply to 264753)

Sergei: Да, согласен, поэтому я толко что придумал копирование сделок с той монетой (reply to 264756)

Sergei: Это реально реализовать?

&rey: Каждую пересылку по наножетону будете копировать? Этак все тоны потратятся на комиссии. А так — ну, если определить нормально "сделку", то делать так же можно с бэкенда. (reply to 264757)

— 2024-11-14 —

булочки з паштетом/люфтваффельний свасторт: привет всем, кто знает как получить хеш газлесс транзакции после отправки ее через тонапи? можно ли как-то вытянуть ее по данным из которых месседж был составлен? желательно через какую нить апишку типа тонцентра/тонапи  нужно отследить ее статус

User<7727973243>: Реально (reply to 264758)

0x90: Кто-нибудь поднимал ton testnet в docker?

Devsbite: Всем привет. Кто знает как правильно делать симуляцию на stonfi v2

Svαtoωλ‎: невидимый таймаут для сообщений юзеров 15-30 сек (reply to 264753)

Anton: Вопрос к разработчикам GetGems. Сейчас в используется контракт аукциона v1, а какие изменения в v2, v3 и v4? А так же есть ли наработки в создании аукциона на токенах? На Github только контракт для продажи и он пока не используется. Не доработан или это дело времени? @botpult, буду благодарен за любую информацию по этим вопросам.

MikeWeb3Mighty: Привет! Подскажите плиз, какие сейчас бест практик для приёма платежей в тон?!

Ivan: https://github.com/getgems-io/nft-contracts?tab=readme-ov-file#actual-sale-contracts-supported-by-getgemsio Актуальные контракты, которые поддерживает гетгемс указаны в ридми  У нас нет в ближайших планах делать аукционы за жетоны, продаж за жетоны очень мало поэтому смысл этого не понятен. Скорей всего следующим шагом мы сделаем оферы в жетонах (reply to 264846)

Ivan: в репозитории есть контракты и старых версий, чтоб увидеть все-все изменения надо сравнить два файла через онлайн diff например  если коротко - то уменьшились комиссии, пофикшены некоторые ситуации когда нфт застревает на контракте (reply to 264846)

Anton: Так вы же функцию продажи за токены ещё не внедрили? Как их может быть мало? И почему используйте auction v1(так пишет tonviewer), когда есть v3? (reply to 264849)

Ivan: Продажа за фиксированную цену в токенах уже где-то месяц работает  у tonviewer свои названия, им больше интересен интерфейс контракта (reply to 264854)

Roma: Безгазовые в юсдт могут стать популярны (reply to 264855)

Denis: не совсем так. надо довольно четко разделить "платежи" типа инвойс и платежи типа "пополнение аккаунта". и велосипед он про второе

Пескарь™ | фронтент телефонов: в ридми гобикукле написано: Microservice for accepting payments  надо уточнять в доке 🥶 (reply to 264866)

MikeWeb3Mighty: Оки, благодарю за ответы!

MikeWeb3Mighty: А ton pay не советуете?

Tim: Кого 🌚 (reply to 264871)

Пескарь™ | фронтент телефонов: гобикукле F, покойся с миром и развратом (reply to 264874)

Denis: он умер (reply to 264871)

Egor: Добрый день! Подскажите пожалуйста, где можно найти актуальный метод подключения тг валета к миниапке?

MikeWeb3Mighty: Пил, курил, болел?!) (reply to 264876)

A: Ниже приведен мой такт, когда я пытаюсь внести транзакцию, но сумма, которую я вношу, не отображается в справке кошелька?

A: import "@stdlib/deploy";      // Define the events for deposit and withdrawal   message WithdrawEvent {       amount: Int as coins;       to: Address;  // Address of the recipient   }      message DepositEvent {       amount: Int as coins;  // The amount of the deposit       recipient: Address;    // The recipient address for the deposit   }      message Withdraw {       amount: Int as coins;  // The amount to withdraw       to: Address;  // Address of the recipient   }      message Deposit {       amount: Int as coins;  // The amount to deposit   }      contract mycontt100 with Deployable {          deployer: Address;       deposits: map<Address, Int as coins>;  // Map to track individual user balances          // The contract will take an owner address during deployment       owner: Address;            // Contract initialization where the owner is set       init(ownerAddress: Address) {           self.deployer = sender();  // Set the deployer as the contract owner           self.owner = ownerAddress;  // Set the passed owner address       }          // Deposit function - anyone can deposit and the deposit is added to the sender's balance       receive(msg: Deposit) {           let depositAmount: Int = msg.amount;           let senderAddress: Address = sender();  // Get the address of the sender              // Update the deposit map with the sender's address and the deposited amount           let currentDeposit: Int? = self.deposits.get(senderAddress);              if (currentDeposit == null) {               self.deposits.set(senderAddress, depositAmount);  // First deposit for the sender           } else {               self.deposits.set(senderAddress, currentDeposit!! + depositAmount);  // Add to existing deposit           }              // Emit DepositEvent to log the deposit           emit (DepositEvent{amount: depositAmount, recipient: senderAddress}.toCell());       }          // Withdraw function - only the owner (deployer) can withdraw funds from the contract       receive(msg: Withdraw) {           // Ensure that only the contract owner (deployer) can initiate a withdrawal           require(sender() == self.deployer, "Only contract owner can withdraw");              // Check the balance of the to address (recipient) in the contract           let currentDeposit: Int? = self.deposits.get(msg.to);                      // Ensure that the recipient has a deposit (currentDeposit != null)           require(currentDeposit != null, "No deposit found for recipient");                      // Ensure that the recipient has sufficient balance to withdraw           require(currentDeposit!! >= msg.amount, "Insufficient balance to withdraw");              // Send the specified amount from the contract address to the recipient           send(SendParameters{               to: msg.to,               bounce: true,           // Handle bounce (failure of transaction)               value: msg.amount,     // Amount to transfer               mode: SendRemainingValue  // Ensure remaining value is sent properly if any           });              // Update the recipient's deposit balance (reducing by the amount withdrawn)           self.deposits.set(msg.to, currentDeposit!! - msg.amount);              // Emit WithdrawEvent to log the withdrawal           emit (WithdrawEvent{amount: msg.amount, to: msg.to}.toCell());       }          // Getter for the balance of a specific address (from the deposits map)       get fun balanceOf(address: Address): String {           let depositAmount: Int? = self.deposits.get(address);              // If depositAmount is null, return 0, otherwise return depositAmount as a coin string           if (depositAmount == null) {               return ton("0").toCoinsString();  // Return 0 if no deposit is found           } else {               return depositAmount!!.toCoinsString();  // Unwrap and return deposit amount as coin string           }       }   }

A: я пытаюсь внести 1 тонну в нанотоне 10^9, но она не отображается ни в кошельке, ни в блокчейне, почему??

DPL: Почему при вызове get_wallet_data в pytonlib может отдавать exit_code 5 ?

A: какое это решение?

&rey: Вы точно хотите считывать сумму пополнения из тела сообщения Deposit, где отправитель может задать её без обеспечения собственно тонами? (reply to 264880)

Amirlan: ребят а как вы осуществляет аутентификацию в своих TMA, просто берете username и по нему пополняете базу данных?

Оскар: во первым это чат по тон во вторых RTFM https://core.telegram.org/bots/webapps#validating-data-received-via-the-mini-app (reply to 264914)

Amirlan: окей просто тут же сидят челы которые миниапки делают (reply to 264916)

Оскар: большинство таких челов сидят тут @devs @devs_cis (reply to 264917)

ダーリン: господа а Tolk вообще как по ощущениям? стоит переезжать с фанси или пока понаблюдать?

Пескарь™ | фронтент телефонов: толк ощущается по жидськи (reply to 264938)

Пескарь™ | фронтент телефонов: ну если одним словом

ダーリン: ну я как раз

ダーリン: из этих

Denis: переезжать пока не стоит. там пока никаких гарантий обратной совместимости, что компилятор не налажает и вот это всё. (reply to 264938)

ダーリン: поэтому и заинтересовал он меня очень

Пескарь™ | фронтент телефонов: из жидов? (reply to 264944)

ダーリン: жижаскриптер (reply to 264947)

Пескарь™ | фронтент телефонов: жидоскриптер (reply to 264948)

ダーリン: жидкийскриптер (reply to 264949)

Пескарь™ | фронтент телефонов: не шаришь… молодое поколение, эх. (reply to 264950)

Anton: смешная шутка (reply to 264951)

RootTon: А известно когда планируется дока адекватная ? (reply to 264945)

Elitist: Всем привет, есть кто работает с тонсайтами? Отпишитесь плиз

AL Pamblus: здравствуйте. я получил приватный ключ от EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM9c  это же просто? я не знаю по этому спрашиваю

AL Pamblus: вот, я там делал некоторые моменты, разные ключи, адреса, кое-что сделал и вот

RootTon: fmt.Print ? (reply to 264959)

AL Pamblus: а у меня кода нет 😁 + кошелёк заморожен, смогу ли я 🙂 (reply to 264962)

AL Pamblus: Код дайте и я попробую

AL Pamblus: я сам не уверен, мне код выдал нулевой адрес + приватный ключ.

AL Pamblus: давай, проверим (reply to 264966)

Nikolas: Я чуток попробовал. (reply to 264955)

Оскар: счастливый обладатель двух тысяч тонов, триллиардов миллиардов жетонов, владелец почти всех жетонов через 2 года и 3 месяца (reply to 264956)

Пескарь™ | фронтент телефонов: жаль что фейк (reply to 264970)

AL Pamblus: ключ фейк? 👀 (reply to 264971)

/B4ckSl4sh\: так у него ещё и права на почти все жетоны, сейчас пойдёт доминтит и ещё в стакан продаст (reply to 264970)

/B4ckSl4sh\: конечно (reply to 264972)

AL Pamblus: отправьте код в лс. проверим наконец, работает не работает 😁 (reply to 264966)

AL Pamblus: садись

AL Pamblus: я не вру, код выдал ключ и адрес

Оскар: а ты знаешь что адрес генерируется ещё на основе стейт инита, код какого валлета ты юзал? (reply to 264981)

/B4ckSl4sh\: Блин, я обычно не токсичный, но ребят, вы фигнёй занимаетесь, ну какой ключ от нулевого адреса....

/B4ckSl4sh\: Забей, там сразу от всех воллетов, там уникальная коллизия хэшей, что этот ключ сразу и к v3 и к v4 и к w5 подходит, в том числе к промежуточным ревизиям (reply to 264983)

AL Pamblus: V3 я говорю что не шарю 👀 фигни понаделал. получается. (reply to 264983)

RootTon: Ты посмотри тот кошель что последний раз на него перевел ) (reply to 264973)

/B4ckSl4sh\: не понял (reply to 264987)

/B4ckSl4sh\: не выкупил прикола, ну там нотов много, это все что я заметил (reply to 264990)

Kilyandra: Где можно подробнее о таком узнать? (reply to 264985)

/B4ckSl4sh\: в документации тона, но учтите, что моё сообщение - шутка (reply to 264995)

Kilyandra: вы меня поймали на ошибке, сэр (reply to 264997)

Пескарь™ | фронтент телефонов: мой кошелек не взламывай пж (reply to 265000)

AL Pamblus: боль (reply to 265001)

Оскар: эх, не повезло, ну тогда когда нибудь найдется счастливый обладатель приватного ключа от нулевого адреса с инит датой, в коде которого есть возможность отсылать любые интерналы - и тогда заживём (reply to 265000)

Пескарь™ | фронтент телефонов: ради этого я купил гаражи с h100, ждите новостей. (reply to 265004)

Vladimir: Никогда не найдется, он заблокирован прям в коде :) (reply to 265004)

/B4ckSl4sh\: Почему же? Нулевой адрес вполне себе адрес. Скорее адрес из единиц это blackhole, на котором не получится сделать кошелёк (reply to 265006)

Оскар: даю тебе времени примерно на сотню тысяч возрастов нашей вселенной (reply to 265005)

/B4ckSl4sh\: И в мастерчейне конечно же* (reply to 265007)

Vladimir: Он заблокирован https://tonviewer.com/addresses?section=suspended (reply to 265007)

Denis: беседы господ

Denis: @shibdev я верю что ты можешь пояснить нормальным языком почему товарищ ничего не нашел доступно и понятно. зажги

Denis: Во. Давайте конкурс на вакансию деврела в тонкипер. Кто сможет объяснить доступно и понятно почему ЭльПлюмбуса нет приватника от EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM9c без бреда про заблокированные кошельки

BillyBobSupport: всем привет , здесь можно выкладывать посты по вопросам коллабораций с другими проектами ?

/B4ckSl4sh\: Адрес кошелька это хэш его stateInit. Таким образом, чтобы получить этот адрес (а этот адрес состоит из всех нулей, это можно посмотреть в его raw форме ton.org/address) StateInit состоит из кода и данных смарт контракта. Код в данном случае может быть например кодом wallet v4r2, v3r2, или какой-то другой, у которого будет функциональность кошелька. Важно тут другое. Сравним эту задачу с более простой. Пусть нам нужно подобрать такое число x, что sha256(x) = 0. Эта задача по определению нерешаема, т.к sha256 как раз сделана таким образом, что уравнение sha256(x) = a, невозможно решить за адекватное время для любых a. А теперь задумаемся над тем, что нам теперь нужно не только найти такой x, что sha256(x) = 0, но и X должен быть осмысленным StateInit, а это ну совсем невозможно) (reply to 265014)

/B4ckSl4sh\: Эх, по-моему простыми словами не особо получилось, оставим на суд аудитории

rends_east: у него есть (reply to 265014)

rends_east: ну что значит невозможно шанс есть? значит возможно (reply to 265016)

Константин: TON это новая эра для многих 😉 я ничего не понимаю в этом деле, но методом тыка уже много чего натыкал и уже теперь есть собственный кликер. Аудитория растёт. Появляются новые знакомые и крутые возможности.   Респект этому чату и всем, кто пробует 💪💪💪 (reply to 205792)

/B4ckSl4sh\: Ну там есть пометка "невозможно за адекватное время"* ))) (reply to 265021)

rends_east: если это целенаправленно делать а получить случайно то возможно) (reply to 265024)

Anton: и пометка “пока кто-нибудь не найдет как это сделать”) (reply to 265024)

/B4ckSl4sh\: С таким расчётом я бы всё таки начал с биткоина, там хотя бы ключи 128 бит) (reply to 265026)

rends_east: меня за честный ответ вам тут забанят при этом грубить вам я не хочу (reply to 265029)

/B4ckSl4sh\: Сори, неправ, значит там только сидки по 12 слов. (reply to 265031)

/B4ckSl4sh\: Но наверняка же есть чейн с ключами по 128 бит

rends_east: короче поздравьте чела, лайфченж случился, ща ударит по стакану

/B4ckSl4sh\: А там вроде ещё какой-то механизм был, что сами сидки нельзя быстро перебирать - то есть наверное не просто хэширование, иначе что меня остановит их быстро перебирать (так получится быстрее чем ключи перебирать) (reply to 265035)

/B4ckSl4sh\: Так а в чём прикол тогда ключа 256 бит если всего 2^11 слов, их 12 в сидке, итого 2^132, что заметно лучше, чем 2^256, и если вдруг кто-то очень захочет перебирать, он будет перебирать сидки, а не ключи (reply to 265037)

Devsbite: Всем привет. Кто работал с stonfi v2? Есть пару вопросов☺️

/B4ckSl4sh\: Почему? Первое слово мы выбираем 2**11 способов, втрое тоже 2**11, третье тоже, и того это 2**11 * 2**11 * 2**11, а степени складываются, получаем 2  **(11*12) = 2**(132) (reply to 265040)

Denis: всё так. осталось пояснить откуда вот такие транзакции https://tonviewer.com/transaction/65ff0eb124c29363e9404044ff1e587c86116dc855a7e0d87684d8b0bf08a334 (reply to 265016)

Denis: тервер в универе прогуливали? это не стыдно. я сам списал (reply to 265040)

/B4ckSl4sh\: Судя по всему награда валидатору) Только как будто многовато

Denis: нет

Андрей: Разрабы тона хотят деньги (reply to 265045)

Denis: между прочим у меня на личном кошельке есть один входящий с -1:0000....0000 но в тестнете

/B4ckSl4sh\: ааа, я не заметил что старый трансфер

Оскар: раздача тон в мастерчейне в честь запуска мейннета 😁 (reply to 265049)

Dmytro: Это очевидно. (reply to 265014)

Dmytro: А вообще я сюда с вопросом:  А можно ли ончейн посчитать action fees? Я то я не вижу ни инструкций TVM ни внятного объяснения как это сделать.  Кейс такой что я хочу полностью посчитать стоимость обработки предыдущей в цепочке транзакции начиная от ее исполнения до прихода сообщения в следующий контракт по цепочке. Compute, forward, storage fees понятно считается, а вот action fees непонятно как посчитать.

Denis: олег предлагал тебя на эту вакансию (reply to 265055)

rends_east: ну можно посчитать газ, требуемый на передачу сообщения наверное, по аналогии и всё остальное (reply to 265056)

Denis: https://tonviewer.com/config#25 (reply to 265056)

Denis: видимо от сюда

Denis: но точную формулу вероятно только в коде смотреть

/B4ckSl4sh\: Возможно, я считал недавно (reply to 265056)

/B4ckSl4sh\: int forward_fee = get_forward_fee(x, y, 0);             ;; ~dump(forward_fee);             int action_fee = forward_fee * 21845 / (1 << 16); ;; First_frac is 21845 it is in config #25 Проверено, работает (reply to 265056)

Dmytro: Спасибо! (reply to 265063)

Dmytro: Только это надо брать наверное из конфига а не хардкодить значения (reply to 265063)

/B4ckSl4sh\: надо, но мне нужно было газ сэкономить (reply to 265065)

Stepan: Привет, подскажи, где самая полезная инструкция по интеграции была?) (reply to 265023)

&rey: В мастерчейне непустой zero state. Кстати, retracer не даёт эмулировать транзакцию, говоря "invalid config") (reply to 265045)

Dmytro: Я не понимаю почему добавили методы для всех газов кроме этого (reply to 265059)

&rey: А как же опкод SENDMSG? (reply to 265069)

/B4ckSl4sh\: А он неправильно считает - чуть больше чем нужно, не разобрался почему (reply to 265070)

Константин: Я честно признаюсь, но я мало что понимаю во всем этом, но что-то получается. Порой криво, но получается.   Про инструкции не понял))) (reply to 265067)

Stepan: У меня есть игра на web, хочу ее с тоном интегрировать и в тг опубликовать, но инфу по интеграции найти не могу (reply to 265073)

Stepan: чтобы путь от начала до конца описан был

Пескарь™ | фронтент телефонов: tonapi-dapp-example гугли (reply to 265075)

Stepan: спасибо, посмотрю (reply to 265077)

Константин: У меня без тона всё в телеграме работает пока. Думаю тут есть специалисты которые смогут подсказать Вам 100% (reply to 265075)

Stepan: а есть ссылка инструкция на  добавление приложения в тг? (reply to 265080)

Константин: Нет) я делал на основе действующего проекта. Там просто поменял токен, который дали при создании бота в Ботфазер и всё.   Приложение стало появляться в тг. (reply to 265083)

Stepan: понял (reply to 265086)

Константин: Если что, то можете в личку делиться своими успехами в ТГ. Будем дружить проектами.   Вдруг этот диалог не просто так тут произошёл 💪😉 (reply to 265087)

Stepan: ну я вот начал погружаться, чувствую много бессонных ночей ждет, как все подружить проект с тоном и тг) (reply to 265091)

Константин: Я желаю успехов и пускай будет всё круто и тут найдутся те, кто вам поможет ради развития всего TONа 🚀🚀🚀 (reply to 265092)

Stepan: спасибо и вам успехов! (reply to 265093)

Gof: А там ничего особо не надо (reply to 265076)

AL Pamblus: а почему в этом коде можно писать 1 слово, пробел, пустоту, символ, много символов и он будет работать?

Gof: Скрипт телеграмма подключаешь в хедерсах приложения, авторизацию можешь у любого опенсорса на гитхабе взять (ищи telegram webapp example или что то похожее), и потом просто указываешь в ботфазере ссылку на мейнапп

Gof: Потому что проверки нет на валидность (reply to 265099)

Gof: Там метод есть, не помню как называется, но что то типо checkMnemonic

AL Pamblus: но адрес появляется 😁 и даже кто-то использовал их для майнинга gram 🫢 (reply to 265101)

Gof: Да, адреса он генерит (reply to 265103)

Gof: Я клиенту с такого адреса даже вывел деньги

AL Pamblus: с балансом и транзакциями. я ввёл слово gram. появился адрес. посмотрел адрес. на нём майнили грам монеты (reply to 265098)

Gof: Я не знаю тонкостей, знаю что у него нет дополнительной проверки

Gof: Ахаххахаха, получается оправдал аватарку (reply to 265106)

Stepan: я на этапе, как сам контейнер-приложение создать (или он через бот фазер создается?) (reply to 265100)

&rey: и не должно быть *точнее, у пользователя должен быть вариант "да, я хочу использовать вместо мнемоники вот эту последовательность байт, потому что мне без разницы на тоновский псевдо-стандарт" (reply to 265101)

Oleksandr: Подскажите как в тестах прокрутить время вперед

&rey: blockchain.now = ... (reply to 265111)

SweetJesus: blockchain.now!! += n (reply to 265111)

&rey: там вроде нет геттера (reply to 265113)

Oleksandr: не работает(

Gof: По идее если у тебя уже есть ссылка https к твоему приложению, то можешь просто её затолкать в ботфазер, там создаешь бота, заходишь в настройки приложения и просто скидываешь ему ссылку (reply to 265109)

Gof: Это если тебе не нужно никакой авторизации от телеграмма и взаимодействия с ним

Stepan: скорее всего нужна авторизация, т к в каталог игр потом планирую , платежи подключать и прочее (reply to 265117)

Gof: Ну тогда гитхаб в помощь, там реально не сложно, просто по хешу в ссылке можешь валидировать, а платежи можно и к обычному сайту через тонконнект приделать, там документации достаточно (reply to 265118)

Stepan: понял, спасибо за инф (reply to 265119)

Oleksandr: есть еще какие-то варианты как можно прокрутить время? или подскажите на что нужно обратить внимание

&rey: blockchain.now = новое время попробуйте. Например, Date.now() + 300. (reply to 265121)

&rey: есть небольшая разница между = и += (reply to 265127)

INFO: /stat@combot

SweetJesus: там вроде еще на 1000 разделить нужно (reply to 265122)

SweetJesus: blockchain.now = Math.floor(Date.now() / 1000) + n так должно работать  хотя вариант с blockchain.now!! += n у меня тоже работает. (reply to 265127)

AL Pamblus: я использую  const tg = window.Telegram.WebApp;     const telegusername = tg.initDataUnsafe.user.username;     const telegid = tg.initDataUnsafe.user.id;  чтобы получить  username + id тех кто запустил через telegram 🙂👍 (у меня злоумышленник может подменять id в url и приложение получит не те данные..) (reply to 265118)

Devsbite: Парни, всем привет, кто работал с стонфи в2

Oleksandr: Спасибо! Удалось установить значение для blockchain.now но после этого я не могу отправить транзакцию не вызвать гет метод... В чем может быть проблема? (reply to 265128)

Oleksandr: проблема решена, еще раз спасибо! (reply to 265128)

Oleksandr: подскажите еще как тестировать негативные сценарии к примеру как проверить что отрабатывают require в контракте корректно? В документации встречал только сценарии где транзакции успешно проходят...

SweetJesus: отправляй сообщение с этим негативным сценарием на свой контракт, дальше expect toHaveTransaction и там есть поля с success и exitCode, по ним чекай. (reply to 265138)

Oleksandr: Спасибо, буду пробовать!!

Oleksandr: все отработало без проблем! exitCode принимает числовые аргументы. как мне заранее рассчитать что require(context().sender == self.owner, "Only owner") это код 35499? (reply to 265139)

SweetJesus: https://docs.tact-lang.org/ref/core-debug/#require  тут описан алгоритм (reply to 265143)

Oleksandr: function calculateExitCode(errorMessage: any) {     const hash = crypto.createHash('sha256').update(errorMessage).digest();     const code = hash.readUInt32BE(0);     return (code % 63000) + 1000; } правильно считает код по сообщению ошибки (reply to 265145)

Юра: Приветствую дамы и господа

ダーリン: может кто нибудь смотрел контракты evaa, не могу понять для чего у них user_rewards, единственное, что он делает, это просто обновляется на каждый чих  предполагаю что это связано с их XP системой, но могу ошибаться

ダーリン: судя по всему ошибаюсь, вопрос открыт (reply to 265150)

— 2024-11-15 —

🇷🇺 Angry: Подскажите, пожалуйста, что это может быть? С одной и той же сид фразы с одной версией кошелька в tonkeeper показывает один адрес, а через js - другой.

🇷🇺 Angry: Оба в тестнет

🇷🇺 Angry: В смысле - должен быть один, но получается что их 2 разных с одной сид фразы

🇷🇺 Angry: JS код такой:     const key = await mnemonicToWalletKey(mnemonic.split(' '))     const wallet = WalletContractV5R1.create({         publicKey: key.publicKey,         workchain: 0     })     const endpoint = await getHttpEndpoint({         network: "testnet"     })      const client = new TonClient({endpoint})      console.info(wallet.address)

ダーリン: в тоне 5 форматов адресов (reply to 265158)

ダーリン: EQ - bounceable: true, testOnly: false UQ - bounceable: false, testOnly: false kQ - bounceable: true, testOnly: true 0Q - bounceable: false, testOnly: true  и raw

🇷🇺 Angry: Нет, с одного отправил тестовые тоны, с другого не отправлялось ничего - они разные, формат одинаковый (reply to 265160)

Arseny: всех приветствую!  есть реакт приложение, необходимо отправить транзакцию с комментарием, взял пример в доке, при импорте @ton/ton ругается на Uncaught ReferenceError: Buffer is not defined  подскажите, пожалуйста, что я не так делаю и как это исправить?

ダーリン: vite используете? (reply to 265163)

Arseny: да (reply to 265164)

ダーリン: https://www.npmjs.com/package/vite-plugin-node-polyfills

Arseny: спасибо! (reply to 265166)

🇷🇺 Angry: Да, бро, я проверил тут https://ton.org/address/ - ты оказался прав, спасибо, понял (reply to 265161)

User<7755739056>: Всем привет,  кто-нибудь уже делал контракт автопродления доменов? Чтобы закинуть туда домен на лет 5 и не париться?

Max: Задеплойте простенький плагин, можно даже взять плагин подписок и не париться  И крон-задачей дергайте простенький скрипт, который будет слать экстернал (reply to 265177)

Andrey: 🌚 (reply to 265178)

Max: А как чисто он-чейн реализовать автопродление? (reply to 265179)

Andrey: Я таких способов не знаю)   Точнее знаю, что нужен сервис отложенных отправок экстернелов с гарантиями. Но тут никакой плагин не нужен. Можно подписать сообщения с экспайрингом в года просто ключем кошелька (reply to 265180)

Max: Если кошельком надо продолжать пользоваться, то не особо катит из-за секно, моя идея с плагином скорее в этом (reply to 265181)

User<7755739056>: Вывод:)  Простого интерфейса для пользователей,  для ведения доменов  - до сих пор нет:) (reply to 265177)

Max: увы и ах (reply to 265183)

User<7755739056>: А наверх нельзя идею протолкнуть самым главным? Чтобы реализовали? Ведь это очень нужная функциональность для пользователей (reply to 265184)

User<7755739056>: Больше удобства - больше пользователей

Max: Самым главным - это самому Николаю? Или ещё выше? (reply to 265185)

User<7727973243>: Могу реализовать при необходимости за 10 TON (reply to 265177)

Max: Возьмите всё в свои руки! Берите по одному тону за год продления и супер

User<7755739056>: Да, я сам могу сделать.  Просто лень:) (reply to 265189)

User<7727973243>: Тогда личка открыта для вас )) (reply to 265191)

User<7755739056>: Да там система премий от ТФ слишком сложная и замудреная, только для тусовщиков (кто ближе к тусовкиюе), ходить как "дурак" на всякие лиги ради 30.000 это конечно жесть. Сейчас только,  чтобы одному покормиться надо минимум 500к - это всё больше для студентов, чем для программистов  А если говорить про вашу идею 1$ в год брать, то да, если бы придумать хорошую бизнес модель и заручиться поддержкой спонсоров, но тоже,  тогда надо тусоваться со всеми "попрошайками" - так себе идея (reply to 265190)

Max: Так там нулевая себестоимость, а продукт полезный (reply to 265193)

&rey: subwalletId для тестнет в5 надо выставить в верный, тонкипер его знает какой — там в кой-то веки пофиксили баг, что подписи на кошельки мейннета и тестнета совместимы. (reply to 265158)

Torkusz: А спонсоры то зачем? (reply to 265193)

Max: чтобы виртуалку на DO оплатили за 20 баксов 😁 (reply to 265196)

&rey: А как вы продукт-то сделаете? Только владелец может продлять домен. (reply to 265194)

Max: Плагин (reply to 265198)

&rey: Вы же помните, что плагин в господствующей парадигме — отдельный контракт? Он тоже не сможет продлить домен. (reply to 265199)

&rey: Вам ещё и моя версия кошелька нужна, inplug-v2.

User<7755739056>: Всё равно же нужно входящее сообщение (reply to 265199)

Torkusz: Это ещё что за чудо?) (reply to 265201)

&rey: То, где плагины внутри кошелька. Кажется, я не очень аккуратно их реализовал, но из них можно сделать EVM-подобную систему даже))) (reply to 265203)

&rey: Экстерналы, действительно.  Можно же сделать, чтобы сервис стейкал деньги, а если опоздает продлить домен, то выплачивал бы из стейка владельцу того. (Ончейн доказательство транзакций уже изобрели.) (reply to 265202)

&rey: Ну... или можно сделать полностью ончейн! 94 TON в год и вперёд, будет работать самый настоящий таймер, который в нужный момент продлит всё.

User<7755739056>: А почему 94$ в год? Это либа внутри vm? Которая цикл организует?

Max: Тогда действительно, только путь Творожкова (reply to 265200)

sd: @tvorogme готовое название презентации на некст гейтвей, и без помощи чатгпт (reply to 265208)

&rey: Не, любая транзакция должна завершиться за сколько-то там газа. 94 TON в год — гонять по шардам туда и обратно сообщения. (reply to 265207)

&rey: А пользоваться предподписанными сообщениями можно, но не нужно. Они предполагают, что человек не будет менять seqno кошелька — не будет им пользоваться.

User<7755739056>: Это слишком костыляво:) хотя конечно работать будет:) (reply to 265210)

Max: Можно делать плагин владельцем домена. И поддержать, что владелец может в любой момент его забрать обратно

Max: но тогда и плагины не нужны, вообщем-то

&rey: restricted кошелёк для продления нфт. Мне нравится. (reply to 265214)

Andrey: Вроде как было кратно дороже, нет? 94 тон в год звучит не так грустно, как то что я слышал раньше) (reply to 265210)

Andrey: Что-то не верится что можно построить трейс длинной в год за $500 🤨

&rey: Сейчас мой таймер работает до мастерчейна и обратно. Стоит, естественно, 94'000 TON в год. А если по шардам гонять, вроде в тысячу раз всё дешевле. Правда, жаль, что нет anti-anycast: "переписать адрес получателя в самый далёкий от меня шард". (reply to 265216)

User<7755739056>: Вообщем,  понятно,  нужен эффективный механизм тайминга внутри твм

Andrey: Во, 94к это я верю) (reply to 265218)

&rey: Так не будет же такого, у вас транзакция должна рано или поздно попасть в блок. Она же не может в нескольких блоках быть записана. (reply to 265219)

User<7755739056>: А бесконечный цикл? (reply to 265221)

&rey: out of gas (reply to 265222)

User<7755739056>: Бесконечно-конечный, например,  на 5 часов цикл (reply to 265223)

&rey: И нет, миллиард тонов на балансе не поможет, у транзакции лимит 0.4 TON.

&rey: И как валидаторы вообще должны проверять эту транзакцию?

Andrey: Так в в5 плагин может отправлять сообщения от кошелька юзера (reply to 265200)

User<7755739056>: for(int i=0, x<1000*60*60*5//5 часов? (reply to 265227)

User<7755739056>: А в твм наверное и нет циклов, да?

&rey: О, неужели? блин, тонкипер лучше сказали бы мне, чем сами кошелёк писать... (reply to 265228)

User<7755739056>: Хм.. вообще,  есть одна идея сделать таймер для всех внутри вм..

&rey: Да почему же внутри вм. Она же отдельно запускается для каждого контракта. Наверно, в блокчейне?

User<7755739056>: Потому что её надо контролировать и бегать по всему блокчейну не лучшая идея (reply to 265233)

&rey: Вот уже две функции придумали, которые бы триггерились интерналом на -2:000000000...???: — всё API лайтсервера (получить транзакцию / состояние любого контракта) — завести таймер (reply to 265233)

User<7755739056>: Это же опять не самостоятельно,  опять из вне, при краше всё навернется  - такому способу нельзя доверять монеты

&rey: Да какое извне, я ж предлагаю сделать это всё с гарантиями валидаторов. (а я пойду пить чай и вам очень рекомендую тоже) (reply to 265236)

User<7755739056>: А какая самая долгая команда в твм?

User<7755739056>: Хотя нет, дурацкая идея

&rey: Весь блок должен валидироваться за 5 секунд.

User<7755739056>: Надо отправлять транзакцию в один контракт и другой одновременно,  а третьем контрактом смотреть (кто второй пришел) разницу по времени и передавать дальше другой такой же катавасии,  пока не пройдёт нужное количество времени

User<7755739056>: Это гарантировано сработает после N заданного времени,  вопрос только сколько монеток сьест - дофига

User<7727973243>: Очень (reply to 265242)

User<7755739056>: Ну тогда виртуально что-то просчитывать(например,  адрес будущего контракта при х итерации), потом сравнивать с реалтаймом и если окей - отправлять сообщение по нужной ветке (псевдо-метапрограммирование в твм)

User<7755739056>: Но сами операции всё равно сжирают монетки:(

&rey: Теперь придумаем "предпосчитаем, какой контракт в самом далёком шарде, и посылать будем по одному сообщению". 94 тона в год есть будет.

/B4ckSl4sh\: Это сильно меньше чем на тон таймере, реально так дёшево выйдет если не в мастерчейн пересылать, а в самый далёкий шард? (reply to 265247)

Andr: Знает кто-нибудь, https://testnet.toncenter.com/api/index/v1 вообще поддерживается?

Andr: Например,  сейчас на запрос транзы кидает в ответе "[Errno -2] Name or service not known"

Makos: а v2 не подходит под твои задачи? (reply to 265315)

Andr: Дело в том, что код уже давно написан и он работал на v1.

Andr: Так то и v3 подходит под мои задачи, но надо мигрировать

Makos: Что лучше подходит для новичка, tact или же изучение func с самого начала дает больше преимуществ?  Когда серчил информацию, увидел что для tact сильно меньше обучающих материалов, курсов и т.д. с чем это связано? Есть какие-то ограничения у языка о которых нужно знать заранее?   Буду благодарен за развернутый ответ и рекомендации, и очень помогли бы источники для изучения / практики с tatc. Основной ориентир все же на то, что я новичок, заранее всем спасибо за помощь!

Dmytro: Если ты собираешься писать всякие учебные штучки дрючки для себя и ты хочешь изучить тон то можно с такта начать. Если цель написать что-то рабочее то кроме фарси вариантов нет. (reply to 265325)

rends_east: Tolk изучай, func сложный, tact дорогой  А все, что есть на func , можно адаптировать под tolk (reply to 265325)

Dmytro: Толк только разрабывается, его можно только тестить но не писать на нем (reply to 265329)

Farel: а batch mint в такте реализуем? (reply to 265329)

rends_east: Так а там какая то сумасшедшая разница с func? Вроде просто чуть чуть синтаксис подправили пока (reply to 265330)

Dmytro: Да и завтра поменяют синтаксис снова и тебе придется все заново изучать и переписывать (reply to 265333)

Makos: Бегло глянул Tolk, сравнение с FunC - здесь  Если честно рекомендация о Tolk внесла больше непонимания к чему присмотреться и заняться😢

Cube: Начинай с фанс - не ошибёшься (reply to 265335)

Makos: а тяжело не будет? я как никак указал что я новичок( (reply to 265336)

rends_east: Будет, но тут иначе никак (reply to 265337)

Dmytro: Какой опыт в программировании (reply to 265337)

Vladimir: а когда Толк успел появиться? Чуть отвлекся и уже новый язык какой-то появился 😄

Dmytro: На гейтевее анонсировали (reply to 265340)

Vladimir: Это просто переименовали Tact или новый третий язык для смарт-контрактов?) (reply to 265341)

Dmytro: Форк фанси (reply to 265343)

Cube: Пока что это func с синтаксисом похожим на тс (reply to 265343)

Cube: В будущем как я понял будут некоторые уровни абстракции добавляться

Dmytro: сегодня выйдет запись подкаста про func/tact/tolk на пиздеве, можно будет послушать Александра - он там рассказывает про толк и что ждать от него

User<5829509390>: цао

.: чем отличается jetton_wallet от jetton_wallet_governed?

Ruslan: в названии написано отличие

&rey: Вот бы сделать бота, который бы рендерил сообщение и понимал, скам или спам это.

rends_east: Эмулировал реакцию аудитории, как в тонапи (reply to 265391)

集电极: Lols Anti Spam (или как-то так) уже умеет это (reply to 265391)

&rey: Вообще, реакцию аудитории эмулировать особо не надо, лучше задавать вопрос: "Это сообщение позволяет другим участникам чата лучше понять разработку на тоне? Направлено ли оно на то, чтобы запутать кого-то?" (reply to 265393)

Cube: Кто ловил такую же ошибку?

jennifer [afk]: подождать чуть наверное надо (reply to 265396)

Cube: Уже достаточно долго жду (

jennifer [afk]: впн вруби

Cube: С прокси запускаются... (reply to 265399)

Farel: Подскажите пж есть ли пример на такие реализации батч минтинга?

Семен: У меня было что-то похожее. Я поменял время между запросами до 5 секунд и вроде как помогло. Видимо слишком часто долбилось  В waitForDeploy есть параметр интервала между попытками (reply to 265396)

Zxc: Читаю новости про нововведения в TWA, но не понимаю: как использовать новые функции, исходя из того, что мини-приложения - просто веб-страницы. Как использовать эти новые возможности?

RootTon: Всем привет, столкнулся с такой проблемой что мой смарт на func билдится без ошибок а вот деплоится не хочет и выпадает такая ошибка (см скрин), можете подсказать как это решить или в чем дело?

Cube: У меня к сожалению в целом ни одна транзакция не отправляется. Но через proxychains скрипты запускаются :) (reply to 265407)

RootTon: а блин... я тупанул сорян... я во врапере буквой ошибся а св код на подсвечивал ошибку в файле (reply to 265410)

DPL: Как можно получить адресс по приватнику в TON?

DPL: спасибо, там разве не нужен wallet_id ? И определение тестнет/мейннет? (reply to 265424)

DPL: Спасибо, поковыряю (reply to 265427)

Mr: Uniton Connect обновлён до версии 0.2.9.5!  - Ядро полностью переписано на нативную версию Ton Connect UI - теперь нет необходимости верстать окошки и мучиться с подключениями и рядом других моментов (обратная совместимость сохранена в течение нескольких версий), - Поправлен ряд багов, которые были не особо критичные, но доставляли неудобство при работе с сдк, - Добавлен парсинг хэша транзакции из Boc при её отправке, - Добавлено подтверждение отправленной транзакции по хэшу в Ton API   https://github.com/MrVeit/Veittech-UnitonConnect/releases/tag/0.2.9.5

I16000: Добрый вечер,никто не подскажет формулу расчета цены токенов на GasPump/BigPump?

Cube: Транзакция 6 минут провисела в пендинге и исчезла 🥹

Оскар: из таба history переходим в transactions и там всё будет (reply to 265461)

Cube: Не совсем понял, она в целом в бч не исполнилась (reply to 265465)

Оскар: ну было бы неплохо узнать хэш, адрес инициатора или что-то такое, а то я пока что глазами раскрывать укороченные адреса со скринов не научился (reply to 265469)

Dmytro: а мы платим forward_fee за входящий external message или нет?

Leo: ? (reply to 265490)

User<7609014754>: привет всем

集电极: Добрый день. Как указать StateInit и DataCell при импорте кошелька из приватного ключа? Пишу на typescript, но буду рад примеру на любом языке

Denis: К сожалению такое возможно (reply to 265461)

Denis: Нет гарантии что сообщение подписаное кошельком 100% попадёт в блокчейн

Andrei: Привет! Я тут пытаюсь тестить свой смарт контракт. Суть в том, что к нему должны обращаться с разных кошельков. Однако несмотря на то, что у меня добавлено несоклько кошельков в TonKeeper, по дефолту выбирается всегда один и тот же. (Даже если я в текущий момент переключился на другой) Это проблема TonKeeper или я что-то делаю не так?  import { Address, toNano } from '@ton/core'; import { TestContract } from '../wrappers/TestContract'; import { NetworkProvider } from '@ton/blueprint'; import { SMART_CONTRACT_ADDRESS } from '../config';  export async function run(provider: NetworkProvider, args: string[]) {     const ui = provider.ui();      const address = Address.parse(SMART_CONTRACT_ADDRESS);      if (!(await provider.isContractDeployed(address))) {         ui.write(`Error: Contract at address ${address} is not deployed!`);         return;     }      const testContract = provider.open(TestContract.fromAddress(address));      await testContract.send(         provider.sender(),         {             value: toNano('1'),         },         {             $$type: 'Deposit',             amount: 1n,             entry_id: 1n,         }     );      ui.clearActionPrompt();     ui.write(`Deposit completed!`); }

Cube: Кажется папку /temp в корне проекта надо удалить (reply to 265507)

Cube: А так проще всего мнемонику в .env прописывать

Пескарь™ | фронтент телефонов: тут вроде чота говорили про гарантию доставки от тонапи, везде обман……… (reply to 265506)

Denis: А где говорили? Опять обманываешь? (reply to 265510)

Пескарь™ | фронтент телефонов: каюсь, грешил (reply to 265512)

Andrei: Ага, работает.  Спасибо! (reply to 265508)

Abdulaziz: Кто знает как получить рут

Elitist: Всем привет, есть кто делал auth через телеграмм на site.ton?

Devsbite: Всем привет. Кто подскажет? Как эмулировать свап хотя бы ton-jetton с помощью ton/sandbox. А так же получить список транзакций. На stonfi v2

Dmitriy: Какие есть способы мультиотправки жеттонов?

Denis: Тонкипер про ставишь и мультиотправляешь (reply to 265548)

Dmitriy: а как туда грузануть условно 10000 кошельков? (reply to 265549)

Denis: Там CSV. Но такие объёмы оно не может

Dmitriy: а по комиссии что?

集电极: Jetton Sender от Tonraffles (reply to 265548)

Stas: парни, а кто нибудь интегрировал ui, со svelte, есть примеры?

&rey: Кхм, для этого вообще-то SDK предназначен. (reply to 265556)

Stas: кхм, а разве ui не использует sdk? (reply to 265557)

&rey: Ну, ui = обёртка sdk для react. Вам реакт не нужен => ui тоже не подходит. (reply to 265558)

Stas: есть же отдельный ui без реакта, я про него

Stas: https://www.npmjs.com/package/@tonconnect/ui (reply to 265560)

Dmitriy: там комиссия гигантская (reply to 265555)

Сева: что это может значит после того как я кинул ссылку на пул реквест автору репы?: "дякую. додайте й мене в ватори, будь ласка."

ken: спасибо. добавьте и меня в соавторы, пожалуйста (reply to 265565)

Andrei: Привет! А может кто-нибудь подсказать?  Делаю counter пример из blueprint Когда пытаюсь прогнать incrementCounter и прошу сделать deeplink, QR code генерируется, правильный, при открытии тонкипера через него, подготовлен кол к смарт контракту. Однако, если я пытаюсь открыть десктопный тонкипер через предложенный диплинк, подготавливается обычная транзакция с отправкой 0.5 TON на смарт контракт.  В чем причина такого?

2happy: Здравствуйте, подскажите пожалуйста как связывается Jetton mainter и Jetton wallet. Я понял, что у каждого пользователя есть свой wallet-смартконтракт. Но октуда берётся код этого смартконтракта? Мне нужно реализовать логику, что в случае свапа через декс (дедаст) будет списываться комиссия N%. В mainter это никак не реализовать, насколько я понял. Как сделать чтобы мой код jetton-wallet оказывался у пользователей токена?  Зайдя в чат я прочитал про tact. Это же альтернатива funC'а? Что проще для написания маленького смарт контракта.   Я использую blueprint, и там при деплое jetton'а, есть возможность только вставить ссылку на метадату. Как запихать метадату в блокчейн.

Oleg: Если под mainter вы подразумеваете minter, то это он содержит в себе код jetton wallet'а, ему этот код передается при деплое минтера (reply to 265574)

Сева: Дякую (reply to 265566)

2happy: Не понял, можно с начала, как связаны jetton master, wallet и minter смартконтракты. git@github.com:EmelyanenkoK/modern_jetton.git По вот этому примеру я понял, что minter - это master контракт, а wallet нужно как-то отдельно доставлять пользователям. https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md Отсюда я вычитал про master, но minter тут нет.  Что я не так понял (всё?) (reply to 265575)

Oleg: Это одно и то же (reply to 265577)

Oleg: Когда собирается сообщение для деплоя мастера, туда добавляется код скомпилированного жетон-кошелька. В модных современных жетонах этот код кошелька заранее помещается в общедоступную библиотечную ячейку, а мы пользуемся только ее хешом в качестве кода кошелька

2happy: Понял, то есть когда собирается мастер помещается код/хеш кошелька, который и используется.  Спасибо, пойду дальше разбираться. (reply to 265579)

— 2024-11-16 —

RootTon: Если нужен однозначный ответ то — да возможно (reply to 265595)

Jenya: const keyPair = await mnemonicToWalletKey(mnemonic.split(' '));     const walletContract = WalletContractV5R1.create({ workchain: 0, publicKey: keyPair.publicKey });     const transferMessage = walletContract.createTransfer({         seqno: 75,         sendMode: 3,         secretKey: keyPair.secretKey,         messages: [             internal({                 to: walletContract.address,                 value: toNano(1),             }),         ],     });      const externalMessageBoc = beginCell()         .store(             storeMessage(                 external({                     to: walletContract.address,                     body: transferMessage,                 })             )         )         .endCell().toBoc();      await client.sendMessage(externalMessageBoc);  через тонапи отправляет, через лайт клиент ошибка  Error: cannot apply external message to current state : Failed to get account state

sd: Почему при попытке отправить несколько одинаковых сообщений (пикрил пример) эмуляция тонкипера (и кошелька) фейлится?

sd: В то же время при отличии хотя бы в 0.01 тон или наличии любого пейлоада эмуляция проходит успешно, хотя ничего особенно не меняется. Но если и пейлоады будут одинаковые, то снова фейлится при одинаковом количестве тон или если разница меньше 0.01 (reply to 265599)

Max: А что со вторым мессаджем? вы забыли кавычки для адреса (reply to 265599)

sd: да это же фотка хтмл странички я для наглядности вбил во второй меседж тот же адрес (reply to 265601)

sd: транзы успешно уходят в обход эмуляции (кроме кошелька) из тонкипера, просто именно сама эмуляция фейлится

Max: Хм, звучит странно. Посмотрим, спасибо

Max: TON Space сидит на эмуляции tonapi, так что неудивительно, что там тоже фейлится

sd: это понятно, я к тому, что там если эмуляция неуспешна, то отправить транзу нельзя в принципе в новом мобильном тонкипере тоже нельзя, а вот с деск версии они уходят успешно даже если фейлится эмуляция (reply to 265605)

Max: А вот это плохо, что у нас нельзя теперь  Андроид/айос? (reply to 265606)

sd: андроид 5.0.15 (reply to 265607)

Max: ага, спасибо. тоже поправим

WEB ELF🐦SUI🌱SEED🍅: Простите что врываюсь, возможно, с нубским воопросом. Интересует вот что: может ли при обмене неизвестного токена на известный, запуститься условно какой-то хитрый контракт, который опустошит кошелек  (учитывая что обмен проходит на доверенной площадке) Так сказать теоретическая возможность. Просто встречал такие описания рисков, но насколько они применимы к блокчейну ТОН? Если есть ссылка на такие гайды в Тоне, был бы благодарен.

Max: Краткий ответ - нет, не может. Но есть другие риски, менее катастрофичные, чем в описанном вами кейсе (reply to 265612)

WEB ELF🐦SUI🌱SEED🍅: Спасибо! А можете привести пример. Про потерю комиссии знаю, а что еще? (reply to 265613)

Max: Ханипоты, кража прикрепленного к сообщению TON  В целом, всё (reply to 265614)

WEB ELF🐦SUI🌱SEED🍅: Про ханипоты слышал, а вот второе не могу понять. Не сочтите за труд, в двух словах описать что это. (reply to 265615)

Max: Вы когда совершаете своп, шлёте интернал на свой жеттон воллет примерно 0.3-0.4 TON на покрытие комиссий блокчейна в процессе свопа  Так вот, код контракта жеттон воллет аможет быть написан так, что он будет воровать у вас эти 0.4 TON, грубо говоря, в пользу злоумышленника (reply to 265616)

WEB ELF🐦SUI🌱SEED🍅: Огромное спасибо! (reply to 265617)

User<7354120070>: добрый день. Короче я сейчас делаю сайт с подключением TON кошелька через TonConnect, но я вообще не нашел никакого ни примера кода ничего вообще. Кто нибудь может пожалуйста помочь хотя бы объяснить что нужно и какие языки или там например ссылку на какой то хотя бы пример кода. Буду очень благодарен

2happy: @tonconnect/ui-react (reply to 265643)

DdoseS: Привет всем , хотел спросить сколько времени нужно tg Wallet что б обновить кеш manifest, потому что поменял ссылку сайт возвращает уже новую, а валлет видит ещё старый файл приходить ещё старая

2happy: Попробуй reload page сделать, кеш браузера встроенно в тг очистить. Должен сразу. (reply to 265657)

DdoseS: Та делал , в тонкипере пашет, а в валлет ещё старый файл (reply to 265658)

×: отрыл для себя новый чат для душнины)

Doctor Delpy: У кого то есть решение для проверки ton_proof на Golang? Библиотека из документации может только создавать новые соединения, а валидации предоставленного ton_proof нигде я не нашел

Tim: там прямо в доке же должно быть (reply to 265672)

Doctor Delpy: Найдено такое не полноценное решение: https://github.com/ton-connect/demo-dapp-backend/blob/master/proof.go (reply to 265672)

Tim: А чего там не хватает

Doctor Delpy: Оно работает только для инициализированных кошельков,  запрашивают publicKey у тонапи👎 (reply to 265675)

Dmitriy: так там же в следующих строчках в случае ошибки от tonapi парсится state_init (reply to 265676)

Dmitriy: так оно и должно работать

Doctor Delpy: А, не заметил🤦‍♂️. Извиняюсь, буду использовать тогда, спасибо (reply to 265680)

&rey: vanity незадеплоенный не пройдёт, но это издержки. (reply to 265675)

Константин: Всем привет ✋👋 а тут есть разработчики игр, хочется узнать как можно реализовать фишку с вознаграждением за ежедневное посещение игры.  Подскажите где можно глянуть 🙏

rends_east: привет всем подскажите, specActions это всякие raw_reserve, commit и т.д, верно? и правильно ли я понимаю, что они исполняются всегда до отправки сообщений?

Jenya: никто не знает? (reply to 265598)

Dmytro: Экшены исполняются все в той последовательности в которой были вызваны. (reply to 265697)

rends_east: Это же вроде неправда По крайней мере с сообщениями Разве не в рандомном порядке, как повезет, сообщения исполняются (reply to 265703)

Dmytro: Что с сообщениями не так? (reply to 265704)

&rey: Сообщения складываются в очередь отправки в том порядке, в котором они были отправлены. (reply to 265704)

rends_east: И сообщения из порядка берутся подряд или могут в теории как угодно? (reply to 265706)

&rey: Подряд, конечно. Если на один и тот же контракт назначения.  Вообще, доставка и исполнение тех сообщений — это уже совершенно другое дело, транзакция на контракте к этому моменту давно уже закончится.

rends_east: А если не на один и тот же адрес назначения? (reply to 265708)

&rey: Тогда, без ограничения общности, те два контракта (и отправитель) находятся в разных шардах, и между этими сообщениями не определено отношение порядка. (reply to 265709)

rends_east: Ну так а я о чем Вот доставка и исполнение сообщений может быть в рандомном порядке, вне зависимости от порядка их отправки в коде (reply to 265708)

Dmytro: Смотри, «отправка сообщения» это несколько этапов. То что происходит при отправке по сути «шедулинг» сообщения. Они шедулятся иименно в той последовательности в которой были вызваны. Доставка сообщений эт другой этап и там другие гарантии и требования. (reply to 265707)

rends_east: Ну вот, да, мы поняли друг друга  Я не очень понимаю, что мне даёт, что они в нужной последовательности в шедулинг кладутся (reply to 265712)

Dmytro: А какая тебе разница какая последовательность транзакций при отправке на разные адреса? (reply to 265711)

rends_east: Так а specActions - это commit и raw_reserve?

&rey: ну, вдруг одна из этих транзакций на Config, или деплоит либу))) (reply to 265714)

Dmytro: Откуда ты взял specActions (reply to 265715)

Dmytro: Мы живем в асинхронном мире. Нельзя завязывать одну транзакции на предположении об успешном исполнении другой. (reply to 265716)

rends_east: это в description в сендбоксе (reply to 265717)

rends_east: я прекрасно понимаю, просто в рамках ликбеза спрашивал (reply to 265718)

Oleg: Определяешь границы дней, например, через time / DAY_SECONDS и time % DAY_SECONDS, проверяешь, совершал ли игрок действие во вчерашнем дне, награждаешь или нет (reply to 265694)

X1ag: Ребята, кто-то разрабатывал мастер контракты? Где можно узнать об этом поподробнее?   Чтобы был главный контракт, который создает отдельный контракт под каждого пользователя

SweetJesus: Жетоны/нфт, разбери эти стандарты - поймешь. (reply to 265723)

X1ag: Благодарю (reply to 265724)

Константин: Спасибо огромное 🙏 (reply to 265721)

Svαtoωλ‎: а в тонапи передавать before_lt надо время какое? utc 0 или какое

Svαtoωλ‎: а мне надо к настоящему его привязать..... (reply to 265730)

Svαtoωλ‎: а тут какое тогда  utc 0? (reply to 265732)

Denis: а таймстемп в другом и не бывает. ну я точнее никогда не видел (reply to 265733)

Amirlan: ребят по политике телеги сейчас можно делать сейчас покупки всяких плюшек в приложении используя TON или только через телеграмм старс?

Оскар: на бумаге нельзя, а по факту: не пойман - не вор (reply to 265737)

Denis: Вроде как банят. Можно оплачивать цифровые товары звёздами, а реальные криптой. В пограничных случаях лучше уточнить в @devs (reply to 265739)

Victor: Привет, может кто-то подскажет как тестировать контракты, которые взаимодействуют с jetton_wallet ? Я в проект вставлять лишний код.   Есть в ton/ton jetton_wallet, но он не позволяет достать код Jetton_wallet контракта.

rends_east: можно брать контракты из сети существующие в sandbox (reply to 265761)

Victor: Через апи тянуть ? (reply to 265762)

Victor: Можешь куском кода поделится или ты так особо не делаешь ? (reply to 265762)

rends_east: в репе ton sandbox в readme указаны примеры (reply to 265764)

Jenya: const keyPair = await mnemonicToWalletKey(mnemonic.split(' '));     const walletContract = WalletContractV5R1.create({ workchain: 0, publicKey: keyPair.publicKey });      const transferMessage = walletContract.createTransfer({         seqno: 77,         sendMode: 3,         secretKey: keyPair.secretKey,         messages: [             internal({                 to: 'UQBjbzhHtRT86CHt1Ins6TyZF9y1b4yqreIVJbVZZbq-Swap',                 value: 1000000000,             }),         ],     });      const externalMessageBoc = beginCell()         .store(             storeMessage(                 external({                     to: 'UQBjbzhHtRT86CHt1Ins6TyZF9y1b4yqreIVJbVZZbq-Swap',                     body: transferMessage,                 })             )         )         .endCell().toBoc();      await client.sendMessage(externalMessageBoc);  Я что то вообще не выкупаю в чем проблема. Кошелек задеплоен, баланс есть, уже все напрямую ему передаю, а лайтсервер кидает ошибку   Error: cannot apply external message to current state : Failed to get account state  При этом через тонапи отсылается нормально

Svαtoωλ‎: а транзы как идут при старт дейт и енд дейт на получение ивентов -> сверху вниз? (вверху самые последние, внизу первые) (reply to 265736)

Roma: Всем привет, написал контракт, в тестах он работает, деплоится все ок, но когда хочу в тестнет задеплоить, то ничего не выходит, причем не могу найти хоть какую-то ошибку, просто тоны приходят на контракт, а он так и остается неактивированным. Прикрепил фото скрипта деплоя, и сам контракт вот - https://testnet.tonviewer.com/kQDNda4Kep-prA6asPWeTQEc43ZTpdXfelPZaHqZR9IJPbbi  Интересны факт, я пытался задеплоить через deep link, не работало, через тонконнект сработало сразу же...

Denis: не помню посмотрите (reply to 265767)

Ivan [on Vipassana till 27.04]: Привет!  слушай давай сделаем ии-навигацию по всей тон экосистеме, форумам и в том числе гитхабам / документации чтоб Можно было одним кликом подгрузить «контекст тон» и кодить /креативить / имплементить дальше все что тебе надо. (reply to 259341)

Dmytro: Кто-то знает какой-то дешевый способ сделать сравнения > и < с числами, но чтобы результат был 0 or 1 а не 0 or -1?  У меня вычисление вида (x > 0) << 4 и мне этот минус очень мешает

Denis: Или битовое и

Dmytro: ну я типа сделал (-  (x > 0))  << 4 но конечно эта лишняя операция неприятно (reply to 265779)

Oleg: (x>>256)<<4 :)

Vladimir: Привет! Давай, какой интерфейс ты здесь видишь? И что тебе для этого нужно? (reply to 265771)

Vlad: Привет! А есть актуальный гайд/кукбук по использованию хайлоад кошелька для рассылки жетонов, кто сам пользовался и может порекомендовать? TS/JS

AL Pamblus: здарова чат, почему так? Кол-во тон одинаковые, а помечает спам.

AL Pamblus: возможно я ошибаюсь с чатом, т.к. это тонкипер такой, но всё же 🙂👍

jennifer [afk]: комментарий скорее всего (reply to 265798)

AL Pamblus: в коде я изменил коментарий на "русские буквы не спам" но забыл изменить сумму с 0.01 на 0.005 (Из-за багов телефона + Termux)  и теперь даже такая сумма спам лол (reply to 265800)

Denis: цена за символ

Cube: Удачно на дедаст зашел

Оскар: метамаск нынче с ума сошел, тоже иногда помечает сайты на которых всё нормально (reply to 265806)

集电极: Обращайся в ТП метамаска, тут оффтопить не надо (reply to 265806)

A: Sorry by mistake sent

Егор: Здравствуйте ребята, можете подсказать пожалуйста, как можно защитить токен созданный на базе ton от копирования на других блокчейнах и есть ли в этом необходимость?

Semyon: Вопрос зачем? И какая ценность у вашего токена? (reply to 265815)

Егор: Ну как зачем, чтобы он был связан только с моим продуктом, предотвращение потенциального обмана пользователей если кто-то будет выдавать свою монету за мою. Как, к примеру, $HMSTR решали эту проблему, почему до листинга никто не занял их символ? (reply to 265816)

Denis: вы не поверите... (reply to 265817)

Max: Никак не решали и 100% занимали. Как минимум был скамный HMSTR, там чуваки даже намайнили красивый адрес жеттон мастера (reply to 265817)

Denis: как минимум есть еще один хамстер который в белом списке даже :)

Denis: лучше расскажите мне какой чушпан придумал писать $HMSTR вместо HMSTR, $BOLT вместо BOLT и т.п. конченный больной ублюдок

Denis: пхпшник поди (возможно латентный)

Егор: Я вообще видимо не в теме) а как тогда скамный сделали не скамным? (reply to 265819)

Max: В блокчейне нет такого понятия "скамный/не скамный". У tonapi есть (reply to 265824)

Max: А попасть в вайтлист, когда у тебя под сотню миллионов юзеров, не такая уж и сложная задача

Егор: А символ токена не уникальный получается, идентифицируется по адресу? (reply to 265826)

Max: Посмотрите пожалуйста стандарт жеттонов, вопросы отпадут сами (reply to 265827)

Егор: Понял, спасибо большое (reply to 265828)

Назим: Здравствуйте всем, я не очень опытен с TonAPI но пытаюсь распаковывать адрес (на фото) и возвращается EQC47093oX5Xhb0xuk2lCr2RhS8rj+vul61u4W2UH5ORmG/O  но слеша в тоне нету, я не могу найти такой адрес, что в таком случае нужно делать?

集电极: Слеш заменить на _ Плюс заменить на - (reply to 265835)

Denis: я раз в полгода имею диалог с нашим CEO на предмет "а давайте сделаем на днс распределение уникальных тикеров для жетонов". через пол года он забывает мои аргументы и приходит с этой гениальной идеей опять. (reply to 265828)

Denis: на самом деле вы пытаетесь не распаковать а запаковать :) (reply to 265835)

Denis: тонапи возвращает самую простую однозначную форму адреса. а все эти EQ/UQ и прочая ужасть вообще должна быть только в момент представления юзеру

Denis: в коде, в базе и т.п. должны быть raw адреса. это база

Назим: спасибо за пояснение (reply to 265842)

sd: А этот фикс будет в рамках обновления тонапи или только ждать новую версию кошелька? (reply to 265604)

Denis: версию (reply to 265846)

Denis: ну в плане надо бы и эмуляцию пофиксить

Denis: но я не понял как воспроизвести

Dmytro: Мы делаем вид что торгуем деньгами а не воздухом (reply to 265822)

sd: Вот так https://t.me/tondev/265599 (reply to 265849)

Denis: предлагаешь со скриншота перечатывать? (reply to 265851)

sd: Предлагаю положить две одинаковые транзы в пачку)) ну могу скопировать этот код из доки тонконекта, ща, мне не сложно

Denis: а это ios или android?

Denis: или тонспейс?

sd:  const transaction = {         validUntil: Math.floor(Date.now() / 1000) + 60, // 60 sec         messages: [           {             address: "EQBBJBB3HagsujBqVfqeDUPJ0kXjgTPLWPFFffuNXNiJL0aA",             amount: "20000000",           },           {             address: "EQBBJBB3HagsujBqVfqeDUPJ0kXjgTPLWPFFffuNXNiJL0aA",             amount: "20000000",           }         ]       }        try {         const result = await tonConnectUI.sendTransaction(transaction);         console.log(result)       } catch (e) {         console.error(e);       } (reply to 265849)

Denis: на всех эмуляция падает или где-то эмулируется?

Denis: я не понял

sd: Эмуляция одинаково фейлится в тон спейсе, в тонкипере на андроиде и на винде (reply to 265854)

sd: Остальное не смотрел

sd: а почему этот кошелек (видимо трежери стейкинга) в поиске подписан как тон фандейшен, а по запросу ton foundation уже другой адрес стоит

Пескарь™ | фронтент телефонов: спойлеры (reply to 265862)

— 2024-11-17 —

Михаил: привет ребята, помогите, не пойму в чем проблема  пытаюсь отправить мультиотправкой через tonkeeper, соблел все инструкции для .csv , но  если отправлять много адрессов за раз - выдает ошибку, мол формат неверный и каждый раз для разной строки  если сократить к-во - работает, пока максимальное к-во для файла получается 35 строк  кто-то сталкивался?  как решали данную проблему?  возможно есть способы большой мульти-рассылки иного характера?

victxr: гайз, вот у меня такой же код из примера. он возвращает boc. Можно ли както на основе boc отследить, прошла ли транзакция или нет? как вообще в TON ждать транзакцию? (reply to 265856)

sd: В той же доке в том же примере есть намёк (reply to 265868)

victxr: ага ща гляну (reply to 265869)

sd: try {     const result = await tonConnectUI.sendTransaction(transaction);      // you can use signed boc to find the transaction      const someTxData = await myAppExplorerService.getTransaction(result.boc);     alert('Transaction was sent successfully', someTxData); } catch (e) {     console.error(e); } (reply to 265870)

victxr: аа тоесть hash of cell это и есть hash транзакции? (reply to 265871)

victxr: спс, ща попробую (reply to 265871)

Devsbite: Всем привет. Кто подскажет? Как эмулировать свап хотя бы ton-jetton с помощью ton/sandbox. А так же получить список транзакций. С помощью stonfi v2

Zakhar: Привет, попробуй еще раз (reply to 265865)

Андрей: В коде и в бд должно быть в байтах (reply to 265843)

Nemesis: Ищу исполнителя для написания снайпинг бота на TON, с некоторыми фишками

Dmytro: Можешь за 7 тон купить на tonconsole.com (reply to 265888)

Михаил: Привет, не помогало, сколько бы не пробовал - только об ошибке из разных строк пишет (reply to 265877)

Михаил: неплохо они это придумали) (reply to 265890)

Dmytro: Ничего в этой жизни б**платно не дается (reply to 265893)

Михаил: ну это понятно, но за 350 фантиков отдавать 7 тон - это слишком (reply to 265896)

rends_east: тестовые тоны даются (reply to 265896)

Андрей: https://t.me/tondev/107401 (reply to 265896)

Denis: Ты платишь тратой своего времени (reply to 265898)

Dmitry: Ты просто хочешь наши деньги (reply to 265900)

Victor: Немного туплю, буду признателен, если поможете. Как достать комментарий из boc на контракте ?

SweetJesus: Для чего? (reply to 265907)

/B4ckSl4sh\: о, а почему цену снизили? Из-за скорого перезапуска тестнета? (reply to 265890)

/B4ckSl4sh\: ончейн? (reply to 265907)

Victor: если комментария не будет, то выполнить определенное действие:  if () {} else {} (reply to 265910)

Victor: ага (reply to 265916)

SweetJesus: Лови на контракте 0, далее хешируй тело и сравнивай с эталоном. (reply to 265917)

/B4ckSl4sh\: сразу говорю, что это не особо приятное занятие, т.к. комментарий может как snake_string быть и вообще он utf-8. Но в теории звучит несложно, чекаешь что опкод равен 0, дальше читаешь utf-8 строку, когда место кончается в cell, то продолжение лежит в первом рефе (но это больно писать) (reply to 265920)

Victor: Понял, спасибо, тогда буду делать по другому (reply to 265922)

Dmytro: а у кого-то есть пример отправки external-out сообщения?

Denis: а что там особенного? обычная отправка только адрес или none или external и тип другой (reply to 265928)

Dmytro: там структура сообщения совсем другая, и я чет не смог с первого раза правильно сериализовать ее (reply to 265934)

Denis: https://github.com/ton-blockchain/liquid-staking-contract/blob/main/contracts/messages.func#L96

Denis: только не надо топики разделять по получателю. так плохие сварщики делают

Tim: когда партия такую позицию выбрала (reply to 265937)

Denis: можно вступить в партию дедаста. (reply to 265938)

Denis: у них по опкодам как в интерналах

Denis: abi неудобно писать (reply to 265941)

/B4ckSl4sh\: Как работает external-out? Куда они летят? Не сталкивался просто и в доке тоже про них не видел

Dmytro: считай логи (reply to 265943)

Denis: я делаю подписку на экстернал ауты кстати с гарантией доставки. при этом как раз можно будет подписаться на определенного получателя

Denis: надо только согласовать формат экстернал адресов

/B4ckSl4sh\: и как их читать потом? Они типо создают action, на который мы посмотреть можем потом? (reply to 265946)

Denis: открой любой успешный свап дедаста и посмотри транзакцию на пуле (reply to 265949)

Denis: в тонвьювере

Dmytro: тонвьювер не показывает external-out messages (reply to 265950)

/B4ckSl4sh\: Показывает, только что увидел) (reply to 265952)

Denis: https://tonviewer.com/transaction/a71c1966e1ee75e7b5bd85babc0f96fa04c37e7ea1fc99e5041e07a419441e1d давай расскажи мне что умеет и не умеет тонвьювер :) (reply to 265952)

Dmytro: а давно? (reply to 265954)

Denis: где-то с февраля

/B4ckSl4sh\: Прикольно, спасибо) А где посмотреть как они сериализуются? В block.tlb по поиску external, только external адрес вижу. (и кстати external адрес это просто я так понимаю условный "тег" нашего лога? иначе зачем он вообще нужен

Denis: ищите extout (reply to 265957)

/B4ckSl4sh\: Ну запустите какой-то токен любой в тестнете, используя код usdt, в чём разница? (reply to 265961)

Dmytro: у юсдт нет кода

/B4ckSl4sh\: Он даже на верифаере есть, и вот на гитхабе насколько я понимаю https://github.com/ton-blockchain/stablecoin-contract/tree/main/contracts (reply to 265966)

Dmytro: так они же сделали для юсдт прекомпайлед в ноде? (reply to 265968)

Tim: Прекомпайлед работает когда хеш кода контракта находится в мапе прекомпайледов ноды

Denis: у нас в тонго кстати есть статистика вызова разных гет методов в индексере и апи и я перепиливаю иногда их на прекомпайлы чтобы не гонять твм.

Denis: в ноде работает также только не субботин там в одну харю решает что заменить нативным кодом а голосование валидаторов

/B4ckSl4sh\: А вопрос про прекомпайлед, вызов твм заменили вызовом условной бинарной либы? (в таком случае это как-то руками переводили из твм в плюсы условные?) Потому что, если это можно автоматически, то почему бы все контракты просто в бинарный код вместо твм не компилировать? (или вообще сразу на плюсах писать контракты)

Tim: их руками надо переписать и потом гарантировать что результат работы этого кода будет всегда идентичен тому, что выдает func (reply to 265977)

Tim: это в целом очень опасная и сложная затея. Завтра может поменяться например tvm и работа какой-то инструкции, все прекомпайлы придется тоже переписывать

/B4ckSl4sh\: На какие жертвы только не пойти ради usdt) А как газ считать в таком случае? Если это бинарь (reply to 265988)

Tim: он константой указан

Denis: а ни у кого нет под рукой примера транзакции на обычном кошельке где не было интерналов в экстернале?

Tim: сделать? (reply to 266000)

Denis: если не сложно. я тут доку пишу общественно полезную (reply to 266002)

alkhanov: здравствуйте, кто нибудь может помочь? json{   "error": "error code: 0 message: cannot apply external message to current state : Failed to unpack account state" } отправляю init_external_message, v3r2 https://tonviewer.com/UQBFaRV_OZopfNCWqHUZD692ujNnppRDgNNOb8GJNkCHAJzU

alkhanov: пробовал и internal

Denis: у вас адрес аккаунта это хэш от инит стейта. а инит стейта зависит от версии кода кошелька и вашего пабкея. откуда вы взяли адрес?

alkhanov: это генератор адресов на go я использовал private_key чтобы получить public_key самой мнемоники у меня нету на v4 всё работало  https://github.com/xssnick/tonutils-go/blob/master/example/vanity_fast/main.go (reply to 266025)

Dmitriy: у кого есть ton keeper pro?

Denis: https://gist.github.com/mr-tron/a4b3e8eff3a982e3426f6397eb9a2450 написал про айди транзакций

User<7727973243>: Спасибо, очень будет полезно многим пользователям. (reply to 266033)

User<7727973243>: Добавил в избранное для ответов в многих сл чаев, устал тоже объяснять эти вещи порой.

IndexCorp: Здравствуйте!

IndexCorp: подскажите как добавить сюда полноэкранный режим. Пробовал по разному но что то не получается, пример кода хоть поможет. Заранее благодарен. Сильно не пинайте))) я не профи

集电极: Вы явно ошиблись чатом (reply to 266043)

IndexCorp: мини апп другой чат?

集电极: Точно не этот. Достаточно посмотреть на название чата (reply to 266045)

IndexCorp: линк отправьте пожалуйста

sd: @devs @devs_cis (reply to 266045)

Oleksandr: Подскажите как правильно написать проверку на TACT. Суть проверки должна быть следующей. Контракт A должен принимать сообщения только от контрактов типа B. если сообщения приходят от контрактов с другим кодом, то срабатывал рекваер.

Cube: Хранить код контрактов типа В в контракте А, считать стейт_инит отправителя. получать его ожидаемый адрес и сранивать с имеющимся (reply to 266051)

Oleksandr: Хранение кода контрактов типа В в контракте А должно быть как-то так?  Это же ячейка Cell?     owner: Address;     code: Cell;          init(owner: Address, code: Cell) {         self.owner = owner;         self.code = code;     } (reply to 266053)

Slava: 👍🏻  Проголосуйте за поддержку синтаксиса Tact на GitHub  Пожалуйста, поставьте палец вверх для включения поддержки синтаксиса Tact на GitHub!  https://t.me/tact_kitchen/42

Cube: А .fc когда добавят? (reply to 266055)

𝕜𝕟𝕒𝕞𝕖𝕣: Всех приветствую, хочу сделать свой первый проект, но не обладаю какими-либо техническими знаниями. С чего вы можете посоветовать мне начать, чему научиться? Фронтенд, бэкенд, смарт контракты?

User<7727973243>: Все зависит от проекта вашего (reply to 266058)

𝕜𝕟𝕒𝕞𝕖𝕣: Я планирую сделать это в формате сайта, миниап в телеграмм и тут будет много взаимодействия с нфт

User<7727973243>: Тогда все подряд учите из вашего списка (reply to 266060)

𝕜𝕟𝕒𝕞𝕖𝕣: Фронтенд - бэкенд - смарт контракты?

User<7727973243>: Да,все верно. (reply to 266062)

𝕜𝕟𝕒𝕞𝕖𝕣: Спасибо 🤝

Михаил: но лучше что-то одно изучать (reply to 266062)

Oleksandr: Спасибо! (reply to 266053)

Erik: НУЖЕН РАЗРАБОТЧИК  Всем салют!  Расширяем штат в @terminalgame_bot | @timetoterminal. Ищем бекэнд разработчика  Ниже список требований на позицию:  Стек технологий - Node.js TypeScript - NestJS - TypeORM - Postgres - Redis - RabbitMQ - Docker - понимание взаимодействия с EVM и TON блокчейнами   Скилы - Опыт работы 2+ года - Понимание алгоритмов и структур данных - Паттерны, принципы и подходы в программировании  - Понимание архитектуры и работы распределенных приложений - Многопоточность  Присылать резюме/интро/вопросы @kdbisgreat

Oleg: Человек, который так назвал язык, был явно не в себе (reply to 266056)

Oleksandr: подскажите как в тестах проверить баланс в ТОН для кошелька user         user = await blockchain.treasury('user');

Victor: User.getBalance() (reply to 266075)

Oleksandr: Спасибо! (reply to 266076)

Михаил: Это тонапи вроде как, у него есть отличный сваггер, там ты можешь посмотреть какие эндпойты существуют   https://tonapi.io/api-v2 (reply to 266075)

RootTon: Тестнет?

User<7727973243>: Утром 350 просили (reply to 266080)

WarrioR: Те 350 были для тестового кошелька, а эти 3 TON — для основного кошелька. (reply to 266082)

rends_east: Надо было наоборот (reply to 266084)

Aleksey BingX | Snow: Привет.  Работал кто нибудь с API тона?  Мне нужно сделать проверку на наличие NFT на аккаунте.   У коллеги ошибка 503, сервер не дает ответа.   А у меня ошибка 418   Мой код:   import requests  def check_nft_in_wallet(wallet_address, nft_id):     # URL для получения информации о токене или владельцах     url = f"https://tonapi.io/v1/nft/{nft_id}"          try:         response = requests.get(url)         response.raise_for_status()  # Проверяем на ошибки         nft_data = response.json()          # Извлекаем информацию о владельце         owners = nft_data.get('owners', [])         for owner in owners:             if owner['address'].lower() == wallet_address.lower():                 print(f"NFT {nft_id} присутствует в кошельке {wallet_address}.")                 return True          print(f"NFT {nft_id} отсутствует в кошельке {wallet_address}.")         return False              except requests.exceptions.HTTPError as http_err:         print(f"HTTP ошибка: {http_err}")     except Exception as e:         print(f"Ошибка при запросе к API: {e}")  # Задаем адрес кошелька и id NFT wallet_address = "UQBavjrc7HNs-X4nk2jYnQsvKysd24od3sXW5lWacI9Gyxc4" nft_id = "EQAHzmf4vskmqBAzDfbXJVYnGyaeUnbJCRfxpApthcTJgXES"  # Проверяем наличие NFT check_nft_in_wallet(wallet_address, nft_id)

Aleksey BingX | Snow: Если кто-то знает, дайте функцию проверки наличия NFT.  Хотябы чисто запрос серверу

集电极: Если не секрет, почему используете v1, а не v2? (reply to 266091)

Aleksey BingX | Snow: V2 использовал, там тоже ошибка вылетала. Сейчас проверю ещё раз, напишу какая именно. Дальше уже в чат гпт пошел потому что сижу над этим 2-3 дня. Он на первую версию код написал. (reply to 266093)

集电极: Для питона лучше использовать pytonapi наверное (reply to 266094)

Denis: А v1 остановлен уже год как

Denis: Даже слой совместимости убрали

Aleksey BingX | Snow: Мне уже без разницы,  можно и на js, лиж бы работало. В проекте задерживаю новую систему уже на 3 дня (reply to 266095)

集电极: Попробуйте на tonapi.io/api-v2 (reply to 266098)

Denis: ну вот вам на баше. user@laptop:~$ curl -s https://tonapi.io/v2/nfts/EQAHzmf4vskmqBAzDfbXJVYnGyaeUnbJCRfxpApthcTJgXES | jq .owner.address  "0:957cbe9a31f17effee69540baf3bbd4ab740eb4d406b74eebf97931b0a50550d" а дальше просто сравниваете адрес с нужным вам (reply to 266098)

Aleksey BingX | Snow: url = f"http://tonapi.io/api-v2/nft/{nft_id}/owners" Верную ссылку использую? Если да, то ошибка 404 на 2 версии

Denis: бля. ну я ж написал

Aleksey BingX | Snow: Вижу, спасиб, сейчас опробую (reply to 266102)

Denis: адрес только приведите в raw форму свой

Aleksey BingX | Snow: import requests   nft_url = "https://tonapi.io/v2/nfts/EQC6YRVxijYrymw6l4xkNaNePQu1PEIZjquz6zi3XHhtr3nH"   wallet_address = "UQBavjrc7HNs-X4nk2jYnQsvKysd24od3sXW5lWacI9Gyxc4"   response = requests.get(nft_url) data = response.json()   owner_address = data.get("owner", {}).get("address", None)   if owner_address == wallet_address:     print("NFT принадлежит указанному кошельку.") else:     print("NFT не принадлежит указанному кошельку.") В общем работает, но мне все время выдает "нфт не принадлежит кошельку" (reply to 266102)

Aleksey BingX | Snow: Я могу тупить если что*

Max: Так Денис же вам прямо написал (reply to 266105)

Max: адрес только приведите в raw форму свой

(✿◡‿◡): f

Aleksey BingX | Snow: Уже перевёл, и походу не правильно (reply to 266111)

Aleksey BingX | Snow: Есть пример для перевода?

Aleksey BingX | Snow: import requests import base64  def convert_to_raw(wallet_address):     try:          wallet_bytes = base64.b64decode(wallet_address + "==")          wallet_hex = wallet_bytes.hex()          raw_address = f"0:{wallet_hex}"         return raw_address     except Exception as e:         print(f"Ошибка  {e}")         return None  nft_url = "https://tonapi.io/v2/nfts/EQByPbEpai74txJGked9jVajcwtAmaLIfYXK5ZU77DtYuuxg" wallet_address = "UQBavjrc7HNs-X4nk2jYnQsvKysd24od3sXW5lWacI9Gyxc4"  response = requests.get(nft_url) data = response.json()   owner_address = data.get("owner", {}).get("address", None)   raw_wallet_address = convert_to_raw(wallet_address)  if raw_wallet_address is not None:     print(f"Raw адрес кошелька: {raw_wallet_address}")     print(f"Адрес владельца NFT: {owner_address}")     if owner_address.lower() == raw_wallet_address.lower():        print("NFT принадлежит указанному кошельку.")     else:        print("NFT не принадлежит указанному кошельку.")             print(f"owner_address: {owner_address} != raw_wallet_address: {raw_wallet_address}")

Aleksey BingX | Snow: Верно, нет?  Но адрес владельца и адрес моего кошелька не совпадают в итоге (reply to 266116)

Max: Нет (reply to 266117)

Aleksey BingX | Snow: Отправьте код, пожалуйста Пример который верный будет (reply to 266118)

Max: Воспользуйтесь уже готовыми пакетами, а не изобретайте свой велосипед  Для перевода в raw форму недостаточно просто задекодить base64 в hex (reply to 266119)

Aleksey BingX | Snow: Где их взять? (reply to 266120)

Max: Учитесь искать информацию, а не требовать её в чате, пропуская половину мимо ушей

Aleksey BingX | Snow: Я поиском занимаюсь уже 3-й день. 15.000 пользователей проекта меня ждут. Поэтому и прошу помощи в чате, да и с API тона работаю в первые (reply to 266122)

Алексей: https://ton.org/address/ тут можно вручную перевести адрес в разные представления (reply to 266123)

Evgenii: тут есть умельцы кто вернет с дрейнера 600$ за вознаграждение в 50% ?

Namon: боюсь, это невозможно (reply to 266125)

集电极: Нет, умельцев которые могут подобрать приватный ключ к чужому кошельку пока что не существует (reply to 266125)

Aleksey BingX | Snow: Спасибо, но мне нужно это делать в коде напрямую. (reply to 266124)

Evgenii: жаль... полиция на ТОНе уже не помешала бы. ладно, буду внимательнее. всем удачи

Aleksey BingX | Snow: Пользователи будут вводить свои кошельки, и уже проверять наличие NFT на их кошельках

集电极: Я вам кидал ссылку на swagger tonapi v2, удосужтесь посмотреть. Если нужно конвертировать без API - tonutils в помощь (reply to 266132)

Алексей: чтоб перевести локально на питоне  from pytoniq import Address  Address("EQByPbEpai74txJGked9jVajcwtAmaLIfYXK5ZU77DtYuuxg").to_str(0)   можно и через тонапи, посмотрите реально методы там просто (reply to 266129)

Max: Не надо советовать через тонапи, ради разных форм адреса ходить в сеть - оверхэд (reply to 266134)

Max: Он же правда это сделает...

Aleksey BingX | Snow: Очень благодарен, получилось.  Считайте, помогли спасти мой проект.  Немного, но в качестве благодарности: http://t.me/send?start=CQVEDYrDJPkf (reply to 266134)

Aleksey BingX | Snow: http://t.me/send?start=CQnG6NgZyy79 тоже в качестве благодарности. (reply to 266100)

Svαtoωλ‎: а почему (я обнаглел)

Namon: жаль я не успел ответить, даже github pytoniq-core открыл

Lacc_si: Ку getBlockchainAccountTransactions у тонапи отлавливает pending транзакции?

— 2024-11-18 —

Аист: Доброе утро! Занимается ли здесь кто-то разработкой игр под ключ?

just a chill guy: всех приветствую почему может происходить такое? транзакция возвращается моментально

Аист: тебе плюсом возвращается 0,0004 TON, запускай бесконечный двигатель) (reply to 266156)

just a chill guy: типа ладно бы так с каждой транзой было, какие то нормально проходят, а какие то вот так  есть подозрения что это изза длины payload, я не нашел инфы по максимальной длине

Namon: это скрин со страницы контракта, а не кошелька (reply to 266157)

Namon: можно ссылку на транзакцию? (reply to 266156)

just a chill guy: https://tonviewer.com/transaction/11dc9ec8acb3163c5cfa9e73d31b8dfa7b9c8ca16a8cd670911910f2f4788107 (reply to 266160)

Namon: что-то я запутался а что не так? не должны возвращаться тоны? (reply to 266161)

just a chill guy: тоны мне должны оставаться (reply to 266162)

just a chill guy: а они отправителю возвращаются

Оскар: у контракта нет инит стейта, значит все месседжи с флагом bounce будут отлетать обратно, нужно его убрать (reply to 266158)

just a chill guy: а как его убрать? (reply to 266165)

Namon: задеплоить кошелёк (reply to 266166)

Max: Зачем? Просто non-bounceable адрес нужен (reply to 266167)

Оскар: тонконнект сдк для жс вроде не дает его явно выставить, если вообще дает, у меня на самом деле не было такой практике чтобы отправлять транзу через тонконнект без баунса, поэтому либо он совсем не дает это сделать, либо как сказали выше, он определяет это по адресу который скормишь, в данном случае адрес должен начинаться на UQ (reply to 266166)

Max: Даёт (reply to 266169)

just a chill guy: так оно и есть  просто для меня непонятен сам факт почему 3 транзы спокойно прошли, а 3 другие нет (reply to 266169)

Max: Через разные кошельки посылали (reply to 266171)

Max: И кто-то из кошельков видимо не уважает баунс-флаг из адреса

Max: Покажите, как мессадж шлёте в кошелёк (reply to 266171)

Max: Лол, интересно. А через какой кошелёк и какую платформу отправляли те 3 раза, когда сработал баунс?

Max: длина пэйлоада здесь точно ни при чём, она никак не аффектит баунс-флаг

just a chill guy: тонкипер (reply to 266176)

Max: А платформа и версия? (reply to 266181)

just a chill guy: не знаю, это не я оплачивал

Max: А не могли бы, пожалуйста, узнать, если есть контакт с оплатившим? Это бы сильно помогло

just a chill guy: лично мои транзы всегда проходили пока тестил, тоже на новый кошелек, проверял тонкипер на айфоне и на ноуте, и тонспейс

just a chill guy: андроид тонкипер (reply to 266184)

Max: Отлично, благодарю

User<7381988319>: Всем привет! Выпустил жетон с помощью ton minter. Помогите разобраться, на как на node раздать пользователям жетоны?

Asher: Трейлер восьмой лекции по языку FunC третьего потока www.tondevstudy.io  Лектор - @MarcoDaTr0p0je https://www.youtube.com/watch?v=VG_xsYrVtdc  Таймкоды:  00:14:00 -  Старт. Добавляем mock-контракты 00:24:00 -  Пишем тесты 00:33:00 -  Wrappers для mock-контрактов 00:38:00 -  FwdPayLoad 00:42:00 -  Деплой jettonMinter 00:55:00 -  Вопросы 00:57:00 -  Негативный тест 01:20:00 -  Тесты для стейкинга

Andrei: Привет! А есть у кого-нибудь пример python кода как задеплоить counter (или любой кастомный) контракт, не jetton и не ntf?  У меня чет не выходит.  import asyncio import random from pathlib import Path  from pytonlib import TonlibClient from tonsdk.contract import Contract from tonsdk.boc import Cell, begin_cell import requests from wallet.wallet_creation import wallet   async def get_seqno(client, address):     data = await client.raw_run_method(method='seqno', stack_data=[], address=address)     return int(data['stack'][0][1], 16)   async def main():     config_url = "https://ton.org/testnet-global.config.json"     contract_code = "<code>"     contract_code_cell = Cell.one_from_boc(contract_code)     contract_id = random.randint(1, 99999999)     contract_id_cell = begin_cell().store_int(contract_id, 32).end_cell()      config = requests.get(config_url).json()     keystore_dir = '/tmp/ton_keystore'     Path(keystore_dir).mkdir(parents=True, exist_ok=True)      client = TonlibClient(ls_index=3, config=config, keystore=keystore_dir, tonlib_timeout=10)      await client.init()      contract = Contract(code=contract_code_cell, body=contract_id_cell)      seqno = get_seqno(client, wallet.address)     query = contract.create_init_external_message()     wallet_external_message = query['message']      deploy_query = wallet.create_external_message(wallet_external_message, seqno)     await client.raw_send_message(deploy_query['message'].to_boc(False))  if __name__ == '__main__':     asyncio.get_event_loop().run_until_complete(main()) Ошибка pytonlib.tonlibjson.ExternalMessageNotAccepted: LITE_SERVER_UNKNOWN: cannot apply external message to current state : External message was not accepted Cannot run message on account: inbound external message rejected by transaction DF49247D8EB8D134259154E4C9E93A5793F8CC8676BDE948567983C462B1CCF0: exitcode=36, steps=13, gas_used=0 VM Log (truncated): ...CTPUSHCONST 19 (xC_,1)

Тимур: Ну как минимум посмотрите что означает код ошибки 36, может вы где нибудь не так ячейки собираете (reply to 266237)

Victor: Exit code 36 - Invalid Destination address in the outbound message. (reply to 266237)

Andrei: Спасибо, ошибку я посмотрел, конечно, но что это значит? Где я косячу-то? :)

da: Привет. Я правильно понимаю что мини-аппы в тг это pwa?

&rey: Как бы, на контракт можно отправить или экстернал (снаружи блокчейна), или интернал (с кошелька). (reply to 266237)

Victor: Я глянул, это кастомная ошибка кошелька wallet_v4_r2  throw_if(36, valid_until <= now());  Это значит, что время которое прикидывается в body external транзакции слишком маленькое. (reply to 266242)

SupaVal: Привет всем! Очень надеюсь на помощь сообщества.  Мы купили домен .ton, он отображается у нас в разделе collectibles в кошельке Tonkeeper как NFT.  На сервере установили Tonutils Reverse Proxy в соответствии с инструкцией.  Генерируем QR код командой:   ./tonutils-reverse-proxy-linux-amd64 --domain your-domain.ton  QR код появляется, мы его сканируем через кошелек Tonkeeper, транзакция отправляется, но на сервере ничего дальше не происходит, QR так и висит.  Что мы делаем не так?

Тимур: Я бы на вашем месте проверил что сайт доступен по сгенерированному adnl а потом зашел в личный кабинет ton.dns и там поставил домен (reply to 266270)

Oleksandr: Подскажите как правильно пользоваться tick-tock в ТОН? Я так понимаю с помощью этого добавляется некая автоматизация на контракте?

&rey: Поговорить с кор тимой и убедить их, что такой контракт нужен. Потом вместе с ними написать и убедить валидаторов его включить. (reply to 266275)

Pavel: А что такое tick-tock в контексте TON (reply to 266275)

final: нет, обычные сайты (reply to 266261)

Oleksandr: https://docs.ton.org/v3/documentation/data-formats/tlb/transaction-layout#tick-tock (reply to 266277)

Denis: отвечу нормально: никак. (reply to 266275)

Oleksandr: Можно сказать что это не реально) Но такой функционал есть и если все апрувнут, то валидаторы будут дерагать функцию tick-tock в каждом блоке (reply to 266276)

Oleksandr: Спасибо за ответы!

F: Возможно в скором времени появятся cron провайдеры (reply to 266276)

Тимофей: Всем привет! Прошу подсказать про жетоны.  Насколько я понимаю, может быть некий мастер-контракт, который может создавать новые жетоны.  При попытке получить адрес админа, я получаю адрес кошелька, который создал жетон.  Можно ли узнать адрес мастер контракта, который "контролирует" жетон?

SweetJesus: у каждого жетон кошелька в сторадже есть адрес его мастер контракта. Узнать его можно по гетметоду. (reply to 266301)

User<7381988319>: Привет всем. У кого есть пример кода на js. По переводу жетонов, выпущенных через ton minter, на адрес пользователя?

Namon: подскажите нубу, пожалуйста: при компиляции контракта неиспользуемые конструкции из stdlib.fc будут удаляться/не будут учитываться?

Dmytro: да (reply to 266325)

Namon: спасибо! (reply to 266328)

Oleksandr: Как долго может идти транзакция на ТОНе?

Oleg: Хоть до конца дней. А практически бывало и часами (reply to 266346)

Oleksandr: как-то можно влиять на эту скорость?

Oleg: Пополнить ряды валидаторов разве что)

/B4ckSl4sh\: И всё равно будет нельзя) В данных реалиях (reply to 266349)

Oleksandr: но есть ли гарантия что отправленная транза пройдет? или как-то отследить что она была отправленная, но еще не завершина

/B4ckSl4sh\: Да, гарантия есть. Транза пройдёт. Отследить состояние можно через тонапи попробовать (или тонцентр) (reply to 266352)

Denis: нет. никакой транзакции которая может пройти или не пройти (reply to 266352)

Denis: https://gist.github.com/mr-tron/a4b3e8eff3a982e3426f6397eb9a2450

Denis: у вас есть экстернал сообщение которое может породить или не породить транзакцию за время жизни указанное в ттл.  а если эта транзакция породила интернал сообщения то они рано или поздно доедут до получателей (если исходить из того что код ноды работает без багов, что скорее всего так)

Dmytro: кратко: нет (reply to 266348)

Dmytro: единственное что можно сделать это следить чтобы отправитель и получатель были в одном шарде

User<5208565799>: Доброго времени суток.  Извините за тупой вопрос, но что имеем)  Реализовал депозиты в USDT в mini-app, сейчас засел за withdraw и такой вопрос... Правильно же понимаю, что без ввода сид-фразы или какой-то другой "авторизации" кошелька не получится делать вbIплаты пользователям по запросу из приложения?   Т.е. депозиты - всё понятно, человек привязывает свой кошелек и в момент депозита в своём кошельке подтверждает транзакцию, а вот как быть с функцией вывода для пользователей?  Просто заказчик очень мнительный, хочет реализации без того, чтобы я получил какой-либо вариант доступа к кошельку

Андрей: Почему бы не делать withdraw на тот же адрес откуда был deposit? Уверен такая информация обязательно хранится где нибудь, хоть ончейн хоть офчейн (reply to 266397)

User<5208565799>: Я больше про то, чтобы обойти "авторизацию" кошелька на сервере, т.е. пресловутое подтверждение транзакции. Условно человек натапал в приложении определенное кол-во монет, внутри игры обменял их на условные 10 USDT и хочет вывести их на свой кошелек. Т.е. согласно игровой логике он мог ничего и не депозитить, просто в игре заработал эти 10 USDT. И вот как их ему автоматически "вывести" с кошелька (заказчика)?   Мне пока в голову пришло только создавать что-то типа счёта на оплату и такие запросы отображать в админке, где заказчик сможет обрабатывать заявки пользователей в ручном режиме. Но нужно чтобы это было:  1) автоматически 2) без того, чтобы на сервере использовалась, например, сид-фраза (мнительный заказчик)  Я об этом больше - не получится же без авторизации кошелька по сид-фразе такое делать (мой домысл)? Просто думал получить дополнительное подтверждение своему этому домыслу, чтобы так сказать убедить заказчика, что это не моя прихоть, а необходимость авторизировать его  кошелек на сервере для таких вот withdraw-операций (reply to 266400)

Оскар: без сид-фразы/приватного ключа никак автоматически не отправить (reply to 266405)

User<5208565799>: Спасибо, собственно так и думал, просто хотел убедиться от бывалых юзеров, что размышляю корректно и не быть голословным при попытке убедить в этом заказчика))

Оле: https://github.com/toncenter/examples/blob/main/withdrawals-jettons.js  Вам сюда, если я всё правильно понял) (reply to 266411)

rxcat: а как батарейка тон кипера считает сколько нужно газа отправить юзеру? эмулирует транзакциию и суммирует все total_fees?

Max: Эмулирует, да (reply to 266424)

rxcat: а как считает именно? там это выглядит так, как будто оно отталкивается от фиксированного числа (reply to 266425)

Max: Только надо с небольшим запасом форвардить, не просто total_fees  Потому что в тоне есть сторадж фи, которая постоянно капает, заранее на 100% точно не посчитать

fatality: Вопрос по fragment и покупке stars через его за ton. Как это работает? У их есть какой то контракт который принимает какие то параметры в сообщении и пополняет баланс в телеграм?  У меня например скрытый username в телеграм. Я получается не смогу купить stars за ton? Или есть какие то решения? Мб как то можно передать не username, а telegram id?

fatality: У fragment есть какие то контактные данные, саппорт?

fatality: Кроме офф валантеров

Max: Нет, это полностью оффчейн история (reply to 266430)

Max: В сообщении кроме текстового коммента с референсным айди инвойса ничего нет

Андрей: Без хранения приватного ключа - никак. Единственное в таких случаях можно взять пример у крупных бирж: там есть разделение на микросервисы разделенные на разные серверы (основной бекенд работает на одном сервере и посылает задачи на вывод с пруфами на другой). Плюс есть разделение на горячий и холодный кошелек (хранить крупные средства на отдельном кошельке + так же разделение на серверы горячего и холодного кошелька) (reply to 266405)

Андрей: Плюс в тоне можно написать такой кошелек, что бы было два приватных ключа - первый разрешает вывод на определенное количество, второй уже выводит из этого разрешённого лимита. Но все это будет работать только вместе с правильно разработанной логикой бекенда вместе с безопасниками (reply to 266445)

Andrei: Привет! Подскажите, пожалуйста.  Допустим у меня есть counter smart contract с таким message message Add {     queryId: Int as uint64;     amount: Int as uint32; } Я хочу сформировать, диплинк, при клике юзера на который, откроется тонкипер и сформируется транзакция, которую юзер должен заапрувить. Может кто-нибудь показать как это сделать на python?

Тимофей: Ребята, подскажите, пожалуйста.  1. То что возвращает метод 2. Сам метод 3. Вызов в ton-utils GO  Ошибка: panic: incorrect result type в MustCell(0)

Andrey: бывает, необходимо обменять между двумя обычными юзерами (кошельками) одни токены на другие. Или например обменять nft: т.е кошелек1 шлет nft на кошелек2, а кошелек2 в ответ присылает ТОНы на кошелек1. Есть ли где-то механизм 'гарантов' или чего-то подобного в ТОНе? (желательно, чтобы обмен происходил автоматически)  p.s: чтобы исключить ситуацию, когда 2 пользователя договорились на обмен, 1ый выслал Nft, а 2ой внезапно не выслал обещанные ton-ы

Oleg: Я делал такой escrow сервис на другом блокчейне, не вижу проблем запилить такое же на тон. Идея в том, что оба ассета, на которые стороны договорились, лочатся на контракте-посреднике, до тех пор, пока все условия не соблюдены (reply to 266491)

Андрей: Самое главное предусмотреть тайм-аут, что бы если вторая сторона не захотела довести сделку до конца - средства разлочились автоматически (reply to 266499)

Oleg: Не обязательно даже тайм-аут, можно отзывать свои ассеты обратно, если вдруг передумал (reply to 266502)

Farel: подскажите пж как получить публичный ключ любого адреса?

Андрей: Узнать публичный ключ любого адреса - никак, только задеплоенного кошелька Даже задеплоенного контракта не получится если в нем не предусмотрет приватный ключ (reply to 266514)

(✿◡‿◡): Всем привет, подскажите пожалуйста, как в транзакцию с отправлением NFT, добавить получение Jetton, отблагодарю монеткой.

User: Вы хотите, чтоб пользователь отправлял NFT, а ему прилетали JETTON в N количестве? (reply to 266517)

(✿◡‿◡): да (reply to 266519)

User: Нужно смарт контракт писать с такой логикой (reply to 266520)

(✿◡‿◡): если сможете помочь - было бы очень круто (reply to 266521)

Toffee: https://github.com/phishfort/phishfort-lists/issues/1824 Коллеги,  у кого были такие проблемы, мой проект, там ничего нету такого но мне вот это показали

Toffee: И как нибудь можно решить без phishfort

Оскар: так там буквально ссылка есть на репорт снизу (reply to 266525)

Toffee: Я написал им, это phishfort repository,  они ответили https://github.com/phishfort/phishfort-lists/issues/1824

Оскар: ссылка внизу ведёт на их репо? ибо метамаск юзает много источников, а не только phishfort (reply to 266528)

Toffee: Да, я как нажал, то автомат создалось issue

Андрей: Так надо .org а не .space (если я правильно понял что вам нужно) (reply to 266525)

Оскар: ну тогда обращаться в метамаск и с них спрашивать это (reply to 266530)

&rey: Есть такой известный кошелёк, который как-то набрал пользователей — TON Space. Есть у него какой-то мост для подключения кошельков, с которым при включении TC2 всегда устанавливается соединение. (reply to 266531)

Toffee: bridge.ton.space я вообще не использовал в своем приложений, это скорее Ton Connect

&rey: Используйте SDK, он не подключается к лишним мостам (пока те не нужны). (reply to 266534)

Toffee: я это использую @tonconnect/ui-react, 2.0.6 версию

Avler: здравствуйте я хочу при отправке nft на нулевой адрес вызывать функцию burn_token (которая отправляет сообщение коллекции), но у меня не получается прервать выполнение transfer_ownership такое ощущение, что ни одна проверка не срабатывает пробовал: slice zero_address() asm "b{00} PUSHSLICE"; slice address_none() asm "<b 0 2 u, b> <s PUSHSLICE"; int is_address_none(slice s) inline {     return s.preload_uint(2) == 0; } begin_cell().end_cell().begin_parse()

Ruslan: подключается.   при открытии модалки с кошельками - сдк открывает конекты ко всем бриджам всех кошельков. видимо это сделано для того, чтобы отсканировав QR в кошельке тебя сразу законектило (reply to 266535)

Ruslan: но решение сомнительное

Denis: потому что нулевой адрес это не пустой слайс (reply to 266550)

Avler: а как его правильно указать? (reply to 266553)

Denis: вообще существует специальный тип адреса addr_none и это просто два нулевых бита.

Denis: но существует целая толпа выдающихся людей, который используют std_addr 0:0000000...000000 для сжигания

Avler: оно? builder store_address_none(builder b) inline {     return b.store_uint(0, 2); } (reply to 266555)

Avler: спасибо большое!

Denis: на всякий случай: если сжигать будут не через ваш дапп то с большой вероятностью они сделают трансфер на 0:0000....00000 а не на addr_none

Svαtoωλ‎: А чё не так (reply to 266556)

Denis: потому что существует addr_none (reply to 266562)

Denis: идиоматически разные вещи

Оскар: так он же вызывает опкод бёрна в жетон валлете, там ничего не отправляется на 0:0 (reply to 266563)

Denis: у жетонов кто-то придумал трансферить оунера на 0:000....00000 (reply to 266566)

Даня: здраствуйте я хотел задеплоить свой токен с помощью команды toncli deploy  я создал файл project.yaml вот его код:   project: name: "TON Booster"   version: "1.0" contracts:   FeeJetton:     func:       - "./contract_FeeJetton.code.boc"     tact:       - "./jetton.tact"   JettonDefaultWallet:     func:       - "./contract_JettonDefaultWallet.code.boc"     tact: [] deploy:   ton: 0   workchain: 0   net: "mainnet" я продолжаю получать ошибку :  File "C:\Users\danil\AppData\Roaming\Python\Python312\site-packages\toncli\modules\utils\system\project_conf.py", line 59, in __init__     func_files_locations = [f"{project_root}/{file_path}" for file_path in contract_config['func']]                                                                            ~~~~~~~~~~~~~~~^^^^^^^^ KeyError: 'func может ли кто то помочь пофиксить ошибку?

/B4ckSl4sh\: Специально чтобы когда-нибудь кто-то выбил страйк задеплоив туда контракт) (reply to 266568)

Svαtoωλ‎: А каков шанс (reply to 266570)

Оскар: а, я просто уже запутался о чём речь идёт, в оригинальном посте про сжигание нфт, потом говорят про сжигание жетонов, а на самом деле ревоук овнера в минтере (reply to 266568)

/B4ckSl4sh\: можно считать что 0 (reply to 266571)

Svαtoωλ‎: Но теоретически реален (reply to 266573)

/B4ckSl4sh\: Да, но меньше чем 1/2**256 (reply to 266574)

Оскар: да и с "сжиганием" нфт (если брать в учёт стандартные контракты) тут особо ничего не поделаешь, сомневаюсь что тот же тонкиппер даёт тебе в получателя впиндюрить 2 нулевых бита, да и вроде как стандартные контракты читают только msg_addr и от двух нулевых битов жидко отправят баунс

Denis: через тонконект позволит (reply to 266576)

Denis: но стандартные контракты

/B4ckSl4sh\: Кстати это разве не традиция просто? С других чейнов (reply to 266568)

&rey: У нас блокчейн новый, куда проще войти без знаний с других чейнов (у тех знаний отрицательная ценность, другими словами). (reply to 266579)

&rey: Стандартные контракты делают ~load_msg_addr() и обработают всё как надо. Что же касается перевода... надо просто добавить поддержку ton://transfer/void/..., наверно. (reply to 266576)

&rey: (не null/None/undefined по очевидным причинам) (reply to 266581)

Назим: можете скинуть доку где можно узнать прайс жеттона по адресу? или хотя бы капу его, я дальше сам напишу  просто ничего не могу найти

&rey: Что такое цена жетона? Если кто-то готов 1 USDT купить и отдаст 10'000 TON за это, вам это надо узнать или всё таки что? (reply to 266585)

Назим: рыночную цену, например с geckoterminal (reply to 266586)

&rey: Если вы знаете сервис, откуда грузить — вы знаете, где искать его API. (reply to 266587)

Назим: да но это крайний способ, я бы хотел узнать есть ли что то похожее в ton api ? (reply to 266588)

Max: у tonapi есть. Но есть нюанс... (reply to 266589)

&rey: https://tonapi.io/v2/rates?tokens=EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs&currencies=ton,rub — но помните о случающихся выбросах (но и о том, что тон может действительно поменяться по отношению к USDT). (reply to 266589)

Denis: вот скажите на сколько лучше смотрится чем ваши жсные  export function NftCollectionConfigToCell(config: NftCollectionConfig): Cell {     return beginCell()         .storeAddress(config.admin)         .storeUint(0, 16)         .storeUint(config.init_code_ver, 16)         .storeRef(             beginCell()                 .storeRef(config.collection_content)                 .storeRef(config.common_content)         )         .storeRef(config.item_code)         .storeRef(             beginCell()                 .storeUint(1, 16)                 .storeUint(2, 16)                 .storeAddress(config.admin)                 .endCell()         )         .endCell(); }

Svαtoωλ‎: я знаю только питон

Svαtoωλ‎: а есть какая-то тулза которая считает пнл по токенам?

RootTon: Это пример типо за место blueprint и ts ? (reply to 266592)

— 2024-11-19 —

AL Pamblus: здравствуйте 🙂👍 дайте пожалуйста код с помощью которого я могу ввести приватный ключ от кошелька и указать subwallet_id чтобы получить конкретный адрес.

AL Pamblus: 😁. (reply to 223224)

Alex: Привет. Подскажите плиз, есть ли аналог ton connect для мини аппок, но для метамаска? Нужна поддерджка именно evm сетей

Andrew: Привет. Подскажите плз дурачку, наверное очевидную вещь, но которую никак понять не могу. Как после деплоя Jetton сминтить его на кошелек?  Ну т.е. у мастер-контраката есть опкод минта. Он, собственно, увеличивает тотал саплай через значение в мастер сообщении и отправляет внутреннее сообщение на контракт джетон волета, которое по сути деплоит этот новый джеттон кошелек. Кошелек создается, но баланс у него 0, поскольку это значение из state_init. При этом тотал саплай у нас увеличился. Правильно понимаю, что после деплоя нового кошелька, нам нужно отправить еще одно сообщение с оп internal_transfer от мастер-контракта на новорожденный джетон волет для пополнения баланса? Тут вопрос тогда как в blueprint использовать мастер контракт в качестве сендера? Т.е. с <TreasuryContract> (deployer) есть встроенный метод. Не могу въехать как от контракта сообщение отправить

da: Возможно ли в текущих реалиях создать ТМА на основе только тон сайта?

Denis: Типа того (reply to 266595)

/B4ckSl4sh\: Контракт можно в одной транзакции и деплоить и он сообщение обработает. Так что жетон воллет задеплоится с балансом 0 и сразу обработает сообщение с опкодом internal jetton transfer (reply to 266615)

Dmytro: жсное смотрится на 200% лучше (reply to 266592)

Dmytro: но может у меня проф деформация из-за того сколько я на фанси пишу

Denis: Ну там жс это аналог 42-62 строки

Denis: Сравни отдельный участок

Dmytro: На жсе тоже можно написать код чтобы структурки передавать вместо ручной сборки. Просто мало нужно.

Dmytro: (а на расте это вообще можно в TL-B писать лол)

Dmytro: если будет время займусь переписывание блюпринта на раст

Denis: Было бы славно (reply to 266640)

Боров: Приветствую , кто сможет написать скрипт, для проверки транзакции на ton connect?

Andy: добрый день. в процессе как раз такой (reply to 266652)

Anton: Возможна ли проверка на владение NFT ончейн? Кто-то реализовывал подобный функционал?

User<7381988319>: Добрый день! Как со смарт контракта созданного через ton minter раздать токены по адресам из списка?

Pavel: У вас есть кошелек на котором находятся 100% суплая вашего токена. Вы должны дать ему задание, разослать эти токены. Например, написать скрипт на python, который будет создавать транзакции для каждого адреса, или пака адресов (reply to 266660)

User<7381988319>: Спасибо большое, а есть пример реализации? Очень нужно. Пока не внедряюсь, мне нужно сделать чтобы просто работало😅

SweetJesus: highload wallet v3 (reply to 266660)

User<7381988319>: Подскажите, пожалуйста, это же будет просто трансфер? А как мне сделать, чтобы это было как выполнение смарт  контракта?

SweetJesus: твоя задача и есть выполнение смарт контракта. А точнее один порождает выполнение другого и так по цепочке. (reply to 266673)

Victor: Можно сделать, но все зависит от задачи, которую ты собираешься решать (reply to 266655)

Farel: как из Buffer получить Uint8Array

Oleg: Язык программирования нужно угадать? (reply to 266758)

Avler: как я понимаю, подобное есть в контракте sbt-item.fc if (op == op::request_owner()) {     slice dest = in_msg_body~load_msg_addr();     cell body = in_msg_body~load_ref();     int with_content = in_msg_body~load_uint(1);      var msg = begin_cell()             .store_uint(storage::index, 256)             .store_slice(sender_address)             .store_slice(storage::owner_address)             .store_ref(body)             .store_uint(storage::revoked_at, 64)             .store_uint(with_content, 1);      if (with_content != 0) {         msg = msg.store_ref(storage::content);     }      ;; mode 64 = carry all the remaining value of the inbound message     send_msg(flag::regular() | flag::bounce(), dest, 0, op::owner_info(), query_id, msg, 64);     return (); } (reply to 266655)

Avler: но у SBT не меняется владелец поэтому в TEP-62 написано следующее: There is no way to get current owner of NFT onchain because TON is an asynchronous blockchain. When the message with info about NFT owner will be delivered, this info may become irrelevant, so we can't guarantee that current owner hasn't changed.

Оскар: ты можешь просто кастануть его (reply to 266758)

Tadeusz: но нужен посох

Andrei: Привет! А может кто-нибудь помочь понять почему данная транзакция зафейлилась? https://testnet.tonviewer.com/transaction/71647e8483787834d882ea0e2fdc8810965cde25221f7e22cbce1b6425c1215f  И в целом, есть место, где можно посмотреть как читать инфу из тонскана?

SweetJesus: смотрите в коде контракта, где произошла транзакция. (reply to 266835)

Andrei: Ok, кажется понял Вот тут exit_code 130 можно увидеть (reply to 266839)

Wayne: а я твою маму ищу, удаленки нету, только у нее дома (reply to 266803)

Andrew: ребят, а сталкивался кто с проблемой, что если отсылать    транзакцию в тестнете через ссылку с параметром bin в tonkeeper, то транзакция не подтверждается? Выдает ошибку с сообщением "emulation failed". Без bin отсылает нормально. Мб я чет не так делаю?

Оскар: если text это комментарий к трансферу тонов, то это шорткат к боку, где 32 бита это 0, а остальное текст соответственно отсюда text и bin взаимоисключающие параметры (reply to 266881)

Andrew: убрал text, не вылечило(  да и в туториалах от ton, насколько помню, bin вместе с text тоже в ссылке указывали (reply to 266887)

Оскар: в мейннете нормально эмулирует? (reply to 266890)

Andrew: не тестил еще, пока с тестнетом вожусь. Позже попробую в мейне, но хотелось бы разобраться все-таки почему в тестнете не работает (reply to 266894)

Оскар: либо бок плохой, либо тестнет у тонапи плохо себя чувствует (reply to 266895)

Andrew: вряд ли бок, т.е. даже если пустую ячейку создавать все равно ругается. Ну и в тестах с этим же телом все норм отрабатывает (reply to 266898)

Tadeusz: она просто соответствует самой низкой цене среди всех выставленных на продажу NFT в коллекции. (reply to 266906)

Karo: всем привет, как в address указать адрес кошелька напрямую в контракте?

Max: нет, там черным по белому самая низкая цена (reply to 266909)

Tadeusz: не понятно о чем вы, но на платформе Getgems «floor price» (цена флора) определяется как самая низкая цена за NFT в рамках конкретной коллекции. (reply to 266909)

SweetJesus: если юзер френдли, то "UQ..."a,  если raw, то собирай по тлб. (reply to 266910)

Andrey: я открываю рандомно ноткойн премаркет, флор - 14 TON, хотя есть недавние продажи и по 12 https://tinyurl.com/2p8jkj7r (reply to 266915)

Tadeusz: она рассчитывается исключительно на основе активных предложений на продажу, а не на основе исторических данных о продажах.

Max: Так флор берётся от активных контрактов продажи (reply to 266918)

Andrey: вы имеете ввиду от вот этих?

Max: опять мимо. при чём тут история ивентов? (reply to 266922)

Andrey: "активное предложение на продажу", как вы писали выше, это ведь и есть по сути цена по которой продавец выставляет нфт

Karo: спасибо (reply to 266917)

Andrey: есть активный контракт на продажу, у него в get_sale_data выставлено значение full_price, вы ведь про это? (reply to 266920)

sd: Предложение по самой низкой цене среди всех актуальных предложений на рынке - это floor price, как только его купят, значение изменится на следующее предложение по самой низкой цене на рынке (reply to 266922)

Андрей: Всем привет  Такой вопрос, закинул на фрагмент для ads (лучше бы этого не делал, все сроки вышли и кампания все так же In review.  Саппорта у фаргмента как такового нет, поэтому обращаться некуда. Есть варианты обратно на кош тоны дернуть или они с концами там? По интерфейсу фрагмента выглядит правдоподобно второй вариант

Max: с концами (reply to 266938)

Ivan [on Vipassana till 27.04]: интерфейс вида ии-чат со всем локальным контентом экосистемы тон, информацией, списками, роадмапами, чатами, грантовыми программами, командами, вакансиями, топ 100 ppl (инфой про них), находить тиммейтов  не семантический поиск, а прям нормального уровня RAG диалог  Мб даже новостные каналы сможет читать регулярно  было бы хорошо какой-то грант под это получить хотя бы минимальный для коммитмента, и пару разрабов, но их я и сам организую если будет отклик (reply to 265793)

!: Мне надо, я руками все это собирал частично в июне (reply to 266963)

!: заблудился в бесконечных Hackathon чатах разных городов что бы собирать результаты и т.д.

!: https://docs.google.com/document/d/1j9YtNEQMZfmAf8b36NhwNI8r0s-Kxzxu2f4Xhmbzqy8/edit?tab=t.0 https://docs.google.com/document/d/1ueOrTjNosITD7_uEnlgKJyFMRtWospN5hgbMV87YKaU/edit?tab=t.0 избавьте пж от такого)

Lev: Да, это было бы полезно, надо только понять, как конкретно это должно выглядеть, кмк просто условный раг по чатам недостаточно структурированный (reply to 266963)

Ivan [on Vipassana till 27.04]: ну я сейчас как делаю — я копипасчу все в гугл доку что нахожу (сайты, списки, навигации)  и дальше в claude засовываю  и с ним общаюсь по интересующим меня вопросам, обычно это всего два пункта — коммьюнити сделки (вопросы-ответы, предложения, мероприятия, гранты, вакансии), либо контакты /каналы списком / визуализированная иерархия принятия решений,   все, дальше я беру список своих идей и прошу гпт приоритезировать с кем на эту тему пообщаться из данной экосистемой и какой уже прогресс в этом есть  Эо 2-3-4 запроса, но они гиперперсонализированные и их проще в виде диалога узнавать, типа "а знаешь а видел что-то где-то такое"? (reply to 266984)

Ivan [on Vipassana till 27.04]: календарь всех событий например тоже было бы полезно вести, но это фул тайм скучная работа, а гпт может это автоматом считывать и не так важно чтоб даже идеально было

ㅤ: Вау, это было действительно круто! 🤩🤩🤩 Х10-100 буст (сэйв времени) Общаешься/работаешь/делаешь из всей системы с теми кто уже в теме и синк (reply to 266988)

imraslxo: добрый вечер, я недавно взялся за изучение блокчейн-разработки, на данный момент изучаю func и пытаюсь писать контракты, у меня порой возникают вопросы, ответы на которые найти у меня не получается, эти вопросы могу показаться глупыми, смотря на то, какие тут бывают обсуждения, но все же, могу ли я тут искать помощь?

&rey: Да. Кстати, история чата иногда тоже поразительно помогает. (reply to 266995)

!: в notebooklm я иногда скармливал огромные текстовые контексты по несколько мегабайт + другие источники, по сути свалка но он как то все это разделяет, чистый кайф продукт сделали. Делаешь заметки, их догружаешь в контекст и так далее. Заметки в смысле это ответы llm. Саммари и т.д. (reply to 266988)

Евгений: о, интересно (reply to 267018)

Евгений: ну и можно получается парсилки настроить и они будут гнать инфу на сервак и  notebooklm уже раскидает под mvp норм

!: у меня в канале появлялся как то бот "читатель". Можно промптом агента попросить отделять условно "мусорные" сообщения чатов и остальное добавлять в базу с тэгами дат,времени, автора. Ну это то что на поверхности. Ежедневно саммаризировать, если есть важные сообщение пересылать в тг. или еще куда. Если этого бота кто то лично себе собрал прям уважение) (reply to 266996)

Евгений: а ссылка на бота есть? я б потестил в чатике с друзьями (reply to 267025)

!: он удалился жук. reader было имя (reply to 267028)

Ivan [on Vipassana till 27.04]: в этом чате например 267к сообщений, 13к ссылок, 347 файлов (потенциально полезных) для иишки спарсить и отфильтровать релевантных билдеров / ссылки /проекты — не проблема  для человека — анриал даже за неделю  у меня есть друг который ии-коммьюнити менеджера для сообщества физтехов делает, довольно круто кстати работает.  + папка с 17 каналами уже есть, там еще важный актуальный живой опыт живых участников экосистемы, как источники подключить (reply to 266963)

Олександр: Кто может помочь с написанием контракта или знает соответствующего человека? За определенную плату

集电极: На самом деле меньше. 164к (reply to 267032)

Ivan [on Vipassana till 27.04]: ? https://t.me/tondev/267039

Ivan [on Vipassana till 27.04]: откуда знаешь и что тогда цифра вконце обозначает

Ivan [on Vipassana till 27.04]: /stat@combot

集电极: Тут учитываются удаленные сообщения. Можешь ввести "+" в поиск и увидишь текущее количество сообщений (reply to 267040)

Ivan [on Vipassana till 27.04]: кайф, не знал про такой лайфхак, а еще такие есть?

Андрей: Вопрос явно не по теме чата (reply to 267046)

Black: привет всем у меня проблема помогите пожалуйста:  есть кошелек созданный в 19 году в конце ноября через компьютер, сейчас не могу в него попасть выдает другой адрес, сид фраза точно верная так как на компе установлен старый кошелек грам валет и сидку посмотреть получается и адрес нужный выдает только к сети не подключается естественно Простите возможно вопрос не по теме но поддержка не отвечает поэтому пишу сюда. Возможно ли как то восстановить такой кош?

User<7727973243>: Да (reply to 267062)

Black: как? перепробовал все кошельки… (reply to 267064)

Denis: ох хороший вопрос. скорее всего у вас v1r3 а его современные кошельки не поддерживают (reply to 267062)

Denis: посмотрите в tonviewer.com адрес. там написана версия контракта.

Denis: а если там uninit то с большой вероятностью кошелек попал в список замороженых и вам еще пару лет ждать разморозки

(✿◡‿◡): кто разбирается в jetton и смарт контрактах - отпишите в лс , есть заказ

sd: А там вне зависимости от баланса морозили? Я думал ток крупные (reply to 267074)

Denis: нет. даже мелкие https://tonviewer.com/config#44 (reply to 267076)

Ivan: А как правильно получить курс обмена тона на жетон из пулов стонфи?  я вот дергаю get_pool_data у пула USDT/TON например reserve0:"21811483025057" reserve1:"3955455857704563" Узнаю оттуда резервы и, по идее, могу одно на другое поделить и узнать курс, но постольку это USDT и у него 6 знаков после запятой, надо еще на 1000 домножить  а если это пул NOT/TON то там уже не надо домножать, как-то сложновато выходит

Denis: а тебе именно на стонфи? (reply to 267080)

Denis: но вообще короче решения чем ты описал вроде нет

Denis: только тонапи :)

meta: Извиняюсь если я вдруг не внимателен. Пытаюсь тут найти смарт контракт nft-item.fc Я знаю что его можно найти открыв саму коллекцию во вьювере. Но мне требуется пример в репозитории. Не tele-nft-item. Может я вообще не там ищу?  https://github.com/ton-blockchain/ton/tree/master/crypto/func/auto-tests/legacy_tests

I16000: ну это задача для сеньера минимум да (reply to 267080)

Ivan: Тогда все нормально, я думал что это я уже вундервафлю изобрел и на самом деле все проще (reply to 267082)

User: Дергайте stonfi api. Там получайте decimals и получайте курс (reply to 267080)

Black: да «неактивный» списки смотрел там меня нет (reply to 267074)

Denis: странно. ну тогда попробуйте поменять global-config файл на актуальный - может и этот кошелек заработает

Black: Можете отправить актуальный, я пробовал менять на тот что в «toncoin wallet» ничего не вышло (reply to 267091)

Denis: https://ton.org/global.config.json

Sol: Привет кто подскажет как запустить смарт контракт?где почитать о том что нужно писать в скрипте

dev: https://ton.org/dev?filterBy=developSmartContract (reply to 267096)

S | Coder: Здравствуйте! Можете пожалуйста подсказать, как делать переводы? С моего кошелька на кошелек по апи

S | Coder: Если не сложно, можно пример кода (на любом языке) (reply to 267105)

S | Coder: Если вдруг у вас будет пример, как переводить ещё и жетоны, будет шикарно

User: в гугл введите ton docs, и там будут примеры на 3 ЯП (reply to 267105)

S | Coder: Можно ссылку. Я просто листал, не мог найти? (reply to 267109)

grachzy: Всем привет. Можете подсказать как в тма сделать полноэкранный режим?

Basilio: Кто то может подсказать ресурс для изучения React?

T: Всем привет Подскажите, как через апи можно делать трансфер жетонов с комментарием?

Сева: можете подсказать очему мне возвращаеться баланс  0, хотя баланс не 0. Кошелек задеплоен:      const client = new TonClient({         endpoint: 'https://toncenter.com/api/v2/jsonRPC',       });      let keyPair = await mnemonicToPrivateKey(mnemonics);      let workchain = 0;     let wallet = WalletContractV3R1.create({ workchain: workchain, publicKey: keyPair.publicKey });     let contract = client.open(wallet);          // let info = await contract.     let balance: bigint = await contract.getBalance();     console.log(balance);

Василий: Возможно, у вас кошелёк V3R2, а в коде V3R1. Можно было бы однозначно понять по адресу кошелька (reply to 267118)

Sandji: Всем привет 👋 как добавить в три точки, кнопку добавить на рабочий стол

Сева: Нет, 3р1, только что перепроверил (reply to 267120)

Сева: С чем это ещё может быть связано? 😬

Сева: А вообще ж метод create не будет создавать новый кош если я передам мнемонику существующего кошелька?

&rey: там всё детерминированно, так что нет (reply to 267125)

sd: Почему у стонфи разные токены попадают в разные роутеры? Как выбирается роутер при создании пула?  например EQDh5oHPvfRwPu2bORBGCoLEO4WQZKL4fk5DD1gydeNG9oEH EQAQYbnb1EGK0Wb8mk3vEW4vbHTyv7cOcfJlPWQ87_6_qfzR

Сева: ладно я просто не тот эндпоинт указал

sd: Тут описано, что он является точкой входа для вызовов декса, но почему их несколько не понятно, и как единая точка входа они не работают (reply to 267128)

S | Coder: Подскажите, tonweb и tonweb-mnemonic нормальные ли либы ничего не воруют?

.kodgen: Всем привет,решил проблему с кошельками которые юзались в 2019 году,но щас имеют статус неактивного(uninit),при входе в текущую сеть генерирует новый адрес  Интересует кого?)

S | Coder: Их в доке используют, думаю да? (reply to 267132)

sd: Так пишите решение здесь. Такие предложения в личке обычно ничем хорошим не заканчиваются. (reply to 267133)

Andy: у меня такие же сомнения о любом приложении-криптокошельке. сегодня оно ок, а завтра сид фразы копирует (reply to 267132)

Сева: export async function sendTonBack(mnemonics: string[], amount: string, dest: string) {     const client = new TonClient({         endpoint: 'https://testnet.toncenter.com/api/v2/jsonRPC',     });      let keyPair = await mnemonicToPrivateKey(mnemonics);      let workchain = 0;     let wallet = WalletContractV3R1.create({ workchain: workchain, publicKey: keyPair.publicKey });     let contract = client.open(wallet);       let seqno: number = await contract.getSeqno();     let transfer = await contract.createTransfer({         seqno,         secretKey: keyPair.secretKey,         messages: [internal({         value: amount,         to: dest,         body: 'money back from trade pool',         })]     });     await contract.send(transfer); } почему я получаю ошибку 429 too many requests??

Avler: на один IP ограничено кол-во запросов за определённое кол-во времени без ключа API (reply to 267139)

&rey: Потому что между запросами к тонцентру нужна секунда. После getSeqno. (reply to 267139)

Сева: понял, спасибо большое

&rey: Вполне окей (как минимум когда я смотрел полгода назад). Можете в исходниках проверить отсутствие fetch, XMLHttp... / просто посмотреть, какие запросы отправляются в сеть. (reply to 267132)

Андрей: У вас слишком заниженные критерии отбора, раз такую простую задачу может выполнить только сеньер  По факту такую задачу должен уже мочь выполнить мидл (reply to 267086)

Oleg: Думаю, это был сарказм (reply to 267149)

User: Добрый вечер. Можете подсказать, как можно с помощью ластсервера парсить все последние транзакции в тоне?  Условно с помощью python или js  p.s. в raw формате; главное чтоб я смог все эти переводы обработать

Сева: А почему берется комиссия во время отправки и во время получения?

SweetJesus: https://docs.ton.org/v3/documentation/smart-contracts/transaction-fees/fees-low-level (reply to 267169)

Сева: спасибо

Andrey: подскажите, а Jetton master смарт контракт - обычно всегда один, или их может быть у токена много/несколько?

SweetJesus: один (reply to 267176)

Andrey: Спасибо

S | Coder: Здравствуйте! Кто-то знает почему, если я использую данные из тонкипера(сид фразу), то выводится неверный номер кошелька и баланс?

S | Coder: Использовал R1 и R2 разницы нету( (reply to 267179)

集电极: Помимо R1 и R2 (вероятно, v4) существуют ещё версии. Если вы создавали кошелек недавно, то у вас скорее всего v5r1 (reply to 267180)

S | Coder: Она поддерживается в tonweb? (reply to 267181)

集电极: Честно говоря без понятия, можете посмотреть в исходниках (reply to 267182)

S | Coder: А можете посоветовать, что лучше использовать с js? (reply to 267183)

集电极: Я использую @ton/ton (reply to 267184)

S | Coder: Можно в лс напишу? (reply to 267185)

集电极: + (reply to 267186)

Vlad: Привет всем, такой вопрос: Что происходит с жетонами, если forward_ton_amount установил отличный от 1 nanoton?  В моем случае поставил значение 0.00001 ton

&rey: Кстати, бред написан, как минимум в части "not be standard compliant". А от уведомлений индексеры быстрее работают или нет? (reply to 267197)

S | Coder: Здравствуйте! У кого нибудь есть пример отправки токенов?

S | Coder: Мне нужно просто отправить usdt на кошелек через запрос (reply to 267208)

Oleg: В официальной документации все есть (reply to 267208)

Viacheslav: Подскажите, почему транзакция failed, если exit code 0 и статус success?

Viacheslav: tx - https://tonscan.org/tx/76a15a776d1d9008e309531e9a8a83316d4e44613572ab19970c977ffac44eab#overview

Victor: У вас не хватает тонов на балансе контракта (reply to 267214)

Viacheslav: а как тогда транзакция отправилась..? (reply to 267219)

&rey: А вы же отличаете транзакцию, обработавшую экстернал, от отправки интернала с деньгами? (reply to 267220)

Viacheslav: в голове - да) (reply to 267221)

Оскар: action зафейлился, но он был отправлен с флагом +2 в mode, который игнорит ошибки при экшен фазе (reply to 267211)

Viacheslav: аа понял. А где можно увидеть флаги какие были проставлены? (reply to 267223)

Оскар: смотря как отправляется, универсальный это распарсить бок экстренала который был отправлен (reply to 267224)

Viacheslav: а вы сейчас через block explorer увидели? (reply to 267225)

Оскар: предполагаю что тонконнект и mode по идее выставляет либо он сам, либо приложение кошелька с которым общается

Оскар: да, у тонскана можно декодированный экстернал посмотреть и там написан с каким модом отослали (reply to 267226)

— 2024-11-20 —

Leͥgeͣnͫd$: Всем привет. Пацаны вы тут все везде знаете. В тон комьюнити новость новая dex tonco хочу положить туда ликвид но стрёмно скажите есть понимания трушная платформа или нет ? Информации мало не хочется в Скам проект ввязаться.

Avler: 1. это чат по разработке, а не по анализу проектов 2. если проект вас привлекает своим APR в пуле TON/USDT, то сразу скажу, что он рассчитан некорректно (reply to 267234)

Leͥgeͣnͫd$: Спасибо. (reply to 267235)

ダーリン: подскажите, а как сделать так, чтобы в тонкипере показывалось красивое сообщение Mint, когда я минчу токены, подобно дедасту или это какая то вип привилегия для них  просто скопировал их сообщения, начиная с минта, точь в точь, а тонкипер все равно не хочет показывать, что у меня токены минтятся

Оскар: скинь как собираешь месседж минта, особенно так называемый master message который internal transfer (reply to 267238)

ダーリン: () send_simple_message(int amount, slice to, cell body, int mode) impure inline_ref {     cell msg = begin_cell()         .store_uint(0x18, 6)         .store_slice(to)         .store_coins(amount)         .store_uint(1, 107)         .store_ref(body)     .end_cell();     send_raw_message(msg, mode); }  () mint_tokens(slice previous_owner, int price, int msg_value, slice jetton_master_address) impure {   cell msg = begin_cell()               .store_uint(21, 32)               .store_uint(0, 64)               .store_slice(previous_owner)               .store_coins(msg_value)               .store_ref(                 begin_cell()                   .store_uint(0x178d4519, 32)                   .store_uint(4824345633934391000, 64)                   .store_coins(price)                   .store_slice(jetton_master_address)                   .store_slice(previous_owner)                   .store_coins(FWD_AMOUNT)                   .store_uint(0, 1)                 .end_cell()               )             .end_cell();    send_simple_message(0, jetton_master_address, msg, CARRY_REMAINING_GAS);   return (); }  это к мастеру на минт (reply to 267239)

ダーリン: это от мастера

ダーリン: даже квери айди скопировал сгоряча... (reply to 267240)

Оскар: попробуй вместо jetton_master_address вписать тот адрес, кому эти токены заминтятся (по сути инициатор) (reply to 267240)

ダーリン: было дело, не сработало (reply to 267243)

ダーリン: вот кстати ссылка на транзу, на которую опираюсь

Оскар: тогда нужно узнавать как тонапи именно схлопывает секцию трейсов до минта, чтобы понять что ему нужно (reply to 267244)

ダーリン: @subden а можно поинтересоваться пожалуйста? (reply to 267238)

Islam: видимо это нужно https://github.com/tonkeeper/tongo/tree/master/abi/schemas (reply to 267247)

Avler: У меня похожий вопрос по поводу tonviewer, но на тему сжигания nft (если этот функционал в принципе предусмотрен в tonviewer)

ダーリン: спасибо! (reply to 267249)

ダーリン: вот только для governance вижу (reply to 267249)

Islam: этот коммент же к jetton_set_status относится только (reply to 267252)

User<7727973243>: Дайте чаты по обсуждению разработки на ton,tma,solana пожалуйста

Crypto: Я хочу написать свой первый смарт контракт, как начать

Crypto: Как скомповать фунС

Mirka: https://youtube.com/playlist?list=PLyDBPwv9EPsA5vcUM2vzjQOomf264IdUZ&si=7Kqu4H0fCITBK0az (reply to 267256)

Vlad: Привет всем! При отправки жетона указал адрес не кошелька юзера, а смарт контракта jetton_wallet(jw1), и получилось что создался еще один jetton_wallet(jw2), холдером которого является jw1 Есть ли вариант жетоны отправить на кошелек юзера?

Vlad: вот как это в выглядит визуально

/B4ckSl4sh\: Нет, к сожалению они потеряны (reply to 267262)

Vlad: Но восстановить их сам юзер также не сможет получается, да? даже владелец кошелька (reply to 267264)

/B4ckSl4sh\: Именно (reply to 267265)

X1ag: Всем привет, где купить тестовые токены?

🪢: @testgiver_ton_bot тут (reply to 267307)

X1ag: Мне в большом количестве

Max: tonconsole.com (reply to 267309)

X1ag: Спасибо, это я и искал) (reply to 267310)

Denis: Не (reply to 267249)

Denis: Схлопывание отдельных транзакций в высокоуровневые экшены это условно магия пока. Ближе к черной. Мы давеча с творожковым обсуждали как это можно стандартизировать и дать простой язык описания но пока нет

Sane: Всем привет!  Можете объяснить что нужно знать чтобы можно было сделать чек Вот в боте будет кнопка оплатить и потом перекидывает на Tok keeper  Потом оплачиваешь и т.д И потом проверяется оплата

Max: https://github.com/tonkeeper/wallet-api будет достаточно  + вебхуки от тонапи (reply to 267316)

Андрей: Похоже все же пользователям ближе покупать тестовые монеты чем брать бесплaтнo. Раз так то нужно сделать такого бота с курсом 1 к 100 и с лимитом в 100к будет норм (у тонконсоли 1 к 50 и лимиты в пару тысяч) (reply to 267307)

Sane: Спасибо большое! (reply to 267318)

Denis: Так это. Сделайте (reply to 267319)

Vlad: Спасибо большое за ответ! И в будущем даже если вдруг код контракта изменится тоже их достать нельзя будет, правильно понимаю? (reply to 267267)

Max: Жеттон воллета? Не изменится (reply to 267325)

Artem: Привет! Подскажите плиз какой самый правильный способ определить что транзакция зафейлилась? Пользуюсь API тонцентра

X1ag: На тестирование приложения я могу пожертвовать нескольким количеством тон (reply to 267319)

Denis: https://gist.github.com/mr-tron/a4b3e8eff3a982e3426f6397eb9a2450 (reply to 267329)

Artem: Спасибо! Почитаю (reply to 267332)

User<7727973243>: Если на фин основе, могу сопровождение дать по всем этапам за 20$ (reply to 267316)

Юрий: Всем привет. Делаю Jetton-wallet с изменениями, беру на https://github.com/ton-blockchain/minter-contract/ Там в read.me указано, делаем npm install -> вносим изенения -> npm run build. И вот здесь получаю ошибку:  FATAL ERROR: 'func' with version >= 0.2.0 executable is not found, is it installed and in path? Что не так. Я понимаю, в _build.ts идет проверка версии func, Только не понимаю, что делать дальше

/B4ckSl4sh\: Используйте более современный репозиторий https://github.com/ton-blockchain/token-contract (reply to 267349)

Юрий: Спасибо, попробую (reply to 267352)

ダーリン: то есть шиш мне а не красивый минт в тонкипере да? (reply to 267315)

Egor: Добрый день! Подскажите пожалуйста, кто знает, как установить ssl сертификат на виртуальную машину?

Denis: ну дай ссылку на трейс где должен быть минт (reply to 267357)

Denis: это чат про аниме (reply to 267358)

Denis: а ответов на ваш вопрос приблизительно миллион в зависимости от тго что именно вы под этим подразумеваете. но чатгпт вам с большой вероятностью всё хоршо пояснит

ダーリン: https://testnet.tonviewer.com/transaction/e1853abf0c0812004f36275c4e72a36c456d5b061282fcd73275274f1129d807 (reply to 267359)

Сева: всем привет, почему я получаю эту ошибку?: Liteserver crashed with 0 code. Message: cannot send external message : duplicate message код: async def send_back(pool_mnemonic: typing.Union[str, list[str]], value: typing.Union[int, float]):     client = LiteClient.from_testnet_config(ls_i=0, trust_level=2)     await client.connect()      pool_wallet = await WalletV3R1.from_mnemonic(client, pool_mnemonic)      trs = await client.get_transactions(pool_wallet.address, 1000000)     investments: list[dict] = [         {tr.in_msg.info.src.to_str(): tr.in_msg.info.value_coins}         for tr in trs if hasattr(tr.in_msg.info, 'value')     ]      for investment in investments:         for address, amount in investment.items():             await pool_wallet.transfer(address, amount * value)      await client.close()

Andy: Всем привет. Ошибка снизу не дает залогиниться на гетгемс, тестирую кошелек с сидом в Signer. Встречался кто с таким?

Max: Забрали, это к команде Tonkeeper (reply to 267381)

Yulia: Всем привет, какой есть способ по адресу нфт понять скам это или нет?

Cube: К сожалению нет (reply to 267385)

Сева: почему когда я вывожу  const trs = await client.getTransactions(wallet.address, { limit: 20 });     for (let i = 0; i < trs.length; ++i) {         console.log(trs[i].inMessage?.info);     } выводиться в консоль фул инфа и там есть value. При этом в коде есть только dest, src и type. Как получить value?

&rey: Вопрос к Typescript; наверняка известный? (reply to 267408)

Сева: ахуенно

Сева: можете подсказать почему вылазит ошибка дубликата сообщений когда я беру с каждой входящей транзакции на кош value и отправляю на src аддресс

Ваня: Всем добрый день! Подскажите а как контракт может узнать что на его Jetton wallet пришли жетоны? Есть какие-то стандартные способы?

/B4ckSl4sh\: Если его жетон-воллет пошлёт JettonNotify, то узнает. Если не пошлёт, то ончейн - никак (reply to 267438)

/B4ckSl4sh\: С помошью какой функции в pytoniq (или может в @ton/ton) удобно считать количество Cellов в дереве, и количество битов? Я хочу узнать, сколько storage_fee будет взиматься с моего контракта Или может есть какой-то скрипт на фифте удобный? Который просто сохранит boc в Cell и вызовет getstoragefee

Dmytro: Напиши сам, она за три минуты пишется (reply to 267448)

/B4ckSl4sh\: а, ну в целом да, просто дфсом обойти и посчитать (reply to 267449)

/B4ckSl4sh\: Тогда ещё вопрос, строка начинающаяся с b5ee это Boc в base64 я так понимаю. Что есть строка начинающаяся с te6 ?

&rey: Первое hex boc, второе base64 boc. (reply to 267454)

Василий: Можно посмотреть этот код в качестве примера. Там также есть расчёт storage fee. (reply to 267448)

Farel: в каком виде нужно передавать зашифрованное сообщние в тело трансфера?

SweetJesus: https://docs.ton.org/v3/documentation/smart-contracts/message-management/internal-messages#messages-with-encrypted-comments (reply to 267473)

Farel: encryptMessageComment возвращает typeof cell, его передавать в body невыходит (reply to 267475)

SweetJesus: ? (reply to 267476)

SweetJesus: с чего ты это взял (reply to 267478)

S | Coder: Всем привет! Дайте пожалуйста код для создания смарт контракта. Мне нужно перевести usdt

S | Coder: Ну не прям для usdt, а просто пример (reply to 267510)

S | Coder: Помогите пожалуйста (reply to 267510)

ig: привет! подскажите как можно сделать проверку владения nft ончейн?

SweetJesus: довольно бесполезно такое делать. Пока будет лететь твой пруф у нфт может владелец поменяться. (reply to 267525)

Оскар: только отправив нфт на контракт, который получит нотификацию и наделает делов, ну и если нфт должно остаться у владельца - то вернуть (reply to 267525)

ig: согласен. нужно реализовать ранний доступ к протоколу и кажется что так можно выдать access для кошельков. (reply to 267526)

Denis: появится в следующем апдейте тонапи (надеюсь) (reply to 267357)

Danil: Всем привет, у тона есть апишка подгруза цены жетонов по типу как у coinmarket

Denis: https://tonapi.io/v2/rates?tokens=ton,EQD6Z9DHc5Mx-8PI8I4BjGX0d2NhapaRAK12CgstweNoMint&currencies=usd,rub (reply to 267537)

Denis: нет. там много источников

Denis: стонфи, дедаст и некоторые токены расчитываются напрямую из контрактов, тон и фиат с цексов

Danil: Спасибо

sd: а на старой десктопной версии тонкипера на винде (он у меня решил больше не обновляться) эмуляция одинаковых транз работает нормально (reply to 265857)

&rey: Вы так выдадите доступ десятке тысяч кошельков одного человека. (reply to 267529)

XD: Доброго времени суток, хотел спросить есть ли библиотека/сервис на Python для получения историй(за определённый период) транзакций кошелька ton, имея только адрес кошелька?

/B4ckSl4sh\: pytonapi (reply to 267567)

集电极: tonapi.io (reply to 267567)

XD: Благодарю за быстрый ответ!

Cube: Всем привет. В доках про гет методы написано Their execution doesn't cost any fees and happens outside of the blockchain, где в таком случае просиходят вычисления depositHelperAddress как в примере?

Cube: это толк если что (reply to 267601)

/B4ckSl4sh\: Вычисления проходят либо у вас на компе локально, либо у вашего апи провайдера, например тонапи (это гораздо чаще) (reply to 267601)

Cube: Понял, спасибо. Ещё про ограничения этих вычислений было бы здорово узнать (reply to 267603)

/B4ckSl4sh\: Не вспомню сейчас точно, но у тонапи было что-то порядка 200к газа вроде, сейчас поищу) А вот локально вы можете хоть бесконечно выполнять (reply to 267605)

/B4ckSl4sh\: https://t.me/tondev/250026 (reply to 267605)

Cube: Бесконечно благодарен (reply to 267607)

— 2024-11-21 —

sd: и еще кошелек w5 нормально эмулирует одинаковые транзы на текущей версии деск тонкипера, с w4 уже проблемы, не эмулирует (reply to 265857)

Crypto: npx func-js ./stdlib.fc ./wallet.fc --boc ./output.boc Для этой команды нужно сделать chmod +x все fc?

Crypto: Так я получил эту, и как сделать деплой контракта. (reply to 267626)

Crypto: 50Кб превратился в 500 байтов

Alacrity: как правильно рассчитать state_init nft-item в контракт nft-collection в FunC?  есть такой способ:  cell calculate_nft_item_state_init(int item_index, slice collection_address, slice owner_address, cell content, cell nft_item_code) {     cell data = begin_cell()         .store_uint(item_index, 64)         .store_slice(collection_address)     .end_cell();     return begin_cell()         .store_uint(0, 2)         .store_dict(nft_item_code)         .store_dict(data)         .store_uint(0, 1)     .end_cell(); }   является ли он правильным, т.к. в storage nft_item есть еще поля owner_address, content, editor_address?

Jzuss ┌( ಠ_ಠ)┘: Здесь есть с тонкипера кто-нибудь? Куда им на счет багов писать? Ребят, у вас не работает создание тестового кошелька на новом аккаунте. При попытке включить dev mode появляется мертвый пустой экран

Victor: Да, он является правильным, потому что адрес nft_item определяется на основе кода и даты (item_index + collection_address). Вместе с деплоем контракта идет сообщение, которое в себе несет метудату и владельца нфт (reply to 267631)

Victor: Это с обновой появилось, но думаю ребята решают эту проблему. Если что, можешь тэгать @subden @voloshinskii (reply to 267632)

Max: iOS? В нативном клиенте дев меню не нужно для добавления тестнет кошелька (reply to 267632)

Alacrity: как тогда в blueprint мне получить контракт?   const nftItem = await blockchain.openContract(     NftItem.createFromConfig(         {             index: nextItemIndex,             collectionAddress: nftCollection.address,             ownerAddress: deployer.address,             content: itemContentToCell('new'),             editorAddress: deployer.address,         },         nftItemCode,     ), );  Нужно ли здесь указывать owner_address, content и editor_address? (reply to 267633)

Andrei: Не очень понятно как тонкипер работает. Раньше я на одном сиде мог иметь и маиннет и тестнет токены. Соответственно переключаться мог через дев меню. Сейчас при импорте тестнет аккаунта на ios у меня вообще какой-то левый аккаунт создается, т.е адрес абсолютно новый… (reply to 267636)

Max: w5 кошелёк? (reply to 267638)

Andrei: Да

&rey: Да, раньше вы могли одним движением руки потерять мейннет токены отправкой их на какой-то адрес из тестнета. (reply to 267638)

Max: там walletId разный для разных сетей

Andrei: Как-будто сейчас жтого нельзя сделать? (reply to 267641)

Max: нельзя (reply to 267643)

Max: у вас же подпись теперь от кошелька в тестнете невалидна в мейннете  Раньше это была очень старая и серьезная проблема

Andrei: Можно, конечно  Вот вам пример  https://tonviewer.com/transaction/3385c6805c54ae3b91d5da3378821446651f6a429c7d54dfbbf934158b6b5f8f?utm_source=tonkeeper  Просто я так понял под капотом отправка происходит на неинициализированый кошелек маиннета, который соответствует тестнетовскому…  А где почитать про address derivation можно? Как жто вообще реализовано в тонкипере? Похоже, что какая-то дичь. Явно отличается от других кошельков (reply to 267644)

Max: Мы с вами про разные вещи говорим  Вы для личного удобства хотите, чтобы у вас один адрес был в тестнете и мейннете, а я говорю, что так неправильно  Это несёт за собой проблемы с тем, что ваши подписанные экстерналы для тестнета будут пересылать в мейннет и ваш кошелёк их обработает  Это приводит к потере средств (reply to 267646)

Max: https://github.com/ton-org/ton/blob/417ff341764728996081225d89e97d4520647146/src/wallets/v5r1/WalletV5R1WalletId.ts#L13 (reply to 267646)

Sol: Студия разработки из Бангкока  ищем технические задания любой сложности писать в лс

Andrei: Да я не требую ничего, я просто хочу понять как работает.  Вы выкатили обнову без объяснений что поменялось, у меня лично поломалось все. А теперь еще и говорите, что я не прав (reply to 267647)

Max: w5 в React Native работал точно также (reply to 267650)

Andrei: Что это? (reply to 267648)

Max: Наглядное объяснение на пальцах, как это устроено в тонкипере (reply to 267652)

Andrei: А, ок, понял. Смутил референс на конкретную строку просто (reply to 267652)

Jenya: Лайт сервер проработал несколько часов после установки и ушел в рассинх. Если перезапускаю сервер, оно синхронизируется, а через несколько часов опять рассинх  Ставил через mytonctrl  Что делать?

Leo: ? (reply to 267655)

Dmytro: Может железа не хватает чтобы успевать все обрабатывать? У меня такое же было когда я взял VPS с херовым диском, где iops был очень низким. (reply to 267655)

&rey: Блокчейн — полностью автоматическая система, так что если с тоновского кошелька что-то ушло, то эта транзакция уже верна и неизменна. (reply to 267659)

Max: Некультурно тегать всех подряд. Тем более не тот чат (reply to 267660)

Anton: в полицию, тут никто ничем не поможет лол (reply to 267664)

Max: В поддержку кошелька, а не в чат разработчиков, подробно описав, что случилось. Из вашего сообщения не понятно ровным счётом ничего  Если средства были украдены, то, увы, с большой вероятностью они безвозвратно потеряны. Сможет хотя бы попытаться помочь только полиция (reply to 267664)

Max: В приложении кошелька, которым вы пользуетесь, наверняка есть ссылка (reply to 267669)

Andrew: а у всех tonkeeper на хроме лагать начал? чет ни кошельки не импортируются, ни счета не открываются. Уже переустановил даже. Чисто скелетон показывается в блоках

Max: Фиксим (reply to 267673)

MEIIIOK: опять CORS отломали?) (reply to 267676)

Max: Конфиг сломали, а в вебном тонкипере он не кэшируется (reply to 267677)

Victor: Можете описать, какая задача перед вами стоит, чтобы более точно ответить (reply to 267637)

Alacrity: уже решил проблему) (reply to 267681)

Francisco: Привет добрым людям!   Подскажите пожалуйста, что можно сделать в такой ситуации.  Я делаю сервис для выводов, и в нем я сделал отправку USDT транзакций. Решил потестироать в цикле как будут транзации отправляться. Они успешно отправлялись пока у меня не закончились TON коины на кошельке.  Следующие транзакции в цикле уже фэйлились потому что нет тон коинов. (0.01 USDT как amount жетона и 0.05 как amount тон коинов я отправлял в транзакции) Я остановил сервис. Пополнил кошелек тон коинами - и зафэйленые транзакции начали отправляться и пока опять не потратили все тон коины.   Я отправлял транзакции с Mode = 1 , и похоже оказывается что в этом случае все транзакции что в цикле инициализировались но не зафэйлились из-за нехватки баланса все равно исполняются когда баланс пополняю.   А там просто огромное кол-во транзакций в цикле инициализировалось.   Можно как то остановить этот беспредел или это никак не остановить и проще просто перестать пользоваться кошельком ?  И какое значение mode использовать чтобы избежать такого беспредела ?

Max: нужен sendmode = 1 + 2 (reply to 267708)

Max: Дождитесь, когда истечёт ttl у экстерналов (reply to 267708)

Francisco: Спасибо! (reply to 267711)

Serhii: Всем привет, помогите плиз, как мне создать кошелек WalletV5  используя ton4j.   У меня получается создать по мнемонике приватный и публичный ключи, но адресс отлечается от адреса Tonkeeper

Max: Как раз чуть выше обсуждали  Возможно, не совпадает wallet_id  https://github.com/ton-org/ton/blob/417ff341764728996081225d89e97d4520647146/src/wallets/v5r1/WalletV5R1WalletId.ts#L13 (reply to 267728)

Serhii: Большое спасибо (reply to 267739)

Viacheslav: где можно найти последнюю версию stdlib.fc  ?

/B4ckSl4sh\: https://github.com/ton-blockchain/ton/blob/master/crypto/smartcont/stdlib.fc (reply to 267777)

Dmytro: Тут нет ни одного апдейта ТВМ не говоря уже про всякие хелперы лол. (reply to 267786)

/B4ckSl4sh\: а где тогда более свежая? (reply to 267792)

/B4ckSl4sh\: Вообще я лично пользовался той, которую блюпринт подтягивает и думал что вот это она

Oleg: В репе с governed жетонами есть. Можно тупо с USDT исходников украсть (reply to 267777)

Ma><im: всем привет! подскажите, а какая, грубо говоря, пропускная способность кошелька.  имеется ввиду, не будет ли ошибок, если, например, с интервалами в секунду или меньше его дудосить external’ами?

Ma><im: исходя из кода того же W5, кажется, что нет. но можно я что-то не учитываю?

Denis: будут (reply to 267818)

/B4ckSl4sh\: хайлоад можно закидывать сколь угодно часто, однако учитывайте, что транзакции в таком случае могут пройти не в том порядке, в котором вы их посылаете.  Для обычных кошельков тяжело сказать, но каждую секунду закидывать точно не стоит, сломается (reply to 267817)

Ma><im: хорошо

Andrey: вы когда query_id в body отправляете, обычно 0 или rand.Uint(64) указываете? как правильнее?

Victor: Обычно 0, но бывают моменты, когда нужно прикидывать (reply to 267882)

/B4ckSl4sh\: Когда? (reply to 267883)

Max: если вы его не используете, то можно и 0 (reply to 267882)

Andrey: спасибо, гайз👌

Max: Вообще, там в драфтах вот такой tep висит, связанный с query_id  https://tonresear.ch/t/tep-131-enhancing-ton-transactions-with-referral-codes-in-query-id/155  Можете по нему сделать (reply to 267887)

&rey: А какая мотивация за тем,  чтобы идентифицировать отправителя (хоть dApp, хоть пользователя)? Выглядит как минус. (reply to 267892)

Victor: Я на практике ни разу не пользовался, но вижу в нем следующие применение:  query_id — это уникальный идентификатор в сообщениях смарт-контракта TON, связывающий каждый запрос с соответствующим ответом. Он необходим для корректной обработки множества параллельных запросов (reply to 267884)

Павел: я только изучаю ton. Но на сколько я понял, query_id в internal нужен для обработки bounce (reply to 267897)

Denis: я делал на нём в контроле выводов для CEX матчинг сдачи для расчёта комиссий вывода (reply to 267897)

&rey: Он нисколько не помогает ончейн, ведь атакующий может выставить любой query_id. (reply to 267897)

Victor: Да, ты прав. Может не очень корректно сформулировал, речь про оф чейн (reply to 267902)

Denis: Ну если контракты твои то в принципе можно (reply to 267902)

Jzuss ┌( ಠ_ಠ)┘: @subden @voloshinskii (reply to 267632)

Anton: Так тебе ответили что для тестнета не нужно дев меню теперь (reply to 267938)

Jzuss ┌( ಠ_ಠ)┘: Когда жмешь на аккаунт тестнет он предлагает ввести secret для восстановления, но нету функционала создания тестнет кошелька! (reply to 267939)

Anton: Сгенерируй 24 слова любым удобным для тебя образом или вообще через wallet.ton.org (reply to 267941)

Jzuss ┌( ಠ_ಠ)┘: понял, спасибо! (reply to 267942)

Alexey: Привет, кто-то может помочь подсказать или объяснить что тут произошло?  Я хочу отправить 0.1 тона и это видно по пейлоаду первой транзакции в трейсе -  "value": {                   "grams": "100000000",                   "other": {}                 }, Однако фактически в out_msg он отправляет уже "value": 99600000  Что-такое теоретически возможно? Или может я неправильно собираю транзакцию?  https://testnet.tonviewer.com/transaction/2122528b81f7874a6084d4d7299fab0a2a0e45bf86ed59666fc3bab8e28c9f50

Denis: флаг 1 при отправке

Denis: вот так должно быть

Alexey: Спасибо! (reply to 267947)

Farel: подскажите пж как достать из кошелька публичный ключ зная адрес? ведь чтобы вызвать метод getPublicKey надо изначально подгрузить кошелек при помощи того самого public key

Cube: Из стейт инита (reply to 267956)

Dима: На какиом сайте найти фрилансера для: jquery, Django 2.2.27, python 3.6.8?

X1ag: подскажите пожалуйста, как сравнивать адрес создателя контракта, с адресом пользователя, который отправил транзакцию на этот смарт-контракт?

SweetJesus: equal_slices или equal_slices_bits в более поздней версии стдлиб. (reply to 267979)

X1ag: а где взять адрес создателя контракта?

Dmytro: самому добавить

Denis: Это не эфир. Тут адрес определяется не из создателя (reply to 267983)

Tim: да и в эфире он может по разному определяться (reply to 267986)

X1ag: просто объявить, что owner_address = '0:f44...'? (reply to 267984)

Dmytro: да но лучше в стейте а не в коде (reply to 267990)

X1ag: это все так делают? или есть какой-то другой способ? (reply to 267991)

Dmytro: все так делают (reply to 267992)

X1ag: благодарю за ответ

Павел: тут есть пример https://github.com/ton-blockchain/token-contract/blob/main/nft/nft-collection.fc (reply to 267990)

X1ag: спасибо

Denis: Есть смарт контракт А который посылает сообщение в контракт Б, который просто проксирует сообщение обратно.  Когда я А делплою  в worchain: 0, а контракт Б в -1, то почему-то это не работает. Контракт А не посылает сообщение. В чем причина?

User<7418242907>: Всем привет! В чем ошибка>>? https://tonviewer.com/transaction/c67542844dfdb662ebf9a82ddf18a0b5164b26287574cc60683bf12547564438

SweetJesus: не прошел проверку на владельца (reply to 268001)

User<7418242907>: Я же правильно все делаю по поводу отправки на адрес или не тот? (reply to 268004)

User<7418242907>: Я отправляю на Jetton wallet (reply to 268005)

SweetJesus: ну, нет. Во-первых ты не владелец, во-вторых там нечего отправлять. (reply to 268005)

sd: У жетон валета юсдт этого кошелька другой адрес  EQAOiNn1RsvcoCGvsEPb5ZxWpNT9-5L9mYIjSqwyIPrJ2VPX (reply to 268005)

User<7418242907>: https://tonviewer.com/transaction/d5d79478bae57e91eee2c72176eb60bbeac30a66d43e64fb6316ea989bd8d75a (reply to 268008)

User<7418242907>: Что делать? (reply to 268009)

sd: Прочитай ошибку и воспользуйся поиском по чату

rends_east: Привет всем поясните, пожалуйста, каким образом library cell уменьшает комсу? вот у меня огромный контракт, как мне поможет library cell? получается, уберет комиссии за хранение огромного контракта и его деплой?

Holiveood | HOLIDROP: Всем привет. Я тут новенький, подскажите пожалуйста с чего начать изучение разработки игры на блокчейне TON? Может уже есть курсы какие-то? Или статьи обучающие?

Denis: Он уменьшает комсу если вам надо пересылать код контракта (reply to 268013)

rends_east: а как это работает если я задеплою его код в library cell, то оно сразу начнет подсасываться ончейн, или мне коды контрактов надо как то подстраивать под эту фичу? (reply to 268016)

Оскар: либа это просто типо указатель на код, задеплоенный в мастерчейне, твм сам "дереференсит" этот указатель при исполнении кода, комиссия уменьшается только на пересылку этого кода (так как мы не весь код гоняем, а только этот указатель) ну и сторадж тоже дешевле (тоже самое что и выше - храним только указатель на этот код) (reply to 268017)

rends_east: получается, достаточно просто задеплоить либу с нужным кодом, чтобы всё работало спасибо (reply to 268018)

Denis: Но допрлнительные 100 газа на распаковку ячейки

Denis: Да (reply to 268019)

rends_east: А есть у кого то пример кода для деплоя либы? Кроме pTON

Victor: https://github.com/OpenBuilders/notcoin-contract/blob/main/scripts/deployLibrary.ts (reply to 268022)

rends_east: подскажите, при использовании library cell вот такая ошибка в тонкипере начала вылезать, не могу отправить транзу с этим можно что то сделать?)

User: Кто работал со stonfi. Как мне понять через какой роутер свапать токен на v2 протоколе?   Там их больше 10 и на некоторых есть рабочие пулы ликвидности, а на некоторых нет.

sd: Их 36, можно посмотреть холдеров питона и среди них искать, а так как я понял в сдк через запрос к их рпц (reply to 268044)

sd: Возможно в пуле есть гет метод какой нить с адресом

集电极: Через апи делай запрос пула, там есть поле роутер api.ston.fi (reply to 268044)

Давел: ребят, на тон точка тг хотел почитать обучения по фанси и такту, но почти все ссылки выдают error code: 502

Vladimir: Есть тон точка орг. (reply to 268048)

Давел: Спасибо огромное! Нашел! (reply to 268050)

Black: привет всем, сейчас вообще реально где то найти и скачать десктопную версию кошелька кроме кипера?   нужен конкретно этот, где его можно найти?   старые ссылки с офиц канала не работают, на сайте нет его, помогите пожалуйста

Ruslan: а зачем именно этот, а не тон кипер? занимаетесь мазохизмом? (reply to 268052)

User<7418242907>: Помогите пожалуйста (reply to 268009)

Denis: Скорее всего нужна старая версия кошелька (reply to 268054)

Denis: Типа v1r3. Проще имхо скриптом на тонвебе

Vladimir: GitHub? https://wallet.ton.org/ данный кошелек и в веб еще доступен. (reply to 268052)

.kodgen: Привет,отпиши в личку, у меня спам Я так понимаю ты на кошелек который тебе нужен получал в 2019 монеты?) (reply to 268052)

Gleb: Exit code 48, все написано в вашей же ссылке В доке tvm exit codes почитать можно (reply to 268055)

SweetJesus: экзит коды твм тут ни при чем. (reply to 268064)

Oleg: Тем более, что 48 выходит за рамки стандарта (reply to 268065)

SweetJesus: он наверное про то, что коды твм расписаны до 43. (reply to 268067)

User<7418242907>: Больше газа давать? (reply to 268071)

User<7418242907>: попробовал 0.2 не помогло (reply to 268072)

User<7418242907>: ооо, 0.5 прошло. А как мне рассчитать газ?

User<7418242907>: неа, 0.1, 0.2 не хватает (reply to 268075)

Vladislav: PVRS токен в Блуме все взяли ?

User<7418242907>: Что делать)??? (reply to 268077)

User<7418242907>: 0.3 хватило, но все равно много как-то (reply to 268077)

SweetJesus: сколько на forward ton amount отправляешь? (reply to 268080)

User<7418242907>: я отправляю 0.005 usdt, это 5 usdt (reply to 268081)

User<7418242907>: Или вы не про это? Я просто только начал изучать контракты (reply to 268082)

sd: 0.2 там стояло в транзакции. (reply to 268081)

User<7418242907>: вот щас мне хватило 0.21, на 0.2 ошибка 48 (reply to 268081)

sd: https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md#1-transfer (reply to 268085)

User<7418242907>: аа, спасибо. Понизил до 0.11 (reply to 268086)

User<7418242907>: Можете пожалуйста подсказать, как рассчитывать сумму? делить на 1000? (reply to 268082)

SweetJesus: у тебя в среднем на обычный трансфер токенов уйдет 0,04 - 0,05, к этой сумме прибавляй свой forward ton amount и отправляй. (reply to 268088)

User<7418242907>: А для чего вообще forward ton amount? (reply to 268089)

User<7418242907>: Ну когда нужно делать его большим, а когда нет

User<7418242907>: Можно ли сделать его 0 или 0.01?

sd: Тебе несколько раз скинули ссылку на стандарт в котором подробно описано каждое поле

SweetJesus: для transfer notification. Уведомление адресату о том, что пришли какие-то токены, от кого, сколько + forward payload если есть. Обычно если того не требует логика в forward ton amount можно ставить 1 нанотон, чтобы уведомление зафейлилось. (reply to 268090)

SweetJesus: ну и вообще да, лучше почитай что тебе скинули выше. (reply to 268091)

victxr: const response = await tonconnect_ui.sendTransaction({       validUntil: Math.floor(Date.now() / 1000) + 360, // 6 min       messages: [         {           address: "address",           amount: nano_amount.toString(),         },       ],     });   вот этот код возвращает boc подписанной транзакции, а реально провалидировать по публичному ключу этот boc? на питоне делал ктонить?

User<7418242907>: Понял, спасибо большое! (reply to 268095)

User<7418242907>: Это тоже в этой ссылке есть? (reply to 268088)

SweetJesus: У тебя фобия на ссылки в чатах? Там все есть, если открыть и внимательно прочитать. (reply to 268099)

Назим: {         'address': 'UQB-rsorEvHrJZBG6iOBBMc-P09zUa4FXFEhFZXv57xHRJ1i',         'amount': 0.001,         'send_mode': 3,         'payload': 'Test'     },     {         'address': 'UQAqfHFuWfSuBNOyns1u2w9woSaczTbHiXNHvTu9JGqdNNKM',         'amount': 0.001,         'send_mode': 3,         'payload': 'Test'     },     ... ]  boc_more = TransferMore(     recieps=recieps_more,     wallet=wallet_hv2.connector['wallet_object'] )  await boc_more.sign_boc(client=center_client, BagOfCell=boc_more.transfer)   TransferMore.transfer:   class TransferMore:     def __init__(self, recieps: Type[dict], wallet) -> None:         self.wallet = wallet         self.recieps = recieps      @property     def transfer(self):         transfer_message = self.wallet.create_transfer_message(self.recieps, 0)         boc = bytes_to_b64str(transfer_message["message"].to_boc(False))         return boc          async def sign_boc(self, BagOfCell: Type[str], client: Type[ClientTonCenter]):          return await (postMethod(client_ton_center=client).post('api/v2/sendBoc', data={'boc': BagOfCell}))      ...   Подскажите пожалуйста, почему он спамит? Списал весь баланс((

— 2024-11-22 —

SweetJesus: потому что не надо пользоваться 2 версией хайлоада. В неопытных руках можно запросто натворить делов. Есть v3. (reply to 268102)

Назим: у меня ласт версия, доступна только hv2 (reply to 268110)

Lacc_si: Всем привет Реализовываю "сканнер" поступающих на адрес транзакций посредством tonapi. Пингую каждые n секунд на наличие новых транз, если таковые присутствуют - фиксирую lt самой свежей транзакции и отталкиваясь от этого значения сканирую дальше.   И возникла дилемма, есть ли при таком подходе вероятность не отловить pending транзу? Может ли быть такое ,что у pending транзакции lt < чем у успешной транзакции? На сколько я понимаю в случае с tonapi это реально. И в таком случае зафиксировав lt успешной транзакции - я пропущу ещё не валидированную транзу. Кто что может посоветовать? Кто как реализовывал такого рода "сканнеры"?

Max: у тонапи есть же вебхуки. зачем пинговать самому? (reply to 268114)

Lacc_si: В случае непредвиденных ситуаций мне нужна отправная точка(в данном случае lt). Чтоб я мог перезапустить процесс с того же места,на котором остановился (reply to 268117)

Lacc_si: Мне нужны не только новые транзакции на данный момент, мне нужны все(

bastiang19: Pending только из мемпула достать можно  Так что ты только «завершенные» будешь получать (reply to 268114)

Lacc_si: Мне не нужно доставать pending, мне нужны как раз завершенные Но есть же вероятность что транзакция отправленная условно в 13:00:01 дойдет раньше(в tonapi),чем транзакция отправленная в 13:00:00. И при следующем круге сканирования я уже буду отталкиваться от lt той транзакции,что якобы "дошла" раньше. И больше не встречу ту транзакцию,которая на тот момент была pending Сложно,надеюсь понятно излагаю (reply to 268121)

sd: Ну запрашивайте последние N и среди них ищите новые, уже обработанные записывайте в блокнотик (reply to 268126)

voidnss: Подскажите, какой есть простой способ узнать возраст кошелька через питон?

rends_east: привет всем подскажите, как калькулировать нужное число газа для отправки сообщения со stateinit? у меня stateinit может быть разным для одного контракта, и надо понять, как уменьшать или увеличивать amount в сообщении, в зависимости от размера

/B4ckSl4sh\: Этот Стейтинит в контракте считается? Можно для него посчитать forward_ton_amount, но это будет не особо дешево (reply to 268135)

&rey: Режим +1 в отправке сообщения и всё. (reply to 268135)

rends_east: А если я хочу все оставшиеся деньги отправить ещё куда то, то я же не могу получить, сколько я отправил с тем сообщением (reply to 268139)

&rey: режим +128 (или +64) (reply to 268140)

rends_east: Но если сообщение с режимом 128 отправится раньше, то на сообщение с модом 1 не хватит газа Или мод 1 работает до action фазы? (reply to 268141)

AT: Всем привет, вопрос а что есть в теснете? Есть ли amm dex в теснете?

ᅠ: Ребят, добрый день. Вопрос от дилетанта.  Написал утилку, которая при вызове должна брать передаваемые в неё сумму, а также адреса кошельков и с помощью приват ключа отправлять средства на адрес кошелька, переданный в функцию. Функция не отрабатывает, вернее обрабатывается она корректно, возвращая 200, но в тестнете управление кошельком не работает, т.е. средства на зачисляются на кошельки / не снимаются с кошелька. Прошу поделиться опытом и помочь разобраться в проблеме.  async function sendTon(fromAddress, toAddress, amount) {     try {         const WalletClass = tonweb.wallet.all['v3R1'];         const wallet = new WalletClass(tonweb.provider, {             publicKey: MARKET_PUBLIC_KEY,             wc: 0         });          const walletAddress = await wallet.getAddress();         if (walletAddress.toString(true, true, true) !== fromAddress) {             throw new Error('Wallet address mismatch');         }              const seqno = await wallet.methods.seqno().call();                  const transfer = wallet.methods.transfer({             secretKey: MARKET_PRIVATE_KEY,             toAddress: toAddress,             amount: TonWeb.utils.toNano(amount),             seqno: seqno,             payload: '',             sendMode: 3,         });          const sendResult = await transfer.send();          logger.info(`TON transfer initiated: ${amount} TON from ${fromAddress} to ${toAddress}`);         return { success: true, transactionHash: sendResult.hash };     } catch (error) {         logger.error(`Error sending TON: ${error.message}`);         return { success: false, error: 'TRANSFER_ERROR', details: error.message };     } }

&rey: Это правда, поэтому отправлять надо в правильном порядке. (reply to 268149)

rends_east: Так порядок же не влияет на порядок исполнения транзакций Он влияет на порядок добавления в очередь (reply to 268175)

&rey: Он в частности влияет на порядок распределения тонов с баланса контракта. (reply to 268177)

Ma><im: всем привет! кто-то сталкивался с проблемой, что при составлении транзакции на подпись через tonconnect/ui на отправление TON на nonexist адрес - на IOS и Desktop всё работает, а на android сообщение bounced?   происходит nonexist -> nonexist   https://tonviewer.com/transaction/b1debb0d416c1540e107aa830640cf8abbd69dc4b80736036b9f1aef8af59a05

Ma><im: очень странно, код один и тот же, но на IOS всё ок, а на Android - нет

Ma><im: https://tonviewer.com/transaction/c1ad3cf729f5e10f9b4ebab46fb3fba5751d342c949a4313ec5b8a09c0543957  вот транзакция, подписанная на IOS через тонкипер (reply to 268180)

Ma><im: https://github.com/ton-connect/sdk/issues/277  более того, уже issue такое было

Ma><im: кто-то сталкивался с этим?

наз: всем привет, а в каких случаях твм может отдать 1 экзит код, есть примеры?

Danil: привет, есть у кого нить статический адресс со всеми токенами scam и fake ? Или как можно их определять ещё

集电极: У тонапи есть поле is_scam (reply to 268233)

Danil: он весь список предоставит ? и будет сам update ?

集电极: Только для запрашиваемого токена (reply to 268236)

&rey: Э, а у вас есть способ определить скам? Это вроде нерешённая социальная задача. (reply to 268233)

Danil: а все запарсить получится как то внутрь контракта ?

&rey: А нельзя "если юзер прислал вашему контракту какой-то токен, значит, он хочет работать именно с ним, и не ваше дело, скам это или нет"? (reply to 268239)

Danil: хороший вопрос

Danil: у меня суть в обмене токенами между 2мя 3ими лицами, и возможно целеесообразно оградить незнающих пользователей от таких жетонов

Danil: или с фронта видны подписи scam и fake ?

Oleg: Просто ограничь список допустимых токенов и не принимай остальные (reply to 268243)

Danil: и обновлять его при надобности ? хорошая идея , спасибо

Dmytro: деньги распределяются до отправки (reply to 268149)

rends_east: А где об этом почитать? Есть в доке? (reply to 268258)

Dmytro: Что именно ты хочешь почитать? (reply to 268260)

rends_east: что деньги в сообщениях распределяются до action фазы (reply to 268261)

&rey: Эм, так как раз в рамках action фазы, по порядку отправки. (reply to 268262)

rends_east: ну насколько я знаю, сообщения из очереди могут исполняться в произвольном порядке (reply to 268263)

&rey: Когда сообщения начнут исполняться, транзакция на контракте-отправителе уже давно закончилась. (reply to 268264)

Dmytro: нет они отправляются последовательно (reply to 268264)

Dmytro: а прийти могут в любом порядке уже (но есть детерменированные случаи)

&rey: Ну, лучше начать отсюда. https://docs.ton.org/tblkch.pdf#subsubsection.4.2.5 (reply to 268260)

rends_east: валидатор может решить исполнить их в другой последовательности? (reply to 268266)

&rey: Что значит "исполнить"? Прочитайте всё-таки вайтпейпер, который я скинул) (reply to 268270)

Jamal: У кого есть опыт разработки Смарт КОнтрактов на TON для депозита и вывода средств в USDT?

author: Есть фулстаки на опыте? У меня кластер из nginx+tonproxy+nodejs. Локально загрузка трека работает , а на хосте - 413 ошибка. Ставил в конфиге nginx разблокировку размера client_max_body_size 20M; и на стороне nodejs тоже ставил и multer валидатор и body-parser. с заголовками multipart/ form-data пробовал и выставлять и там и там, но как описано в документации то заголовки автоматом выставляются.   В самом конфиге nginx я заметил что если с location /api убираю хедер заголовка application/json то вообще никакие запросы не работают, поэтому я сделал динамическую переменную которая меняет заголовок в зависимости от контента на json либо form-data.  Ещё экспериментальным путём было выяснено что если загружать трек больше 1Мб, то 413 ошибка всплывает моментально в браузере еще на стороне отправки пакета в nginx, и до логов на сервере даже ничего не доходит.   Если меньше 1Мб, то post метод уходит на nodejs,но тот сразу ошибку в логи кидает сервера о PayloadTooLargeError. Хотя в nginx кладёт во временные файлы.  Подскажите если кто-то сталкивался…3ий день бьюсь в тупике.

Стас: Всем ку. Я новенький в сфере разработки смарт контрактов. Подскажите есть ли возможность написать смарт контракт для jetton(ton) чтобы при каждой транзакции(обмена  между пользователями этого jetton) отправлялась комиссия к примеру 1% от суммы этих jetton на третий кошелек? P.s. Буду благодарен за любую помощь/совет.

StasOff: Подскажите, можно как то через TONAPI  получить bulk адреса в формате non_bounceable? Или каждый отдельно в читаемый вид переводить через /v2/address/{account_id}/parse?

集电极: Вроде бы никак, но не нужно ради каждого адреса дёргать апи, если если пишете на питоне, то в tonutils есть метод для конвертации в любой формат локально, без апи. (reply to 268298)

StasOff: спасибо, нет, я на старом добром JS (reply to 268299)

集电极: Тогда в @ton/ton через Address.parse(...) (reply to 268300)

Cube: Есть (reply to 268297)

Стас: Можешь проконсультировать мб в личке? Плз (reply to 268305)

X1ag: Добрый вечер. Написал простенький пул и когда закидываю деньги в тестнете, то гет метод выводит вообще другую сумму.   Total Liquidity:  3475151850884773623n   Вот скрипт sendNumber:    export async function run(provider: NetworkProvider) {     const liqPool = provider.open(LiqPool.createFromConfig({}, await compile('LiqPool')));      await liqPool.sendNumber(provider.sender(), toNano('0.123'), 123n); } кто может подсказать в чем проблема?

X1ag: Вот функция добавления в пул  () save_liquidity(int total_liquidity) impure {         set_data(begin_cell().store_uint(total_liquidity,64).end_cell()); }  () deposit(int amount) impure {     ;; Проверяем, что пользователь отправил положительную сумму     throw_if(102, amount <= 0); ;; Ошибка: нельзя отправить 0 или отрицательную сумму      (slice owner_addr, int total_liquidity) = load_data();     ;; Добавляем средства в пул     total_liquidity += amount;      save_liquidity(total_liquidity); }

Cube: Такое ощущение что у вас load_data с save_liquidity не сходятся (reply to 268314)

X1ag: Вроде бы все сходится🧐 (slice, int) load_data() inline {     slice ds = get_data().begin_parse();     int total_liquidity = ds~load_uint(64);     slice owner_addr = ds~load_msg_addr();     return (owner_addr, total_liquidity); } (reply to 268320)

I16000: Используй узел а не тонапи (reply to 268126)

X1ag: А как должно быть тогда? (reply to 268322)

SweetJesus: у тебя в стейте 64 бита + адрес. Сохраняй значит так же 64 бита + адрес. (reply to 268333)

Бахтияр: Всем привет, никто случайно не знает как в @tonconnect/ui-react исключить некоторые кошельки из выдачи в стандартном модальном окне подключения? Буду благодарен, если кто-нибудь подскажет

Dmytro: не делай так никогда (reply to 268366)

Бахтияр: Почему? (reply to 268368)

Dmytro: Правила хорошего тона и прозрачной конкуренции (reply to 268369)

Бахтияр: Понял принял (reply to 268373)

Lacc_si: Ноду имеешь ввиду? (reply to 268323)

I16000: Да

Lacc_si: Да,уже задумался над этим вариантом Спасибо за совет! (reply to 268378)

Abdurakhmon: Привет всем

Назим: Result:    "ok": true,   "result": {     "@type": "ok",     "@extra": "1732291808.3966422:18:0.9940413477646646"   } }   code:       to_address='UQAHbQveS084NOyDkPsp_fGZSif3lexO_4zvyVkC96ipYTxH',     jetton_amount=to_nano(float(30), 'ton'), )  recieps = {     'wallet': wallet.connector['wallet_object'],     'address': 'EQCBwGKnA05Jrx_Y_GUBiUn0tyFQGHu5cn1J_1TZHa5lldeU',     'amount': 0.01,     'seqno': int(seqno),     'payload': body }  какая причина может быть?(

Abdurakhmon: Можете подсказать как реализовать мини апп в сети тон будет один криптокошелек как банк ползователи при пополнение баланса должен попасть в главный кошелек а при отправке widthdraw он должен отниматся от главного кошелька и отправляется в кошелку юзера

Abdurakhmon: можноли такое реализовать

Abdurakhmon: пожете помочь

Павел: Здравствуйте! Подскажите пожалуйста, появилось ли сейчас какое-то решение хранения NFT attributes onchain с отображением в тонапи? (reply to 200999)

Max: Лучше не беритесь, если уже на этапе идеи задаёте базовые вопросы (reply to 268390)

Abdurakhmon: у меня все готово только это осталось (reply to 268393)

xxx: Ll (reply to 268395)

Cube: Можешь в лс отписать? Без премиума первый не могу (reply to 268308)

Михаил: Наоборот же лучше, когда большой выбор (reply to 268366)

&rey: Сломанные кошельки, игнорирующие баунс. Версии, не поддерживающие... допустим, v5. (reply to 268368)

&rey: Правда, надо позволять всё равно их подключить.

Алексей: Добрый вечер, есть вопрос. В сторону какой библиотеки смотреть. Если просто нужно чекать транзакции и коменты к ним?

Алексей: Не, нужно на питоне. В свой проект встроить

Torkusz: Если питон, то https://github.com/tonkeeper/pytonapi?ysclid=m3t4v5w1mr445431601 (reply to 268417)

集电极: tonapi sse если правильно понял (reply to 268417)

Алексей: Ну в теории, просто буду чекать каждую секунду - пришла ли транзакция на определенный кошелёк, с определённым коментом.

Torkusz: Тогда sse или веб-хуки в тон апи (reply to 268422)

Алексей: Благодарю

наз: а как в блюпринте послать сообщение со стейтинитом?  типа такого  cell state_init = calculate_jetton_wallet_state_init(to_address, my_address(), jetton_wallet_code);     slice to_wallet_address = calculate_jetton_wallet_address(state_init);     var msg = begin_cell()     .store_uint(0x18, 6)     .store_slice(to_wallet_address)     .store_coins(amount)     .store_uint(4 + 2 + 1, 1 + 4 + 4 + 64 + 32 + 1 + 1 + 1)     .store_ref(state_init)     .store_ref(master_msg);     send_raw_message(msg.end_cell(), 1);

Victor: В «ton/ton» есть StateInit в него засовываешь код и дату, потом в internal есть параметр init (возможно по другому называется)  Все

наз: что то не вижу параметра init (reply to 268434)

&rey: Это кто-то пропустил при создании библиотеки. Или StateInit сам собой приложится, что вероятнее. (reply to 268435)

наз: а не найдется случаем примера как это провернуть? (reply to 268436)

&rey: Сам собой приложится? при отправке любого сообщения через ContractProvider, естественно. Хотя в TC2-враппере, помнится, умудрились тоже init забыть — придётся менять в node_modules. (reply to 268437)

Назим: ?( (reply to 268385)

&rey: Крайняя нехватка 0.01 тон для перевода чего бы то ни было, кроме самих тонов. (reply to 268385)

Назим: а сколько нужно? (reply to 268440)

&rey: 0.07 обычно или около того. (reply to 268441)

наз: достаточно будет создавать блокчейн с кофигом мейннета как тут чтобы тестировать взаимодействие моего контракта с контрактами в мейннете, или нужен в том числе код контрактов, если я знаю как себя поведут контракты в мейннете?

Назим: благодарю, сработало, и еще вопросик  как через hv2 реализовать переводы жеттонов? если в JettonWallet нужно указывать адрес получателя, а их много (reply to 268442)

наз: может отсюда взять референс https://gist.github.com/welaskez/cbd71e3fa3b37bdfd2656d41610e49e5 (reply to 268444)

Назим: нашел, спасибо! (reply to 268445)

наз: from pytoniq import LiteBalancer, HighloadWallet, begin_cell  mnemonics = ['word1', 'word2', '...']  JETTON_MASTER_ADDRESS = 'your jetton master address'   async def main():     async with LiteBalancer.from_testnet_config(trust_level=2) as provider:         highload_wallet = await HighloadWallet.from_mnemonic(provider, mnemonics)          USER_JETTON_WALLET = (await provider.run_get_method(             address=JETTON_MASTER_ADDRESS,             method="get_wallet_address",             stack=[                 begin_cell()                 .store_address(highload_wallet.address)                 .end_cell()                 .begin_parse()             ]         ))[0]          destinations = {             ADDRESS1: AMOUNT1,             ADDRESS2: AMOUNT2,         }          forward_payload = (             begin_cell()             .store_uint(0, 32)             .store_snake_string("Your comment")             .end_cell()         )          bodies = []         for destination, amount in destinations.items():             bodies.append(                 begin_cell()                 .store_uint(0xf8a7ea5, 32)                 .store_uint(0, 64)                 .store_coins(int(amount * 1e9))                 .store_address(destination)                 .store_address(highload_wallet.address)                 .store_bit(0)                 .store_coins(1)                 .store_bit(1)                 .store_ref(forward_payload)                 .end_cell()             )          await highload_wallet.transfer(             destinations=[USER_JETTON_WALLET] * len(bodies),             amounts=[50000000] * len(bodies),             bodies=bodies         ) (reply to 268446)

&rey: forward amount лучше всё же нулевой поставить, существенно меньше траты будут. (reply to 268448)

наз: пример боди я брал с кукбука когда это писал (reply to 268452)

Victor: Распиши какая задача перед тобой стоит ? (reply to 268435)

наз: есть один контракт, который в результате транзакции минтит дочерный, хочу написать тест у дочерного контракта на успешный минт (reply to 268455)

Victor: Тут нужно написать враппер для мастер контракта и для дочернего, потом в тесте создать обо контракта. Затем тестишь (reply to 268457)

Victor: вот пример  https://github.com/ton-community/mintless-jetton/tree/main (reply to 268457)

наз: окей, благодарю

— 2024-11-23 —

rends_east: а правильно ли я понимаю, что jetton-wallet пользователя может быть в другом воркчейне относительно него? то есть юзер в обычном воркчейне, а jetton-wallet в мастерчейне

SweetJesus: *force chain нервно курит*  Ну вообще тебе вроде ничего не мешает вручную задеплоить жетон валет в мастерчейн и убрать форс чейн, только зачем... Трансфер жетонов в целом не дешевое удовольствие, а так будет еще дороже. (reply to 268482)

rends_east: Ну я на будущее спрашиваю видел где то, что юзера force_chain-ом проверяют, а кошелек его нет (reply to 268483)

&rey: Кошелёк проверяют сверкой адреса с эталонным зато. (reply to 268484)

X1ag: Всем доброе утро, не понимаю почему ошибку выдает   Unable to execute get method. Got exit_code: 9 async getInfo(provider: ContractProvider){            const result = (await provider.get('getLiquidityAndOwner', [])).stack;            return [(result.peek() as TupleItemSlice).cell.asSlice(), result.readBigNumber()];              }        }  Вот гет метод в FunC  (slice, int) getLiquidityAndOwner() method_id {    slice ds = get_data().begin_parse();    int total_liquidity = ds~load_uint(64);    slice owner_address = ds~load_msg_addr();     return (owner_address, total_liquidity); }

&rey: Сразу две ошибки: 1. Не заполнили хранилище контракта. 2. Читаете из стека как-то странно (не убираете адрес) (reply to 268491)

X1ag: Вот тут заполняю хранилище  () save_liquidity_and_owner(int total_liquidity) impure {     slice owner_addr = "0:8252b7b4f0ea5adeed8e9002d31dc6f475ba04f85527932a0ea895533b58791c";     set_data(begin_cell().store_uint(total_liquidity,64).store_slice(owner_addr).end_cell()); } (reply to 268498)

SweetJesus: недостаточно просто строкой положить адрес. (reply to 268500)

SweetJesus: slice owner_addr = begin_cell().store_uint(1024, 11).store_uint(hash, 256).end_cell().begin_parse() (reply to 268500)

SweetJesus: если так уж хочется захардкодить raw адрес. Почему в стейт сразу не прокинуть просто его? (reply to 268503)

X1ag: не хочется хардкодить, просто я не знаю как явно указать owner (reply to 268504)

SweetJesus: при деплое сразу прокидывай его в стейт ините и всё. В контракте грузи/сохраняй. (reply to 268505)

X1ag: export type LiqPoolConfig = {     owner_address: Address };  export function liqPoolConfigToCell(config: LiqPoolConfig): Cell {     return beginCell().storeUint(0,64).storeAddress(config.owner_address).endCell(); } Вот так грубо говоря? (reply to 268506)

X1ag: благодарю @dimebag_darrell

XD: Доброго времени суток, хотел спросить а ранее писал как получить транзакции кошелька, уже нашёл решение в примерах. Но вопрос теперь вот в чём, как я понял, я могу получить данные о том сколько тон пришло или ушло, а что касается других токенов? Как мне их получить? В какую сторону капать?

XD: Условно были отправлены(или получены) догс, но я вижу только сколько тон я получил или отправил(даже если это комиссия) (reply to 268524)

集电极: Tonapi (reply to 268524)

XD: Ну я её и использую, только в питоне. В примерах объясню: Есть транзакция, было отправлено/получено догс на 10 000, но когда я достаю с помощью библиотеки(pytonapi) последние транзакции и пытаюсь получить value, мне выдают только сколько тон пришли/ушли. А я бы хотел достать количество догс (reply to 268528)

&rey: Следите за internal transfer на жетон-кошелёк, проверяя exit code. (reply to 268531)

XD: То есть у кошельков, есть ещё отдельные жетон-кошельки в которых показывают транзакции с другими токенами кроме тон? (reply to 268533)

XD: Понятно, спасибо ) (reply to 268533)

Svαtoωλ‎: а через какое апи можно получить допустим цену NOT во всех пулах

&rey: Помните, что у любой транзакции в тоне value – это тоны. Жетоны – абстракция и требуют вызывать гет-методы на контрактах. (reply to 268535)

集电极: Dexscreener, geckoterminal Либо напрямую с апи stonfi/dedust (reply to 268540)

Svαtoωλ‎: у меня нет контракта, мне надо с названия монеты получить пары в тон/юздт/всякое (reply to 268542)

集电极: Значит по названию ищи контракт в tonapi, либо в dexscreener есть возможность также по названию искать пулы (reply to 268544)

Бахтияр: Всем привет, подскажите никто не знает случаем как при подключении кошелька выполнить определенный код, вот мы зашли на сайт, нажали connect, отсканировали QR и после того как отсканировали идет подключение кошелька, и в этот момент мне нужно выполнить мой код

&rey: Ну, как бы, элементарно? connector.onStatusChange вроде (reply to 268587)

Бахтияр: Мне нужно чтобы отработал 1 раз, только при подключении, а тут когда я обновляю страницу, он отработает еще раз (reply to 268602)

sd: После подключения запиши в локалсторедж переменную и затем проверяй ее наличие? (reply to 268604)

Бахтияр: Ну так и сделал в итоге

KIRILLOF: Привет. Начал изучение и у меня возникает ошибка при деплое кошелька в тестнет. Можете помочь?

KIRILLOF: Видимо я использую python 3.11, а надо 3.9 (reply to 268613)

Alacrity: какую либу используешь? (reply to 268616)

KIRILLOF: По уроку pathlib, как задеплоить через tonsdk? (reply to 268617)

X1ag: Ребят, подскажите, как в тестах к смарт контракту проверить отправку с определенного кошелька(например, протестировать как ведет себя SC, если транзакцию совершает owner)?

X1ag: используя технологию blueprint

/B4ckSl4sh\: Используйте ton sandbox, он встроен в блюпринт (reply to 268624)

KIRILLOF: Есть вариант deploy на python 3.11? (reply to 268620)

RootTon: Народ всем привет, можно ли как то самому сделать свою кнопку подключения к кошельку? при этом чтобы открывалась такая же модалка

sd: .openModal() (reply to 268628)

Avler: Что-то примерно такое const [tonConnectUI] = useTonConnectUI(); <button onClick={tonConnectUI.openModal} /> (reply to 268628)

RootTon: спасибо большое!

RootTon: да оно работает токо раз от раза ... в чем может быть проблема не знаете? (reply to 268630)

KIRILLOF: подскажите пожалуйста, при попытке задеплоить кошелек возникает ошибка

KIRILLOF: решил проблему, надо было поменять ls_index (reply to 268637)

Avler: А можно код? (reply to 268633)

🙈🙉🙊: Тон красава, порадовал сегодня ♥️

Максим: Привет , а в боте можно сделать оплату старсами без аппки?

web-assist 🧀: Можно

Максим: Спасибо! (reply to 268655)

RootTon: если вы думаете что это из за онклика на div то нет

sd: Покликай по ссылкам, у меня норм работает, правда я не целиком заменяю кнопку, а юзаю метод когда юзер пытается совершить что-то без авторизации (reply to 268633)

RootTon: такая штука чаще вылезает чем валет открывается ) (reply to 268660)

Molodoy Abuzer 1: Всем хай. Хочу сделать boc в формате hex, чтобы передать его в тело запроса для эмуляции сообщения в tonapi v2. Вроде сделал все по доке, но tonapi возвращает not enough bits. Подскажите пожалуйста где допускаю ошибку?

Максим: Еще вопросик, можно пожалуйста ссылку на документацию fragment api

集电极: У фрагмента нет апи) (reply to 268668)

Максим: на "холостых" запросах можно будет заказы делать? Нет защиты там какой нибудь

集电极: Что имеете в виду под "заказами"? (reply to 268672)

Максим: нужно все автоматизировать, просто

&rey: 1. оффтоп 2. А вы уверены, что ToS телеграма это вообще разрешает вам? (reply to 268675)

Molodoy Abuzer 1: Можно автоматизировать. Юзай тг акк как акк бота. Крч сессию дай. Ты можешь дарить звёзды и тг премиум себе и друзьям через бота PremiumBot. По сути твоя зачала это автоматизировать отправку сообщений этому боту и подтверждения оплаты. Вопрос получился ли это сделать кодом или придется юзать эмуляцию (reply to 268675)

User<7931577249>: там чел через фрагмент хочет (reply to 268678)

Molodoy Abuzer 1: Все через фрагмент хотят (reply to 268679)

Molodoy Abuzer 1: Великий тон дев, подскажите  пожалуйста по моему вопросу 5 сообщениями выше. Я реально застрял (reply to 268676)

&rey: 1. надо попробовать boc.toBoc({crc32: false, index: false}).toString('hex') 2. посылать что-то с кошелька с режимом отправки 0 (любым, не включающим флаг 2) — не комильфо 3. а internal так работает? ну если да, то ладно (reply to 268666)

Molodoy Abuzer 1: 2) 0 же стандартный для переводов обыкновенных? Почему не подходит в таком случае? 3) а что с ним не так :( (reply to 268682)

&rey: 3 или 2 в переводах. Обычно 3, чтобы получателю пришло тонов ровно сколько сказано. (reply to 268685)

Molodoy Abuzer 1: 3 это который 32? Просто в типах не вижу значения 3 (reply to 268686)

&rey: IGNORE_ERRORS | PAY_GAS_SEPARATELY (reply to 268687)

Avler: Кста, есть свойство tonConnectUI.connected А больше нигде тонконнект не юзается? (reply to 268657)

Svαtoωλ‎: @subden /v2/accounts/{account_id/jettons  возвращает просто все жеттоны юзера?   мне бы прост 10 самых релевантных получать по нему, а не все подряд

Svαtoωλ‎: я вот хз как самые последние получить))))

集电极: Ну так отсортируй🤔 (reply to 268692)

Svαtoωλ‎: по чему (reply to 268694)

SB: Всем привет! Подскажите плиз если выставить анонимный номер на продажу на Фрагменте и его кто то купит - что случится с моим акком в телеге, привязанным к этому номеру?

Avler: 1. Это чат по разработке 2. По сути, когда номер выставляется на продажу, он уже должен слететь с аккаунта (сужу по логике работы NFT) (reply to 268702)

SB: Сначала надо другой номер привязать? Потом выставлять на продажу? (reply to 268703)

Avler: По сути да Лучше узнать это в каком-нибудь тематическом чате (хотя хз есть ли чаты по номерам) (reply to 268704)

sd: Это не так, номер не слетает. Аккаунт остаётся привязанным к номеру и новый владелец может авторизоваться. Об этом предупреждает сам фрагмент при попытке выставить такой номер. (reply to 268703)

RootTon: Нет (reply to 268689)

Molodoy Abuzer 2: Типы вы угараете? Кто меня по кд банит? Правил не нарушаю, уже 4 акк отлетает, имейте совесть

集电极: Оффтоп здесь не приветствуется https://t.me/tondev/268678 (reply to 268712)

Назим: всем привет, возможно как то увеличить лимиты в tonapi io ?  {'error': "can't decode address Ratelimit exceed"}  если что, у меня есть apikey

Vladimir: Взять другой тариф? (reply to 268718)

— 2024-11-24 —

User<7013725067>: Как можно получить больше 2 монет тон на кошелек? для моей задачи нужно очень много тон

Vladimir: Купить на tonconsole com. (reply to 268727)

Beautiful: Ничего, до тех пор пока новый владелец его не использует, а дальше сброс... (reply to 268702)

Andy: Так а зачем смарт контракт тебе? Отправляй транзакцию и пиши назначение платежа

Investor: Нужен разработчик на python доделать бот. Оплата 1200 TON за проект, дедлайн месяц. Бот тапалка, проект легкий, бэк / фронт / фигма файлик есть

User<7996237794>: Напишите , обсудим с вами. (reply to 268753)

Andrei: Всем привет Смотрю спецификацию wallet v5, там есть механизм расширений (extensions) https://github.com/ton-blockchain/wallet-contract-v5/blob/main/Specification.md#extending-the-wallet Но че-то нигде не могу найти инструкций/доки/пример, как именно делать расширения. Может кто подсказать, где это найти?)

Alacrity: Пишу на FunC контракт. При указании типа строки s: "common.json"s, возвращается ошибка   error: Invalid hex bitstring constant common.json   В чем может быть проблема?

&rey: Эм, так строка — просто "common.json", без суффикса s... (reply to 268757)

Alacrity: чем отличаются эти строки тогда? (reply to 268758)

Alacrity: в доке это увидел (Literals and Identifiers)

&rey: А вы же знаете, что такое слайс x{c0ffee}? (reply to 268760)

Alacrity: нет

&rey: Ну, в TVM есть такое понятие, как ячейки и кусочки ячеек (слайсы). Слайс записывается в шестнадцатеричном виде: x{c0ffee0} — 28 бит (байт C0, байт FF, байт EE, 4 нулевых бита). (reply to 268763)

Alacrity: думал, запись x{} обозначает ячейку

Alacrity: то есть суффикс s переводит в хекс?

Alacrity: понял, спасибо

Andrei: Привет! Подскажите, пожалуйста  Допустим у меня определены 2 message в контракте   message One {     id: Int;     amount: Int; }  message Two {     id: Int;     amount: Int; }  В зависимости от того, кокой message type отправлен смарт контракт делает разные вещи. Вопрос в том, каким образом я могу передать message type в случае, если я отправляю message из какого-нибудь клиента?  Или это невозможно?

ダーリン: используя автосгенерированный (в случае Tact) враппер для этого контракта, там есть интерфейс, необходимый для взаимодействия с ним (reply to 268769)

Oleg: Не переводит, а интерпретирует как (reply to 268766)

X1ag: У меня у одного так, что когда начинаю писать в чат свою ошибку, то нахожу ее решение еще до того как отправил? Хотя до этого минут 40 точно убил. Лол  и так уже раза 3 было

Alacrity: Создаю нфт-коллекцию, метаданные для коллекции загружаются правильно, а commonMetadata - нет. Заметил в tonnft tools, что в начале строки стоит \u0001, как будто лишний бит загрузился в общую метадату.  В чем может быть проблема?

Василий: storeStringTail тоже пишет префиксный байт (reply to 268780)

Alacrity: метадата коллекции правильно подгружается

Alacrity: на tonnft tools отображается вот так

User<8189408355>: I'm looking for someone who can create a parser (NFT). For more information, please contact me directly.   Мне нужен человек, который создаст парсер для NFT. Подробнее в личном сообщении.

Cube: В collectionMetaCell префикс уберите (reply to 268780)

Molodoy Abuzer 3: Здравствуйте. Подскажите пожалуйста, чем отличается в tonapi wallet/emulate от events/emulate. Хочу рассчитать комиссию за перевод ton/jetton, что лучше использовать?

Denis: если кодов жетонов не много то лучше один раз померять и записать константой (reply to 268805)

Denis: но если таки хотите через эмуляцию то лучше вот это

Denis: типичная ошибка. лишний нулевой байт (reply to 268790)

Andrew: Добрый вечер. Поставил тонкипер на iPhone 15 pro. Дев Меню открывается, но там пустота только заголовок «Dev Menu”. Так задумано?

Dmitry | backend4you.ton: На 13 то же самое. Наверное версия 5.0.6(3) чуток сломалась (reply to 268810)

Andrei: Как я понял да. Теперь типа не нужно в дев меню вообще ходить. Тестнет можно импортировать с главной страницы.  Не очень понятно зачем вообще дев меню оставили тогда (reply to 268810)

Denis: На всякий случай уточню: констант надо две. Когда у получателя есть/были эти жетоны и когда он их получает впервые (reply to 268807)

Andrei: Не, они так и задумали  https://t.me/tondev/267636 (reply to 268811)

Molodoy Abuzer 3: Спасибо. А можно ли использовать эти эндпоинты для testnet? (reply to 268808)

Max: testnet.tonapi.io (reply to 268816)

Andrew: Подскажите, плиз. Создать тестовый кошелек тоже можно с главной страницы? (reply to 268812)

Dmitry | backend4you.ton: Попробуй. Нажми добавление кошелька - в самом низу должен быть тестнет. Я уже раньше включал девмод, так что то что у меня есть - не показатель. (reply to 268818)

Andrei: Wallet list-> add wallet -> import testnet wallet.  Нет понятия «создать тестнет wallet”, можно только импортировать.  Любая seed фраза подойдет (reply to 268818)

Molodoy Abuzer 3: Хм. А не знаете с чем может быть связана ошибка grams overflow? (reply to 268808)

Denis: Очевидно слишком большое число где-то. (reply to 268821)

Denis: Возможно из-за неправильно собранного сообщения

Molodoy Abuzer 3: Вчера задавал подобный вопрос в чате, вроде исправил все. Подскажите где может быть ошибка? (reply to 268825)

RootTon: Народ всем привет, подскажите плиз из за чего может быть ошибка ? Пытаюсь написать кастомную кнопку для подключения к кошельку но при вызове метода падает ошибка. С чем может быть связано или как это можно пофиксить ?

RootTon: Вот код

Molodoy Abuzer 3: Лично я использую  const { open } = useTonConnectModal() (reply to 268829)

RootTon: Хм, учту и попробую, спасибо (reply to 268830)

Оля: Привет, существуют ли раст крейты для работы с higload wallet v3?

Владимир: Ребят может кто помочь со соедущющей проблемой перевел деньги с байбита на окх и в мемо не пописал последнюю цифру.  Переводил в сети тон  В итоге деньги не зачислили и окх кормит завтраками уже 9 дней.  Могу ли я их как то получить через их обратно через супорт тон?

Оскар: нет (reply to 268853)

Oleksandr: Привет всем! Подскажите кто пробовал сделать деплой контракта через реакт? Нашел документацию по этому вопросу, но там мне не особо понятно. Пример с документации import { beginCell, Cell, contractAddress, StateInit, storeStateInit } from '@ton/core';  const [tonConnectUI] = useTonConnectUI();  const init = {     code: Cell.fromBase64('<CONTRACT_CODE>'),     data: Cell.fromBase64('<CONTRACT_INIT_DATA>') } satisfies StateInit;  const stateInit = beginCell()     .store(storeStateInit(init))     .endCell();  const address = contractAddress(0, init);  await tonConnectUI.sendTransaction({     validUntil: Date.now() + 5 * 60 * 1000, // 5 minutes     messages: [         {             address: address.toRawString(),             amount: '5000000',             stateInit: stateInit.toBoc().toString('base64')         }     ] });

Андрей: Нет конечно, вам не смогут помочь сторонняя техподдержка отличная от окх (ждите сообщения от доброжелательных помощников - скамеров которые якобы смогут помочь) И скорее всего ваш депозит уже зачислен на другого пользователя с id который вы указали в комментарии к переводу, поэтому и окх не смогут помочь. Потому что они не могут идентифицировать пользователя и кошелек с которого пришли монеты, поэтому идентификация идет комментарием к переводу с указание id вашего аккаунта на окх (reply to 268853)

Владимир: Они могли зачислиться другому даже если я написал на одно число меньше ? (reply to 268857)

Ma><im: всем привет!  отправлю с фронта через await tonConnectUI.sendTransaction(transactionData); транзакцию на nonexist адрес, ожидаю, что он станет uninit после этого (что логично)  проблема в том, что на IOS и на десктопе всё ок, а на Android откуда-то в external берётся флаг bounce: true

Ma><im: как следствие, на андроиде ничего не работает, сообщение отлетает   отправлю я в двух случая на U-версию адреса

Ma><im: какая-то мистика, на понимаю как решать (reply to 268859)

Владимир: И могу я как то посмотреть пришли ли они на конкретный кошелек или зависли на кошельке окх (reply to 268857)

Denis: а вы адрес в каком формате передаете? (reply to 268859)

Ma><im: U-формат. тут не в адресе проблема, как я понял. именно в самом теле external’а, который идёт на кошельёк bounce флаг на IOS - false, а на Android - true. я не понимаю как это поменять (reply to 268863)

Ma><im: и почему от платформы к платформе мне tonconnect разные тела собирает, я в коде ничего не меняю)

Denis: ну адрес по стандарту должен ставиться из адреса (reply to 268864)

Denis: если адрес нон баунс то должно слать нон баунс

Denis: возможно правда какая-то версия что-то ломает

RootTon: Народ всем еще раз привет, у меня все таже проблема с кастомной кнопкой, как посоветовали я сделал открытие модалки через useTonConnectModal, однако когда я нажимаю на кошелек появляется все та же ошибка

Ma><im: скорее всего, непонятно только что делать, менять SDK? (reply to 268871)

Ma><im: очень неприятно выходит(

&rey: попробуйте менять urlsafe и другие флаги (reply to 268864)

Ma><im: в объекте адреса? (reply to 268876)

Molodoy Abuzer 3: Мб в манифесте ошибка (reply to 268872)

RootTon: В другой дапке что щас в проде нету проблем с манифестом, я спер его от туда) (reply to 268878)

F: Как и обещали приглашаем протестировать бета версию крон-провайдеров в тестнете: https://xssnick.github.io/cron-manifest/ui/  Исходники крон контракта: https://github.com/xssnick/cron-contract  Исходники крон провайдера (скоро будет встроено в storage провайдер): https://github.com/xssnick/tonutils-storage-provider  Обсуждение в данном топике приветствуются (ответы на данное сообщение) (reply to 266287)

Сева: у кого-то было такое?

&rey: ctxNextCallTime = now() + ctxRepeatEvery; Сообщение до cron-contract может идти по шардам и придёт неизвестно когда; для первого вызова лучше брать utime_gen, наверно, из входящего сообщения. (reply to 268880)

Denis: говорят поправили и будет в следующем апдейте (reply to 268874)

Ma><im: такая ошибка уже встречалась, какой апдейт, может есть какой-то issue на гитхабе? уточните, пожалуйста (reply to 268883)

Denis: а может гет-метод как-нить более говоряще назовём (reply to 268880)

Denis: надо проверку еще на то что ревард шлётся не в мастерчейн

Denis: иначе можно спалить баланс быстрее чем было задумано автором контракта

Anton: Апдейт 5.0.16 будет на след неделе (reply to 268884)

&rey: Кстати, хотелось бы услышать опыт тех, кто такой контракт уже использовал (100% же было),  и желаемые гарантии. Например, системе контрактов может быть надо ровно по одному сообщению за каждую минуту (если кто-то пропустит, потребуется дальше всё-таки послать). (reply to 268880)

Denis: в третьих предлагаю не делать обязательно отдельным контрактом а скорее стандартизировать интерфейс. а это просто рефернсная имплементация. поясню: делать отдельный контракт для крона под каждый свой контракт который требует регулярных вызовов может быть неудобно (например как его дропнуть если вызовы больше не нужны) и дорого (потому что лишняя пересылка интерналов. скорее нужно стандартизировать гет метод типа get_cron_info и стандартную схему экстернала. типа trigger#deadbeef reward:MsgAddress = ExtInMsgBody;

&rey: и пинганите меня, пожалуйста, когда стандартизируете — повешу вызов плагинов в кошельке на этот опкод (чтобы можно было сразу с inplug-v3 отправить отложенное сообщение) (reply to 268891)

Denis: а кстати sendMessage нельзя уронить некорректным адресом?

Denis: вплане уронить компьют фазу а не экшен

&rey: вроде нет, там же ~500 бит максимум в адресе

Denis: а причем тут битность?

Denis: я скорее про реализацию функции в sendMessage в стандартной либе толка

&rey: а там что-то сложное? один опкод вроде упасть никак не может (reply to 268897)

Denis: а. это просто алиас для опкода SENDRAWMSG а он вроде не падает

RootTon: кому нужно будет: проблема была в том что в этой dapp ранее была обычная кнопка от tonconnectui и был подключен профиль, и где то это подключение хранилось из за чего и была ошибка (reply to 268872)

Dmytro: А давайте не писать референсные имплементации на языке который буквально вчера появился. Дождемся хотя бы 1.0 версии.

Dmytro: А, у фанси тоже нет стабильных версий🤔

Dmytro: Но все равно делать реализации каких-то контрактов которые могут пойти в широкую аудиторию на языке который зарелизили две недели назад, про который явно говорили что он не готов для прода, звучит не очень.

Denis: ты про то что нет 1.0.0 версии? у нас в тонапи в проде работает v0.0.100 (reply to 268902)

Slava: var bData: int = data.loadUint(1 + 4 + 4 + 64 + 32); assert(bData == 0, 102);  эта валидация не дает отправить экстракарренси. скоро вроде как появится tgBTC как первый экстракарренси, было бы полезно работать с этим (reply to 268880)

Andrei: Привет! Подскажите, пожалуйста У меня сообщение на смарт контракт несет value. (deposit) Однако по какой-то причине получаю обратно сумму - fee В чем может быть причина?

Andrei: Вот Deeplink ton://transfer/EQDDWyoEIHldEZil8E-zxnK70wV58U9VJ6JKP7-NFwkixGm6?amount=1000000000&bin=te6ccsEBAQEACgAKABAAAAAAAAAACy0++U4=  Вот message message Deposit {    id: Int; } (reply to 268928)

ダーリン: message mode нужно 1 поставить (reply to 268928)

ダーリン: https://docs.ton.org/v3/documentation/smart-contracts/message-management/message-modes-cookbook

Дімка: Доброй ночи

Дімка: У кого можно поинтересоваться про мой перевод на байбит, а они вернули а ton нет

— 2024-11-25 —

Victor: Ничего не понятно, но очень интересно (reply to 268937)

Sutako: Привет, кто-нибудь проводил транзакции TON в python? У меня сейчас есть пополнение через tonconnect, но оно очень плохое. <script src=«https://unpkg.com/@tonconnect/ui@2.0.6/dist/tonconnect-ui.min.js»></script> Вывод с помощью ts  import { getHttpEndpoint } from «@orbs-network/ton-access»; import { internal, fromNano, TonClient, WalletContractV4 } from «ton»; import {mnemonicToWalletKey} from «ton-crypto» Я хотел бы сделать все на python. Искал информацию, пробывал библиотеку прошерстить, уже шесть часов бошку ломаю, результатов почти нет, инфы тоже нет, установил pip3 install tonsdk pip3 install pytonlib Есть ли какая-нибудь четкая документация о том, как делать транзакции?

Sutako: На ts, было вообще просто, скопировал, потыкал, все готово 😐 (reply to 268956)

Arseny: https://youtube.com/playlist?list=PLyDBPwv9EPsC-7xbn8b8noZh9a1Xkg42W&si=1nRD5lzifqP5c0E1 (reply to 268956)

Sutako: Ты делал по этому гайду? Я снего пришел, там инфа устарела, и ничего не работает, у меня проблема с получением seqno (reply to 268958)

Arseny: на тот момент когда я делал, у меня все работало ☺️ (reply to 268959)

Sutako: Если уметь, дела максимум на час, ненавижу библеотеки рыть и инфу искать подолгу 😐 (reply to 268960)

Sutako: Почему, например ston, на ts? (reply to 268962)

Avler: https://t.me/pythonnton

author: Делаю муз.хостинг.на тоне. Использую кластер nginx+tonproxy+nodejs.   Ловлю 413 ошибку при загрузке аудио на сервер, несмотря на выставленный client_max_body_size в конфиге nginx и multer на стороне сервера.   При отправке Через postman на белый ip в обход tonproxy - файл доходит.   Подозреваю ограничение на стороне гейтвея (на лайтсерверах), существует какое либо решение вмешательства в конфиг тонпрокси?  Щас пока склоняюсь к тому чтоб сделать загрузку через роут белого ip но это портит всю концепцию.  Я бы попробовал разбивать файл на порции меньше 1Мб,и склеивать после получения ,НО 413 - выдается даже при размере меньше 1Мб если через тонпрокси. Если больше 1Мб - то ещё на стороне браузера выскакивает ошибка и до серверных логов не доходит, а если меньше - то в логах сервера вижу как раз PayloadTooLargeError. Возможно ещё подмена заголовков происходит в гейтвее..

RootTon: Всем привет, можно ли как то без tonapi преобразовать вот такой адрес  0:18470d38273528d4810ae932fabca7e8b3aea0b1d37abd415f25e03738e8ce7c в U-формат ? p.s: использую tonconnectui

F: now нам гарантирует что вызов будет сделан не раньше заложенной даты, а если брать из сообщения то провайдер может читерить Ну и в целом задержки по шардам тут нет тк экстернал (reply to 268882)

Svαtoωλ‎: Что такое тикток (reply to 266275)

&rey: я про инициализацию (reply to 268971)

F: тогда там суть в том чтобы совсем мусор случайно не положили, для инициализации не дорого, но может сохранить кому то деньги тк отбаунсит (reply to 268975)

Андрей: А как интерфейс гарантирует получение награды провайдером? Контракт это гарантирует своим кодом (reply to 268891)

Molodoy Abuzer 2: Подскажите пожалуйста где допускаю ошибку при формировании boc для перевода ton. Пихаю его в tonapi эндпоинт для эмуляции. Ошибка - grams overflow

Andy: /report

Andy: @f_closer антиспам сломался

Denis: Никак. С другой стороны если экстернал послал а тебе ничего не прислали то блочишь этот код (reply to 268977)

F: бывает иногда что комбот тормозит (или api телеграма), ничего не поделать (reply to 268984)

ᅠ: Привет!   Реализую систему транзакций и внутреннего баланса в TON. Функционал относительно прост, включает в себя пополнение внутреннего баланса с помощью TONConnect, транзакции внутри проекта и их обработку с взиманием комиссии, а также вывод средств с баланса на кошелёк пользователя.   Хочу проконсультироваться с опытными спецами. Подскажите, пожалуйста, критично ли наличие контрактов для каждого процесса? Существует ли некая best-practice по реализации подобной системы?

Александр: Привет! Хочу распарсить метадату жеттона, которая приходит при вызове get_jetton_data. Экзампл из доки не работает. Кто-нибудь знает где еще можно подглядеть варианты? Через тонапи не хочется :)

Бахтияр: Дароу гайс, вопрос такой, почему возврат не работает на мобилке? tonConnectUI.uiOptions = {         actionsConfiguration: {             returnStrategy: 'back'         }     };

Anton: Что значит на мобилке в каком приложении и на какой платформе (reply to 269050)

Бахтияр: ios tonkeeper

Cube: Как не работает.. (reply to 269044)

Бахтияр: Я незнаю как)

Александр: Ну может я что-то упустил (reply to 269099)

Александр: Но вроде чистейшая копипаста

Max: Пока что returnStrategy: back не поддерживается айосом  В свежей мажорной версии iOS прикрыли системное апи, которое использовалось для реализации возврата назад  Иных способов это красиво сделать, к сожалению, нет (reply to 269050)

Бахтияр: А какие способы существуют на данный момент? Сможешь подсказать? (reply to 269103)

Viacheslav: может ли слать tonspace exotic cell в контракт?

Denis: А знает кто-нибудь оракул для тона который может давать подписанную цену тона в баксах?

Denis: Офчейн но в формате удобном для ончейн проверки

Андрей: Наверное при желании таких провайдеров можно добавить сбоку к storage-провайдерам, как добавили cron-провайдеров (reply to 269128)

XD: Здарова народ, хотел спросить нету ли бесплатного api для получения курса криптовалют(а именно в сети Ton)?  Хочется получать курс каждые 5 секунд, Coinmarketcap не подходит(там 10к запросов в мес), остаётся только использовать api бирж(Binance и Bitget) или же есть ещё другие варианты?

XD: Не подходит, он походу у нас забанен, даже сайт не открывает (reply to 269147)

XD: И Binance тоже забанен (reply to 269148)

XD: Единственный вариант через прокси работать(хотя бы в этапе разработки), на сервере скорее всего будет работать без проблем

&rey: Эм, ну 1 TON = 1 TON и у жетонов изменения AMM всё равно не могут проходить быстрее интервала между блоками. (reply to 269144)

Alacrity: может ли быть нфт выставлена на продажу, если у нее нет оп-кода change_owner?

&rey: На обычную продажу не может... да и вообще возникают подозрения по поводу того, стоит ли с такой нфт работать. Но в ней может быть внутренний аукцион/что-то типа того. Пример внутреннего аукциона (но с возможностью перевода) — TON DNS. (reply to 269159)

error: Если NFT не имеет поддержку сообщений из стандарта. То: 1. Это не NFT 2. Её не поддерживают "общие" смарт-контракты (контракты децентрализованных приложений) (reply to 269159)

error: Короче если ты под change_owner == transfer. То это не NFT. Так как NFT обязательно должен передаваться. (reply to 269159)

&rey: SBT передают вам привет. (reply to 269164)

error: Так это скорее проблема челиксов которые SBT приравнивают к NFT. Скорее это используют как упрощение для микро-челиков из новичков. А мы тут в Dev chat и тут должна быть системность. (reply to 269165)

&rey: Так тогда это проблема всех нас. TEP-85: Soul bound token (SBT) is a special kind of NFT which can not be transferred. It includes optional certificate mechanics with revoke by authority and onchain ownership proofs. Holder can destroy his SBT in any time. (reply to 269167)

F: гет-метод info переименовали в getCronInfo: (reply to 268885)

Fedyaka: Всем привет!) 👋  В тоне уже ~2 года и после очень долгих раздумий, всё же решил идти тернистым путём тон-разработчика.  Проблема в том, что опыта в программировании у меня никакого! Однако уже 2 года с горячим интересом изучаю саму технологию и есть непреодолимое желание создавать смартконтракты.  Буду благодарен, если посоветуете что-то для простой практики, или подкините ссылку/видео, на самый простой курс для диллетантов и новичков.

error: Я разочарован, этот стандарт писал Ник (один из основных разработчик tonutils-go)...... Ну раз он писал, то пусть так и будет ))). А если без шуток, называть NFT всё что имеет get_nft_content => ссылку на Offchain или OnChain контент, какой-то говно.  Всё это моё имхо, напоминаю! (reply to 269168)

F: В принципе уже можно сейчас подписаться от своего контракта на крон-провайдера: https://github.com/xssnick/cron-contract/tree/master?tab=readme-ov-file#deployment-by-another-contract  Уход от обязательных контрактов к интерфейсам видится сложной затеей - задеплоить контракт не так дорого как по мне, и провайдер легковесный и без корнер кейсов. Плюс как говорили выше сейчас награда провайдеру гарантируется кодом контракта что большой плюс (reply to 268892)

sd: oops https://vitalik.eth.limo/general/2022/01/26/soulbound.html (reply to 269172)

error: А где я ошибся? (reply to 269187)

error: Статья интересная, но тут явно Виталик разделяет NFT и Soulbound... Поэтому не могу понять, в чём я не прав? Я же не говорил, что лучше... Только о том, что NFT всегда передаются, а SBT не передаются и поэтому не NFT (reply to 269187)

sd: Ну в поливании говном чатикса за определение сбт как подвид нфт, а на самом деле так оно буквально и есть и так оно и задумывалось.

Oleg: curl -X 'POST' 'https://rpc.ston.fi' \  -H 'accept: application/json' -H 'Content-Type: application/json' \  -d '{"jsonrpc":"2.0","id":8,"method":"dex.simulate_swap","params":{"offer_address":"EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM9c","offer_units":"1000000000","ask_address":"EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs","slippage_tolerance":"0.005"}}' (reply to 269148)

Александр: https://api.dedust.io/#/v2 (reply to 269148)

Danil: https://tonapi.io/v2/rates?tokens=ton,EQD6Z9DHc5Mx-8PI8I4BjGX0d2NhapaRAK12CgstweNoMint&currencies=usd,rub

error: По факту от чёткого определения ничего не меняется в жизни блокчейна, чисто задротская тема.  В TEP-085 решили, что SBT расширяет NFT интерфейс с отключенным transfer, то да это подвид NFT. У меня от фразы "У меня есть NFT X" — сразу вопрос "сколько она стоит?", а не "как её получить?", когда как у "У меня есть SBT X" второй вопрос... (reply to 269195)

sd: Дальше развивать не вижу смысла, замечу только, что nft - это токен, он мужского рода, раз уж тема задротская. (reply to 269206)

sd: А мы на русском общаемся. Нфтшка женского рода, а вот нфт, токен, мужского! (reply to 269208)

F: А мы в чате разработчиков, и вы не о том разговариваете

Molodoy Abuzer 2: Раз в чате разработчиков то помогите пожалуйста решить проблему 🙏🙏🙏 Я формирую boc для тела запроса эндпоинта эмуляции в tonapi, но получаю ошибку grams overflow. Подскажите где неправильно формирую boc (reply to 269211)

Oleg: А "энэфтишка"?) (reply to 269207)

Denis: вас верблюды покусали? все гетметоды в тоне всегда назывались в snake_case (reply to 269170)

F: Чего же ты свои хотелки сразу одним сообщением не пишешь (reply to 269224)

Denis: https://t.me/tondev/268891 вот же написал (reply to 269225)

F: Ну спасибо, просьбу заменить название написал в одном сообщении, а само название уже в другом сообщении где предлагаешь другую идею (reply to 269226)

Denis: но блин. у меня даже в мыслях не было что можно написать в кэмелкейс.

Denis: поясню почему надо снейк - я, творожков и прочие милые люди кладут это в базу. а базы очень часто case-insensitive

Cybeer: Привет всем, может кто подсказать почему не проходит jetton transfer? Возвращает 65535 exit code, опкод по идее принимается тк с воллета транзакции проходили, а по апи не хочет

Oleg: На фанси снейк, на толке кэмел теперь (reply to 269224)

Василий: Это ошибка при обработке неизвестного opcode'a. Скорее всего отправляете не на кошелёк. а на minter (reply to 269242)

Cybeer: Отправляю с walletV4R2, на walletV5R1, указываю мастер адрес контракта, по идее должно бы проходить (reply to 269244)

Cybeer: Сюда можно с тонвьювера кидать ссылки?

Василий: В качестве адреса назначения нужно указывать просто адрес кошелька(обычного) получателя. Адрес мастер контракта для трансфера не нужен (reply to 269247)

Denis: эм (reply to 269243)

Denis: ответ разработчика толка (reply to 269243)

Oleg: Раз мы переходим на толк логично было бы и конвенцию адаптировать под кэмел как по мне (reply to 269253)

Андрей: Открытый вопрос, какой будет case в tolk Пусть @tolk_vm отпишет как правильно (reply to 269259)

DPL: Привет, может ли паблик-нода пропустить некоторые транзакции в бч и не возвращать их? Столкнулся с такой проблемой

Андрей: И похоже контракт крона - первый контракт на толке раз возникают такие споры? (reply to 269261)

Oleg: Снейк остается логичен только для дедов тона, считаю если менять то везде, а то сейчас новенькие придут и фиг пойми почему тут снейк а там кемел, думаю все будут в кемеле писать не обращая внимания)   Тем более никакой проблемы писать в кемеле не вижу, просто визуал, на возможность вызова метода никак не влияет

Denis: у тебя всё равно останется полно базовых контрактов где snake и от них никуда не денешься

Андрей: Почему эта переписка не в общей группе (reply to 269269)

Denis: александр не одобряет эти ваши срачи на миллион человек (reply to 269270)

Андрей: Это же не срач, а принятие будущего стандарта (reply to 269272)

Aleksandr: Это правда. Мне лично да, привычнее camelCase — и хорошо, когда код снаружи (TS в большинстве случаев) похож на код внутри стилистически.  get-методы — это другое. Я бы конечно называл тоже camel'ом, но тут слишком много внешних потребителей, и если это сильно делает больно, то надо взять какой-то базис. (reply to 269272)

Denis: Ну на самом деле аргумент про базу и т.п. не особо критичен. Это все решается. А вот единообразие со стандартами это имхо важно

Denis: Потому что вот сделал ты нфт со стекингом какое-нибудь. И у тебя там будет get_nft_data и getUnlockSpeed

Aleksandr: Можно вообще сделать так  @method_id("snake_naming") fun snakeNaming() { ... }  Но это ещё больше запутает )

Оскар: хоспаде да именуйте только гет методы снейком, они всё равно внутри контракта не вызываются, а для своего камеля в тс под враппер всё прячется будет в толке такая семантика - если снейк, значит гет метод

Denis: Олег кстати пишет на го, где такая же история. CamelCase публичный а mixedCamelCase приватный :) (reply to 269283)

Oleg: Как по мне на внешних потребителей это не влияет никак)   просто строка для вызова, часть контрактов вполне может быть снейком а часть кемелом, не понимаю зачем тащить конвенции фанси сюда, выходят дополнительные сложности при написании контрактов, непонятные новым разработчикам (reply to 269276)

&rey: Действительно, не надо создавать лишние рекомендации (хоть camelCase, хоть snake_case) без серьёзной причины; разработчики сами разберутся, наверно, что им использовать) (reply to 269290)

Tim: А почему не сделать get contractData() method_id(contract_data) например?

Denis: Практика показывает что разработчики сами не могут договориться ни о чем. Пока не придёт кто-то сверху с достаточным авторитетом и не даст установку как надо жить (reply to 269291)

Sutako: Привет, подскажите как запросить транзакции с блокчейн? Попробывал  pip install tontools pip install pytonlib И прочее, pytonlib я непонял, tontools выдает ошибку TonTools.Providers.TonApiClient.TonApiError: Failed to parse response: <bound method ClientResponse.text of <ClientResponse() [418 I'm a teapot]>

Sutako: На pip install tonutils сделал нужные мне транзакции, понятная библиотека с примерами, но в ней, покрайней мере я не нашёл, как получить результаты, или запросить последние транзакции. В теории это должно быть просто, делаешь запрос, получаешь массив, но как это сделать я непонял (reply to 269308)

Михаил: Можешь использовать тон апи, он для новичков намного понятнее, чем альтернативы (reply to 269310)

Alacrity: попробуй через клиент какой-нибудь  в tonutils есть клиенты Toncenter и Tonapi (from tonutils.client import ...), у них должны быть методы для получения транзакций (reply to 269310)

Sutako: Спасибо

Dmytro: А зачем менять что-то (reply to 269261)

Dmytro: Это проблема TS что в нем названия функций зачем-то сделали отличающимися от фансишныз вариантов, все таки фанси был первым. (reply to 269276)

Dmytro: Во всех нормальных языках используют snake case к тому же

User<7008929507>: Доброго времени. Ищем в команду разработчика на TACT У нас активно развивающийся iGaming продукт, для которого мы хотим запустить свой токен со своей токеномикой с возможностью Revoke Ownership. Мы в TON только заходим, поэтому будем рады даже общению и обмену опыта.

Александр: Сколько языков - столько конвенций. Согласен с реплаем  Занимательное, конечно, обсуждение. Вызывает вопросы. Первый вопрос риторический: Какой плюс камел кейса перед снейк кейсом?  Исполнение ран гет метода будет дешевле если делать название камел кейсом? Разработка станет быстрее(равно дешевле)?  Честно говоря, не звучит как да. Ну и если кто-то особенно не может терпеть кэмел/снейк кейс, то они сделают себе декоратор и будут смотреть на свой красивый кейс в коде. Либо сделают енумчик :) (reply to 269290)

Ivan: Привет!   Расскажите пожалуйста как решать такую проблему: Хочу сделать N последовательных транзакций на продажу токена. Написал примитивный код:    for _, token := range []string{     "EQAFAQxevJSYZzuHvZFevESmLTeVx87YLDxGqOjjMUINZS-N",     "EQDExgMJxkUdsujYdMGfzaoKgMDsL-Q5BSsPKXhF6Xgl4LqX",   } {     walletAddr := getWalletAddressFromSeed(api, seed)     balance, err := getJettonBalance(ctx, api, walletAddr, token)     if err != nil {       log.Error().Err(err).Msg("failed to get jetton balance")        return     }        if balance.Cmp(big.NewInt(0)) == 0 {        return     }     err = sellJetton(       ctx,       api,       seed,       token,       balance,       15,     )      if err != nil {       log.Error().Err(err).Msg("failed to sell jetton")       // return     }   }  На первый токен транзакция улетает без проблем, на второй нет. Я так понимаю, тут либо дожидаться обновления seqno, либо highload wallet? Но почему тогда я могу транзакцию отправить, но ничего о ней знаю? Не вижу ошибку от лайтсервера, например, не вижу ее в мемпуле, еще что-либо

Denis: ни один кейс не лучше другого. а вот единообразие лучше чем разброд и шатание. по этому и придумывают рекомендации по стилю кода для конкретного языка, а иногда даже форсят такие штуки на уровне компиляторов. (reply to 269343)

Denis: https://gist.github.com/mr-tron/a4b3e8eff3a982e3426f6397eb9a2450 (reply to 269345)

Denis: предположу что вы все операции сделали с одинаковым seqno

Denis: а надо с возрастающим

Denis: мы кстати в тонапи готовим возможность заслать с возрастающим секно для обычного кошелька несколько сообщений

Svαtoωλ‎: Плюсы тона: Масштабируемость   Минусы: Секно

Svαtoωλ‎: Что это за язык 👀 (reply to 269345)

Ivan: func SimpleMessage(to *address.Address, amount tlb.Coins, payload *cell.Cell) *Message {   return &Message{     Mode: PayGasSeparately + IgnoreErrors,     InternalMessage: &tlb.InternalMessage{       IHRDisabled: true,       Bounce:      true,       DstAddr:     to,       Amount:      amount,       Body:        payload,     },   } }  да, но я тут в симплмессадж не могу упаковать seqno (reply to 269347)

Denis: на самом деле ситуация с секно не сильно отличается от таковой в эфире. там довольно очевидное решение которое просто ни у кого не доходило руки сделать. может завтра даже выкатим (reply to 269351)

Svαtoωλ‎: А что за решение? Интересно (reply to 269354)

Denis: ну а как эфирная нода делает для EOA аккаунтов? смотрит на seqno и добавлят в мемпул если есть предыдущие seqno

Denis: у нас тут нет EOA аккаунтов но за таковые можно посчитать кошельки определенного кода

Ivan: еще аукцион по газу нужно выиграть, то есть газ за новую транзакцию с тем же seqno должен быть выше (reply to 269357)

Svαtoωλ‎: Без понятия, я в тон пришел и остался  Эфир непонятное для меня (reply to 269357)

Ivan: Я читал. Спасибо. До сих пор не понимаю как можно отследить что транзакция завершена не сканируя новые блоки) (reply to 269347)

&rey: Дерево транзакций? Ну, да, читать все контракты назначения надо. (reply to 269361)

Tim: Сканируйте детей (reply to 269362)

Denis: Там ближе к концу (reply to 269361)

User<7165106823>: всем привет, можно ли повысить gas в контракте чтобы он обработался быстрее?

Оскар: нет (reply to 269373)

— 2024-11-26 —

XD: Супер! Благодарю 👍  Можете подсказать по лимитам как? (reply to 269205)

Victor: Всем привет, у меня вопрос, кто-нибудь пытался сохранить файл в блокчейне TON, это я просто сохраняю биты файла в ячейки TON, а в случае если файл не влазит в ячейку, то я переношу их в другую ячейку и соединяю их ссылками? Такое же можно провернуть с любым типом файла, медиа, текстовые и другие форматы?

PR: Можно (reply to 269385)

Alex: не могу понять, что тут не так   const masterKey = await mnemonicToWalletKey(config.masterWalletMnemonic.split(' ')); const masterWallet = WalletContractV4.create({ publicKey: masterKey.publicKey, workchain: config.workchain });  выдает ошибку:  node_modules/@ton/core/dist/boc/BitBuilder.js:93             throw Error(`bitLength is too small for a value ${value}. Got ${bits}`);                   ^ Error: bitLength is too small for a value 6989831910. Got 32  мнемоник лежит в конфиге, там бекап с тонкипера

.: Всем привет!) Есть ли какие то решения on-chain для шейринга доступа к файлам хранящимся в ton storage в зашифрованном виде?

&rey: Помните про ограничения на хранимые данные. 65535 ячеек по 1023 бита на контракт. Не больше 255 ячеек в глубину. (reply to 269385)

Андрей: Ну если вы ончейн разошлите пароль, то все о нем узнают Можно взять решение как кошельки шифруют комментарий на основе общего секретного ключа из своего приватного и публичного ключа получателя (reply to 269420)

Danil: Можно добавить админ аккаунты и не делиться (reply to 269423)

Work3: Добрый день! Ищем python fastapi разработчиков в part/full time

Brian: Привет всем, у меня есть вопрос касательно Omniston-SDK, есть ли шанс, что я могу использовать его SDK с токенами, которые не указаны в бета-версии приложения, я пытаюсь переопределить его api и использовать без дополнительной проверки от omni, но он показывает мне ошибку получения балансов каждый раз, когда я пытаюсь выполнить замену с jettons исполняющих функцию offer asset, которые не указаны в бета-версии Omniston. Причем он без проблем делает свапа из Тона(и любого другого токена которые пеерчислен в бетке) в другие жетоны

&rey: Если на вопрос не отвечают — может быть, стоит спрашивать тех, кто об этом вообще знает?)) (reply to 269442)

Brian: Если на вопрос не ответили за две минуты это мб не страшно? (reply to 269445)

Виктор: Ищу команду для разработки бота  в ТГ .   Портфолио в лс 🙏

Victor: Всем привет, TON Storage хранит данные в блокчейне или на узлах распределенной сети, как IPFS? Заранее спасибо)

🇷🇺 Angry: Куда пропало сообщение?

Андрей: Файлы в ton storage хранятся на провайдерах с которыми вы заключили договор при помощи контракта (reply to 269481)

Степан: Привет всем, подскажите, где найти коды ошибок (ну или конкретно описание ошибки 47) для jetton_wallet_governed?

Dmitry | backend4you.ton: в исходнике смотрели? https://github.com/ton-blockchain/stablecoin-contract/blob/main/contracts/jetton-wallet.fc (reply to 269527)

Степан: Так это ведь не исходник именно от governed. Хотя я уже видимо догадался в чем ошибка. (reply to 269528)

SweetJesus: это он и есть. (reply to 269529)

Dmitry | backend4you.ton: ну да, не обязан 100% совпадать, мало ли кто что исправил. Но если контракт "хороший" то он свои исходники верифицирует и их видно в эксплорерах. (reply to 269529)

SweetJesus: в этом репо есть файл op-codes.fc отдельно, там вроде экзит коды лежат. (reply to 269529)

Степан: А, действительно, спасибо. (reply to 269532)

Viacheslav: мы планируем раздачу токенов(юзеры сами будут клеймить).   Если сделать 1 контракт (будет merkle tree), и юзеров будет много, транзакции просто медленно будут обрабатываться в тоне?  Читал статью на сайте тона про раздачу токенов и там говорится что нужно несколько контрактов чтобы совпадал jetton-wallet контракта с юзерским по 4м битам итд... так заморочено...

&rey: Эти две штуки почти не связаны, кстати. (reply to 269539)

Viacheslav: м.. тогда для чего нужно делать несколько контрактов раздачи, если не для пропускной способности..? (reply to 269540)

&rey: Есть пропускная способность. Чем больше шардов, тем больше потенциально она может быть; для этого надо разнести раздающие контракты по шардам.  Есть скорость выдачи токенов пользователю. Чем меньше количество переходов между шардами в выдаче, тем быстрее токены будут выдаваться. Для этого надо делать, чтобы жетон-кошельки находились в тех же шардах, что и... а вот это каждый сам решает, какой переход оптимизироваьт. (reply to 269541)

&rey: А почему бы вам не сделать архитектуру без раздающих контрактов? (reply to 269539)

Viacheslav: mintless вы имеет ввиду?

&rey: Например, её. Есть и другие адаптации. (reply to 269545)

Viacheslav: да емае не могу отправить ничего - фильтр удаляет сообщеиня)

Viacheslav: а наш жетон контракт уже на аудит попал и последний хеш комита нельзя трогать - вот что еще загвоздка) (reply to 269544)

Oleg: Делать скриншоты в tiff это зашквар (reply to 269553)

артур: подскажите пожалуйста, а нет ли аналога или форка https://github.com/ton-blockchain/minter-contract для v4/v5 кошельков? тут используется депрекейтед пакет, переписывать который несколько проблематично

X1ag: Есть где можно почитать про cron? Или кто может объяснить? (reply to 268880)

Ivan: такой же крон как и в web2, только платный и в блокчейне  он нужен если вы хотите логику "сделать что-то раз в день" засунуть в блокчейн (reply to 269581)

X1ag: Спасибо :) (reply to 269585)

&rey: Если что, оплата опциональна, если я верно прочитал. (reply to 269585)

final: а сколько максимум элементов в dict можно засунуть?

User<8053811500>: Можно ли как-то в контракте пропарсить число из комментария к транзакции?

Unknown: Можно даже калькулятор написать: https://github.com/ton-blockchain/func-contest3?tab=readme-ov-file#3-text-calculator (чуть выше по тексту есть решения) (reply to 269599)

X1ag: Кто-то знает как зайти на tonspeedrun? В официальной документации весит https://docs.ton.org/v3/documentation/smart-contracts/func/overview#tutorials

X1ag: этот спидран выглядит прикольным, может есть что-то подобное? (reply to 269610)

X1ag: Кажись нашел: https://github.com/romanovichim/TONQuest1 (reply to 269610)

Сева: ~$ curl -X GET https://www.dyorbackend.tk/api/v1/watchlist/projects curl: (6) Could not resolve host: www.dyorbackend.tk может кто помочь?

наз: всем привет, я могу по адресу контракта достать его boc с кодом, именно тот который блюпринт отдает при билде?

Сева: всем привет (reply to 269626)

Сева: вообще кто-то работал с dyor api?

Viacheslav: а какие еще решения можите подсказать? (reply to 269546)

&rey: На основе (неявного) платёжного канала к жетон-кошелькам: там сервер может выдавать жетонов когда угодно, и пользователь может забирать их группами. (reply to 269630)

Viacheslav: где бы найти готовую репы с раздачей жетов и деплоя по шардам.. пока сам разберусь уже и не надо будет 😄

Molodoy Abuzer 3: Формирую вот такой boc для простого перевода ton, с tonapi получаю ошибку destination address is null. Подскажите где ошибку допускаю

Сева: можно через ton api взять цену биткоина и других активов? /v2/rates/chart

Tim: привет! как сделать так, чтобы приложение поддерживао  full screen mode? по поиску не нашел в чате

集电极: Вы чатом ошиблись (reply to 269638)

Tim: так и подумал, сорри)

George: есть примеры или информация как заблокировать адрес на получение средств?

Dmitry | backend4you.ton: 1) написать кастомный контракт, который будет "падать" при каждом входящем сообщении. В зависимости от настроек отправителя это либо вернет ему переводимые монеты, либо оставит у вас, так что гарантия не 100%. Плюс, не подойдет для уже существующего обычного адреса (так как контракт кошелька необновляем). 2) Договориться со всеми валидаторами, чтобы они на уровне блоков не принимали переводы на нужный адрес. Как понимаете, очень дорого. (reply to 269641)

George: благодарю за подробный ответ. основная идея воссоздать такую транзакцию https://tonscan.org/tx/515f9d5247355a2073d2b0c4c403b79ddd3dd7eba06c8876382bf7c7ce8b1118 (когда адрес возвращает средтсва)  была идея наложить запрет на получение средств. может есть проще способы (reply to 269643)

Dmitry | backend4you.ton: лол, зачем тонскан сам себя сломал - стоит заблочить sentry-скрипт и экран просто белый

Dmitry | backend4you.ton: это прочитайте про bounce флаги. это первый вариант - контракт-получатель, "обрабатывая" входящее сообщение, "упал с ошибкой" (случчайно или специально - не важно). в зависимости от настроек при отправке монеты либо вернулся ("bounce": true) либо останутся на адресе получателя ("bounce": false) (reply to 269644)

George: Я знаю про флаги, конракт получатель как заставить упасть с ошибкой, мне нужно воссоздать такую транзакцию, но не понимаю как это сделать (reply to 269646)

Dmitry | backend4you.ton: зависит от контракта-получателя, надо смотреть ему в код чтобы понять как его "удивить". кому-то достаточно просто неизвестноый опкод поставить, кому-то криво payload собрать

George: На w5 адресе так получилось... (reply to 269648)

Danil: тут же обычный зацикленный контракт, тебе прислали ты обратно, не больше не меньше (reply to 269644)

Dmitry | backend4you.ton: что получилось на w5 - не факт что сработает на w4, w3 и т.п. откройте w5 контракт и просто посмотрите в код. Вам нужно первое неаакуратное чтение (без проверки длины) или явный throw или вызов endCell (а вы там еще данные допишите) (reply to 269649)

/B4ckSl4sh\: Проще неизвестный опкод, почти всегда будет 0xFFFF в ответ (скорее всего для всех кошельков это правда) (reply to 269651)

Оскар: мне больше интересно практическое применение, зачем кому-то специально вызывать баунс на воллетах

Dmitry | backend4you.ton: https://github.com/ton-blockchain/ton/blob/master/crypto/smartcont/wallet3-code.fc  v3 увы нет - do nothing for internal messages так что с в3 баунс интерналом получается вообще невозможен... (reply to 269652)

&rey: Скорее всего, речь идёт про кошелёк биржи, и хочется оставить сумму себе. (reply to 269653)

/B4ckSl4sh\: Да, действительно (reply to 269654)

Dmitry | backend4you.ton: как-то маловероятно что "биржа" будет с такой дырой - они ж один фиг когда отлаживали - не раз должны были неправильное сообщение послать (случайно)

/B4ckSl4sh\: ну у них тогда highload смотреть надо, но там скорее всего будет как у v3 (reply to 269655)

George: Ну я делаю чтобы обезопаситься как раз (reply to 269655)

George: Спасибо, попробую (reply to 269652)

Oleksandr: Подскажите как к БЕКу подключить тоновский кошелек? это через сид фразу нужно делать или есть другой способ?

&rey: Подключить... ваш? Да, обычно это делается мнемоникой. Для безопасности можете положить её в keyring системы. (reply to 269672)

Crypti: Всем привет. Задеплоил свой токне в ton, залил ликву, но на дексе и в кошельке wallet/tonkeeper весит плашка, что токен несет в себе риски (на других токенах такого нет). Может кто подкажет, как его апрувнуть или где про это почитать

Sutako: Привет. Подскажете как расшифровать boc? Я очень много времени потратил, чтобы разобраться с этим, но результата нет. Сейчас я пробую использовать   <script src="https://unpkg.com/tonweb@0.0.26/dist/tonweb.js"></script>  Но подойдет и реализация на питоне Мне нужно получить hash, по которому я бы мог найти транзакцию

Sutako: Если что, я использую для транзакций <script src="https://unpkg.com/@tonconnect/ui@2.0.6/dist/tonconnect-ui.min.js"></script> const result = await tonConnectUI.sendTransaction(transaction);         console.log("Transaction result:", result); result это boc, или я чтото делаю нетак, как мне получить хеш по которому я могу найти транзакцию? (reply to 269678)

&rey: Держите: https://gist.github.com/mr-tron/a4b3e8eff3a982e3426f6397eb9a2450. (reply to 269679)

Oleksandr: Спасибо. в чем может быть проблема? я использую одну и туже сид фразу для импорта кошелька на разных устройствах(мобилке и ноуте), но подключаются разные кошельки (reply to 269673)

&rey: subwallet ID разный, или версии. Проверьте, что в обоих случаях одинаковый v3r2 или какой там. (reply to 269681)

Oleksandr: я уже все перепроверил... и версии и что это на тестовой сети должно быть... все равно разные( (reply to 269682)

Oleksandr: subwallet ID? где проверить его можно? (reply to 269682)

&rey: Ладно, в приложениях кошельков он обычно одинаковый (хотя можете проверить, загрузив мнемонику в TonWeb). А адреса разные или просто префиксом kQ/0Q/UQ/EQ + чексуммой отличаются? (reply to 269684)

Sutako: Я не понял, как мне это поможет? (reply to 264269)

/B4ckSl4sh\: Читайте ссылку выше. Для нахождения транзакции в чейне - никак не поможет (почти) (reply to 269686)

Sutako: Чтобы найти транзакцию нужен hash. Я могу запросить у обозревателя все транзакции, но это нето, что нужно, мне нужно запросить только мою транзакцию. Результатом транзакции const result = await tonConnectUI.sendTransaction(transaction); является boc, как мне получить hash моей транзакции? (reply to 269687)

Sutako: toboc есть почти во всех библиотеках, а fromBoc, мало где, и я не пойму как он работает в  <script src="https://unpkg.com/tonweb@0.0.26/dist/tonweb.js"></script>

Sutako: const bocBytes = TonWeb.utils.base64ToBytes(boc); const bocCells = TonWeb.boc.Cell.fromBoc(bocBytes); const bocCell = bocCells[0]; const hash_boc = await bocCell.hash(); const hash = TonWeb.utils.bytesToBase64(hash_boc); Пробывал такое решение, но оно дает не тот результат (reply to 269689)

&rey: А почему оно вообще должно давать "тот" результат? (reply to 269690)

Sutako: Откуда мне знать. Как вообще имея результат транзакции в boc мне найти ее? (reply to 269691)

&rey: Попробую пересказать тот документ, хотя он на самом деле ровно для вашего случая написан.   TC2 не дожидается никакой транзакции в блокчейне. Его результат, этот BOC – сообщение к кошельку-отправителю, которое может и не выполниться. (reply to 269692)

&rey: Значит, никакую транзакцию так получить невозможно – ни её идентификаторов (lt/hash) ещё нет, ни её самой в блокчейне.

Дмитрий: const cell = Cell.fromBase64(result.boc);   const buffer = cell.hash();   const _hashHex = buffer.toString("hex"); (reply to 269688)

Дмитрий: c @ton/core импортни {Cell} И все будет работать. (reply to 269696)

Abdurakhmon: Можно ли реализовать пополнени кошелька на беке с помошю тон?

Abdurakhmon: Или только делается с помошью тон юай

Дмитрий: Можно, реализуйте на здоровье.

&rey: Стоит расписать подробнее, что есть такое "пополнение" и откуда оно должно брать тоны) Просто у перевода же есть отправитель и получатель. (reply to 269698)

Abdurakhmon: Да я создал мини апп отправитель это тг юзер который подключил свой кошелек с помошю тон юай (reply to 269701)

Abdurakhmon: Я должен реализовать функционал в бек чтобы он спокойно мог пополнить свой баланс

&rey: Ну, вы можете вместо тон коннекта 2 просто давать пользователю QR/ссылку, куда деньги кидать, и переводиться деньги будут... (reply to 269702)

Abdurakhmon: Могу ли я тогда следить пополнение с бека (reply to 269704)

&rey: А, вам нужен собственный кастодиал (база данных с балансами)? Попробуйте https://github.com/gobicycle/bicycle. Хорошо подойдёт на вашем уровне и вашей задаче, кажется. (reply to 269705)

Abdurakhmon: Это готовое решение да по моему (reply to 269706)

Sutako: Спасибо. 🥹 Похоже помогло найти то, что нужно 👍 // Преобразование BOC из Base64 в байты const bocBytes = TonWeb.utils.base64ToBytes(boc); // Парсинг BOC в массив ячеек const cells = TonWeb.boc.Cell.fromBoc(bocBytes); // Берем первую ячейку const cell = cells[0]; // Вычисляем хэш const hashBuffer = await cell.hash(); // Конвертируем хэш в hex const hashHex = TonWeb.utils.bytesToHex(hashBuffer); console.log("Hash (Hex):", hashHex); (reply to 269696)

Dmytro: А есть ли возможность получить доступ к ячейке по значению ее хеша или че то типо такого? Например взять хеш ячейки в виде инта, и найти эту ячейку где-то в блокчейне с помощью какого-то опкода?

Dmytro: Задача вида «у меня ячейка на глубине 10 и я хочу получить доступ напрямую к ячейке минуя десериализацию промежуточных ячеек».

Denis: Да. Через либу в мастерчейне (reply to 269711)

Denis: Или либу в стейт ините локальном

Dmytro: Ну я хочу кастомные ячейки которые в стейте хранятся

Dmytro: Либы не то

Oleg: Задача уровня "распарсить весь блокчейн" (reply to 269715)

/B4ckSl4sh\: Мне кажется это может быть возможно, ведь контракт не платит несколько раз за хранение одинаковых ячеек, так что как будто где-то там должна быть хэшмапа этих ячеек, по дереву которой нужно спуститься до нужной ячейки (если конечно это именно хэшмапа, а не условный сет хэшей, тогда возможно никак) (reply to 269712)

Sutako: Библиотек я не нашёл актуальных, мне хватает простых запросов сюда https://tonapi.io/api-v2 (reply to 269711)

&rey: Полная нода определённо умеет. Другой вопрос, как ячейку из неё забрать. (reply to 269711)

Andrei: А что, @testgiver_ton_bot прилег отдохнуть или у меня одного никак не реагирует на /get?

Andrei: Проснулся, да Спасибо

rxcat: был массовый сбой доставки вебхуков от телеги

LowGas: Здравствуйте, кто нибудь знает как реализовать покупку/продажу токенов с мемпадов, не используя привычный swap

Артём: Мне капча прям нравится, я её с раза 5-10 прохожу только

Denis: довольно интересно. не очень понятен скоп поиска. тоесть ты хочешь в стейте который был на начало транзакции? или может после апдейта тоже? а из входящего сообщения? мастерчейна? конфига? (reply to 269715)

(✿◡‿◡): кто сможет интегрировать контракт на фанси (врапперы и скрипты на тайпскрипте) интегрировать в код на Node JS. Заплачу

— 2024-11-27 —

.: Всем привет!) Есть ли какие то решения on-chain для шейринга доступа к файлам хранящимся в ton storage в зашифрованном виде?

Arseny: всех приветствую подскажите пожалуйста, как сгенерировать ссылку на просмотр транзакции tonviewer, не понимаю откуда берется вот эта штука

Anton: Хэш сообщения в hex (reply to 269742)

Arseny: спасибо! (reply to 269743)

SweetJesus: хеш транзакции в hex (reply to 269742)

Dmytro: Допустим у меня есть дерево ячеек с глубиной X где хранятся данные о пользователях. Оффчейн делает поиск по дереву и находит что нужный пользователь находится на глубине Y<X. Я хочу получить напрямую доступ к ячейке с нужными данными в ончейне чтобы у меня не было необходимости десериализовывать Y ячеек для доступа к нужной мне ячейке. Потом я хочу например обработать как-то этот кусок дерева и отправить всем пользователям из этого куска какое-то сообщение, к примеру. (reply to 269733)

Dmytro: Если там Y=5, то пару тысяч газа такая штука сэкономит думаю. (reply to 269767)

&rey: Надейтесь) Не получится, скорее всего; даже сокращённый Меркл не поможет.

Tim: Почему не поможет (reply to 269777)

&rey: Потому что пять раз считать хеш, складывать всё в ячейку, загружать хеши удалённых веток из сообщения, двигать стек как раз где-то на >=2к должны выйти. (reply to 269841)

Tim: Просто посылаешь поддерево в сообщении с пруфом и все

Tim: Изменять же ничего не надо

&rey: Так грузить из оригинальной ячейки так же дёшево, нет? (reply to 269845)

Tim: Нет, тебе нужно будет еще по рефам пройти до своей (reply to 269848)

.: А какие есть решения для  получения истории транзакций в рамках самостоятельных dapp? Условно, хотелось бы подключаться напрямую к ton blockchain и получать достоверные данные

.: Решения уровня (купи токен) не подходят для dapp в любом случае

Андрей: Смотреть историю транзакций по адресу контракта/кошелька, в любой либе есть соответствующие методы (reply to 269866)

Cube: Подскажите, почему в такой конструкции значение по ключу - это не ячейка createAssetConfig(config), а cell со ссылкой на него?  const assetConfigCollection = Dictionary.empty(Dictionary.Keys.Buffer(32), Dictionary.Values.Cell());     for (const [key, config] of Object.entries(assetConfigs)) {         assetConfigCollection.set(await sha256(key), createAssetConfig(config));     }

Oleksandr: Подскажите правильно ли я понимаю... при отправке транзакции с модом mode: SendRemainingValue все затраты на Forward Fees и Gas Fees вычитаются из context().value и баланс самого контракта не должен изменяться? у меня цепочка сообщений от первого контракта => второй => первый. Я использую mode: SendRemainingValue, но на первом контракте баланс уменьшился => на втором контракте баланс тоже уменьшился => а на третий сообщение не было отправлено  подскажите как в этом случае правильно настроить mode, чтобы оплата за сообщения снималась не с контрактов

&rey: те затраты вычитаются из value (ну и надо выключить SendPayGasSeparately), а вот storage fee уходит с баланса контракта. (reply to 269948)

Ilya [伊利亚]: Мне нужно отправлять транзакции с кошелька на кошелек без ручного подтверждения, как это можно сделать?

Max: программно подписывать, имея приватный ключ (reply to 269954)

Ilya [伊利亚]: Приватный ключ - имеется ввиду мнемоническая фраза кошелька?  Есть пример реализации? На FunC, либо TS/Python, если написано на sdk (reply to 269955)

Dmytro: Подключайся напрямую к ton blockchain и получай достоверные данные (reply to 269866)

Dmytro: из мнемоники создается приватный ключ но мнемоника != приватный ключ (reply to 269956)

Oleksandr: то есть с использованием SendRemainingValue оплаты за сообщения платит отправитель и балансы контрактов не должны меняться? правильно я понял? (reply to 269949)

SweetJesus: тебе написали, оплата за сторадж идет с баланса контракта. (reply to 269959)

meta: Приветствую. У ton/blueprint есть свой чат? (чтоб сюда не флудить, поспрашивать) Тут уже были такие ошибки, но я не нашёл решения.

Anton: привет, можно ишью открыть https://github.com/ton-org/blueprint/issues (reply to 269967)

meta: Не подходит спасибо. Может я чего не так делаю. (reply to 269970)

/B4ckSl4sh\: А что вы делаете? (reply to 269971)

meta: Деплою смарт контракт  func. Получаю то же самое как и тут https://t.me/tondev/223151 (reply to 269972)

Dmytro: У меня часто была эта ошибка но я не помню как я фиксил. В общем это вы что-то не так делаете, с блюпринтом все ок. (reply to 269977)

meta: Хорошо спасибо. Разберёмся! (reply to 269981)

Марк: Подскажите есть какая-то инструкция по прохождению аудита. Нужно монету подтвердить а инете не могу нормальную инфу найти. Может есть какая-то статья или инструкция

.: Из браузера? В таком случае понадобится прокси конвертер. Хотелось бы из dapp обращаться напрямую в сеть тона. Не вижу ничего хорошего в общении с блокчейном через централизованные api (reply to 269957)

.: Я говорю об обращении к блокчейну/получении исторических данных из dapp веб приложения

&rey: А ноды не видят хорошего в поддержке HTTP API, без которого из браузера вы никакой запрос не сделаете. (Ну, точнее, останутся Websocket/WebRTC.) (reply to 270004)

.: :/

.: Шедевр)) Я это прекрасно понимаю и так же понимаю, что никто мне просто так индексировать и предоставлять данные не будет. Условные ton proxy (ожидаем), ton storage мотивируются вознаграждениями. Было бы классно такой же подход внедрить для поставщиков исторических данных.

.: Пользователь заходя в любое dapp должен (если того требует dapp) оплатить доступ к api (случайного провайдера)

.: Я тут с вопросами и предложениями не просто так вещаю)) Возможно я что-то не дочитал и решение задачи уже реализовано, мб кто знает

Denis: На самом деле ещё есть webrtc (reply to 270006)

.: Так он вроде свои абстракции использует, а цель будет реализовать adnl (reply to 270018)

&rey: Кстати, очень хотелось бы TON Sites over WebRTC. (reply to 270018)

&rey: Это будет качественный переход, позволяющий раздавать сайт с клиентских устройств вместо сервера.

Denis: Ну там есть стриминг сырых байтов. А adnl можно поверх хоть голубиной почты сделать (reply to 270019)

Denis: К сожалению сперва надо открыть какой-то URL. (reply to 270020)

Denis: А а безопасность в браузере тесно завязана на адрес

&rey: А что там? Если статические файлы раздавать, то их можно загрузить на страницу, и они будут себе в indexed db лежать. Если динамические... ну да, придётся компилировать мини-сервер в wasm. (reply to 270025)

Ilya [伊利亚]: Заказ  Нужно разработать скрипт для покупки звезд через Fragment в подарок другим людям, с четом пройденного KYC и автоматического подтверждения заказов  В лс

.: Для звезд kyc не требуется вроде (reply to 270027)

Vlad: нужен, вчера проверял (reply to 270030)

.: Жесть.. (reply to 270031)

.: Какой теперь смысл в анонимных номерах 🤨 Верефикация на верефикации (reply to 270037)

L СУДЬЯ 💸💸💸💸💸💸💸: никакой) тон это шлак (reply to 270038)

&rey: Прочитайте, для каких штук KYC включили, и хватит разводить оффтоп (уже с FUD даже) в чате по разработке контрактов на тоне (reply to 270038)

Stas: Анонимные номера это только статусная вещь. Никакой анонимности номер владельцу не гарантирует. Если ты долбаеб то тебе никакой номер в анонимности не поможет. Этот кус нужен прежде всего от скамеров и додиков которые номера в аренду сдают тем же скамерам. Так что все по честноку ХЫЫЫ, туда их блять. (reply to 270038)

Dmytro: купи номера на гетгемсах без kyc (reply to 270038)

.: Какой все таки интересный чат, задаю вопросы и обсуждаю блокчейн - тишина (почти) . Написал про актуалочку, которая не касается темы чата и понеслось))

.: А при наличии номера, для получения кода верефикация потребуется? (reply to 270043)

sd: Нет (reply to 270047)

Stas: Нет, лично проверял (reply to 270047)

.: Тогда не совсем ясен этот аргумент, вторичный рынок и снова анонимность (reply to 270043)

.: Все номера уже были скуплены, продажи всецело на вторичку уйдут и "скамеров" не найдут

Stas: Наверно купить/продать могут те что имеют кус (reply to 270053)

Stas: Я точно не знаю, попробуй купить 😄

sd: Торговать на контрактах могут все, без исключения. Фрагмент это всего лишь интерфейс, и даже он отображает сделки, отправленные в обход интерфейса без кус. И ставки делать тоже можно. Ещё мне кажется что чат тон камунити рус больше подходит для таких вопросов

Ma><im: import { CHAIN } from '@tonconnect/protocol';  export interface SendTransactionRequest {     /**      * Sending transaction deadline in unix epoch seconds.      */     validUntil: number;      /**      * The network (mainnet or testnet) where DApp intends to send the transaction. If not set, the transaction is sent to the network currently set in the wallet, but this is not safe and DApp should always strive to set the network. If the network parameter is set, but the wallet has a different network set, the wallet should show an alert and DO NOT ALLOW TO SEND this transaction.      */     network?: CHAIN;      /**      * The sender address in '<wc>:<hex>' format from which DApp intends to send the transaction. Current account.address by default.      */     from?: string;      /**      * Messages to send: min is 1, max is 4.      */     messages: {         /**          * Receiver's address.          */         address: string;          /**          * Amount to send in nanoTon.          */         amount: string;          /**          * Contract specific data to add to the transaction.          */         stateInit?: string;          /**          * Contract specific data to add to the transaction.          */         payload?: string;     }[]; } всем привет, в каком формате stateInit должен быть? (reply to 268856)

Ma><im: я с вставлю в формате boc string, но мне тогкипер даже подписать не даёт (reply to 270058)

Namon: base64 maybe (reply to 270060)

SweetJesus: toBoc().toString('base64') (reply to 270060)

2happy: За что сообщение удалилось

2happy: да в пизду

Oleksandr: подскажите есть ли возможность верифицировать смарт контракт в ТОН с использованием скрипта и вызова его через терминал? или это можно сделать только через https://verifier.ton.org/?

&rey: npm blueprint verify, например, умеет. (reply to 270071)

Oleksandr: спасибо (reply to 270073)

Roma: Господа, а куда в тонкипере про уехал переключатель на тест нет? найти никак не могу после обновлеиня(

Denis: Нет. Я использую их не ради статуса или анонимности, а ради удобства и безопасности. Попробуйте забэкапить симку или восстановить находясь в другой стране или обезопаситься от перехвата смс. (reply to 270043)

Stas: Аналогично (reply to 270078)

Bodiс: Здравствуйте, а как сделать так, что бы нфт боксы открылись в запланированное время на гг?)

Bodiс: Так же, как и было со Смешариками

Oleg: гугление "что такое гг и что случилось со смешариками" ничего не дало

sd: Попробуй спросить у гг. Они общительные (reply to 270083)

Bodiс: Хорошо (reply to 270088)

Bodiс: Гг- гет геймс  У Смешариков были кейсы и они открылись через неделю, и оттуда выпали рандомные нфт (reply to 270087)

Max: Очевидно поменяли метаданные у айтемов нфт (reply to 270090)

Max: и кто такие эти ваши get games? 😁

rends_east: Ну либо сделали ончейн проверку по времени (очень вряд ли) (reply to 270091)

Катант: Они просто ссылку на оффчейн метадату поменяли (reply to 270085)

🎐*<@Maxim: Активацию номеров разве на гетгемс сделать? Не надо переходить на фрагмент ? (reply to 270044)

&rey: Именно "активация" — это вообще какой-то скам; коды приходят нормально; и всё равно это оффтоп в чате для разработки контрактов на тоне. (reply to 270098)

Aleksei: Всем хай

— 2024-11-28 —

Amyot: Привет! А кто-то писал ботов с интеграцией с ton?

Crypto: Контракт jetton master будет иметь свои мнемонитечные фразы?

Max: нет (reply to 270107)

jennifer [afk]: тока валлеты имеют (reply to 270107)

Crypto: EQC1bH4tFR2tEVQuW4i2RwwpccoaSy-GRQEqYrCKgZNfNw0r  А как вы объясните этот адрес, jetton master но имеет анонимные номера которые используются. Вед кошелёки без мнемонических фраз к фрагменту нельзя подключить или можно?

sd: Номера можно использовать и передать контракту - "использование" не прекратится. (reply to 270110)

Crypto: Но он способен изменяет телеграм номера даже если номер пренудлижить контракту jetton master (reply to 270111)

Namon: это специфический jetton_master токена 8num  https://shardify.app/pool/EQC1bH4tFR2tEVQuW4i2RwwpccoaSy-GRQEqYrCKgZNfNw0r в нём заложена работа с коллекцией анонимных номеров (reply to 270110)

Crypto: Так вот как major хотел реализовать подобное. (reply to 270113)

Crypto: Рент номеров

Namon: это уже другой функционал, но его тоже можно реализовать через смарт-контракты

Crypto: Я не понял как это все работает. Вед по моей логике для правильной работы нужен api от fragment который не предоставлен. (reply to 270116)

Namon: имеется ввиду аренда NFT через смарт-контракты за остальное не шарю, но API фрагмента можно подсмотреть через devtools, если захотеть (reply to 270117)

Crypto: Так он уже существует? (reply to 270118)

Namon: api? (reply to 270119)

Crypto: Да апи от фрагмент для рент (reply to 270120)

Namon: причём здесь ton api? ton api это сервис, который предоставляет api для взаимодействия с блокчейном (reply to 270121)

Namon: ну раз у сервиса есть какой-то бэкенд, то логично, что да но api непубличный (reply to 270123)

Namon: под devtools имелось ввиду devtools в браузере, если что (reply to 270121)

Crypto: Там csrf captcha и всякие херни. Рент не будет работать просто так. (reply to 270126)

Namon: изучайте как здесь работает: https://www.tonnel.network/fragment я не знаю, как это устроено в плане взаимодействия с фрагментом (reply to 270127)

&rey: Операции с нфт спокойно и без какого-либо апи работают, она же в чейне. (reply to 270123)

Crypto: Как-то нелогично. Сам нфт будет работать как картина, но для подключения к телеграму надо взаимодействие с бэкендом телеграма. (reply to 270132)

-: Конечно, но ведь ты не можешь принять СМС (получить код для авторизации) на картинку (нфт), а на анонимный номер можешь, хоть он и привязан к нфт. Ну, это что касается именно анонимных номеров (reply to 270132)

-: Если не понятно к чему это - аренда анонимных номеров так и работает, привязывается на фрагменте к аккаунту Telegram и по истечение срока аренды отвязывается владельцем нфт. Но без фрагмента все это не работает (reply to 270136)

-: покажите тз и итоговый результат и тогда говорите о скаме (reply to 270145)

-: я тоже многих заказчиков заблокировал, ну их нахер, бесячие бывают (reply to 270150)

-: скиньте мне пруфы и я ознакомлюсь позже, сейчас занят (reply to 270152)

User<7013799788>: Написал в лс (reply to 270155)

User<7013799788>: Удалил жалобы, так как мы решили нормально договориться

User<7013799788>: Вернул мне 50% от суммы, не скам, всё нормально, просто недопонимания.  Сказал, что попробует сделать, как я сказал

Vladimir: Ну, здорово, что Вы этим поделились с 10к участниками данного чата. (reply to 270159)

User<7013799788>: Я думаю о репутации человека (reply to 270160)

User<7349996151>: На кого жалоба? (reply to 270161)

Андрей: Делали же вроде специальные площадки для фриланса, что бы была видна история заказов у заказчиков и выполненных работ у разработчиков

User<7349996151>: Это те которые 40-50% комиссию берут такие как кворк?))) (reply to 270170)

Андрей: Там была комиссия сети на работу контракта (reply to 270171)

User<7349996151>: Что?) (reply to 270175)

APMedia: Всем привет. На testnet API toncenter v3 второй день получаю ошибку на runGetMethod и еще некоторых эндпоинтах:  "error when dialing 172.16.240.12:12000: dialing to the given TCP address timed out". Есть у кого такие проблемы?

Aleksey: так, а почему шайтан-бот не пропускает мое сообщение мини-презентацию проекта?( и с ссылками, и без

Sol: Чат не для рекламы ,а для вопросов разработки, и тем более не для силок на ваш проект (reply to 270222)

Aleksey: рекламировать проект в чате разработчиков, а не своей ца - это очень сомнительное занятие)) но ход мысли, конкретно вашей, я понял (reply to 270223)

Sol: Да не важно тут иногда при вопросе сыллку крепишь ловишь бан, у меня уже 5 аккаунт созданный для этого чата (reply to 270229)

Aleksey: аааааааааа может, у этого бот фильтр по стоп-словам каким-то? я уже текст до 1 абзаца ужал, все равно не дает отправить

Igor G: Та же история при отправке транзакции в сеть. Решили использованием метода jsonRPC (reply to 270199)

APMedia: печаль, @ruslixag, можете это исправить? (reply to 270261)

Vadim: Ребят , доброго. Подскажите пжл , где почитать как звезды привязать к игре ?

Vladimir: @tmabuild (reply to 270265)

Denis: В последней версии тонкипера для андроид появилась фича "безопасный режим". Андроид 5.0.16  Настройки -> Безопасность -> включить Безопасный режим Пока она выключена по-умолчанию и требует включения. Пока не ясно точно когда но она будет включена по-умолчанию, но будет. Вы можете пробовать пользоваться и давать обратную связь. Мы будем дорабатывать правила модерации и т.п.

sd: А что будет делать этот безопасный режим? (reply to 270305)

Denis: защищать пользователей от скамеров всяких

sd: Я думал это и щас происходит, контракты же подписываются как спам и скам, или там прям запретит любые транзы на подозрительные адреса?

Max: Там больше нюансов на самом деле (reply to 270308)

Max: Да и любая автомодерация всегда будет на два шага назад тех, кто пытается её обойти, по очевидным причинам (reply to 270308)

sd: Это так (reply to 270315)

sd: А как выключить вашу батарейку, зачем она принудительно включается, я никогда её не пополнял, хочу тратить нормальный газ (reply to 270309)

Max: А пополняли? Подскажите версию аппа и платформу (reply to 270328)

&rey: (тонкиперу, кажется, не мешало бы сделать узоры на фоне в зависимости от версии и платформы)

sd: Посмотрел, там стоит в истории промо какое-то от 17 октября 🤔 Но все равно странно вместо тона когда он есть на балансе юзается сложная схема с контрактами батарейки, и отключить это никак нельзя (reply to 270332)

Max: До реакт нейтива было неактуально. А так да, теперь самый настоящий зоопарк клиентов… (reply to 270335)

Max: В приоритете баланс батарейки  Но пока не допилили отключение на айосе, раньше было… (reply to 270336)

sd: Но батарейка позиционируется как замена газу, то есть как бы на тот случай (чёрный день), когда его нет на балансе  Я так думал (reply to 270340)

Nastya: Привет!  Венчурный билдер The Open Platform ищет Senior Software Engineer в портфельный проект TonTech 💎  Основные требования - опыт разработки смарт-контрактов на FunC.  Задачи будут включать в себя разработку библиотек, SDK и тулов для TON-экосистемы. Будет возможность использовать в работе разнообразные ЯП помимо FunC - TypeScript, Node.js, Rust, Go.  📍Remote  Откликнуться можно по ссылке Или присылайте резюме мне на @wha_les   Буду рада обсудить детали)

&rey: Кстати, а у кого есть опыт создания приложения кошелька (помню, контест был)? Интересно узнать, что там надо учитывать, и как лучше структурировать код против случайного отображения старых данных.

Dmytro: Есть цепочка сообщений: A→B→C  Кто в этой цепочке платит action fees за отправку сообщения B→C ? compute fees оплачивает A, forward fees платит B, а action fees?

Tim: На уровне транзакций никакой цепочки нет. Просто б отправляет сообщение. Он и платит

&rey: compute платят A,B,C forward платят A,B action платят A,B (reply to 270370)

Dmytro: action fees точно платит B? (reply to 270372)

Dmytro: конкретно для сообщения B→C интересует (reply to 270373)

Tim: У каждой транзакции есть аккаунт на котором она выполнилась. Этот аккаунт платит все fees

&rey: Ну, транзакция на A уже давно закончилась, и выполняется сейчас на контракте B, поэтому за всё платит B. (reply to 270375)

Dmytro: и да, С платит compute_fee только если он вызвал accept_message (reply to 270373)

&rey: не-а (reply to 270378)

Dmytro: не, если у тебя пришло internal message, то он платит за компьют фи твое, а твой изначальный баланс не трогается (reply to 270376)

Tim: Валидатор по твоему ретроспективно идет в другой шард забирать долг?

Tim: Каждая транзакция затрагивает только 1 аккаунт

&rey: Не очень полезный в данной ситуации фрейм, кажется. В любом случае же тоны сообщения перекладываются на контракт перед исполнением кода. (reply to 270380)

Dmytro: Во входящем сообщении тоны приатачены, с них и платится (reply to 270381)

Tim: А если я не приатачил? (reply to 270384)

Tim: Я могу тебе 0 тон прислать

Dmytro: не можешь (reply to 270387)

Tim: Шок (reply to 270388)

Dmytro: И вот вопрос: эти же тоны используются для оплаты action_fees, или их уже платит баланс контракта? (reply to 270384)

&rey: Я предлагаю такой фрейм. C платит compute_fee в любом случае; но оно ограничено суммой B—>C, если не вызван accept_message(). (reply to 270378)

Dmytro: ты просто перефразировал то что я сказал (reply to 270391)

Tim: https://tonviewer.com/transaction/b98902b2b4978d3fd388bc71043091cb43f56a08ce777178faf7242f8fdcd8f5

/B4ckSl4sh\: Может, он поставит 0 и PayGasSeparately, в момент сборки сообщения валидатором на контракте А (когда он выставит правильный сурс bounced и.т.д.) он посчитает fwd_fee и вычтет их с баланса аккаунта А (reply to 270388)

Tim: Вот мне вселенная даже послала спам коммент прямо сейчас на кошелек. астанавитес

&rey: Ну, я перефразировал и @TrueCarry, и вас, и как на самом деле происходит) > action_fees ограничены сверху суммой входящего сообщения минус газом (и так учитываются в режиме отправки 64/...), или платятся уже вместе с forward_fees? (reply to 270392)

Dmytro: Это важно на самом деле. Если я отправил 0.05 тон в сообщении которых хватило на compute фазу, но для action_fees исходящих сообщений надо 0.1 тон, то транзакция баунсится или списываются тоны контракта? (reply to 270390)

/B4ckSl4sh\: А какой режим отправки тут у контракта B? (reply to 270399)

Tim: а какой мод?)) (reply to 270399)

Dmytro: 0 (reply to 270400)

Tim: на самом деле там будет больше вариантов, чем культурно отвечать в чате

Tim: если на контракте будут 0.1 тон - они спишутся

Tim: ты же сам инициируешь отправку уже

/B4ckSl4sh\: Почему? Там же mode 0, их попытаются вычесть из value сообщения и получится exit code 37 (reply to 270405)

Tim: логично (reply to 270408)

/B4ckSl4sh\: *но баунса не будет по идее (reply to 270408)

Tim: а если мод 16?

Dmytro: ага, blueprint согласен. теперь надо подумать как это в мейннете потестить. (reply to 270405)

/B4ckSl4sh\: Я им никогда не пользовался) Но по логике наверное за баунс нужно будет заплатить уже из баланса контракта (reply to 270413)

Dmytro: ну вычтутся из value сообщения, вроде все норм (reply to 270408)

/B4ckSl4sh\: Но мы же говорим, что value сообщение недостаточно на покрытие fwd_fee (reply to 270416)

Dmytro: value входящего а не исходящего (reply to 270417)

Dmytro: то есть in_msg тебе присылает 0.05 тон а на action_fees для outbound messages надо 0.1 тон

Tim: https://docs.ton.org/v3/documentation/smart-contracts/message-management/message-modes-cookbook  в доке появилась такая страница. Если ты в это полез и делаешь уже блупринт тесты, было бы прикольно все пункты отсюда покрыть и залить на гит, добавить ссылку.

/B4ckSl4sh\: А, ну если контракт сам туда поставил достаточный value, тогда вопросов нет.  Мы на самом деле говорили скорее про ситуацию, когда исходящее сообщение имеет mode 64 (reply to 270418)

Dmytro: надо бы добавить нормальную доку по action fees (reply to 270420)

F: Исправили (reply to 270199)

User<2093355140>: ребят кто нить знает как с тон виевера можно с определенного кошелька скачать все его транзы в табличку

ダーリン: спарсить скриптом и записать (reply to 270449)

User<2093355140>: бля а прям шо бы в обозревателе каком то было нету? (reply to 270450)

ダーリン: прям экспортировать с тонвьюера историю нельзя

User<2093355140>: и нету сервисов никаких?

ダーリン: не осведомлен о таких (reply to 270455)

User<2093355140>: бляя жаль а то мне надо с своих 15 кошелей посчитать расходы и доходы (reply to 270456)

Оскар: можно (reply to 270454)

Andrey: Всем привет. Как может быть такое что транзакция оказывается в двух блоках мастерчейна?

&rey: 1. воркчейн и мастерчейн блоки не 1-1 соответствуют друг другу 2. может, всё-таки разные транзакции одного дерева? (reply to 270462)

Ruslan: подскажите мб я не прав, но на фрагменте разве нельзя обойти KYC путем отправки прямой транзакции на контракт аукциона минуя интерфейс фрагмента? или для таких хитровыебанных уже есть защита в контракте?

ダーリン: не знал, прикольно (reply to 270461)

Beautiful: Можно... Всё работает (reply to 270464)

User<2093355140>: там платно (reply to 270461)

User<2093355140>: а мя кошелей дофига

User<2093355140>: я думал как в сол а не 1 кнопкой спарсить

Andrey: Мы парсим транзы оталкиваясь от мастерчейна. Идём по мастерчейну, получаем шарды воркчейна и видим в логах что транза с одинаковым ид была в 2-х блоках мастерчейна, причём вторая такая же находится сразу в следующем блоке мастерчейна. Кажется что это не возможно и косяк у нас. Она же в принципе должна только в одном блоке мастера быть, так? (reply to 270463)

Ruslan: но вряд ли тут можно оплатить премиум или старсы, там нужен их внутренний айдишник в коментах, который выдается ихним бекендом (reply to 270467)

User<2093355140>: так простая транза не прокатит я думаю, там же смарт контракт выполняется (reply to 270464)

Оскар: а да, жесть, видимо субботин реально хочет наши деньги (reply to 270468)

Beautiful: Звезды и премиум точно нельзя, а вот запустить аукцион или ставку, всё работает, нужно просто составить правильный payload (reply to 270475)

User<2093355140>: там ваще тон консоль какая то (reply to 270477)

Konstantin: Привет. Мой контракт получает сообщение и отправляет ровно такое же, хочу посчитать сколько оно потребит форвард газа, но считать не самостоятельно, а на основе int fwd_fee = cs~load_coins(); из входящего сообщения.  Какой правильный ответ? 1. Это ровно fwd_fee 2. Это get_original_fwd_fee от fwd_fee 3. Нужно как-то играться с get_forward_fee / get_simple_forward_fee  Или если кто-то на пальцах объяснит зачем нужны и в чем разница между get_original_fwd_fee, get_forward_fee и get_simple_forward_fee - буду благодарен

Dmitrii: [2024-11-28T14:58:41Z DEBUG ton_extension::listener] Operation executed event has been caught: op_hash: 030b38c7c2ebcee24411e28c567697af1997236abed5d25a96dc76b742fa8455, address: EQCENVWJ_AYdrC4mQu9wJcIh3xTb8BSzXrT_XdkCIVkgw7zD [2024-11-28T14:58:41Z DEBUG photon_module::listener_app::rabbitmq_publisher] transmitter_msg to be sent: OperationExecuted(OperationExecuted { need_check: true, last_watched_block: "42434698", op_hash: [3, 11, 56, 199, 194, 235, 206, 226, 68, 17, 226, 140, 86, 118, 151, 175, 25, 151, 35, 106, 190, 213, 210, 90, 150, 220, 118, 183, 66, 250, 132, 85], executor: [] }) [2024-11-28T14:58:41Z DEBUG photon_module::common::rabbitmq] Publish ack delivery_tag: 4, channel: 1 [open] of connection 'AMQPRS000@localhost:5672/ [open]' [2024-11-28T14:58:42Z DEBUG ton_extension::listener] tx_id: 51336907000001:3fbcf6edea5413f1ed01f7ecba8647a0f964ef8d1db6d29c0f441bd85e23e3a2 [2024-11-28T14:58:42Z DEBUG ton_extension::listener] Operation executed event has been caught: op_hash: 030b38c7c2ebcee24411e28c567697af1997236abed5d25a96dc76b742fa8455, address: EQCENVWJ_AYdrC4mQu9wJcIh3xTb8BSzXrT_XdkCIVkgw7zD [2024-11-28T14:58:42Z DEBUG photon_module::listener_app::rabbitmq_publisher] transmitter_msg to be sent: OperationExecuted(OperationExecuted { need_check: true, last_watched_block: "42434697", op_hash: [3, 11, 56, 199, 194, 235, 206, 226, 68, 17, 226, 140, 86, 118, 151, 175, 25, 151, 35, 106, 190, 213, 210, 90, 150, 220, 118, 183, 66, 250, 132, 85], executor: [] }) (reply to 270473)

User<7351345111>: всем привет, кто знает, где можно хост для сайта купить?

&rey: tonapi обыкновенное. Соблюдайте rate limit и история транзакций нормально загрузится, всё будет в шоколаде. (reply to 270455)

/B4ckSl4sh\: Сейчас главное не бухтеть. От нас требуется сидеть тихо. После того, как все сделают, все будет у нас хорошо. Всем устроят довольствие, как Саудовским гражданам - каждый будет кататься в масле. Главное сейчас сидеть тихо и не суетиться. (reply to 270502)

/B4ckSl4sh\: если сообщение идентично пришедшему, то его fwd_fee будет идентично original_fwd_fee .  original_fwd_fee - узнать сколько заплатили за сообщение, которое вам сейчас пришло get_forward_fee - узнать, сколько будет стоить сообщение, состоящее из X битов и Y ячеек (не считая корневую, об этом дальше)  get_simple_forward_fee - то же самое, что и предыдущее, но без lump_price - минимальной цены отправки сообщения. Эта цена в том числе покрывает плату за корневую ячейку (reply to 270480)

meta: Приветствую! Подскажите плиз актуальную stdlib.fc У меня нет метода equal_slices но есть equal_slices_bits что одно и то же, только понять не могу что новее

SweetJesus: это вроде новее. Раннее было просто equal_slices (reply to 270505)

/B4ckSl4sh\: Скоро tgBtc будет (reply to 270507)

/B4ckSl4sh\: А вообще есть jwBTC, но там не много ликвы в пуле (reply to 270507)

Dmytro: tgBTC есть в тестнете, в Q2 2025 обещают в мейннете (reply to 270507)

Oleksandr: Подскажите пожалуйста в чем может быть проблема... У меня есть фабрика, которая деплоит контракты. В конструктор новых контрактов у меня приходит адрес и собственная структура данных (в основном это юинты). Контракт разворачивается и на скане без проблем могу вызвать методы для чтения. На фабрике есть метод для расчета будущего адреса     get fun get_test_address(owner: Address, testData: TestData): Address {         let init: StateInit = initOf Test(owner,  myAddress(), testData);         return contractAddress(init);     } но когда я пытаюсь расчитать адрес  через скрипты у меня появляется ошибка.

/B4ckSl4sh\: Почему у меня может вылетать такая ошибка? (использую самый последний бинарь из релизов)  ./fift output.fift [ 1][t 0][2024-11-28 18:54:03.018790179][Fift.cpp:66]  top: <continuation 0x107da5d0> level 1: <continuation 0x10808da0> level 2: <text interpreter continuation> [ 1][t 0][2024-11-28 18:54:03.018891398][fift-main.cpp:192]  Error interpreting file `output.fift`: output.fift:565:  SENDMSG:-?

/B4ckSl4sh\: Выглядит как будто не поддерживает опкод SENDMSG, по идее я могу конечно без каких-либо проблем заменить его на SENDRAWMSG, но всё равно странно (reply to 270514)

&rey: Ну, Asm.fif где-то старый. Он не в бинарнике идёт вроде. (reply to 270514)

/B4ckSl4sh\: ааа, точно, а где его качать нужно свежий? (reply to 270516)

/B4ckSl4sh\: P.S. Если вдруг кому-то понадобится, то, скорее всего, вот этот свежий.  https://github.com/ton-blockchain/ton/blob/master/crypto/fift/lib/Asm.fif (reply to 270517)

🎐*<@Maxim: почему tonviewer не отображает on-chain -аттрибуты, а тут они отображаются, кому писать чтобы ввели децентрализованную поддержку on-chain аттрибутов : https://getgems.io/nft/EQAP-D7VapdbfOFln-xvXNG3XEmnRsh705UEcVSznpYq6iph

Max: И tonviewer подгрузил уже (reply to 270520)

Max: Или чего не хватает? Вроде проиндексировалось

🎐*<@Maxim: но я же пишу что атрибуты он не грузит  attributes (reply to 270522)

🎐*<@Maxim: я не про "name", "image", "description", а про "attributes", например, [{'trait_type': 'Type', 'value': 'photo'}] (reply to 270521)

Max: А. Ну про attributes вроде ожидаемое поведение, как писал Денис

api: можете написать мне, если пойму зачем, то добавлю в apitonBot (reply to 270520)

— 2024-11-29 —

User<6345006360>: 👋

🎐*<@Maxim: @subden огромное спасибо, теперь из за вас и getgems перестают отображать on-chain “attributes”

🎐*<@Maxim: “Этот метод внесения атрибутов был убран с целью большей совместимости с ton.api и Tonviewer.”

Denis: Ну и славно. Потому что идея класть json внутрь как строку это изобретение диавола (reply to 270560)

🎐*<@Maxim: В чем же тогда смысл децентрализации (reply to 270563)

Denis: Смотрите. Децентрализация это значит что существует много независимых (в плане точек отказа и управления). Но при этом эти решения могут взаимодействовать между собой и заменять друг друга. А для этого надо чтобы они все работали по +- одинаковым стандартам обеспечивающим интероперабельность. Так вот никакого стандарта на то как складывать ончейн массивы объектов не существует. Там были попытки их сделать но не допинали. Решение в виде сериализованого json как текста ужасное. Хотите ончейн атрибуты - допилите tep64 (reply to 270564)

🎐*<@Maxim: Но NFT имеет право быть полностью в блокчейне , и необходимость обсуждалась https://github.com/ton-blockchain/TIPs/issues/64#issuecomment-1041919338 (reply to 270565)

Denis: Блин. Это Анатолий предложил эту дичь. Но по итогам того обсуждения ничего не сложилось вроде (reply to 270566)

Dmytro: А в чем проблемы договориться о формате сериализации жсона в ячейки (reply to 270565)

Denis: Фундаментально ни в чем (reply to 270568)

Denis: Надо чтобы кто-то написал внятную доку и написал поддержку хотя бы в одну либу под какой-нибудь язык чтобы остальные могли списать

Denis: А тут есть фундаментальная проблема что всем кто это способен сделать пофиг на ончейн атрибуты

&rey: Сериализацию лучше как можно проще сделать? (reply to 270572)

Dmytro: Там же пару часов работы лол (reply to 270572)

Denis: Для тебя. Но тебе пофиг на ончейн атрибуты (reply to 270574)

&rey: Э, там только собрать список юзкейсов около того и выйдет. Например, много кто хочет атрибуты ещё и менять ончейн. Значит, JSON в строку складывать так себе, его же потом пересериализовывать. (reply to 270574)

Dmytro: А зачем. Хочешь менять атрибуты меняешь всю пачку. (reply to 270576)

&rey: Ончейн-логика, меняющая атрибуты без какого-то оффчейн вмешательства. (reply to 270577)

Dmytro: Зачем (reply to 270578)

Denis: Я думал кжх добавить ончейн мутации и надо править атрибуты

Denis: Оказалось проще передавать биты мутаций в урл по которому офчейн бэк будет делать атрибуты в json

&rey: Нфт-звери, которые растут, и у них только один параметр надо менять. (Вот и хороший пример, почему нельзя стандарт быстро писать.) (reply to 270579)

Dmytro: Не, тогда ты хранишь в стейте параметр роста зверя, и собираешь метаданные по требованию, а не меняешь что-то там в метаданных в процессе работы (reply to 270584)

Dmytro: А еще проще ты хранишь это оффчейн и оффчейн меняешь атрибуты

&rey: То есть, сериализую JSON-список атрибутов в гет-методе? Индексеры спасибо скажут, это же всё считать надо. (reply to 270586)

&rey: Ну, к чему мы и пришли. Речь про то, как сделать полезные ончейн-атрибуты.. (reply to 270587)

Dmytro: У тебя неочевидные критерии полезности

Denis: Ну там можно на конкатенации ячеек в снек дате сделать довольно производительно. Но все равно так себе (reply to 270588)

Denis: Кстати там меридиан уже собирает текст. И приходится для них ставить повышенный лимит газа

&rey: Я учитываю цену отзыва стандарта, когда модификации всё-таки понадобятся для какого-нибудь очень важного FoundationBridgeTxTrackerNft. (reply to 270590)

Dmytro: Ты какие-то неочевидные вещи говоришь которые я не понимаю (reply to 270594)

&rey: Стандарт — это не такая штука "ну вот первый юзкейс в голову пришёл, выберем любой удобный для него способ реализации, а потом поменяем", а "надо учитывать, как нфт сейчас хотят использовать ончейн атрибуты, и чего они ещё захотят во всё время существования стандарта". Ну и любые изменения, делающие дешевле/проще/шире возможность работы с нфт ценой чуть более долгой разработки стандарта, стоят того определённо. (Особая сериализация вместо "кладём JSON" у нас, напомню, ничему вроде не мешает.) (reply to 270595)

Dmytro: Что лучше: тупой стандарт который работает для 99.9% юзкейсов или отсутствие стандарта? (reply to 270600)

&rey: Отсутствие.  Если тупой скажет "ну вот атрибуты обязаны быть JSON-сериализованной строкой", то его ещё отзывать придётся; с отсутствием стандарта такого нет. Ну и учёт тех 11% юзкейсов тоже штука полезная в общем и целом. (reply to 270603)

Dmytro: Ну вот мы и ответили почему стандарта нет и что тонапи тут ни при чем🤷 (reply to 270604)

Андрей: Сотрудник тонапи (reply to 270612)

&rey: Хм. Я не работаю в tonapi, хотя интересная идея на самом деле. (reply to 270620)

Андрей: Да я не про вас, а про полунина (reply to 270623)

Dmytro: Я не сотрудник тонапи (reply to 270635)

Max: Кто такие эти ваши сотрудники тонапи. Они с вами в одном чате?   А если серьезно, то мы все Tonkeeper team

api: Официально заявляю, что этот метод будет добавлен в apiTON  Так же onchain атрибуты появятся в apitonBot (reply to 270562)

Victor: Всем привет, у меня вопрос, я пытаюсь реализовать безопасное хранилище через TON и IPFS, но так как IPFS хранит данные в открытом виде, мне нужно шифрование, реализовать шифрование и хранить ключи на стороне клиента ну такое себе, могу ли я реализовать шифрование и дешифрование в смарт-контракте?

Андрей: Если смарт-контракт сможет дешифровать сообщение, то и любой другой человек сможет, так как данные и код контракта общедоступные (reply to 270685)

Андрей: Шифруйте общим секретным ключом x25519 на основе своего приватного и публичного ключа принимающей стороны и шифруйте данные. Принимающая сторона так же воссоздаст секретный ключ на основе своего приватного и вашего публичного ключа и расшифрует данные. Так работает шифрование комментариев при переводах. (reply to 270685)

&rey: Ну и, конечно, никаких гарантий о совпадении шифртекста с каким-то исходным файлом нет. (reply to 270688)

Oleg: Это будет работать только one-to-one, т.е. если принимающих сторон несколько, то увы (reply to 270688)

Андрей: А вроде бы нету хорошего способа доступа к шифрованному файлу для нескольких клиентов. Если только не отправлять приватный aes ключ в зашифрованных комментариях каждому пользователю лично - но тогда рано или поздно ключ утечёт через какого нибудь пользователя. (reply to 270694)

&rey: Если файл передаётся пользователю, то он весьма определённо может быть слит, вне зависимости от шифрования посередине/... (reply to 270706)

rends_east: Привет всем Как я могу создать Dictionary из ton/core, чтобы он был Int -> Slice ? Если создаю Int -> Cell , то мне в контракте приходится его дополнительно распаковывать, как этого избегать? Ончейн же можно не делать idict_set_ref, можно просто idict_set

Dmytro: Ручками создай Value тип для Dictionary (reply to 270723)

rends_east: а по дефолту это просто забыли сделать или есть какая то строгая причина? (reply to 270728)

Anton: ребят, такой вопрос в Telegram.WebApp.initDataUnsafe.user есть поле language_code и там у меня всегда ru, даже когда переключаю язык клиента или даже системы на en. Как должна работать локализация?

Max: @devs @devs_cis (reply to 270770)

Namon: Может кто-нибудь подсказать есть ли какая-нибудь либа для JS/TS с ассетами (готовым кодом для взаимодействия с контрактами) жетонов, нфт, кроме @ton-community/assets-sdk?

api: Можете подробнее описать суть задачи? (reply to 270824)

api: и возникшие проблемы

Namon: Ищу такую же либу, как @ton-community/assets-sdk, но не устаревшую (reply to 270828)

Namon: Мне не API нужен, если что :)

api: Мне интересен сам вопрос

Oleksandr: подскажите как отправлять транзакцию на питоне? на ts вызов выглядит следующим образом     await contract.send(         provider.sender(),         {             value: toNano('0.1'),         },         {             $$type: 'Status',             status: true,         },     );

Namon: Ну библиотека с аля врапперами, как делаются врапперы для блюпринта (reply to 270833)

Namon: Зависит от библиотеки Чат по питону: @pythonnton  Можете там глянуть по поиску или спросить (reply to 270836)

&rey: Этот вариант очень засахаренный. Обычно будет или payload = begin_cell().store_uint(CRC_STATUS, 32).store_uint(status, 1).end_cell() await wallet.send_transfer(..., payload=payload)  или (требует обёртку) await contract.send_via(wallet, StatusMessage(status=true)) (reply to 270836)

Molodoy Abuzer 3: Всем хай. Вот boc для перевода ton на указанный адрес. Ставлю его в тело запроса tonapi/v2/accounts/{account_id}/events/emulate, но в ответе получаю ошибку destination account is null. Подскажите что имеется ввиду под destination account? Это аккаунт на котором будет эмуляция, или аккаунт для перевода?

Namon: А в доках тонапи нет инфы об этом? (reply to 270857)

Molodoy Abuzer 3: А в доках тонапи вообще есть что-то?) (reply to 270858)

Оскар: на котором будет эмуляция  экстерналы бывают разные, и они могут даже не порождать интерналы, поэтому "аккаунт для перевода" тут никак не связан с вызовом эмуляции (reply to 270857)

Namon: Не знаю, просто спросил (reply to 270860)

api: Раз есть необходимость в аттрибутах, и кто-то когда-то решил делать это через string,  а другой обрабатывать это своим образом, при отсутствии отклика на запрос стандарта,

api: решение по получению аттрибутов следует случившемуся стандарту и возвращает string.

api: в api тоже работает.   Пишите о ваших болях напрямую, есть возможность их вылечить.

Степан: Привет! Можете добавить after_lt также в /v2/accounts/{account_id}/traces? (reply to 156592)

Sutako: Привет. Подскажите, кто имел дело с этим Мне нужно получать все переводы токена, нечасто, но нужно  В доке есть это https://tonapi.io/v2/sse/accounts/transactions?accounts=ALL&token=eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9  Я бы хотел что то такое, но это не работает https://tonapi.io/v2/accounts/ALL/jettons/EQBnGWMCf3-FZZq1W4IWcWiGAc3PHuZ0_H-7sad2oY00o83S/history?limit=100  Как получать транзакции только по одному токену?

Denis: Да. Но хз когда (reply to 270887)

Denis: Не работает же (reply to 270882)

Denis: Это ж дичь

Sutako: Есть так же эта функция, что она делает, я так и не понял, у меня не получается от нее ответ получить Так же непонятен getJettonsEvents (reply to 270894)

api: Именно string обрабатывает getgems.  Именно string используют те, кому нужны атрибуты.  Если быть внимательнее, к тому, что пишут, это очевидно.  И это отличает профессионалов. (reply to 270899)

&rey: А кто пишет, и к чему внимательнее-то быть? Не вижу в треде, кому самому нужны были бы те нфт с атрибутами. Я думал над парой применений, так там хотелось бы менять ончейн кусочек с эффективностью словаря.  А ещё... Ой, атаки к личности ("отличает профессионалов") 😆 (reply to 270901)

api: Ещё раз, что-либо выдуманное отсутствует.  Можете открыть ссылку на getgems,  Можете вставить её прямо в apitonBot  посмотреть внимательно на атрибуты и вопрос закрыт.   Я понимаю, что конкуренция вызывает зуд, и ясно увидел это вчера на питчинге.  Но друзья, это повод развиваться. (reply to 270520)

Оскар: я правильно понимаю что если атрибуты оффчейн то вернётся массив объектов, а если ончейн то строка? 💀 (reply to 270882)

api: возвращаются данные из блокчейн, если атрибуты ончейн, вернётся ссылка на json в оффчейн.  Технически, cNFT, ненастоящие NFT.  именно это и сподвигло реализовать запрос сообщества на атрибуты.  И надеюсь сподвигнет тех, кто влияет, разработать стандарт, который apiTON, кончено же тоже поддержит.

Мишши: Куда надо залистить монеты чтобы они обменивались в тон спейсе телеграмм валет?

Sutako: Ты на стонфи заливал? (reply to 270908)

Ivan: Для новых нфт гетгемс не будет отображать такие атрибуты, надо либо метадату по ссылке сделать, либо дописать стандарт хранения массивов в tlb (reply to 270520)

Ivan: Только в старых нфт, в новых не обрабатывает (reply to 270901)

api: Это их решение. Как хорошо, что есть альтернатива

Sutako: А для тон спэйс, видимо, нужна верификацыя, галочка токену и обьем, тут точно сказать сложно. Достаточно чтобы токен был на стонфи (reply to 270908)

🐼 Sild: А есть ли возможность в Смарт-контракте обработать кейс когда вызываемая библиотека заморожена?

Мишши: На дедаст в основном  На стонфай мелкий пулл ликвидности тоже создал (reply to 270909)

— 2024-11-30 —

Alex: Приветствую, TON Dev Community!  TON Studio, просит вас поделиться своим опытом разработки для дальнейшего планирования улучшений документации и инструментов в экосистеме TON.   Опрос охватывает четыре ключевые темы и займет примерно 5-10 минут вашего времени.   Мы с интересом вчитаемся в каждый отзыв, мы заинтересованы в поддержке разработчиков любого уровня, поэтому не стесняйтесь оставлять ваш отзыв вне зависимости от вашего бэкграунда.  👉 https://eoolk3ab.paperform.co/

Crypto: Jetton wallet и jetton master в чем отличие

sd: https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md (reply to 270933)

Crypto: Как изучить funC с нуля. Туториал похожий на w3schools (reply to 270935)

Molodoy Abuzer 3: А в чем может быть дело тогда? (reply to 270867)

Asher: https://www.youtube.com/playlist?list=PLyDBPwv9EPsA5vcUM2vzjQOomf264IdUZ Как изучить funC с нуля. (reply to 270933)

Игорь: Привет, а кто-нибудь сталкивался с проблемой, когда при отправке сообщения сеть начинает ругаться на адрес получения, хотя адрес корректный (через Address.parse, пробовал во всех форматах), через blueprint в него успешно отправляется сообщение. Но при попытке отправить скриптом через TonClient постоянно exit code 36 (хотя state=uninitialized)

Киви: Всем привет, как можно сделать импорт кошелька через сид-фразу на Python?

&rey: Хм, а что сложного? pytoniq, WalletContractV3R2.from_mnemonic, ... (reply to 270997)

Киви: Благодарю, а то долговато искал и видимо пропустил (reply to 270998)

Mirka: По питону можешь тут искать @pythonnton (На будущее) (reply to 270997)

Alacrity: При переводе жетонов возникает exitCode: 9 - Cell underflow   cell msg_body = begin_cell()   .store_uint(op::transfer, 32)   .store_uint(0, 64)   .store_coins(amount)   .store_slice(destination)   .store_slice(storage::owner_address)   .store_uint(0, 1)   .store_coins(1)   .store_uint(0, 1) .end_cell(); cell msg = begin_cell()   .store_uint(0x18, 6)   .store_slice(jetton_wallet_address)   .store_coins(0)   .store_statinit_ref_and_body_ref(state_init, msg_body) .end_cell();   Видимо я как-то неправильно тело сообщения собираю, но не могу понять в чем ошибка

Denis: Выглядит правильно (reply to 271042)

Alacrity: при чем тестирую на разных jetton-wallet, в одном случае работает, а в другом - нет (reply to 271049)

Danil: Посмотри чем отличаются валлеты , возможна перегрузка твоих ячеек не нужной инфой (reply to 271054)

Farel: подскажите пж как правильно оформлять пул реквест к тонкиперу на верификацию токена

Viacheslav: а почему может фейлиться   const wallet = WalletContractV5R1.create({     workchain: 0,     publicKey: publicKeyBuffer,    });  но если делать WalletContractV4, то всё ок в @ton/ton

Василий: Как-то так. Форкаешь ton-assets, в каталог jettons добавляешь файл yaml файл с описанием своего токена, комитишить и делаешь пул реквест. (reply to 271087)

OopsCoin: Приветствую.  Кто сможет помочь. Нужны смарт контракты.

Alex: Мне интересно, есть ли какие-то общие паттерны для эволюции/обновляемости контрактов? Я предполагаю, что в моих контрактах довольно много изменений после MVP. Как с этим справиться? Мне пришла в голову идея прокси-контракта, который будет указывать на последнюю развернутую версию основного смарт-контракта. Есть ли другие варианты?

Oleg: В Тон обновление контрактов работает из коробки, если всегда оставлять SETCODE в контракте (reply to 271128)

Игорь: setCode() ? (reply to 271128)

Телепат 🏰 Tower: Всем привет.  Кто знает как верифицировать токен в тон?

Василий: А что вы понимаете под верифицировать? Если убрать надпись непроверенный токен в тонкипере, то сделать пул реквест в ton-assets на добавление вашего токена https://t.me/tondev/271108 Если добавиться в белые списки на DEX-ах, то тут надо смотреть требования dex-ов. (reply to 271136)

meta: Приветствую. Почему бот мои сообщения удаляет? Ещё раз напишу попробую  🖖

meta: Подскажите пожалуйста. (Фанси, блупнинт) Я по ошибке в контракте не написал impure в методе. Теперь когда нашел и исправил, у меня не создаётся новый контракт при деплое, а сообщение отправляется на старый тот что с ошибкой. Как это поправить?

jennifer [afk]: перебилди (reply to 271146)

Vladimir: Купить на tonconsole dot com. (reply to 271149)

Namon: Измени data при деплое контракта (reply to 271146)

Vladimir: tonconsole(.)com (reply to 271151)

Namon: Дот и есть точка (reply to 271151)

Ruslan: а не проще эмулировать функционал, который вы собрались тестить на 1500 тон? (reply to 271149)

smile: Здравствуйте. В тонкипер для подтверждения транзы нужно ввести пин. Мне потребовалось банально автоматически подтверждать все входящие транзы, ну или выборчно, от определенных сервисов (не сильно важно). Я не имею опыта разработки ни в одном чейне, и не очень понимаю как это можно реализовать, так что извините за простой вопрос) Буду рад помощи, спасибо

Namon: Так а в чём вопрос? Как автоматизировать подтверждение транзакций/их отправку? (reply to 271158)

smile: подтверждение (reply to 271159)

&rey: У тонкипера такой возможности подключить стороннее что-то нет. Как, собственно, ни у какого кошелька. (reply to 271160)

Namon: Разве что через QR можно Типа распарсить текст и выполнить транзакцию

smile: Я так понимаю тонкипер тут непричем, я же могу взаимодействовать с кошельком без кипера (reply to 271162)

Namon: Но это не совсем то

Namon: TON Connect работает только с определенными кошельками (reply to 271164)

Namon: Можно конечно сделать аля свой, но его не добавят в общий список, поэтому его нужно будет мучительно ручками добавлять через девтулс, условно

Namon: Короче любое решение здесь - что-то на уровне мазохизма

Namon: Если вы заранее знаете транзакции, которые нужно осуществлять, то легче сделать скрипт, который будет их выполнять

smile: понял, значит так и живем, спасибо (reply to 271168)

smile: тут транзы будут приходить с условного фрагмента (reply to 271169)

Namon: Условного или фрагмента? Если фрагмент, то там чисто отправка тонов с комментарием (не учитывая аукционы) Если можете автоматизировать получение этого комментария, можете автоматизировать отправку транзакций через скрипт

ge10: Ола! есть сайт с генерацией кошельков для тона? по типу walletgenerator .com как у биткоина?

Tim: https://tonvision.github.io/ton-wallet-generator/ такой? (reply to 271175)

Киви: Vaniton (reply to 271175)

Alacrity: для чего нужен next_admin_address в jetton-governed (как у USDT)?

Oleg: Для ротации админов (reply to 271179)

Alacrity: Почему просто не менять админа через change_admin? (reply to 271181)

Anton: Я код еще не смотрел, но обычно это нужно для двухступенчатой передачи прав. Вдруг будущего админа неправильно назначили или он умудрился приватный ключ потерять (reply to 271183)

Anton: Поэтому текущий админ в таком протоколе говорит «уступаю админство такому-то», а такой-то админство принимает отдельной транзакцией

User<7603890028>: Можно,  но это глупо. И шифрование и дешифрование лучше делать на стороне клиента. (reply to 270685)

User<7603890028>: А отправлять уже зашифрованные данные.

Sutako: Подскажите, как получить значение комиссии, перерыл все метаданные и результаты транзакций, ответа не нашел. Но она же должна откуда-то доставаться, это значение есть в истории транзакций, и появляется до отправки транзакции

Victor: Да, но в этом случае приватный и публичный ключи должны хранится в блокчейне? (reply to 271186)

Victor: А потом ключи уже получать из смарт-контракта при шифровании и дешифровании

/B4ckSl4sh\: Под комиссией в тонкипере вообще не очень понятно, честно говоря, что считают, зачем вам это значение? (reply to 271189)

Sutako: Значение нужно для того, чтобы знать, сколько обойдется комиссия (reply to 271192)

Cube: Думаю вам эмуляция подойдет (reply to 271193)

Sutako: Я нашел два эмулятора, от тон кипер, и от tonapi, но я пока их непонял tonapi = {"error": "iteration: 0, exitCode: 35, Text: External message not accepted by smart contract, "} (reply to 271194)

User<7603890028>: Чего? Вы храните приватный ключ в блокчейне? 😄 (reply to 271190)

Cube: Тонкипер кажется тонапи и использует :) (reply to 271195)

Victor: А мы храним приватный ключ на клиенте?) (reply to 271196)

Ruslan: это одно и то же (reply to 271195)

Ruslan: для эмуляции вообще используется их библиотека tongo (на Go)

User<7603890028>: Вы вообще принцип шифрования понимаете? Короче,  ладно,  достали новички. (reply to 271198)

/B4ckSl4sh\: Ну уж точно не в блокчейне, где вся информация публична - ваш приватный ключ там становится всеобщим достоянием. (reply to 271198)

— 2024-12-01 —

Svαtoωλ‎: а как получить какой версии токен в стонфи, типо пул у него создан - в в2_2, в2_1 или в1

Svαtoωλ‎: просто в жс вижу есть 3 версии стонфи контрактов

Оскар: токен может быть в паре через пулы любой версии одновременно, их можно достать через их апи https://api.ston.fi/swagger-ui/#/Dex/pool_query_utoipa в unconditional_assets ввести адрес токена и dex_v2 поставить в true (reply to 271211)

Svαtoωλ‎: А что означает conditional и wallet_address (reply to 271213)

Оскар: без понятия, это надо уже у разрабов стона спрашивать (reply to 271214)

Svαtoωλ‎: И я вроде как попытался получить все пулы через  /v1/pools Но токена нужного там не нашлось)  Попробую твой способ (reply to 271213)

Svαtoωλ‎: а еще вопрос, есть ли адреса для птона ? (reply to 271215)

Оскар: в2.1 (для в2.2 пулов тот же) EQBnGWMCf3-FZZq1W4IWcWiGAc3PHuZ0_H-7sad2oY00o83S  в1 должен быть в сдк вшит (reply to 271217)

Svαtoωλ‎: а в2.1 и в2.2 чем-то отличаются? просто не понимаю между ними разницу, в апи чисто в2 пишут везде (reply to 271218)

Оскар: там вроде отличия только в вводе/выводе ликвида, свопы и прочее абсолютно идентичные (reply to 271220)

Svαtoωλ‎: так. а как понять по токену, у него пул в2.1 или в2.2? в апи ответах об этом никак не пишется...) (reply to 271221)

Svαtoωλ‎: прост ликвид может понадобится

Оскар: там боль в заднице, у тебя в пуле лежит адрес роутера, к которому он привязан, и дальше можно на другой эндпоинт отослать запрос /routers/{address} и там будет выдана инфа какой он версии, сверху даже скажет адрес прокси тона и какая у него версия (reply to 271222)

Namon: v2.1 - версия пула с каким-то неозвученным багом, который возник только у одного(?) юзера при вводе/выводе ликвидности v2.2 - те же пулы с багфиксом  новые пулы на v2.1 не создаются (reply to 271220)

Svαtoωλ‎: а, значит можно не париться и юзать 2.2 повсюду?

Namon: в них даже нет ликвидности, видимо либо просто не отображают

Namon: да (reply to 271226)

Sol: Привет всем если тут есть сильный разработчик на такте - напишите мне пожалуйста

truth-teller: Ребят, приветус.  подскажите плз. Ledger поддерживает usdt в сети ТОN ?

/B4ckSl4sh\: Да, поддерживает (reply to 271237)

Sol: Найден (reply to 271230)

X1ag: Добрый день, можно ли создать jetton с помощью ton minter в тестнет сети?

rends_east: да, minter.ton.org/?testnet=true (reply to 271241)

X1ag: спасибо (reply to 271242)

🇷🇺 Angry: Всем привет!

🇷🇺 Angry: Можете подсказать, как или через какое api можно следить на новыми операциями с nft определенной коллекции? Например, выставлено на продажу, продано, и так далее. Я пробовал через tonapi subscribe, но мне приходят только ставки по аукционам

Svαtoωλ‎: парни, а что такое queryid что туда вписывать 👀

Svαtoωλ‎: а зачем обычно пишут 32, в дедаст свапах где то видел, при отсылке токенов (reply to 271251)

rends_east: а где об этом почитать можно? не видел ничего об этом раньше (reply to 271251)

&rey: Какой-то рандом впишите, чтобы эксплореры по нему быстрее транзакции склеили. (reply to 271250)

&rey: нигде, потому что валидаторы в тело сообщения не лезут (reply to 271253)

rends_east: да, это логично, поэтому и удивился (reply to 271255)

Alacrity: Разве у сообщений не переопределяется значение queryId? (reply to 271255)

&rey: lt, utime, source – да, а queryID чейном не требуется вовсе. (reply to 271257)

rends_east: ну было бы странно, если бы валидатор лез в тело сообщения (reply to 271257)

Alacrity: для чего тогда используется queryId? (reply to 271258)

/B4ckSl4sh\: Сейчас ни для чего, пережиток прошлого. Можете использовать эти 64 бита как считаете нужным (reply to 271261)

Denis: Скоро будет в стриминге (reply to 271246)

Toffee: Привет, коллеги, кто знает почему у тонкипр перестал работать дев кошелек?

Руслан: у меня тоже после обновы, единственная фича для чего его юзал на десктопе (reply to 271266)

dab: Пиши свое сокральное число (reply to 271250)

dab: А так, эта штука чисто для отслеживания трейса/транзы юзается

dab: Тот же стонфи апи дает возможность узнать статус транзы по квери айди

Svαtoωλ‎: прям любое? (reply to 271269)

𝙳𝙸𝚂𝚂𝙸𝙳𝙴𝙽𝚃: Сделай через рандом там ваще всеравно (reply to 271272)

dab: Рандом юинт64 генерь, и все (reply to 271272)

dab: Можешь 0 вставлять вообще

dab: А что за прикол

dab: Эмодзи, и числа в бане?

𝙳𝙸𝚂𝚂𝙸𝙳𝙴𝙽𝚃: def generate_query_id(offset: int = 7200):     return int(time.time() + offset) << 32 Вот если надо(взял вроде у пескаря из либы) (reply to 271272)

Andrei_ka: привет ребята, пишу react приложение с tonconnect/ui-react, идея в том что юзер отправляет комментарий вместе с тоном с помощью вебхука, на десктопе работает, а на мобильном экране после редиректа страница обновляется и это ломает функционал (знаю что можно комментарий засунуть в forward payload, но хочу возвращать юзеру tx_hash). Можно ли обойти это как-то или придется делать TMA?

Svαtoωλ‎: но почему в токенах пишут 32 при передаче (reply to 271281)

Svαtoωλ‎: давно (reply to 271279)

Svαtoωλ‎: и еще вопрос, есть ли у апи стонфи лимиты?

dab: Рпс? Нету (reply to 271285)

Svαtoωλ‎: а у дедаста есть (reply to 271286)

dab: У дедаста его не обязательно для свапов использовать (reply to 271287)

Svαtoωλ‎: раз дает значит надо использовать (reply to 271288)

dab: Зачем (reply to 271289)

dab: Да что за фигня, разве я какие-то банворды использовал?

dab: У них все ончейн легко сделать, он тебе там и не нужен особо (reply to 271289)

Svαtoωλ‎: невидимый кд на 30 сек (reply to 271292)

Svαtoωλ‎: ончейн - банворд разрешается юзать только апи тонапи (reply to 271292)

dab: Только тонапи, лайтноды свои для нубов (reply to 271295)

Svαtoωλ‎: а у стонфи ровно наоборот? (reply to 271293)

dab: Стонфи в1 свап ты можешь без апи спокойно сделать, а вот для в2 он уже нужен (reply to 271297)

dab: Ну, либо ты можешь индексировать сам все их роутеры, и исходя из этих данных понимать какой в2 роутер для какой монеты использовать)))

Svαtoωλ‎: блин еще поддержку в1 и в2 делать надо будет........ (reply to 271299)

dab: Но вообще simulate swap очень удобная ручка. Ты там сразу можешь и слиппейдж посчитать, и получить адрес роутера и пула, жетон кошельки роутеров, и тд

dab: Я забил на в1 у себя в боте. У меня код есть, но мне лень его интегрировать (reply to 271301)

𝙳𝙸𝚂𝚂𝙸𝙳𝙴𝙽𝚃: В квери айди 64 передается (reply to 271283)

Svαtoωλ‎: Почему не рандом (reply to 271306)

𝙳𝙸𝚂𝚂𝙸𝙳𝙴𝙽𝚃: На сколько легче в1 свап написать (reply to 271303)

dab: Ты можешь туда любое юинт64 засунуть (reply to 271307)

Svαtoωλ‎: А, число потом 64  Стоп.

dab: Рандомное, 0, свою дату рождения, номер телефона

dab: 64 это размер (reply to 271311)

dab: Он простой в целом, а насколько легче хз (reply to 271308)

𝙳𝙸𝚂𝚂𝙸𝙳𝙴𝙽𝚃: Ну в2 не так сложно было написать, сравнивал немного с твоим пейлоадом (reply to 271316)

dab: Ну да (reply to 271317)

Svαtoωλ‎: а кто шарит, txparams которые стонфи в апи отдает, там бок, адресс кол-во тон  Это мне чисто бок отправить надо тот что он выдал, или...

𝙳𝙸𝚂𝚂𝙸𝙳𝙴𝙽𝚃: А зачем ты рефадрес юзаешь я чёт ваще не понял зачем он нужен (reply to 271318)

dab: Рефка типо (reply to 271320)

𝙳𝙸𝚂𝚂𝙸𝙳𝙴𝙽𝚃: И сколько там накапало (reply to 271321)

dab: Хз, чуть больше нуля (reply to 271322)

𝙳𝙸𝚂𝚂𝙸𝙳𝙴𝙽𝚃: Я когда ставил рефку ваще ноль приходило (reply to 271323)

🎐*<@Maxim: 👾 Но почему тогда getgems.io говорит использовать нулевой адрес для сжигания nft ? Ведь адрес, который они указали  EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM9c через https://ton.org/address является нулевым 0:00..00 (reply to 266556)

jennifer [afk]: причем тут вообще домен адреса? (reply to 271326)

jennifer [afk]: не заливать ликву наверно (reply to 271343)

Tim: Потому что в тонкипере получаетелем address none не укажешь (reply to 271326)

Крестный Отец: О

Крестный Отец: Я копирую сюда сообщение, а оно сразу удаляется. Почему?

/B4ckSl4sh\: Сюда вроде нельзя пересылать, гляньте в правилах. Я помню что я ссылки на сообщения копировал вместо пересылки (reply to 271352)

Крестный Отец: В моем сообщений нет ссылок, есть просьба о помощи

Андрей: Не используйте слова которые бы могли использовать спамеры (reply to 271352)

Крестный Отец: Здравствуйте. Я достаточно опытный создатель приложений, но вот что касается аирдроп, создание своего аналога валюты мажора и хомяка для меня темный лес. Здесь есть те, кто уже создал свой подобный проект и сможет ответить на несколько возможно глупых вопросов в лс?

Danil: Есть сервисы для эир дропа, а если выйти на биржу читай внутри правила

Крестный Отец: Я прочитал правила и никаких нарушений нет, однако то что ты сказал мне не помогло никак (reply to 271366)

Danil: Ну в твоём вопросе нет конкретики, я общие правила сказал

Крестный Отец: 1. Как создать токен? На каком ресурсе это лучше делать? Сколько это стоит?  2. Как он привязывается к приложению созданный в телеге? 3. Как аирдроп делается? Какова последовательность действий?  4. Подобные приложения являются одноразовыми или после листинга их можно как то развивать? Судя по хомяку эта история после выхода токена сошла на нет и ежедневно теряет аудиторию сотнями тысяч пользователей.

Andrew: Добрый вечер, подскажите плиз. Использую @orbs-network/ton-access из TypeScript, переключился из тестовой сети в майннет в проекте и перестал работать вызов "getTransactions". В ответе: "error": "LITE_SERVER_UNKNOWN: cannot locate transaction in block with specified logical time". Вызов get transactions в toncenter.com возвращает нормально список транзакций. В чем может быть проблема?

&rey: 1. Много способов. Самый бесполезный для пользователя — взять с minter.ton.org; стоит меньше 0.1 TON. Обычно разрабатывают своё, правда, всё равно не принимая пользователей в учёт. (reply to 271370)

Крестный Отец: Что означает самый бесполезный для пользователя? Как например был создан ноткоин , хомяк и прочие подобные токены? (reply to 271372)

Andy: мне кажется, никто не будет вас учить основам. учите английский и пользуйтесь гуглом

Крестный Отец: Базировано. Я просто решил попробовать, мало ли получится. Спс. (reply to 271375)

תשס"א: Завтра в ЛС, Но сегодня понял шо самому здесь разобраться надо (reply to 271391)

Denis: хочешь архивные блоки тянуть.  а орбс не отдаёт (reply to 271371)

Andrew: Это факт. А есть решение? Не пользоваться орбс? (reply to 271393)

Denis: очевидно. если у них этих данных нет а они тебе нужны

Andrew: Логично. Спасибо. (reply to 271395)

User<7231403747>: добрый вечер. я новичок в этой сфере, хочу написать парсер кошельков в виде тг бота. подскажите что и как. пробовал парсить через обычные селекторы, но показывает пустые значения balance.

Namon: tonapi /v2/accounts/{account_id} /v2/accounts/{account_id}/jettons https://tonapi.io//api-v2 (reply to 271401)

User<7231403747>: а в account_id

User<7231403747>: где его взять?

&rey: Просто адрес. Вроде можно даже TON DNS, но не помню. (reply to 271403)

Namon: В формате 0:97264395BD65A255A429B11326C84128B7D70FFED7949ABAE3036D506BA38621 (как минимум в доках так указано)

Namon: Я скинул ссылку на документацию, смотрите там (reply to 271405)

集电极: В любом формате можно (reply to 271407)

User<7231403747>: спасибо 🙏

Namon: ? (reply to 271412)

User<7231403747>: или это надо через tonapi.io? (reply to 271413)

User<7231403747>: все, получилось, понял

RootTon: Всем привет, столкнулся с проблемой что при выполнении транзакции в смарте выкидывается 5 exit code, не могу понять из за чего он может вылезать, подскажите пожалуйста в чем может быть проблема? (если нужен код то вот)  заранее спасибо большое |  транза в товивере

Founder: Всем привет, не знаю по адресу ли, но напишу. Заметил странное стечение обстоятельств. Могла ли быть уязвимость в Tonkeeper позволяющая злоумышленникам подделать окно при подтверждении транзакции ? Технически такое возможно?

集电极: Да, вполне возможно. Хоть команда Tonkeeper и пытается искоренить такие случаи, но мошенники каждый раз придумывают новые способы (reply to 271418)

User<7231403747>: ты про дрейнеры?

Founder: Ага (reply to 271420)

Founder: Заметил что вектор атаки изменился после обновления Tonkeeper

Namon: Это зависит от эмуляции в tonapi, а не от самого кошелька

Founder: Вот такой кейс возможен ли, по факту уходят не по 0.05 а что то иное

jennifer [afk]: уже невозможен (reply to 271431)

jennifer [afk]: тонкипер выкатил апдейт, но он очень тупой. теперь не пропускает любые транзакции где не работает эмуляция.

jennifer [afk]: даже если сломалась эмуляция не из за смартконтракта

jennifer [afk]: то транзакцию не пропустит

Founder: Спасибо за ответ;)

Cube: Почему то переключиться на тестнет не получается :/

Cube: Вынесли в раздел setup wallet (reply to 271442)

Max: Он уже год в этом разделе. Просто дев мод теперь не нужен (reply to 271443)

Max: А чем вам это не нравится? Почему хочется именно через дев меню?

Cube: Не знал. Сейчас все тестнет кошельки надо заново заполнять :( (reply to 271445)

Alex GameFi: Забрал в этот чат в поиске ответа на вопрос - почему тон такой медленный😁  Подскажите, есть ли у кого-то ответ?  С исполнением смарт контрактов там понятно узкое горлышко, что все на один падает и перегружает в большинстве случаев.  А вот даже с простыми транзакциями?  Можем ли прийти когда-то к скорости, как в sol и от чего это зависит?

集电极: Здравствуйте. Можете подсказать, что я делаю не так? В сурсах dedust sdk нашел как создаётся и отправляется Cell, решил повторить сам, но почему-то транзакция прерывается с exit code 65535 Вроде бы код тот же самый, но результат кардинально разный  Код из dedust sdk: async sendSwap(provider, via, { queryId, amount, poolAddress, limit, swapParams, next, gasAmount, }) {     await provider.internal(via, {         sendMode: core_1.SendMode.PAY_GAS_SEPARATELY,         body: (0, core_1.beginCell)()             .storeUint(VaultNative.SWAP, 32)             .storeUint(queryId ?? 0, 64)             .storeCoins(amount)             .storeAddress(poolAddress)             .storeUint(0, 1)             .storeCoins(limit ?? 0)             .storeMaybeRef(next ? Vault_1.Vault.packSwapStep(next) : null)             .storeRef(Vault_1.Vault.packSwapParams(swapParams ?? {}))             .endCell(),         value: amount + (gasAmount ?? (0, core_1.toNano)('0.2')),     });  Мой код: const swapCell: Cell = beginCell()   .storeUint(VaultNative.SWAP, 32)   .storeUint(0, 64)   .storeCoins(toNano(amount))   .storeAddress(pool.address)   .storeUint(0, 1)   .storeCoins(slippageAmount ?? 0)   .endCell();  const swapMessage = internal({   to: pool.address,   value: toNano(amount) + toNano(gasAmount),   body: swapCell, });  await walletContract.sendTransfer({   seqno: seqno,   secretKey: keyPair.secretKey,   messages: [swapMessage],   sendMode: SendMode.PAY_GAS_SEPARATELY, });

Oleg: Ton только в начале пути. Дайте ему 5-10 лет, решение найдется (reply to 271450)

/B4ckSl4sh\: Нет, скорости как в солане не будет из-за другого механизма консенсуса, благодаря которому Солана очень быстрая, но со своими серьезными минусами (например отсутствует гарантия целостности данных при доставке) (reply to 271450)

Vasilii: Задача тона всреднем обрабатывать каждую транзакцию быстро, когда много транзакций  Задача соланы как можно быстрее обработать конкретную транзакцию, но все ломается при масштабировании (reply to 271450)

Denis: а это где такое можно воспроизвести? (reply to 271431)

jennifer [afk]: в этих ваших дрейнерах такое делают (reply to 271457)

User<7231403747>: в ваших)) (reply to 271459)

jennifer [afk]: денис самый главный дрейнер на тоне

Sutako: Привет, подскажите, как сделать авторизацию пользователя. Мне нужно в боте, когда он переходит в мини апп максимально гарантированно определять пользователя, ато сейчас, у меня получается, что любой может если немного постарается притворится другим. Сейчас я определяю пользователя по telegram id

sd: https://core.telegram.org/bots/webapps#validating-data-received-via-the-mini-app  @devs @devs_cis (reply to 271462)

RootTon: Всем привет, столкнулся с проблемой что при выполнении транзакции в смарте выкидывается 5 exit code, не могу понять из за чего он может вылезать, подскажите пожалуйста в чем может быть проблема? (если нужен код то вот)  заранее спасибо большое |  транза в товивере *-*

RootTon: Да я понимаю в чем ошибка, я не понимаю где или из за чего она может быть (reply to 271466)

User: При store_uint(x, n), где-то может быть x >= 2**n или x отрицательный (reply to 271467)

RootTon: Принял спасибо сейчас поищу в коде

User: Можете в sandbox проверить через ~dump где код стопиться и там уже смотреть в чем проблема.   Я глазами по контракту пробежался, вроде ничего не нашел. Так-что дебажте, точно найдете ошибку

RootTon: бля я слепой

RootTon: я нашел в чем была ошибка, спасибо вам большое, я во врапере ts просто не указал value в store_uint (reply to 271468)

Kelevra ️️️️️️️: Подскажите, https://github.com/XaBbl4/pytonconnect/blob/09a52075d4b88d1d75e014785189179af70e3ae7/examples/wait_connection.py#L23 это чудо отвалится по таймауту?

User: Насколько я помню да, отключите интернет на ПК и проверьте (reply to 271473)

Svαtoωλ‎: провод типо интернетный обрезать? (reply to 271476)

— 2024-12-02 —

Joker: Народ, всем хай! Можете подсказать, как определить тип контракта по адресу? У меня есть адрес, я хочу понять что по адресу находится - может обычный кошель, может NFT, token и так далее

Namon: tonapi /v2/accounts/{account_id}  interfaces: string[]; (reply to 271484)

Joker: Спасибо большое! Буду тестить! (reply to 271485)

Киви: Кто может подсказать, как в pytonconnect сделать Коннект не в @wallet?

Киви: Хотелось бы в тонкипер чтобы коннектил (reply to 271487)

Andrei: Привет! Подскажите, пожалуйста.  У меня есть контракт, один из receive_message следующий  message Deposit {     id: Int; }  Я использую pytonconnect и пытаюсь отправить Deposit message      transaction = {         "valid_until": int(datetime.now().timestamp()) + 900,         "messages": [             {                 "address": "address",                 "amount": to_nano("1", 'ton'),                 "payload": urlsafe_b64encode(make_deposit_message_body().to_boc()).decode(),             },         ],     } make_deposit_message_body() выглядит вот так def make_deposit_message_body():     return begin_cell().store_int(102, 256).end_cell()  Тонкипер нормально открывается, подготавливается транзакция, однако вместо депозита на смарт контракт, amount - fee возвращаются отправителю.  При этом по какой-то причине, добавляется f в комментарий к транзакции. Я подозреваю, что именно в этом проблема, ибо мой message становится не просто int, а int, string, ну и неправильно обрабатывается из-за этого. Но не могу понять, проблема в клиенте или в тонкипере.  Может кто-то сталкивался?

Namon: а можно часть кода контракта, когда приходит сообщение и парсятся данные? или что-то аналогичное для такта (reply to 271492)

Namon: f - потому что в ASCII 102-й символ это f (reply to 271492)

Игорь: господа, а как вытащить тон зависшие на балансе нфт?

Denis: Звучит крайне странно. (reply to 271492)

Denis: Ааа. Понял. Вы 256битный инт сохраняете

Andrei: Слушай, действительно, если 103 id делаю, то g :) (reply to 271497)

X1ag: Всем добрый день. Как отправлять жетоны с помощью смарт контракта?

Andrei: 🤔 А какой нужно? (reply to 271513)

Denis: Смотрите. В тоне есть конвенция о том что первые 32 бита сообщения это магическое число которое идентифицирует операцию а дальше идёт пэйлоад для этой операции

Denis: А опкод для операции "текстовый коммент" это 0x00000000. Тоесть ваш трактуется как текстовый коммент с 27 нулевыми байтами и буквой

final: а как можно вытащить из in_msg_body текстовый комментарий в func?

Denis: Посмотрите стандарт на нфт для примера (reply to 271518)

Andrei: Большое спасибо Буду смотреть дальше (reply to 271524)

Игорь: товарищи, ну подскажите пожалуйста, это явно нельзя сделать через тонкипер, нужно видимо через консольный клиент, где почитать то хоть (reply to 271511)

Denis: Отправьте нфт самому себе. Если вытаскивается то вытащится. Если не вытащится то предлагаю с горя накатить и смириться (reply to 271528)

Игорь: блин вот я не пойму, это постирония какая-то или в самом деле при транзакции деньги и нфт отдельно должны прийти (reply to 271529)

Denis: Никакой иронии.

Игорь: но там зависло 10 тон, а фи будет 10 тон (reply to 271532)

Denis: Это не фи

Denis: Там должно быть написано что это сдача

Farel: подскажите пж, где можно посомтреть как в тоне реализуются стейкинг контракты жетоннов

Игорь: это клиент нерпавлиьно пишет получаетяс? ну рискну (reply to 271542)

Denis: А покажите как пишет (reply to 271545)

Игорь: я уже отправил, ну пишет как обычно фи, там видимо отрицательное число должно быть, как вы сказали сдача. как раз вместо моих 10 он писал 9 с копейками, получается за вычетом настоящего фи (reply to 271547)

Denis: А какой кошелёк? (reply to 271548)

Игорь: но видимо про отрицательные числа интерфейс ничего не знает, и пишет как обычно фее ~9.34 тонкипер уж  кстати помогло, спасибо

Denis: А какая версия кипера? Напишите в приват в благодарность за помощь (reply to 271550)

Киви: Привет, как в pytonconnect сделать ссылку на подключение в тонкипер, а не к wallet?

集电极: Можете помочь? (reply to 271451)

Киви: https://github.com/XaBbl4/pytonconnect/blob/main/pytonconnect/provider/_bridge_provider.py  Это оно? (reply to 271584)

Andr: Как корректно обрабатывать cskip_bad_state ? Например, прилетела транза с ton на неинициализированный кошелек, в compute_phase значится skipped: True, reason: cskip_bad_state. При этом на баланс сумма села вроде как. Тут никаких подводных камней не может быть?

Denis: Если сообщение входящее имело флаг баунс то может улететь обратно (reply to 271610)

Denis: Тоесть если вам приём платежей то проверяйте что нет исходящих

X1ag: @dedust_dev_chat продублируйте сюда (reply to 271451)

Alex: а по какому принципу toncenter индексирует NFT? я в тестнете задеплоил нфт (onchain meta) - getgems, tonviewer и tonkeeper нормально ее распознают и считывают мету, tonscan - распознает как NFT, но мету почему-то не видит. а вот testnet.toncenter.com/api/v3/nft/items вообще не находит ее даже по адресу

Dmytro: А что такое root-is-not-counted rule?  Нашел это в описании опкода GETFORWARDFEE но не могу найти никакой инфы по этому  Calculates forward fees in nanotons for outgoing message. is_mc is true if the source or the destination is in masterchain, false if both are in basechain. Note, cells and bits in Message should be counted with account for deduplication and root-is-not-counted rules.

Dmytro: я нашел какой-то код в ноде но не могу понять что это и как считается  https://github.com/ton-blockchain/ton/blob/7151ff26279fef6dcfa1f47fc0c5b63677ae2458/crypto/vm/boc.cpp#L1121 (reply to 271654)

/B4ckSl4sh\: Плата за корневую ячейку и биты в ней (вне зависимости от их количества) оплачивается lump_price (reply to 271654)

Dmytro: что есть корневая ячейка (reply to 271662)

/B4ckSl4sh\:   cell msg = begin_cell()     .store_uint(0x18, 6)     .store_slice(addr)     .store_coins(amount)     .store_uint(0, 1 + 4 + 4 + 64 + 32 + 1 + 1)     .store_slice(message_body)   .end_cell(); (reply to 271663)

Dmytro: то есть все референсы этой ячейки уже считаются, верно? (reply to 271664)

/B4ckSl4sh\: Именно (reply to 271665)

Dmytro: Окей, просто я посчитал что в моем сообщении: bits: 298354 cells: 1022  И согласно опкоду GETFORWARDFEE я должен заплатить 0.21 ton. А на практике это 0.015 ton. Последний blueprint. Ща пойду считать в тестнете. (reply to 271666)

/B4ckSl4sh\: В блюпринте я не уверен насколько это правильно работало. Но я уже скидывал выше код, как точно считать fwd_fee (reply to 271674)

/B4ckSl4sh\: В forward_fee останется ровное число, которое будет потом в fwd_fee транзакции cell msg_body = msgcs~load_ref();             var (x, y, _) = compute_data_size(msg_body, 30);              int forward_fee = get_forward_fee(x, y, 0);             ;; ~dump(forward_fee);             int action_fee = (forward_fee * 21845) >> 16; ;; First_frac is 21845 it is in config #25              forward_fee = forward_fee - action_fee; (reply to 271674)

Unknown: (config_fwd_prices  (msg_forward_prices lump_price:400000 bit_price:26214400 cell_price:2621440000 ihr_price_factor:98304 first_frac:21845 next_frac:21845))  1000(ячеек) * 2621440000/65536 / 1e9 = 0.04 TON  298354(бит) * 26214400/65536 / 1e9 = 0.1193416  расчет GETFORWARDFEE - верен. А вот >А на практике это 0.015 ton. вероятно что-то не то смотрите в блюпринте (reply to 271674)

Dmytro: Я чет неправильно посчитал размер сообщения. Хотя тупо обхожу все дерево ячеек.

Denis: может дедуплицировалось что-то? оплата то за уникальные ячейки

Unknown: видимо без учета дедупликации. Чтобы посчитать с учетом дедупликации есть вот такой опкод: https://github.com/ton-blockchain/ton/blob/master/crypto/smartcont/stdlib.fc#L189 (reply to 271685)

/B4ckSl4sh\: CDATASIZE/SDATASIZE просто вызывайте, получится и дешевле и 100% верно (оно автоматически учтёт дедупликацию) (reply to 271685)

Dmytro: оно ж дедуплицируется если все биты И рефы одинаковые? (reply to 271686)

Unknown: все биты и рефы. Иначе говоря если хэш ячейки тот же (reply to 271690)

/B4ckSl4sh\: Да, был не прав, все биты и рефы (reply to 271691)

Dmytro: А господи это тупой js считает два буфера с одинаковым содержимым разными значениями😡

Dmytro: за опкод спасибо (reply to 271688)

集电极: Продублировал, бот дал бан автоматически) (reply to 271644)

Алексей: Надо посылать сообщение на адрес ваулта, а не адрес пула (reply to 271451)

集电极: Сейчас попробую, спасибо (reply to 271704)

&rey: Не сильно дешевле, кстати, ведь там все ячейки открываются. А хорошо было бы за 26 газа знать) (reply to 271688)

/B4ckSl4sh\: Ну за 26 газа это вообще подарок бы был конечно) (reply to 271714)

RootTon: Всем привет, подскажите пожалуйста почему геттер отдает адрес (тык) но когда я хочу получить из данного адреса адекватный вид используя parse то выдает ошибку мол: can't decode address; может кто нибудь объяснить в чем дело ?  код  () set_storage(slice admin_address) impure {   set_data(     begin_cell()         .store_slice(admin_address)     .end_cell()   ); }  (slice) load_storage() impure {   slice contract_storage = get_data().begin_parse();   return (     contract_storage~load_msg_addr()   ); }  () recv_internal(int my_balance, int msg_value, cell in_msg_full, slice in_msg_body) impure {....}  (slice) get_owner() method_id {   (slice admin_address) = load_storage();   return admin_address; }

SweetJesus: а в чем проблема взять этот бок, сделать ячейку из него и выгрузить оттуда адрес?  Не понимаю просто зачем запросом к тонапи это делать) (reply to 271748)

SweetJesus: и вообще глянь в сваггер тонапи, addressParse не принимает бок (reply to 271748)

RootTon: ....просто я аналогичное делал на такте по гайдам с ютюба и оно работало норм, а тоже самое на func получается отдает бок, понял спасибо (reply to 271757)

okolo: Доброго дня, народ! Делаю TG Mini App React с подключением кошелька через tonconnect для React. Мне нужно подтверждение действия пользователя при помощи подписи сообщения. Коротко - с сервера запрашиваю Challenge, на клиентской части кошелек его подписывает при помощи TonProof, отправляет подписанное сообщение на сервер - серврер его разбирает и апрувит, или нет. Пример реализации отсюда: https://docs.ton.org/v3/guidelines/ton-connect/guidelines/verifying-signed-in-users  На кошельках v4 работает все отлично. Но все плохо с кошельками W5. W5 спотыкается здесь:      const result = await client.runMethod(masterAt.last.seqno, Address.parse(payload.address), 'get_public_key', [])     const publicKey = Buffer.from(result.reader.readBigNumber().toString(16).padStart(64, '0'), 'hex') Лог содержания result: {   "exitCode": -256,   "result": [],   "resultRaw": null,   "block": {     "workchain": -1,     "seqno": 42562762,     "shard": "-9223372036854775808",     "rootHash": "+JwIuvuHNzj8Se/sRcOb+9vOuoc8VrwJCclZIM236RM=",     "fileHash": "Yi1obrugXoWoTbTXpVVv5af1GhpsIL2jwOV+LtmGuI4="   },   "shardBlock": {     "workchain": 0,     "seqno": 47667655,     "shard": "6917529027641081856",     "rootHash": "Uk1MPDr2dnkIJUhjFYlaA4RLz+jwfwB8IGXxUBR7Bmg=",     "fileHash": "T/5jyAZl0CS7KYyPAmdso+m2xfJTefQG1CUPpeAkj/Q="   },   "reader": {     "items": []   } } А с publicKey он уже работать отказывается... Кто то сталкивался с таким? я не нашел в офф документации по кошельку W5 каких либо указаний.

Ivan: А сам кошелёк задеплоен в блокчейн? (reply to 271776)

okolo: Uninit, через TonConnect в testnet создал и тестовые токены на него закинул.  Сделал его active, ситуация не изменилась (reply to 271777)

Viacheslav: как можно создать большой список для merkletree? функция проходится по всему массиву,  и если он большой, то просто все зависнет..

Viacheslav: export function generateEntriesDictionary(entries: AirdropEntry[]): Dictionary<bigint, AirdropEntry> {     let dict: Dictionary<bigint, AirdropEntry> = Dictionary.empty(Dictionary.Keys.BigUint(256), airdropEntryValue);      for (let i = 0; i < entries.length; i++) {         dict.set(BigInt(i), entries[i]);     }      return dict; }

Alex: а есть где-то примеры как упаковать attributes для onchain? что-то нет толковой доки нигде

Dmytro: подождать пару часиков? (reply to 271809)

&rey: Неделю назад ответ был бы "какие ещё атрибуты в ончейне?" Стандарт в разработке. (reply to 271811)

Dmytro: никак (reply to 271811)

Viacheslav: у нас полмиллиона записей.. боюсь все навернется вообще (reply to 271812)

Denis: а есть ссылка? (reply to 271813)

Dmytro: это ж мало. просто на компе помощнее запустить, должно хватить (reply to 271815)

Denis: там была плюсовая имплементация

Dmytro: а тебе покажут по факту принятия чтобы ты реализовал что сказали😁 (reply to 271816)

Cube: Я делал так, можете изучить (reply to 271811)

Viacheslav: как это (reply to 271818)

Denis: Я делал так, можете изучить как делать не надо fixed (reply to 271821)

Denis: на C++ (reply to 271822)

Alex: Спасибо (reply to 271821)

Denis: я серьезно. не надо повторять так как там (reply to 271826)

Denis: сделайте uri: и положите атрибуты в семичейн метадату

Denis: пока @pcrafter там стандарт пишет

Cube: ? (reply to 271823)

Alex: Неплохо бы в доке было написать, что в стандарте нет и работает только нормально с offchain . А то как-то странно выглядит, вроде бы attributes есть, но как то наполовину

Denis: так там и написано

&rey: К сожалению, пока только localhost:443. (reply to 271816)

Alex: Там странно написано - в примере оно есть, а в списке ниже - нет. Тут непонятно либо в одном месте забыли, либо в другом. Это только путает. (reply to 271832)

Holiveood | HOLIDROP: Народ, что нужно изучать чтобы сделать свое приложение на тоне? Есть какие-нибудь курсы?

Farel: сколько тонкипер по времени смотрят пул реквесты ассетов? вижу там есть открытые трехнедельные

Denis: подразобрали значит. было трёхмесячные (reply to 271836)

Mr: ребят, как в тонкипере переключиться на тестнет? после обновы меню пропало

Denis: просто добавьте кошелек в тестнете. дев меню больше не нужно (reply to 271840)

Mr: а как это сделать?) (reply to 271842)

/B4ckSl4sh\: Ну типо через обычное меню добавления кошелька (reply to 271843)

Mr: вставить сид фразу? (reply to 271845)

/B4ckSl4sh\: Да (reply to 271847)

Mr: пздц, нахрен они так сделали

/B4ckSl4sh\: А какая разница? Раньше же так же было только с доп шагом в виде дев меню (reply to 271849)

Denis: по запросам юзеров (reply to 271849)

sd: а почему по запросам юзеров в мобильном тонкипере сделали тестнет отдельным аккаунтом, а на компе раньше было так же, но в последних апдейтах решили переделать через кнопку в дев меню? (reply to 271851)

Mr: ну ты два раза добавляешь один и тот же кош) а так отдельно врубил тестнет и все (reply to 271850)

Dmytro: так лучше не делать (два коша на одной сид фразе) (reply to 271855)

/B4ckSl4sh\: Там теперь это разные кошельки (если в5) (reply to 271855)

/B4ckSl4sh\: Но если знаешь что делаешь, то можно) У меня в мейннете seqno существенно выше (reply to 271857)

Dmytro: не только поэтому (reply to 271859)

/B4ckSl4sh\: А какая ещё проблема? (reply to 271860)

Andrey: Всем привет. Подскажите, сколько надо заплатить комиссии при деплое библиотеки в мастерчейн? Например для jettonwallet? Посылаю 1-2 тона, транза проходит, но вываливается с Insufficient TON

Andrew: привет всем! ребят, а на nextjs кто пишет? как работайте глобально с объектом юзера в контексте безопасности (если есть какой-то доп. профайл в базе), учитывая что хуки тонкеннекта только на клиенте вызываются? копать в сторону тонпруф мб тут? или я что-то очевидное не выкупаю?

Mr: а почему нет? 2 разных блокчейна, по сути (reply to 271857)

okolo: Если кто столкнется с такой проблемой. Решение: W5 не работают с get_public_key как здесь const result = await client.runMethod(masterAt.last.seqno, Address.parse(payload.address), 'get_public_key', []) Тогда выдает result.exitCode: -256 Я сделал так     if (result.exitCode !== 0) {     this.logger.log('get_public_key failed, using alternative method');        // Используем состояние (walletStateInit) для получения публичного ключа     const publicKeyFromStateInit = Buffer.from(payload.public_key, 'hex');     if (!publicKeyFromStateInit) {       return false;     } а остальное как в официальной документации. (reply to 271776)

Dmytro: решишь поделиться сид фразой с коллегой чтобы он потестил на кошельке. а потом окажется что ты пошерил сид фразу от своего мейннетовского кошелька. и нет у тебя больше ни денег ни коллеги. (reply to 271865)

/B4ckSl4sh\: Ну это кстати смотря какой коллега, я несколько месяцев назад 1.7к тон заказчику вернул, который мне их случайно скинул)  А вообще большие деньги лучше на холодном кошельке хранить и таких вещей не бояться (reply to 271881)

Jzuss ┌( ಠ_ಠ)┘: Всем привет! Столкнулся с ошибкой  в логах при отправке external, очень нужен совет!  Ошибка такая: "LITE_SERVER_UNKNOWN: cannot apply external message to current state : External message was not accepted"  Странно то, что несмотря на ошибку в логах (код ошибки мой, якобы состояние контракта не позволяет принять external), external доходит сразу после того, как транзакция появляется в tonscan.  Я правильно понимаю - если я отправил external в тот момент, когда состояние на момент отправки не актуально (но по идее должно быть актуальным по последовательности отправленных сообщений), то оно доедет после финализации? Если да, то как лучше трекать? Влезать в сам контракт и ждать нужное мне состояние?

/B4ckSl4sh\: У вас просто не была вызвана функция  accept_message() (reply to 271886)

Jzuss ┌( ಠ_ಠ)┘: Была. Еще раз - сообщение доехало, но сразу после того как я увидел обновленное состояние контракта (reply to 271887)

Egene: Добрый вечер! А кто нибудь знает где можно раздобыть тестнетовые тоны ? tongiver даёт очень мало ...

Max: можно купить на tonconsole.com (reply to 271898)

Egene: спасибо! (reply to 271900)

Max: Ребят, может не по адресу, но сегодня походу я мамонтнулся, и хочу понять, как) это работает) Полагаю, для некоторых из вас это очевидно, но если у кого-то есть время, в двух словах объясните.  Сидел в MAJOR, прилетело сообщение в группу-клон (полагаю, в нее добавился на каком-то этапе) с предложением получить дроп. На цифры глянул мельком, увидел, что есть комиссия, на Space был 1 тон, жмакнул на подключение. Итог: - 1 тон, и в кошельке висят транзакции...) Уровень - целеустремленный новичок, понял, что лоханулся, но хочу разобраться)

User<7231403747>: дрейнер (reply to 271903)

User<7231403747>: или я путаю

Max: как будто похоже

User<7231403747>: дроп монеты, комиссии, подключение кошелька

Devsbite: ищу фулстек разработчика или команду под тма. писать в лс

RootTon: Всем привет, я знаю не по теме, заранее извинити, но если есть те кто еще параллельно куртятся в блокчейне эфира не могли бы вы в лс кинуть ссылку на чать комьюнити разработчиков на эфире если такое есть (подобно ton dev)

集电极: Если у меня в одной транзакции 2 сообщения, первое - своп жетона на TON, а второе - перевод TON куда-то, то выполнится ли нормально второе сообщение при условии что изначально на балансе недостаточно TON?  То есть изначально на балансе к примеру 0.5, я пытаюсь перевести 2 TON, но этот перевод идёт после свопа, за который я получу 5 TON  Это будет работать? Сообщения при отправке исполняются в указанном порядке?

Denis: нет (reply to 271926)

集电极: Значит надо ждать пока первая транзакция завершится, и отправлять отдельную транзакцию с переводом? (reply to 271928)

Denis: да

М: Привет, есть ли возможность обмена тон на звезды через api ? Или как то можно это реализовать ?

Wayne: Ты это серьезно? (reply to 271932)

М: Да, что не так ? Мне интересно как можно сделать аналог фрагмента без kyc (reply to 271933)

М: Так есть уже сервис подобный. Как я понимаю там человек через свой акк в фрагменте с костылями это делает ? (reply to 271935)

Wayne: Ты понимаешь что это же самое, что «как поменять биткоин на голоса вконтакте по апи» (reply to 271934)

М: Так я спрашиваю) Тут за вопросы принято казнить? Если нет такого, сказали бы нет такой возможности и все. (reply to 271937)

Namon: повторять действия, которые делает фрагмент включайте девтулс и смотрите (reply to 271932)

— 2024-12-03 —

RootTon: Теоретически возможно, практически только у фрагмента :) (reply to 271932)

sd: седнесс пикрил (reply to 271854)

Asher: Начало девятой лекции по языку FunC третьего потока www.tondevstudy.io  Лектор - @MarcoDaTr0p0je https://www.youtube.com/watch?v=mllRJOKQcyA  Таймкоды:  00:10:00 -  Старт. Stake 00:29:00 -  Пишем unstake 00:32:00 -  Позитивный тест 00:55:00 -  Проверка балансов 01:04:00 -  Задание 01:06:00 -  Оптимизация контракта

Dmytro: Может быть на xrocket есть пара звезд к тону, либо где-то в блокчейне ищи пул (reply to 271932)

Alexander: привет,  такой вопрос. Вот я нашел у ребят со стон.фай контракт обернутого тона - лежит на гитхабе. Но использование в реальной транзакции помечается как "транзакция провалена". Всё потому что этот контракт оборачивает тон налету - то-есть нативный тон в него приходит, а от него уходит только jetton_transfer_notification. "перевод" состоит из 2х сообщений, а не трех.  Пользователи будут в ужасе - все их транзы помечаются как Провал. При том что value дошел куда надо, функция сработала, всё хорошо.  Такого типа контракты вообще никогда не будут нормально парсится, или надо что-то сделать? Типа валидировать код, чтобы tonkeeper понял что это известный контракт. Или если я хочу "странного" мне надо не использовать известные op-коды?     Может быть есть какая-то дока которую я искал и не нашел как tonkeeper анализирует и как tonviewer показывает?

rends_east: вообще не должно помечаться как провал, пользовался контрактом - нормально парсят вы проверяли, транзакция то успешна или нет? (reply to 272056)

Alexander: Все отлично и прекрасно как мне кажется. Все куда надо дошло. А у вас прямо личный положительный опыт - https://github.com/ston-fi/pton-contracts - вот с этим? Буду тогда еще раз всё проверять Потому что вроде бы более нового открытого у них нет.     Я знаю что есть новый  страндарт - но я начал опасаться что вообще логику не понимаю (reply to 272062)

rends_east: да, ровно с этими контрактами а какой новый стандарт вы имеете ввиду? (reply to 272064)

Dmytro: чтобы транзакции нормально парсились тебе надо идти в tonapi и просить чтобы они добавили парсинг твоих транзакций (reply to 272056)

Dmytro: А вообще никогда не используй pton или другие реализации врапнутого тона. Тут не эфир и врапнутый тон это ужасная идея.

Alexander: А как? Стон-фай вот вроде бы довольно разумно сэкономили код и сложность с помощью этого трюка. Есть лучше паттерн? (reply to 272072)

Dmytro: да, смотри dedust (reply to 272073)

Alexander: У них есть открытый код? (reply to 272074)

Dmytro: нет

Alexander: спасибо. (reply to 272076)

rends_east: не слушайте, pTon вполне себе норм тема, позволяет упростить многие взаимодействия (reply to 272073)

Dmytro: это уебанское решение с точки зрения UX, парсинга транзакций, и стоимости транзакций. (reply to 272078)

Alexander: я так вижу что в пределе код выносится в либу как сейчас начали делать. А иметь две версии кода внтури ифов который по разному работает совершенно - это равно неприятно и главное что эта сложность не дробится -  каждый из путей надо тестировать экстенсивно, на каждый из них будет смотреть дорогущий аудитор который берет за объем и окупит тысячи транзакций.  А главное - если "это не уродский эфир" для чего TON  в своих кошельках типа воллета старательно стирает разницу между нативным тоном и другими жетонами.  Впрочем рыночек наверное порешает. Может я правда не знаю как "делать по-другому" (reply to 272081)

karin: Привет всем, свапаю токены с помощью тонутилс дедаста, на больших суммах происходит то что на скрине, токены просто туда уходят и пропадают, тоны не возвращаются. Есть ли какой-то способ провернуть во-первых withdraw их оттуда, и как это можно пофиксить? Мб я комсу неправильно посчитала?

karin: Или форвард амоунт не тот. Есть вариант просто перейти на swapcoffee, но дедуст мне нравится тем что тут batch есть, на нем остаться тоже неплохо было бы

Namon: Потому что для обычного юзера разницы между TON и жетоном нет - это всё монеты (reply to 272088)

Dmytro: ссыль на транзакции дайте (reply to 272092)

Dmytro: это же разное. зачем вам свопы (reply to 272092)

karin: могу скринами value flow покидать, пойдет? не хочу кошель палить (reply to 272094)

karin: мне надо автоматически менять все жеттоны с кошелька на ton (reply to 272095)

karin: у свапкоффи очень удобное апи

Dmytro: ты же понимаешь что если кто-то захочет то он без проблем по этим символам найдет твой кошель? затерла бы тогда (reply to 272100)

karin: по коду вот, тут вопрос в том как эти жетоны вернуть сейчас (если такое вообще возможно), и как больше на такое не попадаться. там дефолт значения комсы и форвард амоунт стоят БОЛЬШЕ, чем поставила я. Мб проблема в них как раз (reply to 272090)

Dmytro: без ссылки на транзу хрен разберешь куда ты деньги заслала (reply to 272103)

Namon: Exit code 48 (reply to 272101)

karin: да собственно мне транзу tonutils сгенерировал. куда сделалось - туда и заслала (reply to 272104)

Namon: Видимо да, больше тон нужно прикрепить

karin: а как их считать вообще, если batch условно.. ни доков у этого нет, ничего, там в коде дефолтные значения взяты непонятно как вообще (reply to 272107)

karin: оно вот просто есть и все, что с этим делать - непонятно..

karin: достать оттуда то, что я уже отправила никак насколько понимаю..

Namon: "Измерить линейкой и умножить на 2", как говорилось в подкасте про Func, Tolk, Tact

Dmytro: если бы еще мы знали куда вы их заслали... (reply to 272111)

karin: в лс скинула транзу (reply to 272113)

Namon: Проведите транзакцию через дедаст, посмотрите сколько они крепят тон

Namon: Можно даже не подтверждать, просто в эмуляции посмотреть

karin: я скинула в лс

karin: ой, удаляют

Namon: Так на дедасте с этим токеном пул с ликвидностью $17

Dmytro: там еще какая-то хрень с транзакцией

Dmytro: вот тут

karin: я щас попробую прикреплять больше тона, как они по дефолту. но вот не знаю что будет если условно поменять сразу 3 жеттона за раз

Namon: Попробуйте так https://github.com/ClickoTON-Foundation/dedust/blob/main/examples/swap_jetton_to_ton.py

karin: тут не батч, а хочется батч)) если так делать, есть вероятность что какие-то транзакции просто зависнут/отменятся (reply to 272128)

karin: хотя в целом это не так проблематично, думаю. они ж просто отменяются, и следующая транзакция уже пройдет, если на кошельке несколько токенов сразу

Namon: Я думаю в pytoniq тоже можно batch отправлять

karin: хмм, тоже верно (reply to 272134)

karin: ну я сначала щас попробую взять отсюда - там в исходниках тонутилса код по сути похожий. и форвард настраивается отдельно для каждого жетона, поэтому мб сделать так как там

karin: тут тоже форвард четверть тона, видимо виновато именно это (reply to 272128)

User: forward_amount = 0.25 поставьте и все заработает. Мой развернутый ответ удалился) (reply to 272138)

User: Аргумент amount уберите, его не существует (reply to 272143)

karin: развернутый ответ я себе скопировала, все вижу) щас прочитаю внимательно (reply to 272143)

karin: тут как раз именно amount вместо fee_amount, что странно, но это для batch

User: Я с гитхаба код смотрел, может в другой версии по другому названы параметры (reply to 272146)

karin: меняла на 0.01 потому что меньше транзакция не отправлялась, а больше - дорого)) думала мб так можно обойти

karin: видимо, нет. короче себе в ногу выстрелила

наз: всем привет, я правильно понимаю что raw_reserve берет определенное кол-во тонов с баланса контракта и не дает его потратить во время транзакции?

User: Да. Условно если вы хотите отправить все TON, то при указании перед этим raw_reserve, сумма указанная внутри останется на контракте (reply to 272153)

наз: благодарю (reply to 272154)

Crypto: Все виды подключения к блокчейну, в чем отличие. Есть документация или что-то? Просто о сложном

Crypto: В сдк

Crypto: Какой лучше использовать

/B4ckSl4sh\: Там разные режимы есть. Но насколько я помню стандартный такой как вы описали (reply to 272153)

Crypto: Какая сдк самая простая для изучения в python

karin: tonutils (reply to 272170)

karin: это упрощение упрощения pytoniq)

Namon: Меня забавляет, что на питоне есть уже несколько удобных библиотек, а на js/ts всё ещё нет

karin: они-то есть, но их функционал выглядит в основном не как что-то полезное, а как что-то, что нужно автору этой библиотеки. там очень много функций, написанных с виду просто по приколу, и документации нет к ним вообще нигде (reply to 272174)

karin: но в целом все что нужно - решают

Namon: Речь про tonutils? (reply to 272175)

karin: да и pytoniq тоже (reply to 272177)

karin: хахаха

Namon: Ну pytoniq & pytoniq-core содержат всё, что нужно для разработки Но я имею ввиду высокоуровневые либы Вот tonutils (py) удобна тем, что в ней собраны все текущие стандарты + свопы на стонфи и дедаст На js/ts я не видел подобной либы

karin: да, есть такое, но весь нормальный код все еще написан на ts. деплоймент контрактов, все что нужно сделать нестандартного - это только на js найти можно, либо писать прям совсем-совсем с нуля. того же тонконнекта красивого на питоне нет, только парочка полурабочих

Namon: Про более низкоуровневые либы да, согласен (reply to 272184)

karin: высокоуровневые понятно на питоне поприятнее будут, там сели типы, и написали что им нужно

karin: так как захотели, жаль опять же без документации

Gosha: Всем привет! Я хочу задеплоить коллекцию NFT с onchain данными. Сделал вот так:  import { Dictionary, beginCell, Cell } from '@ton/core'; import { sha256_sync } from '@ton/crypto'  export function toSha256(s: string): bigint {     return BigInt('0x' + sha256_sync(s).toString('hex')) }  export function toTextCell(s: string): Cell {     return beginCell().storeUint(0, 8).storeStringTail(s).endCell() }  export type collectionContent = {     name: string,     description: string,     image: string }  export function buildCollectionContentCell(content: collectionContent): Cell {     const collectionContentDict = Dictionary.empty(Dictionary.Keys.BigUint(256), Dictionary.Values.Cell())         .set(toSha256("name"), toTextCell(content.name))         .set(toSha256("description"), toTextCell(content.description))         .set(toSha256("image"), toTextCell(content.image));          return beginCell() // need to fix              .storeUint(0,8)             .storeDict(collectionContentDict)             .endCell();  }  import { toNano } from '@ton/core'; import { NftCollection } from '../../wrappers/NftCollection'; import { NetworkProvider } from '@ton/blueprint'; import { buildCollectionContentCell } from './utils/onChain';  export async function run(provider: NetworkProvider) {     const nftParams = {         name: "GOSHA",         description: "Description Gosha NFT",         image: "https://ipfs.io/ipfs/QmSgP7ENtDe6xY6DZUz73ydeYmoopJYu3BywZJPSJ338zT"     };     const content = buildCollectionContentCell(nftParams)     let init = provider.open(         await NftCollection.fromInit(provider.sender().address!!, content, {             $$type: "RoyaltyParams",             numerator: 350n,             denominator: 1000n,             destination: provider.sender().address!!,         })     );      await init.send(provider.sender(), { value: toNano("1") }, "Mint");      await provider.waitForDeploy(init.address); }  Но нфт деплоится без каких-либо данных, хотя с оффчейн данными все работает окей, а код преобразования взял из туториала https://medium.com/miki-dev/nfts-with-on-chain-metadata-on-ton-tutorial-55ac0cbb17d5  Подскажите, пожалуйста, в чем может быть проблема

Namon: По tonutils есть примеры, вроде как прям довольно объёмные (reply to 272187)

&rey: Ну, наверняка из-за того, что подключают кошельки обычно к фронтенду. Не на Brython же писать TON Connect 2, в конце концов. (reply to 272184)

&rey: Так не фильтры, а таймаут сообщений. Вот у тех, кто объединяет мысли в одно сообщение, те сами собой не удаляются! (reply to 272181)

&rey: Ну, вы контент предоставляете к коллекции, а нфт минтите просто запросом "Mint" без контента. Вопрос, как обёртка это принимает, конечно... (reply to 272190)

Gosha: а там в Item при минте передается individual_content = collection_content (reply to 272199)

&rey: API (RPC): работает на HTTP-запросах и потому доступно браузерам. Если эксплорер падает, всё плохо, но можно переключиться на второй (Orbs <-> Toncenter). (Обычно) нет проверки подлинности данных, кроме HTTPS и доверия серверу.  API (индексеры): работает на HTTP-запросах и собирает базу данных по какому-то куску блокчейна (например, фильтр по определённому токену). Если API падает, всё плохо.  ADNL (tonlibjson): ваш бинарник связан с dll тона, которая делает все необходимые проверки данных из блокчейна (от полных нод). Найти эти ноды — тоже непростая задача.  ADNL: ваша программа сама запрашивает данные от полных нод и сама же проверяет. Пример — pytoniq. (reply to 272157)

UniMas: Ребят, не подскажите, как добавить ссылки на соцсети токена который был создан на TON Minter?

/B4ckSl4sh\: Не уверен, что существует готовый инструмент - полагаю только руками собирать новую метадату и сообщение update_content (reply to 272209)

&rey: Своп и есть дорогая операция) (reply to 272148)

UniMas: А можете рассказать как это сделать, буду очень благодарен, хочу подписчикам моего тгк новогодний сюрприз устроить? ^^ (reply to 272213)

UniMas: Не уверен что я знаю такие языки

/B4ckSl4sh\: Читаете TEP-64, чтобы узнать как собирать метадату или берёте готовый сурс из того же минтера (выше в чате было по слову BuildOnchainMetadata). Смотрите какой опкод нужен для change_content, собираете сообщение в https://act.ghwnd.cc/ (например) (reply to 272248)

UniMas: Спасибо огроменное (reply to 272250)

&rey: Транзакций должно тогда быть по количеству держателей. Представьте себе комиссии, ужаснитесь и придумайте другую идею. (reply to 272273)

&rey: Лучше уж тоны из перевода добавлять в пул ликвидности (правда, требующий такого токен этично так себе).

/B4ckSl4sh\: проще будет скапливать эти токены где-то и потом давать держателям клеймить, иначе комиссии действительно гигантские будут (reply to 272273)

smile: Как можно спарсить курс тона в usd в питоне? Нашел апишник, но там тон стоит 2 бакса)

Max: тонапи. Но помните  https://docs.tonconsole.com/tonapi/rest-api/rates (reply to 272309)

Ruslan: https://github.com/py-stollen/swapcoffee-tokens (reply to 272309)

Ruslan: import asyncio import logging  from swapcoffee.tokens import SwapCoffee from swapcoffee.tokens.types import BlockchainToken   async def main() -> None:     logging.basicConfig(level=logging.DEBUG)     coffee: SwapCoffee = SwapCoffee()     tokens: list[BlockchainToken] = await coffee.get_tokens_by_symbols(symbols=["TON"])     for token in tokens:         logging.info("Token %s ($%s) costs %s USD", token.name, token.symbol, token.price_usd)     await coffee.session.close()   if __name__ == "__main__":     asyncio.run(main())

Пескарь™ | фронтент телефонов: штоллен топ кст

smile: Спасибо. понимаю что это отказ от ответственности, но там курс нормальный? (reply to 272310)

smile: Спасибо (reply to 272311)

victxr: а valid until у транзакции влияет вообще на чето? 30 секунд поставил, через 2 минуты подтвердил в тонкипере, всё ок (тестовая сеть)

— 2024-12-04 —

User<7464714629>: привет всем где могу узнать о генерации ТОН адреса к каждому юзеру? в планах были создать кошелек бота

Crypto: Адрес контакта UQ (EQ) как-то связан с числом "0:00000" хэш строка внизу тонвиевер?

Оскар: да, это форматы одного и того же адреса https://ton.org/address/ (reply to 272330)

Crypto: Адрес контакта ноткоин заканчивается с __NOT, как это сделать?

Crypto: Это типо vanity address?

Crypto: Каждый контакт имеет свой приватный и публичный ключ?

&rey: Нет, адрес – хеш начального состояния, и поэтому его тоже можно перебирать. (reply to 272335)

Arseny: всех приветствую пытаюсь написать функцию, которая будет получать 100 последних транзакций с некоторых кошельков юзаю вот эту штучку https://toncenter.com/api/v2/#/accounts/get_transactions_getTransactions_get  периодически получаю ошибку LITE_SERVER_UNKNOWN: cannot locate transaction in block with specified logical time  нашел в доке тона про логическое время, но хоть убей не понимаю как его правильно использовать, может есть у кого ссылка где более понятно это описано?

Crypto: Взаимодействия сними можно через сообщение с определённого адреса а иначе никак? (reply to 272343)

Crypto: То есть контракты которые не имеют приватные ключи

&rey: Как контракт напишут. Бывают такие, которые экстерналом вызываются, но с подтверждением [необходимости обработки/подлинности сообщения] не парой ключей, а другим способом. (reply to 272348)

Crypto: Проверка с помощью проверки подписи с публичного ключа? (reply to 272351)

&rey: У кошельков, например, да. Есть cron:external контракт, который откладывает сообщение на определённое время, он принимает любой экстернал после момента времени. (reply to 272352)

Катант: Ребят, почему-то в тон коннекте отвалился коннект кошелька через тонкипер, при этом май тон валлет коннектится нормально. Почему так может быть?

Киви: Просто ссылка не генерируется? (reply to 272354)

Киви: Если кошелёк просто отконнектился, то может сработал таймер, по которому он отваливается

Arseny: с тонкипером что-то, вряд ли с тонконнектом, у меня также (reply to 272358)

Киви: 🫠 (reply to 272358)

Катант: @subden @voloshinskii у вас отвалилось что-то 🥹

Киви: Смотря какой тонконнект (reply to 272359)

Denis: ddos на бридж залили (reply to 272361)

Киви: Я сейчас коннектнул через вчерашнюю ссылку, все норм

Катант: понял (reply to 272363)

Arseny: я сейчас коннеткнул - все ок, потом дисконнектнул и теперь не дает снова подключить (reply to 272364)

наз: всем привет, здесь для того чтобы получить кол-во бит и ячеек максимально заполняется хранилище контракта?  https://github.com/ton-blockchain/stablecoin-contract/blob/main/sandbox_tests/StateInit.spec.ts

Sol: Привет всем , ищу технические задания по разработке смарт контрактов.

Victor: Есть такой сервис @sweetaddressbot (reply to 272334)

Farel: Подскажите пж как добавить ликвидность в токен, который уже задеплоен, нужно ли было заранее прописывать подобную логику или её можно добавить поверх в каком то другом контракте

Александр🦴: Добрый день

Андрей: Нужно понимать где именно вам нужна ликвидность, например на дедасте или стонфи или на какой то централизованной бирже. Если на дексе (первые два) то нужно создать в них пулы ликвидности. Если на бирже, то нужно договариваться с ними (reply to 272385)

Farel: В первых двух случаях нужно что то менять в контракте или достаточно его адреса (reply to 272390)

Farel: И того, что он удовлетворяет стандарту

Gosha: Всем привет! Я пытаюсь задеплоить нфт, вот мой скрипт: export async function run(provider: NetworkProvider) {     const OFFCHAIN_CONTENT_PREFIX = 0x01;     const string_first = "https://ipfs.io/ipfs/QmXNT44tzaQkVb875y7NbNyx7V3RVmpyacH3X9M1rRh7zG";     let newContent = beginCell()         .storeInt(OFFCHAIN_CONTENT_PREFIX, 8)         .storeStringRefTail(string_first)         .endCell();     let init = provider.open(         await NftCollection.fromInit(provider.sender().address!!, newContent, {             $$type: "RoyaltyParams",             numerator: 350n,             denominator: 1000n,             destination: provider.sender().address!!,         })     );      await init.send(provider.sender(), { value: toNano("1") }, "Mint");      await provider.waitForDeploy(init.address); }  По url в ipfs хранится json: {     "name": "GOSHA",     "description": "Description Gosha NFT",     "image": "https://ipfs.io/ipfs/QmSgP7ENtDe6xY6DZUz73ydeYmoopJYu3BywZJPSJ338zT" }  Нфт коллекция деплоится, но без метадаты, при этом если взять url = "https://s.getgems.io/nft-staging/c/628f6ab8077060a7a8d52d63/" (как на гитхабе https://github.com/howardpen9/nft-template-in-tact/blob/tutorial/sources/contract.deploy.ts), то нфт деплоится и весь контент есть.  Подскажите, пожалуйста, что я делаю не так

Alacrity: попробуй тут не storeStringRefTail, а просто storeStringTail (reply to 272403)

Gosha: Все равно нет меты( (reply to 272404)

Alacrity: это кста не изображение (reply to 272403)

Gosha: всм (reply to 272409)

Alacrity: скорее всего, в этом и проблема, что должен быть json-файл (reply to 272403)

Alacrity: хотя мб я что-то не понимаю)

Gosha: так вроде бы по ссылке и хранится json (reply to 272411)

Alacrity: а ты правильно указал при деплое коллекции общую ссылку на метадату?

Gosha: не понял, что такое "общая" ссылка на метадату. скрипт деплоя я скидывал в первом сообщении, там ссылка корректная (reply to 272417)

Alacrity: когда коллекцию деплоишь, указываешь метадату для коллекции и еще общую ссылку для nft-item  например, такую https://link.com/items/  потом для nft-item указываешь просто 1.json, а эксплореры потом конкатенируют ссылку и отображают метадату

Alacrity: у контракта nft-collection есть гет-метод get_nft_content, по которому эксплореры объединяют метадату  в принципе, можно там просто пустую строку указать и для nft-item полную ссылку указать (reply to 272421)

Gosha: Я понял, в чем была проблема, мне стоило внимательнее вычитать сам контракт, там добавлялся в геттере к ссылке "meta.json", а у меня уже по ссылке хранился json. Большое спасибо за помощь (reply to 272429)

Crypto: Я лучше замайню 6 символный свой чем заплачу 20 TON за 4 символний (reply to 272378)

наз: а я могу имея адрес контракта в мейннете открыть его в sandbox и получить из него сендера?

Dmytro: да (reply to 272477)

наз: если это кошелек то мне соотвественно нужен враппер кошелька? (reply to 272478)

Dmytro: враппер это просто интерфейс, какой хочешь такой и ставишь (reply to 272480)

Ruben: Хай, STONFI DEX v2 уже можно пользоваться при разработке или еще только в тестнете?

Dmytro: он в мейннете

наз: условно если мне нужно открыть свой кошелек в sandbox, чтобы с него сделать трансфер юсдт (по скольку я usdtMaster создаю из адреса в мейннете) то как я могу это провернуть? (reply to 272481)

Oleg: Который вдобавок еще и не только тебе принадлежит) (reply to 272469)

User<8129939624>: Привет разработчикам   нужно написать не сложный контракт для нфт/взаимодействия с гетгемс где с каждой покупки нфт  Роялти будет распределяться  цены/сроки в ЛС по предоплате не работаю

final: где можно взять тестовые usdt/jusdt?

User<8129939624>: это же жетоны разве нельзя свой контракт задеплоить ? (reply to 272499)

final: нужны конкретные жетоны с конкретными адресами (reply to 272500)

User<8129939624>: а чем условный тестовый USDT будет отличаться от того что ты сам задеплоишь ? и то и то жетон просто там кипер рисует цену а у твоего не будет рисовать (reply to 272501)

User<8129939624>: это скорее вопрос (reply to 272502)

User<7996237794>: Лс (reply to 272492)

User<7996237794>: Спам блок

User<8129939624>: потому что я не особо в тон умею (reply to 272503)

final: нужен именно конкретный жетон (reply to 272502)

User<8129939624>: тебе получается просто нужен жетон именно этого смарта ? не просто потестить контракт на работу с юсдт ? (reply to 272509)

final: да, там потому что уже существующий смарт принимает определнные жетоны (reply to 272510)

User<7996237794>: Невозможно (reply to 272512)

User<8129939624>: Понял, спасибо) тогда да левые жетоны залистить не получится (reply to 272512)

User<7996237794>: Это обычные токены

final: а это что тогда?) (reply to 272509)

final: ниче что там адрес захрадкожен в соурсы?)

User<8129939624>: я так понял что смарт контракт с которым работают проверяет и работает только с токенами указанного адреса (reply to 272517)

User<8129939624>: чтобы потестить на других токенах  нужно контракт менять снова деплоить  чтобы с другим жетоном тестить

User<8129939624>: как минимум поменять адрес, ну я так понял по крайней мере

User<7996237794>: Тогда их когда тракт в тесте смотри

User<8129939624>: что такое тракт тест ?* (reply to 272523)

User<7996237794>: Тестнет

User<7996237794>: А вы напишите в лс

User<8129939624>: так я так понял что там деле не в сети а в том что есть задеплоин контракт который нужно потестировать  а он работает с токенами только указанного адреса

User<8129939624>: Уже с 1 разработчиком общаюсь, если с ним не сойдемся напишу вам обязательно я сохранил контакт (reply to 272527)

User<7996237794>: Тогда иметь только их токены (reply to 272528)

User<8129939624>: ну парень и спросил у кого есть (reply to 272530)

User<7996237794>: В тестнет нет вериф токенов юсдт

User<8129939624>: так я так понял именно в контракте дело а не в том что это юсдт/неюсди (reply to 272533)

User<7996237794>: Тогда как и сказал выше, вопрос к тому токены (reply to 272534)

Andrei: Привет! Подскажите, пожалуйста  Допустим у меня есть смарт контракт, который я деплою, использую какое-то время и потом он мне не нужен. Должен ли я его как-то удалять или я могу просто отправить оставшийся баланс куда-нибудь и когда придет время платить ренту, TVM удалит его ибо не с чего списать плату за аренду?

SweetJesus: так вроде стандартный контракт продажи гг сам распределяет роялти с продажи нфт. (reply to 272492)

User<8129939624>: мне нужно чтобы роялти уходило на 4-5 адресов (reply to 272545)

Киви: Как давно он существует, а то впервые слышу о нём, и даже делаю оказывается его замену 😁 (reply to 272378)

Cube: Коллекция ваша? (reply to 272550)

наз: а есть у кого пример как .env использовать в blueprint?

Oleg: Я так юзаю package.json     "scripts": {         "start": "node --env-file .env node_modules/.bin/blueprint run", (reply to 272559)

наз: а в коде как используешь переменные? (reply to 272563)

Oleg: const mnemonicArray = process.env.WALLET_MNEMONIC!.split(' '); (reply to 272564)

наз: благодарю (reply to 272565)

Пескарь™ | фронтент телефонов: папку temp удали (reply to 272579)

Konstantin: Спасибо (reply to 272580)

Zahar: Добрый день, Передо мной стоит задача задача инициировать на фронте транзакцию на отправку жетонов с кошелька пользователя телеграм на кошелек владельца проекта. Надо отправлять токены TWIF с определенным коментарием к транзакции, чтобы потом на бекенде проверять что транзакция выполнена, обраабтывая ее комментарий. Комисию заложеную на отправку транзакции следует отправлять пользователю обратно на кошелек. Таким образом транзакция создается, но после подтвеождения транзакции происходит ошибка. В чем может быть ошибка

Пескарь™ | фронтент телефонов: надо на SENDER_JETTON_WALLET слать жетон трансфер (reply to 272617)

Zahar: заменить RECEIVER_JETTON_WALLET в 30 строке на SENDER_JETTON_WALLET ? (reply to 272621)

Пескарь™ | фронтент телефонов: да (reply to 272625)

Zahar: спасибо, я попробую сейчас (reply to 272626)

Zahar: а комментарий правильно указываю? в нужном поле? (reply to 272626)

Пескарь™ | фронтент телефонов: да, только перед .storeStringTail допиши .storeUint(0, 32) (reply to 272631)

&rey: И forward стоит понизить до одного нанотона, а то жирновато бэкенду с двадцати переводов один тон получать. (reply to 272633)

Pavel: Добрый день, ищу разработчика контрактов на tact, нужно дописать имеющийся контракт и помочь с внедрением.

Vovlens: подскажите что лучше использовать для мониторинга кошей?

Crypto: Как работает ton connect, подключения кошелька к сайту, какие данные получает сервер, и как сервер узнает что был подключен именно тот адрес а не другой?

Crypto: То есть взлоумишлиник может ли как-то подменить адрес? Я прочитал доки и не понял

Crypto: Или при получении, человек подписывает что-то с помощью приватного ключа, а сервер проверяет с помощью публичного?

Denis: Прочитай про ton proof (reply to 272647)

Vovlens: Подскажите может есть специально что то для этого? Например апишка с хуками? (reply to 272645)

Vladimir: TonApi. (reply to 272654)

Crypto: Я че если взлоумишлиник подменить ту штуку которую нужно подписать, например на транзакцию для фишинга (reply to 272649)

Anton: все сообщения в бридже защифрованы (reply to 272658)

&rey: Соединение между фронтендом и кошельком E2E шифрованное. (reply to 272658)

Crypto: Нет, я про то что взлоумишлиник сможет создать веб-сайт с ton connect, вместо подписи подключения позволятел подпишет фишинг. Или тонкипер (или любой некастодиалный кошелёк) предупредить об этом? (reply to 272660)

Crypto: Думаю что это возможно. Взлоумишлиник сможет просто скопировать дизайн один к одному.

Anton: невероятно (reply to 272665)

Crypto: Я думал что сам контракт увязмим к этому, то есть. Короче забей (reply to 272666)

Crypto: Короче я имею ввиду, позволятел открывает веб-сайт, нажимает подключения, и после подключения у него исчезнуть все токены. Тонкипер показывает как обычное подключение а не фишинг. (reply to 272664)

Anton: Если включить безопасный режим тогда подключится давать не будет. В андроиде можно в настройках безопасности включить (reply to 272669)

Андрей: Кошелек не может подписать произвольные данные, сейчас он может подписать данные только для тон-коннект (reply to 272664)

Crypto: Ты нажимаешь эту кнопку и всё, все твои деньги исчезнуть. У меня вопрос был, есть ли такая увязмимост в тон Коннект? (reply to 272669)

ㅤㅤㅤㅤㅤ: мне кажется или там снизу написано что "приложение не может переводить средства без вашего разрешения"? (reply to 272673)

наз: а есть у кого пример как упаковывать messages в wallet.sendTransfer(), WalletContractV4 из @ton/ton

Andrew: Добрый вечер, в чем может быть проблема - из TG миниапп отсылаю транзакцию через подключенный кошелек в тонкипере, Открывается тонкипер и пишет "Invalid parameters" и не дает проаппрувить транзакцию. На двух других телефонах (все три ios) пишет то же самое но при этом через долю секунды открывает подтверждение и все работает.

Andrew: После рестарта телефона "Invalid Parameters" продолжает мелькать сверзу в сообщениях но при этом транзакцию теперь можно подвтердить.

Владюша: хай! У меня такая же тема, но транза не открывается вовсе на мобилках.Либо "Загрузка" мелькает, либо "Invalid parameters", хотя всё согласно доке. Не решил еще? (reply to 272683)

Zahar: спасибо, работает, но почему-то на последующие вызовы не меняется сумма транзакции. С чем это может быть связано? (reply to 272633)

Пескарь™ | фронтент телефонов: а почему сумма транзакции должна меняться? (reply to 272695)

Konstantin: Спасибо (reply to 272696)

Zahar: я получаю сумму на перевод с бека и вставляю ее в storeCoins (reply to 272696)

Пескарь™ | фронтент телефонов: мне кажется проще будет если ты на бэке полностью транзакцию будешь собирать и на фронте просто передавать мессаджи в tonConnectUI.sendTransaction (reply to 272698)

Roma: Всем привет!  Как добавить в игнор строки в функция логирования?  eslint

Andrew: Перезагрузил телефон, заработало. Продолжает писать про неверные параметры, но тут же открывает подтверждение транзакции. Как и на двух других телефонах. Хотелось бы конечно подробностей - какие из параметров не верные. (reply to 272692)

Zahar: У меня создается транзакция, но все также на 100 коинов, а не 25 (reply to 272702)

Zahar: вот бек

Пескарь™ | фронтент телефонов: ну 25 это дефолт значение, а если чота фронт эмаунт отправил то чо (reply to 272713)

Zahar: там точно передается 25, не 100 (reply to 272714)

Пескарь™ | фронтент телефонов: ну хз попробуй через инспектор взять значение из бэка и ручками распарсить (reply to 272715)

.none: Всем привет!  Использую стриминг апи через pytonapi для того чтобы ловить все транзакции(ключ топ апи использую), которые приходят на кошелёк.  Столкнулся с проблемой: стриминг апи не о всех транзакциях уведомляет. Можно ли как-то это исправить? Может есть другие способы, как слушать кошелёк(не считая постоянного получения списка транзакций всех на кошельке - мне только это приходит в голову) .

Shon: Как насчет https://docs.tonconsole.com/tonapi/webhooks-api (reply to 272717)

Evgeniy: Всем привет, ребят. А кто-нибудь пилил мультиселект внутри модалки Telegram ui kit? Нужно всплывающее поле сделать заполняемое, там есть опция с мультиселектом, но она почему-то ПОД модалкой открывается. Не можем понять, почему так и как исправить

артур: подскажите пожалуйста, как с помощью @ton/ton правильно составить тело транзакции? message(0xabcdef13) Test {     count: Int;     first_list: map<Int, Address>;     second_list: map<Int, Int as uint128>;     demo_value: Int; }

Damir: Всем привет. Я питонист. Хотел узнать, применяется ли питон в вашей сфере? Я видел в одном подкасте что в блокчейн девелопменте часто используют js + солидити, fift, func. Питон редко юзают

Damir: Тот же самый ton cli уже деприкейтед

&rey: Ну, смотрите: на фронтенде, где происходит большая часть взаимодействия пользователей и контрактов, сложно применить питон. Для устойчивого кастодиала (сервиса депозитов и выводов) — можно и очень даже нужно. (Хотя некоторые умудряются написать то же и на Go.) (reply to 272735)

Damir: Получается в основном взаимодействие с блокчейном происходит на фронте?

Damir: Я почему то думал что фронт отправляет на бэк условно говоря запрос на подписание, отправку активов и тд

Катант: Бэкенда в идеале в децентрализации вообще не должно существовать) (reply to 272739)

Damir: Получается вся бизнес логика на фронте реализовано? (reply to 272740)

Катант: В смарт контракте (reply to 272741)

Damir: Прикольно

Daniel: Всем привет, подскажите как сделать отображение кнопки на панели открытия и в меню бота

sorry 4 That: Всем привет, я пытаюсь сделать отправку jettonа с @tonconnect/ui-react Код взял с тон доки  При этом отправка падает с кодом 73. Я где-то видел что это значит что недостаточно тона для газа. Хотя при этом я отсылаю 1 тон и мне возвращается 0.99. Баланс токена у меня тоже нормальный. Может кто подсказать в чём проблема?

rends_east: Вы forward_ton_amount указываете как 1, поэтому и не хватает  Нужно посылать 0.95 примерно (мб больше) (reply to 272752)

SweetJesus: там стоит toNano (reply to 272754)

rends_east: Какая разница  Если посылается 1 тон и forward_ton_amount 1 тон, то никогда не хватит (reply to 272755)

sorry 4 That: Тоесть amount который в message должен быть больше чем forward_ton_amount? (reply to 272754)

rends_east: Да (reply to 272757)

SweetJesus: сорян, мне показалось что ты про 1 нанотон говоришь) (reply to 272756)

SweetJesus: а ты точно уверен, нужен ли тебе форвард тон амаунт? Если тебе банально жетоны кинуть, то 1 нанотона достаточно, вижу что и форвард пейлоада у тебя нету. (reply to 272753)

rends_east: То нуля достаточно, с 1 нанотоном упадет, по моему  Если не нужен transfer_notification, то указывайте forward_ton_amount равным 0, все правильно говорит (reply to 272761)

SweetJesus: дак и пусть падает, ничего страшного, нотифай же просто. тонкипер тоже кидает 1, просто видимо чтоб в трейсе показался. (reply to 272762)

sorry 4 That: Понял, сейчас попробую (reply to 272758)

rends_east: По моему, упадет сам jetton wallet Но я не помню, а сейчас лезть лень (reply to 272763)

sorry 4 That: поставил forward 0 и в мессадже 1 - всё равно 73 падает

SweetJesus: ты юсдт пытаешься перевести? (reply to 272766)

sorry 4 That: сейчас да (reply to 272767)

SweetJesus: ну так 73 вообще не про газ, а про овнерчек (reply to 272768)

sorry 4 That: нот тоже падает с 73 (reply to 272768)

rends_east: вы не свой жеттон воллет просите)

SweetJesus: у нота вроде тот же контракт, говернед (reply to 272771)

sorry 4 That: У меня к папке мой кошелёк подключён и транзакция на этом кошельке

sorry 4 That: При этом тон проходит спокойно

rends_east: Мы не про тон, а про jetton_wallet, на который вы шлёте транзакцию (reply to 272776)

sorry 4 That: destinationAddress? Это jettonWallet другого кошелька, да. А как мне тогда на него отправку сделать?

rends_east: Послать транзакцию на свой jetton wallet Он дальше разберется При этом в destination указать получателя, а не jetton wallet получателя (reply to 272778)

sorry 4 That: Тоесть jettonWallet это мой жетоновский, а destination это обычный кому я скидываю?

rends_east: Да (reply to 272780)

sorry 4 That: Ага, получилось. А можно мне как-то считать jetton кошельки без апи? Или только через тонапи можно? (reply to 272781)

rends_east: Ну можно, только объяснять я это не хочу, это сложно объяснить Разбирайтесь) (reply to 272782)

sorry 4 That: Есть какие-нибудь ссылки может быть? (reply to 272783)

Nikita: Всем привет!  Подскажите, пожалуйста, как правильно собрать тело транзакции для изменения параметров Multisig?  На скрине выше я пытаюсь изменить пороговое значение подписей threshold. Сейчас threshold = 2.   Первая транзакция отправляется и проходит успешно.  Когда подписываю со второго своего кошелька, что бы операция исполнилась, то происходит ошибка. Exit code:9. Какие-то лишние пустые ячейки я отправляю? Или наоборот они должны быть не пустыми(там где signers и prposers передаются)?

— 2024-12-05 —

RootTon: Ячейка недозаполнения. Операция чтения из примитива среза попыталась прочитать больше битов или ссылок, чем доступно. (reply to 272786)

Артём: Друзья, я подумываю над тем, чтобы начать заниматься тон разработкой. Что для этого нужно? Какие технологии желательно знать? Как вообще с трудоустройством?

ㅤㅤㅤㅤㅤ: нуу наверное тебе нужно знать Язык программирования и иметь Visual Studio, хотя можно и в Гитхаб🤷‍♂ (reply to 272805)

&rey: Обязательно знать принципы тона и архитектуры проектов (в частности, помнить про деревья транзакций и уметь разделять логику на фронтенд—контракты—бэкенд). (reply to 272805)

Артём: Знаю 2 ЯП. Если курс пройти "ton разработчик", смогу уже работать?)

-: Ты сможешь работать тогда, когда сможешь работать, все просто (reply to 272808)

Артём: Тут с работой как-то иначе устроено? Что-то не очень понимаю))

&rey: Во-первых, сеть открытая, разрабатывай - не хочу. Во-вторых, типичных работ с собеседованиями... если найдёте, то это признак, что позиция долго не закрывается, что там какие-то особые требования. Больше всё-таки смотрят по проектам.  Хороший проект для разработчика смарт-контрактов, например — написать реализацию жетон-кошелька. (reply to 272810)

Nikita: Попробую дозаполнить ячейки, в которые кладутся proposers и signers. Спасибо🙏 (reply to 272802)

ㅤㅤㅤㅤㅤ: верим в тебя 💪 (reply to 272834)

Cube: Работы нет, лучше не лезть) (reply to 272810)

Gosha: Всем привет! Я пытаюсь написать смарт-контракт нфт коллекции, в котором individual_content собирался бы в самом контракте, ончейн. Я переписал данный typescript код export function toSha256(s: string): bigint {     return BigInt('0x' + sha256_sync(s).toString('hex')) }  export function toTextCell(s: string): Cell {     return beginCell().storeUint(0, 8).storeStringTail(s).endCell() }  export type collectionContent = {     name: string,     description: string,     image: string }  export function buildCollectionContentCell(content: collectionContent): Cell {     const collectionContentDict = Dictionary.empty(Dictionary.Keys.BigUint(256), Dictionary.Values.Cell())         .set(toSha256("name"), toTextCell(content.name))         .set(toSha256("description"), toTextCell(content.description))         .set(toSha256("image"), toTextCell(content.image));          return beginCell()              .storeUint(0,8)             .storeDict(collectionContentDict)             .endCell();  } на tact:     fun toTextCell(text: String): Cell {         return beginCell().storeSlice(text.asSlice()).endCell();     }      fun buildCollectionContentCell(content: CollectionContent): Cell {         let collectionContentDict: map<Int, Cell> = emptyMap();         collectionContentDict.set(sha256("name"), self.toTextCell(content.name));         collectionContentDict.set(sha256("description"), self.toTextCell(content.description));         collectionContentDict.set(sha256("image"), self.toTextCell(content.image));          return beginCell()             .storeUint(0, 8)             .storeRef(collectionContentDict.asCell()!!)              .endCell();     } Но metadata получается пустой, то есть, она не распознается эксплорером. Подскажите, пожалуйста, как такое продебажить, мб есть что-то подобное на tact или func уже или просто может быть видно в чем проблема?

Nikita: https://docs.ton.org/v3/documentation/data-formats/tlb/msg-tlb#msgaddressext-tl-b  привет разбираюсь с адресами сейчас с none, std -- все понятно 1) с extern не очень понятно -- понимаю что он используется для лог событий -- есть ли какое-то еще применение? 2) зачем нужен addr_var$11 ? 3) Можно ли в джетон валет владельца записать как  addr_var$11 или addr_extern$01 -- будет ли это работать вообще?

/B4ckSl4sh\: 1) других применений насколько мне известно нет.  2) чтобы в будущем можно было добавить больше чем 256 воркчейнов 3) addr_var работать должен, вроде бы load_msg_addr корректно это обрабатывает. С external сомневаюсь (reply to 272932)

Nikita: по 3ему ответу --  нашел где это ограничивается -- parse_addr_workchain в tonops.cpp т.е. мы просто не сможем отравить сообщение на такой адрес   load_msg_addr -- нормально парсит любые адреса  не очень понимаю все еще смысл Anycast -- есть ли какая-то дока про это? (reply to 272940)

Dmytro: Any cast есть в пейпере но реализации нет и скорее всего не будет (reply to 272942)

&rey: toTextCell внимательнее переписать. (reply to 272930)

Gosha: мне уже подсказали в другом чате, что еще storeUint(0,8) надо и вместо storeStringTail у меня storeSlice. storeUint понятно, а вот с storeStringTail - в Builder нет соответствующего метода(( (reply to 272955)

/B4ckSl4sh\: Подскажите, пожалуйста, не очень понятно с ончейн метой. там же ключи хэшируются, значит должен быть какой-то список возможных полей этого словаря? Где его взять? В TEP-64 не нашёл

Dmytro: https://github.com/ton-blockchain/TEPs/blob/master/text/0064-token-data-standard.md#nft-metadata-attributes (reply to 273022)

/B4ckSl4sh\: а, то есть если ончейн атрибуты, то это максимум, который можно туда положить? А если офчейн, то можно и socials добавить например? (reply to 273024)

SweetJesus: стандарта ончейн атрибутов нет. все поля которые ты можешь заполнить это uri, name, description, image (или image_data, но по большей части оно юзлесс) (reply to 273026)

/B4ckSl4sh\: ага, с этим понятно. А вот например в жетон местере висит social и websites. Я правильно понимаю, что такое ончейн сделать нельзя? Хотя это не атрибут нфт (reply to 273027)

SweetJesus: я как-то давно пробовал, насколько помню ничего у меня не вышло) (reply to 273028)

Viacheslav: Подскажите, почему деплой библиотеки неудачный.. https://testnet.tonscan.org/tx/R3i6xM6yyiDkVdM8-gIqmbz4tbynR7MVfvQr3LlwqpE=

Viacheslav: код 37 - Not enough TON. The message sends too much TON, or there isn't enough TON remaining after deducting fees. аа понял

Viacheslav: Задеплоил библиотеку для дешевых jetton транзакций.  https://testnet.tonviewer.com/kf9S4w3sds-u9CTYJT4MfhCuuZI-62MbsqcV_f_aSPyuOEVC?section=transactions  Почему у нее code - b5ee9c72010101010002000000  ? должен же быть там код jetton-wallet. Не сразу, через set_code, но всеже..

api: https://github.com/ton-blockchain/TIPs/issues/64#issuecomment-1041919338  Вот такой подход к вопросу. (reply to 273026)

&rey: Ради справедливости, два с половиной года назад тон представляли совершенно другим, там непонятно было ещё, что надо стандартизировать. (reply to 273094)

api: Если будете складывать в том же стиле, как другие это делали,  то сможете проверить результат через @apitonBot  Другие Эксплореры ничего не покажут.  getgems показывает загруженные в том же стиле атрибуты только для старых nft (reply to 270878)

Viacheslav: а технически, можно массив (например social) положить в ончейн метадату

/B4ckSl4sh\: Да в целом можно конечно договориться как любые json хранить ончейн, только вот не думаю что это возможно сделать так, чтобы ончейн это потом удобно редактировать (reply to 273097)

api: Спросите напрямую по ссылке. Вкалывать свои додумки в чужие слова, это плохая затея. (reply to 273095)

Viacheslav: мы будем хранить метадату жетона ончейн и аот я думаю, как туда записать массив social и будет ли он отображаться в эксплоерах.. (reply to 273099)

api: Не будет

Viacheslav: сейчас попробую просто добавить доп атрибуты, например website.. будет ли он виден

api: выше написано, где можно посмотреть атрибуты ончейн и в каком виде.  Это добавлено больше для удобства тех, кто разрабатывает и кому очень необходима по каким-то причинам такая возможность.  // см. цитированные сообщения

Оскар: опять тут замес с ончейн атрибутами, предлагаю добавить "расширенные" ончейн атрибуты - рядом со словариком будет лежать ещё реф-связный список (как OutList из block.tlb) в котором будет перечислены уже в виде обычных строк названия атрибутов, путём snake format  по итогу любой эксплорер может посмотреть, а есть ли после 0x00 байта и словаря ещё один реф (либо вообще другой дискриминатор вместо 0x00 байта) - если есть, значит это список наших названий атрибутов, он просто их вычитывает все, получает массив строк и дальше каждый может sha256 и достать ончейн атрибут из словаря  если звучит неплохо, то можно расширять теп 64

Cube: Чего вдруг все на них накинулись 👀 (reply to 273107)

gimbljimbl: Есть здесь кто может мне нфт минт страницу сделать?

gimbljimbl: 3к нфт, чтоб после минта можно было на getgems трейдить

gimbljimbl: Или может есть какие-то launchpad

Dmytro Volkov: Привет. Мы строим новый продукт и некоторые наши исходящие транзы tonviewer отмечает как “SUSPICIOUS transaction”, хотя там просто отправка USDT юзеру. Другие эксплореры отображают транзу как обычную, не подозрительную. Как можно избежать отображения таких транз как suspicious? Или подскажите к кому с tonviewer обратится?  Кто еще сталкивался с подобной проблемой и как решали?

jennifer [afk]: используется комментарий? (reply to 273119)

Dmytro Volkov: да (reply to 273120)

jennifer [afk]: либо слова в блеклисте, либо цена за символ

Viacheslav: " либо цена за символ" - как это?

jennifer [afk]: точно не знаю, но вроде как если сумма < кол-во символов * цена символа

jennifer [afk]: то тогда она помечается как подозрительная

jennifer [afk]: саму цену символов я к сожалению не знаю

Степан: Привет, подскажите, пытаюсь добавить нфт в коллекцию через интерфейс гетгемса и получаю getgems.io can not upload content to this collection because it stored on unreachable place. Коллекция кастомная, но интерфейс на минт стандартный.

CRBI51: День добрый, при деплое контракта int_msg выдает Skip Reason: cskip_bad_state при отправки ext_init сообщения выдает такую ошибку: aiohttp.client_exceptions.ClientResponseError: 406, message='error code: 0 message: cannot apply external message to current state : External message was not accepted\nCannot run message on account: inbound external message rejected by transaction 2675865033301205528EA5CF26F70EE2EC460343C8370FAFF47C668C95ADDE24:\nexitcode=0, steps=0, gas_used=0'

CRBI51: Есть какой то совет что вызывает ошибку? (reply to 273135)

m0sk1t: привет знатоки) подскажите почему так и что курить: - адрес в тонкипере UQDi5-4ig096_i6L92pM7zu_jrFfuPeBSta5sKTE5doY0nHE - в настройках тонкипера 0QDi…0spO - в tonviewer 0QDi5-4ig096_i6L92pM7zu_jrFfuPeBSta5sKTE5doY0spO - WalletContractV5R1 из @ton/ton выдаёт EQCGQ3GiA_aRSncl63gTvIUDClk-oLAsJcGr5rN-OUGwCNAw пс. тестнет ппс. workchain 0 (reply to 272719)

m0sk1t: ой, хз почему реплаем сообщение получилось

Оскар: wallet id в в5 был переосмыслен и теперь зависит от того, где находится кошелёк - мейннет или тестнет (на самом деле просто договорились),, при создании инстанса нужно найти что-то типо network global id и указать -3 (тестнет), предполагаю что по дефолту используется -239 (мейннет)  ну а UQ/EQ/0Q/kQ это просто форматы одного и того же адреса (reply to 273142)

— 2024-12-06 —

𝖘𝖔𝖜𝖑𝖈: подскажите пожалуйста, Как-то можно получать через API HTTP GET инфу о совершенной транзакции?

m0sk1t: Ага, уже исходники почитал, увидел, спасибо ❤️ (reply to 273144)

m0sk1t: Множество путей, orbs network как по мне удобный, но есть ещё куча сервисов с http методами, например tonapi (reply to 273147)

m0sk1t: Кстати ChatGPT прочитал доки по тону, уже можно его спрашивать) вроде даже не бред выдаёт

Namon: https://toncenter.com/api/v3/index.html#/blockchain/api_v3_get_adjacent_transactions  tonapi /v2/blockchain/transactions/{transaction_id} (reply to 273147)

𝖘𝖔𝖜𝖑𝖈: всем огромное спасибо за помощь!

Namon: Claude минимум с конца сентября знает доку по тону и func

𝖘𝖔𝖜𝖑𝖈: можешь дать пожалуйста полную ссылку для апи? 😅 (reply to 273151)

𝖘𝖔𝖜𝖑𝖈: я про вот эту)  не понимаю к какому домену ее относить (reply to 273151)

User<7231403747>: tonapi.io/v2/blockchain/transactions/ (reply to 273155)

User<7231403747>: в конце еще добавь транзу (reply to 273156)

Semyon: Пока еще врет 😂 (reply to 273150)

Оскар: за что отвечает flat_gas_price(limit)? https://tonviewer.com/config#21 нигде не нашел инфы, единственное что предполагаю, это может быть газ за "запуск" компьюта интернала, ака загрузить нам вот эти вот in_msg_full, in_msg_body, msg_value и balance

Alex: 📣 Hey, folks! The Tact dev team kindly asks you to share some feedback regarding your experience with smart-contract programming in Tact.  Our mission is to develop a high quality programming language that can be used for every single project on TON and make code easy to write, understand and audit.  The survey covers 4 topics and will only take about 5-8 minutes of your time.   Thank you for your contribution!  👉https://paperform.co/edit/h02jnxtq (forwarded from TON Dev News)

Farel: Подскажите пж как добавить токен на дедаст и сторм

jennifer [afk]: через заявку (reply to 273163)

crisper: Добрый день. Есть подозрения что в нашей liteserver ноде есть пропуск транзакций ) Как можно получить транзакцию по hash из liteserver ноды?

RootTon: tonapi /trase чето там ищите в эту сторону (reply to 273165)

crisper: А подскажите пожалуйста какие хорошие selfhost ton api есть ? кроме антон?

crisper: есть github.com/toncenter/ton-http-api и github.com/ton-community/ton-api-v4 в чем разница?)

RootTon: ну это как спросить есть синий карандаш а есть красный, какая разница если оба пишут) (reply to 273169)

ㅤㅤㅤㅤㅤ: великие слова 👏👏 (reply to 273170)

RootTon: Нет у меня просто кончились карандаши) (reply to 273214)

Farel: какую? можешь дать линк плс (reply to 273164)

jennifer [afk]: в футерах должна быть (reply to 273229)

Farel: разве нельза как-то самому пул создать через ск? (reply to 273231)

Namon: Задавайте эти вопросы в чатах дедаста и шторма (reply to 273232)

Dmitry | backend4you.ton: можно, но ответ на вопрос "как" там же в футере. в футерах вообще много полезного обычно (reply to 273232)

ㅤㅤㅤㅤㅤ: Правила чата TON Dev Chat (РУ)

Andrew: Моим первым сообщением будет дублированный форвард гиф с приложенным голосовым сообщением (reply to 273256)

Dmitry | backend4you.ton: Мало. Надо два разных сообщения подряд - в первом гиф, во втором голосовое. При этом гиф должен содержать вопрос "можно спросить?", а в голосовом чтобы был вопрос про разработку миниапп телеги. (reply to 273258)

rxcat: в tonapi транзакция считается success: true если в action_phase  exit_code = 0?

User<7066602931>: значит, что в контракте нет критических ошибок

User<7066602931>: if (transaction.action_phase && transaction.action_phase.exit_code === 0 && !transaction.aborted) {   по идее так проверка идет

Cube: Есть скрипт, генерирующий мнемонику. Ожидаемый адрес кошелька v4r2 не совпадает с адресом, который предлагает тонкипер.. НО, с фразой от существующего кошелька адрес корректно определяется как скриптом, так и тонкипером. Подскажите пожалуйста, в чем может заключаться ошибка?  Код, если нужен import base64 from pytoniq_core import Cell, Slice, Builder, StateInit from tonutils.wallet import WalletV4R2 from tonutils.client import TonapiClient  mnemonic: str = ""  async def main():     global mnemonic     client: TonapiClient = TonapiClient(api_key="", is_testnet=False)     wallet, public_key, private_key, mnemonic = WalletV4R2.from_mnemonic(client, mnemonic)      print(wallet.address.to_str(is_bounceable=False))      if __name__ == "__main__":     import asyncio      asyncio.run(main())

Андрей: Тестнет или мейннет и там и там? (reply to 273373)

Cube: мейннет и там и там (reply to 273376)

Namon: UQ это mainnet (reply to 273376)

Svαtoωλ‎: А EQ это тестнет? (reply to 273378)

Namon: Mainnet 0Q & kQ testnet (reply to 273379)

Max: мейннет (reply to 273379)

Svαtoωλ‎: И как вас подловить

SweetJesus: U unbounceable, E bounceable, оба мейннет (reply to 273379)

Cube: разумеется (подловил) (reply to 273379)

SweetJesus: k - bounceable, 0 unbounceable, оба тестнет. (reply to 273379)

Namon: Такое ашчушчэнне, что разные мнемоники Проверьте с какой-нибудь либой на TypeScript, maybe (reply to 273373)

Dmytro Volkov: Спасибо, помогло. Причина отметки подозрительной транзы для меня все еще не полностью ясна, но когда убрали коментарий из транзы вобще, то транза перестала отмечаться как подозрительная. (reply to 273122)

Namon: Причина отметки - попытка защитить юзеров от спама и скама Но реализация пока хромает (reply to 273387)

Cube: Да вроде нет: wallet, public_key, private_key, mnemonic = WalletV4R2.from_mnemonic(client, mnemonic)     print(" ".join(mnemonic))     print(wallet.address.to_str(is_bounceable=False))  rate cabin decade transfer rapid oven income salute when educate ticket hunt pulse trade mail allow nose arrest outdoor nephew gesture creek grass jewel UQC75FT3za4ziibZ_H2Xqy-xSP06JtOYxcKGcF6vTA15n8p9 (reply to 273386)

Cube: No way :( let kerPair = await mnemonicToPrivateKey(mySeed.split(" "));      console.log(       "Expected address:",       WalletContractV4.create({         workchain: 0,         publicKey: kerPair.publicKey,       }).address.toString({         bounceable: false,       })     );  Expected address: UQC75FT3za4ziibZ_H2Xqy-xSP06JtOYxcKGcF6vTA15n8p9 (reply to 273386)

Namon: да, я только что проверил, тоже n8p9 (reply to 273392)

Namon: у меня в Tonkeeper не даёт импортировать эту мнемонику я думаю ошибка в ней

Sutako: Привет. По какой то причине не могу обменять токен через API стон фи Использую один и тот же код, но мой токен не меняется, а другие токены меняются, в чем может быт проблема? Токен создан более недели назад. В моем токене пул из тон. На сайте обмен происходит.

Namon: скиньте транзакцию хотя бы (reply to 273397)

Sutako: Удачная          9abbfe89dd5f398e0ddaf668d011a850c897a268125cc42ad7e48ffe99c8a51a Не удачная   55a8d3750aa1e51230fbebead4a494e36bfece89b1fbbd10bea531432ac90ab7

Cube: Действительно, с мобилки не даёт :) (reply to 273395)

Wayne: https://tonviewer.com/transaction/a6d483e7e9fff4cec1924a317a5e64d998017a39fabf31a6693d4057b29dd439 (reply to 273397)

Namon: пул на стонфи с этой монетой есть хотя бы?

Пескарь™ | фронтент телефонов: хело всем, у кого-то было такое что используя pytonconnect не могу подключить кошелек TonKeeper используя IOS? ласт версия кипера. на андроеде норм

Sutako: Да (reply to 273404)

Пескарь™ | фронтент телефонов: пишет Invalid Parameters. скан в приложении кипера не ворк, ток через камеру (reply to 273405)

Sutako: Вот обмен удачный, который стон фи отправляет, тут наполнение другое (reply to 273404)

Namon: раз уж на то пошло, на левом скрине body начинается выше, чем выделено откуда Вы брали пример? (reply to 273409)

Sutako: Я вижу, но по какой то причине при обмене на сайте контракт отличается, я непонял как его создать, в API создаются одинаковые (reply to 273411)

Sutako: В  самом AP Iпримересть, видимо обновилось пока я делал, сейчас использовал новый контракт версии 2 8dafcaca66d51df7281a9f78dd2ee4540496bcc0b2228ff2c8a4a423ebc36799 0317a21e3dec74293e3170a64cdae811dbc79ac23ff8040e3430639f73c62a18 Он вообще не одной монеты не меняет, ну хоть тоны обратно возвращает 😐 (reply to 273411)

Dmytro Volkov: Концепция понятна, просто хотелось бы понимать логику чтобы не тригерить. У нас например это транза когда юзер запрашивает вывод денег с нашей апки, и комментарием в транзе хотели написать что-то типа “withdrawal from xxx”, чтобы потом юзер у себя в кошельке легко идентифицировать откуда именно эта транза ему пришла. Но система защиты то ли думает что слово “withdrawal” подозрительное, то ли думает что “ххх” (название сайта или название апки) сильно похоже на спам ссылку.   Идея была чтобы сделать юзеру удобнее. Но пока откажемся от этой идеи, будет просто транза без комментария. (reply to 273388)

&rey: Обычно в этом случае вешают домен на контракт, с которого отсылаются выводы. (reply to 273418)

Dmytro Volkov: А что значит “вешают домен”? Контракт с которого делаются выводы - это просто кошелек (в нашем случае Highload wallet). (reply to 273419)

&rey: Ну, привязывают домен к кошельку и переводят владение на тот же кошелёк. После этого он начинает отображаться. (reply to 273420)

Sutako: В чем проблема, помогите Транзакция 8dafcaca66d51df7281a9f78dd2ee4540496bcc0b2228ff2c8a4a423ebc36799 https://tonviewer.com/transaction/8dafcaca66d51df7281a9f78dd2ee4540496bcc0b2228ff2c8a4a423ebc36799

Sol: Здравствуйте мужики  делаем проект сложный нужен ментор на такт на один час за 30$ помогите кто с опытом хорошим

X1ag: а ton storage часто в проектах используется? есть прок от него?

Namon: Если Вам нужен децентрализованный сторедж, можете юзать Но он не особо развит пока что Мало... провайдеров(?), хз как правильно назвать (reply to 273437)

X1ag: А не знаете что используют для децентрализованного стореджа на данный момент? (reply to 273439)

Namon: Pinata популярна (reply to 273440)

Олександр: Кто писал код  с помощью ChatGPT? Как вам результат?

Андрей: Если вам нравится бесполезно тратить время, то смело используйте Рабочий код от gpt вы не получите (reply to 273445)

Namon: Если у Вас ноль знаний по func/tolk/tact, то от ии не будет толку (reply to 273445)

Harvest: А как к ней доступ сейчас получить, кроме как купить про (reply to 273449)

Harvest: ?

Namon: Я юзаю Cursor, там он доступен и в бесплатной версии (до 50 запросов в месяц) (reply to 273450)

Олександр: Я написал код с помощью GPT ,хочу его потестить ,но знаний у меня очень мало в этом ,может посоветуете какой-то материал или где можно  изучить всю эту информацию ,как это делать и т.д…было бы здорово если бы были какие-то видео уроки например)

Harvest: Как писать код с гпт или просто код (reply to 273453)

Namon: Буквально в первом закрепе (и в следующем за ним сообщении) вся базовая инфа по тону (reply to 273453)

X1ag: лично мне очень понравился курс Ивана Романовича https://github.com/romanovichim/TonFunClessons_ru рекомендую (reply to 273453)

Namon: Снова же: не имеет смысла писать код с ИИ, когда нет понимания как писать этот код и что он вообще значит (в принципе, так работает с любой сферой) Плюс, того же ИИ можно попросить дать базовую инфу по разработке на тон (reply to 273453)

X1ag: но без документации пока что никуда. Весь материал нужно четко понимать, гуглить и спрашивать в чатах) Дока хорошо помогает понять фундамент (reply to 273456)

Namon: Лично я в документации потерялся и ничего не смог по ней понять По итогу почитал контракты на func, забил на пару недель, вернулся и ко мне спустилось с небес озарение (reply to 273458)

X1ag: Я стараюсь в доке узнавать что-то типа tl-b, tvm machine and etc. (reply to 273459)

X1ag: но все равно, не хватает бесплатных обучалок

Олександр: Ну как новичку который только начинает из чего лучше начать обучение?

X1ag: где структурированно все объяснят

Namon: Отличия тона от других блокчейнов + типы данных TVM (reply to 273462)

Namon: На степике русскоязычный курс в принципе норм, до того, как начинается кодинг Базовую теорию можно понять

Daniel(""): Доброго всем вечера. Не знаю по теме чата или нет, но может кто знает как я могу получить уведомление о транзакции пользователя?  Есть ли вебсокет?

User<7008929507>: нет такого в тоне (reply to 273466)

集电极: Tonapi (reply to 273466)

User<5862632235>: ищем в команду человека который знает такт или фанси , ничего черного только белые проекты !  белые проекты это создания разных прикольных транзакций для больших проектов по типу койнов и тд

&rey: Выглядит как просроченный своп. (reply to 273427)

Sutako: Вот несостоявшееся транзакция https://tonviewer.com/transaction/300cf884124dcfd1cd6544a660e20c1f80f6f73e7ae537dc2f233fc0c6485702 Вот состоявшиеся, делал через сайт https://tonviewer.com/transaction/d5531c93168599508556a0c19dee525a9270f4b497b11e921401893174a8002e (reply to 273482)

&rey: Ну да, просрочен весьма определённо (для первой транзакции — на десять секунд). Поправьте время на компе — может, станет лучше. (reply to 273484)

Олександр: Кто подскажет ,если у меня по контракту изымается 10% за покупку токена ,Ston Fi, Dedust ,пропустит меня?

Namon: Подавайте заявку на дедасте и стонфи Только они могут точно сказать (reply to 273492)

集电极: Stonfi вроде бы пропустит и будет писать об этом при покупке, а вот dedust не пропустит (reply to 273492)

Sutako: Не помог перевод времени, зато помогло в библиотеке добавить время 😐 Ок, результат теперь другой 🤔 https://tonviewer.com/transaction/74cab16e5616ae5ee3da1cd416abe31f62c68cdc16e73fc25d9446cb78fad7de (reply to 273486)

Олександр: Там надо подавать заявку уже з готовым проектом,я сейчас на стадии разработки ,как-то не хочется зря тратить время чтобы потом узнать что они не пропустят ,я писал в поддержку но ответа так и не получил , а у dedust поддержка это тг комьюнити с модерами , которые ответили мне что : dedust должен пропустить ,но толком я точного ответа не получил … (reply to 273493)

Sutako: @pcrafter  Понял в чем тут проблема? 🤔 https://tonviewer.com/transaction/74cab16e5616ae5ee3da1cd416abe31f62c68cdc16e73fc25d9446cb78fad7de

Sutako: Я попробовал переустановить окружение, не помогло (reply to 273509)

Nikita: привет есть идейный вопрос по рассчету газа у меня есть nft  юзер может со своей nft отправить сообщение на мастер контракт  я знаю сколько тратится газа на операции и на nft и на master контракте  но я не знаю сколько газа нужно заложить на storage fee  как правильно поступить в этом случае? следует ли при получении сообщения на nft item делать проверку в духе: throw_if(LOW_GAS, msg_value < nft_action_fee + master_action_fee + storage_fee);  или же отбросить storage_fee и считать просто: throw_if(LOW_GAS, msg_value < nft_action_fee + master_action_fee); -- этот вариант мне не нравится тем, что газа может хватить только на часть транзакций, а не на все сообщения в протоколе  Есть ли универсальное решение?

Daniel(""): Спасибо большое (reply to 273468)

Sutako: Ты хочешь чтобы юзер платил за газ? Найди без газовые транзакции Это транзакции когда юзер отправляет тебе например тон, а ты ему возвращаешь остаток и нфт (reply to 273515)

Nikita: да хочу  безгазовые транзакции это же к wallet_v5 относится (reply to 273522)

Sutako: Нет. Есть готовые решения, а можно сделать самому. Ты берешь примерную стоимость, с запасом, и просишь пользователя отправить их, проверяешь сколько стоит транзакция, данные берешь из эмулятора, делаешь транзакцию и отправляешь юзеру остаток. (reply to 273523)

Nikita: правильно ли я понимаю, что в моем случае мне нужно рассчитывать сколько секунд прошло с последней платы за хранение данных и это значение + погрешность отправлять в смарт? (reply to 273527)

Konstantin: Я понял вопрос иначе: есть контракты A, B. Флоу выглядит как user -> A -> B. На моменте, когда контракт A только получил сообщение пользователя и еще не исполнил свою логику (не говоря об отправке сообщения в B и исполнения логики там) хочется проверить, что пользователь прислал достаточное количество газа, чтобы его хватило на всё-провсё сразу на обоих контрактах, и в это всё-провсё, в числе прочего, входит комиссия за хранение. Вопрос в том, как ончейн из одного контракта спрогнозировать результат исполнения STORAGEFEES на другом контракте. По-моему никак. (reply to 273527)

Sutako: Я точно не скажу. Зависит от того, что ты точно хочешь сделать 🤔 Посмотри тут, возможно найдешь, то что поможет, тут есть эмулятор. https://tonapi.io/api-v2  Ты делаешь бок из него хеш, проверяешь, получаешь ответ, и этот же бок, а не новый, используешь для транзакции. Посмотри, может что то есть в гите getgems, там какраз отправка нфт + отлата (reply to 273530)

Sutako: Если пользователь отправляет тебе нфт, он платит за весь газ 🤔 Если нужно просчитать стоимость шагов, то есть эмулятор. (reply to 273532)

Konstantin: Эмулятор оффчейн. В моем понимании вопрос про то, как ончейн на уровне контракта проверить, что в пришедшем от пользователя сообщении газа достаточно на весь флоу исполнения и здесь, и на последующих контрактах

Sutako: Так нужно запросить больше, а остаток вернуть (reply to 273535)

Konstantin: Но если газ на исполнение можно захардкодить, а газ на форвард рассчитать через fwd_fees, compute_data_size или get_fwd_gas, то узнать сколько времени прошло с момента последней оплаты фазы хранения на другом контракте по-моему нельзя

Konstantin: Насколько больше? Второй контракт могли год не дергать, и пользователю придется оплатить хранение за всё это время (reply to 273536)

Sutako: Пользователь заходит и готовится к транзакции, мы создаем бок и проверяем сколько будет это стоить, и просим пользователя столько + 10% к примеру (reply to 273538)

Konstantin: Кто - мы? В вопросе ни слова про какой-то оффчейн сервис, который взаимодействует с контрактом, только про сами контракты и как совершить такую проверку в их рамках

Sutako: Так если все проходит на блокчейн он сам считает газ, разве нет? (reply to 273540)

Konstantin: Он сам считает (вернее взимает) газ, но если строится система, в которой получается запрос от пользователя, а дальше есть несколько контрактов, которые между собой коммуницируют, то логично желание в точке первого соприкосновения с пользователем проверить, а хватит ли приложенных тонов на оплату газа по всей дальнейшей цепочке. Ведь если не хватит, то она может непредсказуемо прерваться в одном из промежуточных моментов, и тогда цельность состояния неопределена.  Каждое сообщение транзакции проходит через несколько фаз, каждая фаза взимает газ по-своему. Фаза хранения, про которую вопрос, взимает газ в количестве (bits_stored * bit_price + cells_stored * cell_price) * seconds, где: - bits_stored - количество битов, хранящихся в cell и data ячейках контракта, исполняющего входящее сообщение. - bit_price - значение из конфига блокчейна, может поменяться голосованием валидаторов. - cells_stored - аналогично bits_stored, но количество уникальных хранимых ячеек с учетом рекурсии. - cell_price - аналогично bit_price. - seconds - количество времени, которое прошло с последней полученной контрактом транзакции (т.е. де-факто время хранения всех этих данных в блокчейне с момента последней оплаты).  Все эти значения, кроме seconds, можно получить или захардкодить, но получить seconds из другого контракта ончейн нельзя (если только не засылать дополнительное сообщение, но заслать его тоже нельзя, т.к. тогда уже оно оплатит газ на хранение второго контракта). Поэтому кажется, что решения здесь нет. (reply to 273541)

&rey: А там же вроде не очень много комиссия даже за год хранения? не помню (reply to 273542)

Konstantin: Там вообще какие-то копейки в сравнении с газом за исполнение и форвард, но человек вот его учесть хочет

Konstantin: Хотя конечно смотря что за контракт. Может там мегабайты хранятся

Sutako: https://tonviewer.com/transaction/b04a58284f4dd8aae6543509dbb231caad739cfe9f1e90f7a7823818a166fa61 Помоги с этим. Старые контракты на обмен не работают с моей монетой, а новые не работают вообще. Выше подробнее и код

Konstantin: У тебя транзакция выглядит как Твой кошелек -> твой жетон кошелек -> роутер -> ...  Так не должно быть: жетоны должны пересылаться с жетон кошелька на жетон кошелек, т.е. должно быть Твой кошелек -> твой жетон кошелек -> жетон кошелек роутера -> роутер -> ...  Скорее всего вместо recipient_address=router_address, надо указать адрес жетон кошелька роутера для данного жетона (reply to 273546)

Konstantin: А все, тайна раскрыта

Konstantin: Проблема в твоем дедлайне: https://tonviewer.com/transaction/688f6707ec668e3ca8c674dcc28f39bb1f1afc06105402524feb3004b1afdeb7  У тебя он проставлен в 1733509310, а сообщение на пуле выполнилось в 1733509291

Konstantin: Наверное в build_swap_body можно передать параметр вроде deadline, выставишь его правильно и все будет ок

Konstantin: Вместо этого .store_uint(int(time.time() + 60), 64) поставь .store_uint(int(time.time() + 300), 64)

&rey: Ну, здесь-то всё хорошо уже. (reply to 273553)

Konstantin: ? (reply to 273558)

Viacheslav: В wrapper stablecoin нашел фунцию записи uri в ячейку для метадаты. Не пойму, где же 0x01 префикс, показывающий что у нас - оффчейн метада?  export function jettonContentToCell(content: JettonMinterContent) {     return beginCell()         .storeStringRefTail(content.uri) //Snake logic under the hood         .endCell(); }

&rey: Очень внимательно читаем числа. 1733509310 > 1733509291, дедлайн позже времени исполнения транзакции, так что нормально.  Кстати, проблему с дедлайном раньше я нашёл через retracer. (reply to 273559)

Konstantin: А, я их перепутал. Ладно, херовый из меня дебаггер

Konstantin: Вообще странно. Свап не произошел потому, что пул по какой-то причине решил отдать тот же токен, что на него пришел.  Но почему тон вьювер считает что фейл произошел не на пуле, а на жетон валлете? Там же экзит код 0

Konstantin: Давай еще попытку

Konstantin: recipient_address=router_address, укажи здесь recipient_address=wallet.address

Alacrity: можешь создать функцию, которая возвращает asm “STORAGEFEE” назовем ее  storage_fee()  при форварде на nft-item выполнить функцию для сохранения средств на контракте для платы за сторедж raw_reserve(storage_fee()) и если не ошибаюсь, отправлять сообщение с модом для отправки всего баланса контракта (reply to 273515)

Nikita: да, это норм мысль но тут момент что мы не знаем сколько потребуется газа следующему смарту может быть ситуация, что переданного газа не хватит (reply to 273566)

&rey: Вообще, учитывать максимально редкие кейсы другого контракта, которые ещё и проблемы пользователя — не норм мысль, на мой взгляд) (reply to 273567)

Nikita: Протокол должен быть устойчивым к любым проблемам  Пока никто не столкнулся с этим всем хорошо, но если пользователь потеряет деньги это будет проблемой (reply to 273568)

Alacrity: в контракте nft-item есть условный оператор, проверяющий задеплоена ли нфт  if (~ init) …  ты можешь добавить в конце этого оператора отправку оставшихся тонов в msg_value обратно пользователю, но важно учесть, чтобы на контракте тоже остался storage_fee (reply to 273567)

Farel: я правильно понимаю, что                  mode: SendRemainingValue можно использовать если только 1 сообщение в вызове? если да, то как добиться такой же логики при 2 и более вызовав без потсчета газа и без накопления на контракте

Konstantin: SendRemainingValue 1. Не учитывает траты на газ за фазу хранения. Т.е. даже если другие сообщения не отправляешь перед этим, то баланс твоего контракта будет неизбежно уменьшаться со временем. 2. Не учитывает сколько тонов было отправлено в других сообщениях. 3. Не учитывает траты на форвард газ за отправку других сообщений, если они отправлены с mode: PayFeesSeparately или если они ext-out  Как делать правильно - как раз рассчитывать газ самостоятельно (ну или закидывать свои тоны на контракт) (reply to 273572)

Sol: Здравствуйте мужики  делаем проект сложный нужен ментор на такт на один час за 30$ помогите кто с опытом хорошим

Alacrity: Почему такт, а не func? (reply to 273579)

Sol: потому что таааааааааааааааакт (reply to 273580)

Minter: Подскажи пожалуйста, как решить проблему с буфером при отправки жетона

Sutako: Каким буфером? (reply to 273583)

Minter: Uncaught ReferenceError: Buffer is not defined (reply to 273584)

Farel: На фронте? (reply to 273583)

jennifer [afk]: сделать генерацию пейлоада через бек (reply to 273583)

Minter: Ага (reply to 273588)

Farel: Добавь vite-plugin-node-polyfills (reply to 273590)

Svαtoωλ‎: Посоветуйте модули для лайта

⚔️: dsf

&rey: Ну, это можно подобрать. (reply to 273596)

&rey: Шард контракта — префикс его адреса (первые 4 бита из хеша StateInit).

